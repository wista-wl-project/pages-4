
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wista - Video Streaming</title>
    <meta name="description" content="Wista - お気に入りの動画を発見しよう" />
    <meta name="author" content="Wista" />

    <meta property="og:title" content="Wista - Video Streaming" />
    <meta property="og:description" content="Wista - お気に入りの動画を発見しよう" />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@wlp" />
    <script type="module" crossorigin>var vz=Object.defineProperty;var gw=n=>{throw TypeError(n)};var Ez=(n,e,t)=>e in n?vz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var bz=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Kc=(n,e,t)=>Ez(n,typeof e!="symbol"?e+"":e,t),Kp=(n,e,t)=>e.has(n)||gw("Cannot "+t);var ut=(n,e,t)=>(Kp(n,e,"read from private field"),t?t.call(n):e.get(n)),zn=(n,e,t)=>e.has(n)?gw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),In=(n,e,t,r)=>(Kp(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),rr=(n,e,t)=>(Kp(n,e,"access private method"),t);var nh=(n,e,t,r)=>({set _(i){In(n,e,i,t)},get _(){return ut(n,e,r)}});var sX=bz(_u=>{function Tz(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function gR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pR={exports:{}},vg={},yR={exports:{}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf=Symbol.for("react.element"),Sz=Symbol.for("react.portal"),xz=Symbol.for("react.fragment"),wz=Symbol.for("react.strict_mode"),_z=Symbol.for("react.profiler"),Iz=Symbol.for("react.provider"),Az=Symbol.for("react.context"),Rz=Symbol.for("react.forward_ref"),kz=Symbol.for("react.suspense"),Cz=Symbol.for("react.memo"),Nz=Symbol.for("react.lazy"),pw=Symbol.iterator;function Dz(n){return n===null||typeof n!="object"?null:(n=pw&&n[pw]||n["@@iterator"],typeof n=="function"?n:null)}var vR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ER=Object.assign,bR={};function Sc(n,e,t){this.props=n,this.context=e,this.refs=bR,this.updater=t||vR}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Sc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function TR(){}TR.prototype=Sc.prototype;function gb(n,e,t){this.props=n,this.context=e,this.refs=bR,this.updater=t||vR}var pb=gb.prototype=new TR;pb.constructor=gb;ER(pb,Sc.prototype);pb.isPureReactComponent=!0;var yw=Array.isArray,SR=Object.prototype.hasOwnProperty,yb={current:null},xR={key:!0,ref:!0,__self:!0,__source:!0};function wR(n,e,t){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)SR.call(e,r)&&!xR.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(n&&n.defaultProps)for(r in u=n.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:gf,type:n,key:o,ref:l,props:i,_owner:yb.current}}function Lz(n,e){return{$$typeof:gf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vb(n){return typeof n=="object"&&n!==null&&n.$$typeof===gf}function Pz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vw=/\/+/g;function Yp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Pz(""+n.key):e.toString(36)}function Yh(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case gf:case Sz:l=!0}}if(l)return l=n,i=i(l),n=r===""?"."+Yp(l,0):r,yw(i)?(t="",n!=null&&(t=n.replace(vw,"$&/")+"/"),Yh(i,e,t,"",function(d){return d})):i!=null&&(vb(i)&&(i=Lz(i,t+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(vw,"$&/")+"/")+n)),e.push(i)),1;if(l=0,r=r===""?".":r+":",yw(n))for(var u=0;u<n.length;u++){o=n[u];var c=r+Yp(o,u);l+=Yh(o,e,t,c,i)}else if(c=Dz(n),typeof c=="function")for(n=c.call(n),u=0;!(o=n.next()).done;)o=o.value,c=r+Yp(o,u++),l+=Yh(o,e,t,c,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function rh(n,e,t){if(n==null)return n;var r=[],i=0;return Yh(n,r,"","",function(o){return e.call(t,o,i++)}),r}function Mz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ri={current:null},Wh={transition:null},Oz={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:Wh,ReactCurrentOwner:yb};function _R(){throw Error("act(...) is not supported in production builds of React.")}er.Children={map:rh,forEach:function(n,e,t){rh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return rh(n,function(){e++}),e},toArray:function(n){return rh(n,function(e){return e})||[]},only:function(n){if(!vb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};er.Component=Sc;er.Fragment=xz;er.Profiler=_z;er.PureComponent=gb;er.StrictMode=wz;er.Suspense=kz;er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oz;er.act=_R;er.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=ER({},n.props),i=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=yb.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(c in e)SR.call(e,c)&&!xR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:gf,type:n.type,key:i,ref:o,props:r,_owner:l}};er.createContext=function(n){return n={$$typeof:Az,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Iz,_context:n},n.Consumer=n};er.createElement=wR;er.createFactory=function(n){var e=wR.bind(null,n);return e.type=n,e};er.createRef=function(){return{current:null}};er.forwardRef=function(n){return{$$typeof:Rz,render:n}};er.isValidElement=vb;er.lazy=function(n){return{$$typeof:Nz,_payload:{_status:-1,_result:n},_init:Mz}};er.memo=function(n,e){return{$$typeof:Cz,type:n,compare:e===void 0?null:e}};er.startTransition=function(n){var e=Wh.transition;Wh.transition={};try{n()}finally{Wh.transition=e}};er.unstable_act=_R;er.useCallback=function(n,e){return Ri.current.useCallback(n,e)};er.useContext=function(n){return Ri.current.useContext(n)};er.useDebugValue=function(){};er.useDeferredValue=function(n){return Ri.current.useDeferredValue(n)};er.useEffect=function(n,e){return Ri.current.useEffect(n,e)};er.useId=function(){return Ri.current.useId()};er.useImperativeHandle=function(n,e,t){return Ri.current.useImperativeHandle(n,e,t)};er.useInsertionEffect=function(n,e){return Ri.current.useInsertionEffect(n,e)};er.useLayoutEffect=function(n,e){return Ri.current.useLayoutEffect(n,e)};er.useMemo=function(n,e){return Ri.current.useMemo(n,e)};er.useReducer=function(n,e,t){return Ri.current.useReducer(n,e,t)};er.useRef=function(n){return Ri.current.useRef(n)};er.useState=function(n){return Ri.current.useState(n)};er.useSyncExternalStore=function(n,e,t){return Ri.current.useSyncExternalStore(n,e,t)};er.useTransition=function(){return Ri.current.useTransition()};er.version="18.3.1";yR.exports=er;var j=yR.exports;const ln=gR(j),Eb=Tz({__proto__:null,default:ln},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fz=j,zz=Symbol.for("react.element"),Uz=Symbol.for("react.fragment"),jz=Object.prototype.hasOwnProperty,Bz=Fz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$z={key:!0,ref:!0,__self:!0,__source:!0};function IR(n,e,t){var r,i={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)jz.call(e,r)&&!$z.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zz,type:n,key:o,ref:l,props:i,_owner:Bz.current}}vg.Fragment=Uz;vg.jsx=IR;vg.jsxs=IR;pR.exports=vg;var T=pR.exports,AR={exports:{}},sa={},RR={exports:{}},kR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Ue,Me){var We=Ue.length;Ue.push(Me);e:for(;0<We;){var Ke=We-1>>>1,nt=Ue[Ke];if(0<i(nt,Me))Ue[Ke]=Me,Ue[We]=nt,We=Ke;else break e}}function t(Ue){return Ue.length===0?null:Ue[0]}function r(Ue){if(Ue.length===0)return null;var Me=Ue[0],We=Ue.pop();if(We!==Me){Ue[0]=We;e:for(var Ke=0,nt=Ue.length,bt=nt>>>1;Ke<bt;){var Rt=2*(Ke+1)-1,Pe=Ue[Rt],Ne=Rt+1,Qe=Ue[Ne];if(0>i(Pe,We))Ne<nt&&0>i(Qe,Pe)?(Ue[Ke]=Qe,Ue[Ne]=We,Ke=Ne):(Ue[Ke]=Pe,Ue[Rt]=We,Ke=Rt);else if(Ne<nt&&0>i(Qe,We))Ue[Ke]=Qe,Ue[Ne]=We,Ke=Ne;else break e}}return Me}function i(Ue,Me){var We=Ue.sortIndex-Me.sortIndex;return We!==0?We:Ue.id-Me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var c=[],d=[],m=1,f=null,h=3,g=!1,p=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(Ue){for(var Me=t(d);Me!==null;){if(Me.callback===null)r(d);else if(Me.startTime<=Ue)r(d),Me.sortIndex=Me.expirationTime,e(c,Me);else break;Me=t(d)}}function z(Ue){if(E=!1,A(Ue),!p)if(t(c)!==null)p=!0,Re(ie);else{var Me=t(d);Me!==null&&Ye(z,Me.startTime-Ue)}}function ie(Ue,Me){p=!1,E&&(E=!1,x(U),U=-1),g=!0;var We=h;try{for(A(Me),f=t(c);f!==null&&(!(f.expirationTime>Me)||Ue&&!_e());){var Ke=f.callback;if(typeof Ke=="function"){f.callback=null,h=f.priorityLevel;var nt=Ke(f.expirationTime<=Me);Me=n.unstable_now(),typeof nt=="function"?f.callback=nt:f===t(c)&&r(c),A(Me)}else r(c);f=t(c)}if(f!==null)var bt=!0;else{var Rt=t(d);Rt!==null&&Ye(z,Rt.startTime-Me),bt=!1}return bt}finally{f=null,h=We,g=!1}}var he=!1,P=null,U=-1,ce=5,de=-1;function _e(){return!(n.unstable_now()-de<ce)}function je(){if(P!==null){var Ue=n.unstable_now();de=Ue;var Me=!0;try{Me=P(!0,Ue)}finally{Me?Se():(he=!1,P=null)}}else he=!1}var Se;if(typeof _=="function")Se=function(){_(je)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Le=ze.port2;ze.port1.onmessage=je,Se=function(){Le.postMessage(null)}}else Se=function(){S(je,0)};function Re(Ue){P=Ue,he||(he=!0,Se())}function Ye(Ue,Me){U=S(function(){Ue(n.unstable_now())},Me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ue){Ue.callback=null},n.unstable_continueExecution=function(){p||g||(p=!0,Re(ie))},n.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<Ue?Math.floor(1e3/Ue):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Ue){switch(h){case 1:case 2:case 3:var Me=3;break;default:Me=h}var We=h;h=Me;try{return Ue()}finally{h=We}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ue,Me){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var We=h;h=Ue;try{return Me()}finally{h=We}},n.unstable_scheduleCallback=function(Ue,Me,We){var Ke=n.unstable_now();switch(typeof We=="object"&&We!==null?(We=We.delay,We=typeof We=="number"&&0<We?Ke+We:Ke):We=Ke,Ue){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=We+nt,Ue={id:m++,callback:Me,priorityLevel:Ue,startTime:We,expirationTime:nt,sortIndex:-1},We>Ke?(Ue.sortIndex=We,e(d,Ue),t(c)===null&&Ue===t(d)&&(E?(x(U),U=-1):E=!0,Ye(z,We-Ke))):(Ue.sortIndex=nt,e(c,Ue),p||g||(p=!0,Re(ie))),Ue},n.unstable_shouldYield=_e,n.unstable_wrapCallback=function(Ue){var Me=h;return function(){var We=h;h=Me;try{return Ue.apply(this,arguments)}finally{h=We}}}})(kR);RR.exports=kR;var qz=RR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gz=j,aa=qz;function sn(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CR=new Set,Rd={};function Xl(n,e){dc(n,e),dc(n+"Capture",e)}function dc(n,e){for(Rd[n]=e,n=0;n<e.length;n++)CR.add(e[n])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lv=Object.prototype.hasOwnProperty,Hz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ew={},bw={};function Vz(n){return lv.call(bw,n)?!0:lv.call(Ew,n)?!1:Hz.test(n)?bw[n]=!0:(Ew[n]=!0,!1)}function Kz(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Yz(n,e,t,r){if(e===null||typeof e>"u"||Kz(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ki(n,e,t,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){fi[n]=new ki(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];fi[e]=new ki(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){fi[n]=new ki(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){fi[n]=new ki(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){fi[n]=new ki(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){fi[n]=new ki(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){fi[n]=new ki(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){fi[n]=new ki(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){fi[n]=new ki(n,5,!1,n.toLowerCase(),null,!1,!1)});var bb=/[\-:]([a-z])/g;function Tb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(bb,Tb);fi[e]=new ki(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(bb,Tb);fi[e]=new ki(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(bb,Tb);fi[e]=new ki(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){fi[n]=new ki(n,1,!1,n.toLowerCase(),null,!1,!1)});fi.xlinkHref=new ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){fi[n]=new ki(n,1,!1,n.toLowerCase(),null,!0,!0)});function Sb(n,e,t,r){var i=fi.hasOwnProperty(e)?fi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yz(e,t,i,r)&&(t=null),r||i===null?Vz(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var to=Gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ih=Symbol.for("react.element"),Iu=Symbol.for("react.portal"),Au=Symbol.for("react.fragment"),xb=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),NR=Symbol.for("react.provider"),DR=Symbol.for("react.context"),wb=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),dv=Symbol.for("react.suspense_list"),_b=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),LR=Symbol.for("react.offscreen"),Tw=Symbol.iterator;function Yc(n){return n===null||typeof n!="object"?null:(n=Tw&&n[Tw]||n["@@iterator"],typeof n=="function"?n:null)}var Mr=Object.assign,Wp;function ad(n){if(Wp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wp=e&&e[1]||""}return`
`+Wp+n}var Qp=!1;function Xp(n,e){if(!n||Qp)return"";Qp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){r=d}n.call(e.prototype)}else{try{throw Error()}catch(d){r=d}n()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,u=o.length-1;1<=l&&0<=u&&i[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==o[u]){var c=`
`+i[l].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=l&&0<=u);break}}}finally{Qp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ad(n):""}function Wz(n){switch(n.tag){case 5:return ad(n.type);case 16:return ad("Lazy");case 13:return ad("Suspense");case 19:return ad("SuspenseList");case 0:case 2:case 15:return n=Xp(n.type,!1),n;case 11:return n=Xp(n.type.render,!1),n;case 1:return n=Xp(n.type,!0),n;default:return""}}function fv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Au:return"Fragment";case Iu:return"Portal";case uv:return"Profiler";case xb:return"StrictMode";case cv:return"Suspense";case dv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case DR:return(n.displayName||"Context")+".Consumer";case NR:return(n._context.displayName||"Context")+".Provider";case wb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _b:return e=n.displayName||null,e!==null?e:fv(n.type)||"Memo";case Eo:e=n._payload,n=n._init;try{return fv(n(e))}catch{}}return null}function Qz(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fv(e);case 8:return e===xb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ko(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xz(n){var e=PR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ah(n){n._valueTracker||(n._valueTracker=Xz(n))}function MR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=PR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Tm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hv(n,e){var t=e.checked;return Mr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Sw(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ko(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OR(n,e){e=e.checked,e!=null&&Sb(n,"checked",e,!1)}function mv(n,e){OR(n,e);var t=Ko(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gv(n,e.type,t):e.hasOwnProperty("defaultValue")&&gv(n,e.type,Ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function xw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function gv(n,e,t){(e!=="number"||Tm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var sd=Array.isArray;function Uu(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ko(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function pv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(sn(91));return Mr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ww(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(sn(92));if(sd(t)){if(1<t.length)throw Error(sn(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ko(t)}}function FR(n,e){var t=Ko(e.value),r=Ko(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function _w(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function zR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?zR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var sh,UR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(sh=sh||document.createElement("div"),sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function kd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var gd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zz=["Webkit","ms","Moz","O"];Object.keys(gd).forEach(function(n){Zz.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),gd[e]=gd[n]})});function jR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||gd.hasOwnProperty(n)&&gd[n]?(""+e).trim():e+"px"}function BR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=jR(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Jz=Mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vv(n,e){if(e){if(Jz[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(sn(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(sn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(sn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(sn(62))}}function Ev(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=null;function Ib(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tv=null,ju=null,Bu=null;function Iw(n){if(n=vf(n)){if(typeof Tv!="function")throw Error(sn(280));var e=n.stateNode;e&&(e=xg(e),Tv(n.stateNode,n.type,e))}}function $R(n){ju?Bu?Bu.push(n):Bu=[n]:ju=n}function qR(){if(ju){var n=ju,e=Bu;if(Bu=ju=null,Iw(n),e)for(n=0;n<e.length;n++)Iw(e[n])}}function GR(n,e){return n(e)}function HR(){}var Zp=!1;function VR(n,e,t){if(Zp)return n(e,t);Zp=!0;try{return GR(n,e,t)}finally{Zp=!1,(ju!==null||Bu!==null)&&(HR(),qR())}}function Cd(n,e){var t=n.stateNode;if(t===null)return null;var r=xg(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(sn(231,e,typeof t));return t}var Sv=!1;if(Ws)try{var Wc={};Object.defineProperty(Wc,"passive",{get:function(){Sv=!0}}),window.addEventListener("test",Wc,Wc),window.removeEventListener("test",Wc,Wc)}catch{Sv=!1}function eU(n,e,t,r,i,o,l,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(m){this.onError(m)}}var pd=!1,Sm=null,xm=!1,xv=null,tU={onError:function(n){pd=!0,Sm=n}};function nU(n,e,t,r,i,o,l,u,c){pd=!1,Sm=null,eU.apply(tU,arguments)}function rU(n,e,t,r,i,o,l,u,c){if(nU.apply(this,arguments),pd){if(pd){var d=Sm;pd=!1,Sm=null}else throw Error(sn(198));xm||(xm=!0,xv=d)}}function Zl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function KR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Aw(n){if(Zl(n)!==n)throw Error(sn(188))}function iU(n){var e=n.alternate;if(!e){if(e=Zl(n),e===null)throw Error(sn(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return Aw(i),n;if(o===r)return Aw(i),e;o=o.sibling}throw Error(sn(188))}if(t.return!==r.return)t=i,r=o;else{for(var l=!1,u=i.child;u;){if(u===t){l=!0,t=i,r=o;break}if(u===r){l=!0,r=i,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,r=i;break}if(u===r){l=!0,r=o,t=i;break}u=u.sibling}if(!l)throw Error(sn(189))}}if(t.alternate!==r)throw Error(sn(190))}if(t.tag!==3)throw Error(sn(188));return t.stateNode.current===t?n:e}function YR(n){return n=iU(n),n!==null?WR(n):null}function WR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=WR(n);if(e!==null)return e;n=n.sibling}return null}var QR=aa.unstable_scheduleCallback,Rw=aa.unstable_cancelCallback,aU=aa.unstable_shouldYield,sU=aa.unstable_requestPaint,$r=aa.unstable_now,oU=aa.unstable_getCurrentPriorityLevel,Ab=aa.unstable_ImmediatePriority,XR=aa.unstable_UserBlockingPriority,wm=aa.unstable_NormalPriority,lU=aa.unstable_LowPriority,ZR=aa.unstable_IdlePriority,Eg=null,Ss=null;function uU(n){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Eg,n,void 0,(n.current.flags&128)===128)}catch{}}var Wa=Math.clz32?Math.clz32:fU,cU=Math.log,dU=Math.LN2;function fU(n){return n>>>=0,n===0?32:31-(cU(n)/dU|0)|0}var oh=64,lh=4194304;function od(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _m(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~i;u!==0?r=od(u):(o&=l,o!==0&&(r=od(o)))}else l=t&~i,l!==0?r=od(l):o!==0&&(r=od(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Wa(e),i=1<<t,r|=n[t],e&=~i;return r}function hU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mU(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-Wa(o),u=1<<l,c=i[l];c===-1?(!(u&t)||u&r)&&(i[l]=hU(u,e)):c<=e&&(n.expiredLanes|=u),o&=~u}}function wv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function JR(){var n=oh;return oh<<=1,!(oh&4194240)&&(oh=64),n}function Jp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function pf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Wa(e),n[e]=t}function gU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Wa(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function Rb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Wa(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var yr=0;function ek(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tk,kb,nk,rk,ik,_v=!1,uh=[],Oo=null,Fo=null,zo=null,Nd=new Map,Dd=new Map,xo=[],pU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kw(n,e){switch(n){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":Fo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":Nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(e.pointerId)}}function Qc(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=vf(e),e!==null&&kb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function yU(n,e,t,r,i){switch(e){case"focusin":return Oo=Qc(Oo,n,e,t,r,i),!0;case"dragenter":return Fo=Qc(Fo,n,e,t,r,i),!0;case"mouseover":return zo=Qc(zo,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return Nd.set(o,Qc(Nd.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dd.set(o,Qc(Dd.get(o)||null,n,e,t,r,i)),!0}return!1}function ak(n){var e=Tl(n.target);if(e!==null){var t=Zl(e);if(t!==null){if(e=t.tag,e===13){if(e=KR(t),e!==null){n.blockedOn=e,ik(n.priority,function(){nk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Iv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);bv=r,t.target.dispatchEvent(r),bv=null}else return e=vf(t),e!==null&&kb(e),n.blockedOn=t,!1;e.shift()}return!0}function Cw(n,e,t){Qh(n)&&t.delete(e)}function vU(){_v=!1,Oo!==null&&Qh(Oo)&&(Oo=null),Fo!==null&&Qh(Fo)&&(Fo=null),zo!==null&&Qh(zo)&&(zo=null),Nd.forEach(Cw),Dd.forEach(Cw)}function Xc(n,e){n.blockedOn===e&&(n.blockedOn=null,_v||(_v=!0,aa.unstable_scheduleCallback(aa.unstable_NormalPriority,vU)))}function Ld(n){function e(i){return Xc(i,n)}if(0<uh.length){Xc(uh[0],n);for(var t=1;t<uh.length;t++){var r=uh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Oo!==null&&Xc(Oo,n),Fo!==null&&Xc(Fo,n),zo!==null&&Xc(zo,n),Nd.forEach(e),Dd.forEach(e),t=0;t<xo.length;t++)r=xo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<xo.length&&(t=xo[0],t.blockedOn===null);)ak(t),t.blockedOn===null&&xo.shift()}var $u=to.ReactCurrentBatchConfig,Im=!0;function EU(n,e,t,r){var i=yr,o=$u.transition;$u.transition=null;try{yr=1,Cb(n,e,t,r)}finally{yr=i,$u.transition=o}}function bU(n,e,t,r){var i=yr,o=$u.transition;$u.transition=null;try{yr=4,Cb(n,e,t,r)}finally{yr=i,$u.transition=o}}function Cb(n,e,t,r){if(Im){var i=Iv(n,e,t,r);if(i===null)uy(n,e,r,Am,t),kw(n,r);else if(yU(i,n,e,t,r))r.stopPropagation();else if(kw(n,r),e&4&&-1<pU.indexOf(n)){for(;i!==null;){var o=vf(i);if(o!==null&&tk(o),o=Iv(n,e,t,r),o===null&&uy(n,e,r,Am,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else uy(n,e,r,null,t)}}var Am=null;function Iv(n,e,t,r){if(Am=null,n=Ib(r),n=Tl(n),n!==null)if(e=Zl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=KR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Am=n,null}function sk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oU()){case Ab:return 1;case XR:return 4;case wm:case lU:return 16;case ZR:return 536870912;default:return 16}default:return 16}}var Lo=null,Nb=null,Xh=null;function ok(){if(Xh)return Xh;var n,e=Nb,t=e.length,r,i="value"in Lo?Lo.value:Lo.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var l=t-n;for(r=1;r<=l&&e[t-r]===i[o-r];r++);return Xh=i.slice(n,1<r?1-r:void 0)}function Zh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ch(){return!0}function Nw(){return!1}function oa(n){function e(t,r,i,o,l){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ch:Nw,this.isPropagationStopped=Nw,this}return Mr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ch)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ch)},persist:function(){},isPersistent:ch}),e}var xc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Db=oa(xc),yf=Mr({},xc,{view:0,detail:0}),TU=oa(yf),ey,ty,Zc,bg=Mr({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zc&&(Zc&&n.type==="mousemove"?(ey=n.screenX-Zc.screenX,ty=n.screenY-Zc.screenY):ty=ey=0,Zc=n),ey)},movementY:function(n){return"movementY"in n?n.movementY:ty}}),Dw=oa(bg),SU=Mr({},bg,{dataTransfer:0}),xU=oa(SU),wU=Mr({},yf,{relatedTarget:0}),ny=oa(wU),_U=Mr({},xc,{animationName:0,elapsedTime:0,pseudoElement:0}),IU=oa(_U),AU=Mr({},xc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),RU=oa(AU),kU=Mr({},xc,{data:0}),Lw=oa(kU),CU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=DU[n])?!!e[n]:!1}function Lb(){return LU}var PU=Mr({},yf,{key:function(n){if(n.key){var e=CU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?NU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lb,charCode:function(n){return n.type==="keypress"?Zh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),MU=oa(PU),OU=Mr({},bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pw=oa(OU),FU=Mr({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lb}),zU=oa(FU),UU=Mr({},xc,{propertyName:0,elapsedTime:0,pseudoElement:0}),jU=oa(UU),BU=Mr({},bg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$U=oa(BU),qU=[9,13,27,32],Pb=Ws&&"CompositionEvent"in window,yd=null;Ws&&"documentMode"in document&&(yd=document.documentMode);var GU=Ws&&"TextEvent"in window&&!yd,lk=Ws&&(!Pb||yd&&8<yd&&11>=yd),Mw=" ",Ow=!1;function uk(n,e){switch(n){case"keyup":return qU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ck(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ru=!1;function HU(n,e){switch(n){case"compositionend":return ck(e);case"keypress":return e.which!==32?null:(Ow=!0,Mw);case"textInput":return n=e.data,n===Mw&&Ow?null:n;default:return null}}function VU(n,e){if(Ru)return n==="compositionend"||!Pb&&uk(n,e)?(n=ok(),Xh=Nb=Lo=null,Ru=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lk&&e.locale!=="ko"?null:e.data;default:return null}}var KU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!KU[n.type]:e==="textarea"}function dk(n,e,t,r){$R(r),e=Rm(e,"onChange"),0<e.length&&(t=new Db("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var vd=null,Pd=null;function YU(n){Sk(n,0)}function Tg(n){var e=Nu(n);if(MR(e))return n}function WU(n,e){if(n==="change")return e}var fk=!1;if(Ws){var ry;if(Ws){var iy="oninput"in document;if(!iy){var zw=document.createElement("div");zw.setAttribute("oninput","return;"),iy=typeof zw.oninput=="function"}ry=iy}else ry=!1;fk=ry&&(!document.documentMode||9<document.documentMode)}function Uw(){vd&&(vd.detachEvent("onpropertychange",hk),Pd=vd=null)}function hk(n){if(n.propertyName==="value"&&Tg(Pd)){var e=[];dk(e,Pd,n,Ib(n)),VR(YU,e)}}function QU(n,e,t){n==="focusin"?(Uw(),vd=e,Pd=t,vd.attachEvent("onpropertychange",hk)):n==="focusout"&&Uw()}function XU(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tg(Pd)}function ZU(n,e){if(n==="click")return Tg(e)}function JU(n,e){if(n==="input"||n==="change")return Tg(e)}function ej(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xa=typeof Object.is=="function"?Object.is:ej;function Md(n,e){if(Xa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!lv.call(e,i)||!Xa(n[i],e[i]))return!1}return!0}function jw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bw(n,e){var t=jw(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=jw(t)}}function mk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?mk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function gk(){for(var n=window,e=Tm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Tm(n.document)}return e}function Mb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function tj(n){var e=gk(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&mk(t.ownerDocument.documentElement,t)){if(r!==null&&Mb(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=Bw(t,o);var l=Bw(t,r);i&&l&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nj=Ws&&"documentMode"in document&&11>=document.documentMode,ku=null,Av=null,Ed=null,Rv=!1;function $w(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Rv||ku==null||ku!==Tm(r)||(r=ku,"selectionStart"in r&&Mb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ed&&Md(Ed,r)||(Ed=r,r=Rm(Av,"onSelect"),0<r.length&&(e=new Db("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ku)))}function dh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Cu={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},ay={},pk={};Ws&&(pk=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Sg(n){if(ay[n])return ay[n];if(!Cu[n])return n;var e=Cu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in pk)return ay[n]=e[t];return n}var yk=Sg("animationend"),vk=Sg("animationiteration"),Ek=Sg("animationstart"),bk=Sg("transitionend"),Tk=new Map,qw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(n,e){Tk.set(n,e),Xl(e,[n])}for(var sy=0;sy<qw.length;sy++){var oy=qw[sy],rj=oy.toLowerCase(),ij=oy[0].toUpperCase()+oy.slice(1);tl(rj,"on"+ij)}tl(yk,"onAnimationEnd");tl(vk,"onAnimationIteration");tl(Ek,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(bk,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aj=new Set("cancel close invalid load scroll toggle".split(" ").concat(ld));function Gw(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,rU(r,e,void 0,n),n.currentTarget=null}function Sk(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;Gw(i,u,d),o=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;Gw(i,u,d),o=c}}}if(xm)throw n=xv,xm=!1,xv=null,n}function Ir(n,e){var t=e[Lv];t===void 0&&(t=e[Lv]=new Set);var r=n+"__bubble";t.has(r)||(xk(e,n,2,!1),t.add(r))}function ly(n,e,t){var r=0;e&&(r|=4),xk(t,n,r,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Od(n){if(!n[fh]){n[fh]=!0,CR.forEach(function(t){t!=="selectionchange"&&(aj.has(t)||ly(t,!1,n),ly(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[fh]||(e[fh]=!0,ly("selectionchange",!1,e))}}function xk(n,e,t,r){switch(sk(e)){case 1:var i=EU;break;case 4:i=bU;break;default:i=Cb}t=i.bind(null,e,t,n),i=void 0,!Sv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function uy(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;u!==null;){if(l=Tl(u),l===null)return;if(c=l.tag,c===5||c===6){r=o=l;continue e}u=u.parentNode}}r=r.return}VR(function(){var d=o,m=Ib(t),f=[];e:{var h=Tk.get(n);if(h!==void 0){var g=Db,p=n;switch(n){case"keypress":if(Zh(t)===0)break e;case"keydown":case"keyup":g=MU;break;case"focusin":p="focus",g=ny;break;case"focusout":p="blur",g=ny;break;case"beforeblur":case"afterblur":g=ny;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=xU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zU;break;case yk:case vk:case Ek:g=IU;break;case bk:g=jU;break;case"scroll":g=TU;break;case"wheel":g=$U;break;case"copy":case"cut":case"paste":g=RU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Pw}var E=(e&4)!==0,S=!E&&n==="scroll",x=E?h!==null?h+"Capture":null:h;E=[];for(var _=d,A;_!==null;){A=_;var z=A.stateNode;if(A.tag===5&&z!==null&&(A=z,x!==null&&(z=Cd(_,x),z!=null&&E.push(Fd(_,z,A)))),S)break;_=_.return}0<E.length&&(h=new g(h,p,null,t,m),f.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",h&&t!==bv&&(p=t.relatedTarget||t.fromElement)&&(Tl(p)||p[Qs]))break e;if((g||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=t.relatedTarget||t.toElement,g=d,p=p?Tl(p):null,p!==null&&(S=Zl(p),p!==S||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=d),g!==p)){if(E=Dw,z="onMouseLeave",x="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(E=Pw,z="onPointerLeave",x="onPointerEnter",_="pointer"),S=g==null?h:Nu(g),A=p==null?h:Nu(p),h=new E(z,_+"leave",g,t,m),h.target=S,h.relatedTarget=A,z=null,Tl(m)===d&&(E=new E(x,_+"enter",p,t,m),E.target=A,E.relatedTarget=S,z=E),S=z,g&&p)t:{for(E=g,x=p,_=0,A=E;A;A=du(A))_++;for(A=0,z=x;z;z=du(z))A++;for(;0<_-A;)E=du(E),_--;for(;0<A-_;)x=du(x),A--;for(;_--;){if(E===x||x!==null&&E===x.alternate)break t;E=du(E),x=du(x)}E=null}else E=null;g!==null&&Hw(f,h,g,E,!1),p!==null&&S!==null&&Hw(f,S,p,E,!0)}}e:{if(h=d?Nu(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var ie=WU;else if(Fw(h))if(fk)ie=JU;else{ie=XU;var he=QU}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(ie=ZU);if(ie&&(ie=ie(n,d))){dk(f,ie,t,m);break e}he&&he(n,h,d),n==="focusout"&&(he=h._wrapperState)&&he.controlled&&h.type==="number"&&gv(h,"number",h.value)}switch(he=d?Nu(d):window,n){case"focusin":(Fw(he)||he.contentEditable==="true")&&(ku=he,Av=d,Ed=null);break;case"focusout":Ed=Av=ku=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,$w(f,t,m);break;case"selectionchange":if(nj)break;case"keydown":case"keyup":$w(f,t,m)}var P;if(Pb)e:{switch(n){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Ru?uk(n,t)&&(U="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(lk&&t.locale!=="ko"&&(Ru||U!=="onCompositionStart"?U==="onCompositionEnd"&&Ru&&(P=ok()):(Lo=m,Nb="value"in Lo?Lo.value:Lo.textContent,Ru=!0)),he=Rm(d,U),0<he.length&&(U=new Lw(U,n,null,t,m),f.push({event:U,listeners:he}),P?U.data=P:(P=ck(t),P!==null&&(U.data=P)))),(P=GU?HU(n,t):VU(n,t))&&(d=Rm(d,"onBeforeInput"),0<d.length&&(m=new Lw("onBeforeInput","beforeinput",null,t,m),f.push({event:m,listeners:d}),m.data=P))}Sk(f,e)})}function Fd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Rm(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Cd(n,t),o!=null&&r.unshift(Fd(n,o,i)),o=Cd(n,e),o!=null&&r.push(Fd(n,o,i))),n=n.return}return r}function du(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hw(n,e,t,r,i){for(var o=e._reactName,l=[];t!==null&&t!==r;){var u=t,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=Cd(t,o),c!=null&&l.unshift(Fd(t,c,u))):i||(c=Cd(t,o),c!=null&&l.push(Fd(t,c,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var sj=/\r\n?/g,oj=/\u0000|\uFFFD/g;function Vw(n){return(typeof n=="string"?n:""+n).replace(sj,`
`).replace(oj,"")}function hh(n,e,t){if(e=Vw(e),Vw(n)!==e&&t)throw Error(sn(425))}function km(){}var kv=null,Cv=null;function Nv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dv=typeof setTimeout=="function"?setTimeout:void 0,lj=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,uj=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(n){return Kw.resolve(null).then(n).catch(cj)}:Dv;function cj(n){setTimeout(function(){throw n})}function cy(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Ld(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Ld(e)}function Uo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Yw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wc=Math.random().toString(36).slice(2),gs="__reactFiber$"+wc,zd="__reactProps$"+wc,Qs="__reactContainer$"+wc,Lv="__reactEvents$"+wc,dj="__reactListeners$"+wc,fj="__reactHandles$"+wc;function Tl(n){var e=n[gs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qs]||t[gs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Yw(n);n!==null;){if(t=n[gs])return t;n=Yw(n)}return e}n=t,t=n.parentNode}return null}function vf(n){return n=n[gs]||n[Qs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Nu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(sn(33))}function xg(n){return n[zd]||null}var Pv=[],Du=-1;function nl(n){return{current:n}}function Ar(n){0>Du||(n.current=Pv[Du],Pv[Du]=null,Du--)}function wr(n,e){Du++,Pv[Du]=n.current,n.current=e}var Yo={},bi=nl(Yo),qi=nl(!1),Fl=Yo;function fc(n,e){var t=n.type.contextTypes;if(!t)return Yo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Gi(n){return n=n.childContextTypes,n!=null}function Cm(){Ar(qi),Ar(bi)}function Ww(n,e,t){if(bi.current!==Yo)throw Error(sn(168));wr(bi,e),wr(qi,t)}function wk(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(sn(108,Qz(n)||"Unknown",i));return Mr({},t,r)}function Nm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yo,Fl=bi.current,wr(bi,n),wr(qi,qi.current),!0}function Qw(n,e,t){var r=n.stateNode;if(!r)throw Error(sn(169));t?(n=wk(n,e,Fl),r.__reactInternalMemoizedMergedChildContext=n,Ar(qi),Ar(bi),wr(bi,n)):Ar(qi),wr(qi,t)}var $s=null,wg=!1,dy=!1;function _k(n){$s===null?$s=[n]:$s.push(n)}function hj(n){wg=!0,_k(n)}function rl(){if(!dy&&$s!==null){dy=!0;var n=0,e=yr;try{var t=$s;for(yr=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}$s=null,wg=!1}catch(i){throw $s!==null&&($s=$s.slice(n+1)),QR(Ab,rl),i}finally{yr=e,dy=!1}}return null}var Lu=[],Pu=0,Dm=null,Lm=0,pa=[],ya=0,zl=null,Gs=1,Hs="";function vl(n,e){Lu[Pu++]=Lm,Lu[Pu++]=Dm,Dm=n,Lm=e}function Ik(n,e,t){pa[ya++]=Gs,pa[ya++]=Hs,pa[ya++]=zl,zl=n;var r=Gs;n=Hs;var i=32-Wa(r)-1;r&=~(1<<i),t+=1;var o=32-Wa(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Gs=1<<32-Wa(e)+i|t<<i|r,Hs=o+n}else Gs=1<<o|t<<i|r,Hs=n}function Ob(n){n.return!==null&&(vl(n,1),Ik(n,1,0))}function Fb(n){for(;n===Dm;)Dm=Lu[--Pu],Lu[Pu]=null,Lm=Lu[--Pu],Lu[Pu]=null;for(;n===zl;)zl=pa[--ya],pa[ya]=null,Hs=pa[--ya],pa[ya]=null,Gs=pa[--ya],pa[ya]=null}var na=null,ta=null,Rr=!1,Va=null;function Ak(n,e){var t=va(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Xw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,na=n,ta=Uo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,na=n,ta=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=zl!==null?{id:Gs,overflow:Hs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=va(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,na=n,ta=null,!0):!1;default:return!1}}function Mv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ov(n){if(Rr){var e=ta;if(e){var t=e;if(!Xw(n,e)){if(Mv(n))throw Error(sn(418));e=Uo(t.nextSibling);var r=na;e&&Xw(n,e)?Ak(r,t):(n.flags=n.flags&-4097|2,Rr=!1,na=n)}}else{if(Mv(n))throw Error(sn(418));n.flags=n.flags&-4097|2,Rr=!1,na=n}}}function Zw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;na=n}function mh(n){if(n!==na)return!1;if(!Rr)return Zw(n),Rr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Nv(n.type,n.memoizedProps)),e&&(e=ta)){if(Mv(n))throw Rk(),Error(sn(418));for(;e;)Ak(n,e),e=Uo(e.nextSibling)}if(Zw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(sn(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ta=Uo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ta=null}}else ta=na?Uo(n.stateNode.nextSibling):null;return!0}function Rk(){for(var n=ta;n;)n=Uo(n.nextSibling)}function hc(){ta=na=null,Rr=!1}function zb(n){Va===null?Va=[n]:Va.push(n)}var mj=to.ReactCurrentBatchConfig;function Jc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(sn(309));var r=t.stateNode}if(!r)throw Error(sn(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=i.refs;l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(sn(284));if(!t._owner)throw Error(sn(290,n))}return n}function gh(n,e){throw n=Object.prototype.toString.call(e),Error(sn(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Jw(n){var e=n._init;return e(n._payload)}function kk(n){function e(x,_){if(n){var A=x.deletions;A===null?(x.deletions=[_],x.flags|=16):A.push(_)}}function t(x,_){if(!n)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=qo(x,_),x.index=0,x.sibling=null,x}function o(x,_,A){return x.index=A,n?(A=x.alternate,A!==null?(A=A.index,A<_?(x.flags|=2,_):A):(x.flags|=2,_)):(x.flags|=1048576,_)}function l(x){return n&&x.alternate===null&&(x.flags|=2),x}function u(x,_,A,z){return _===null||_.tag!==6?(_=vy(A,x.mode,z),_.return=x,_):(_=i(_,A),_.return=x,_)}function c(x,_,A,z){var ie=A.type;return ie===Au?m(x,_,A.props.children,z,A.key):_!==null&&(_.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Eo&&Jw(ie)===_.type)?(z=i(_,A.props),z.ref=Jc(x,_,A),z.return=x,z):(z=am(A.type,A.key,A.props,null,x.mode,z),z.ref=Jc(x,_,A),z.return=x,z)}function d(x,_,A,z){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=Ey(A,x.mode,z),_.return=x,_):(_=i(_,A.children||[]),_.return=x,_)}function m(x,_,A,z,ie){return _===null||_.tag!==7?(_=Pl(A,x.mode,z,ie),_.return=x,_):(_=i(_,A),_.return=x,_)}function f(x,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=vy(""+_,x.mode,A),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ih:return A=am(_.type,_.key,_.props,null,x.mode,A),A.ref=Jc(x,null,_),A.return=x,A;case Iu:return _=Ey(_,x.mode,A),_.return=x,_;case Eo:var z=_._init;return f(x,z(_._payload),A)}if(sd(_)||Yc(_))return _=Pl(_,x.mode,A,null),_.return=x,_;gh(x,_)}return null}function h(x,_,A,z){var ie=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return ie!==null?null:u(x,_,""+A,z);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ih:return A.key===ie?c(x,_,A,z):null;case Iu:return A.key===ie?d(x,_,A,z):null;case Eo:return ie=A._init,h(x,_,ie(A._payload),z)}if(sd(A)||Yc(A))return ie!==null?null:m(x,_,A,z,null);gh(x,A)}return null}function g(x,_,A,z,ie){if(typeof z=="string"&&z!==""||typeof z=="number")return x=x.get(A)||null,u(_,x,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ih:return x=x.get(z.key===null?A:z.key)||null,c(_,x,z,ie);case Iu:return x=x.get(z.key===null?A:z.key)||null,d(_,x,z,ie);case Eo:var he=z._init;return g(x,_,A,he(z._payload),ie)}if(sd(z)||Yc(z))return x=x.get(A)||null,m(_,x,z,ie,null);gh(_,z)}return null}function p(x,_,A,z){for(var ie=null,he=null,P=_,U=_=0,ce=null;P!==null&&U<A.length;U++){P.index>U?(ce=P,P=null):ce=P.sibling;var de=h(x,P,A[U],z);if(de===null){P===null&&(P=ce);break}n&&P&&de.alternate===null&&e(x,P),_=o(de,_,U),he===null?ie=de:he.sibling=de,he=de,P=ce}if(U===A.length)return t(x,P),Rr&&vl(x,U),ie;if(P===null){for(;U<A.length;U++)P=f(x,A[U],z),P!==null&&(_=o(P,_,U),he===null?ie=P:he.sibling=P,he=P);return Rr&&vl(x,U),ie}for(P=r(x,P);U<A.length;U++)ce=g(P,x,U,A[U],z),ce!==null&&(n&&ce.alternate!==null&&P.delete(ce.key===null?U:ce.key),_=o(ce,_,U),he===null?ie=ce:he.sibling=ce,he=ce);return n&&P.forEach(function(_e){return e(x,_e)}),Rr&&vl(x,U),ie}function E(x,_,A,z){var ie=Yc(A);if(typeof ie!="function")throw Error(sn(150));if(A=ie.call(A),A==null)throw Error(sn(151));for(var he=ie=null,P=_,U=_=0,ce=null,de=A.next();P!==null&&!de.done;U++,de=A.next()){P.index>U?(ce=P,P=null):ce=P.sibling;var _e=h(x,P,de.value,z);if(_e===null){P===null&&(P=ce);break}n&&P&&_e.alternate===null&&e(x,P),_=o(_e,_,U),he===null?ie=_e:he.sibling=_e,he=_e,P=ce}if(de.done)return t(x,P),Rr&&vl(x,U),ie;if(P===null){for(;!de.done;U++,de=A.next())de=f(x,de.value,z),de!==null&&(_=o(de,_,U),he===null?ie=de:he.sibling=de,he=de);return Rr&&vl(x,U),ie}for(P=r(x,P);!de.done;U++,de=A.next())de=g(P,x,U,de.value,z),de!==null&&(n&&de.alternate!==null&&P.delete(de.key===null?U:de.key),_=o(de,_,U),he===null?ie=de:he.sibling=de,he=de);return n&&P.forEach(function(je){return e(x,je)}),Rr&&vl(x,U),ie}function S(x,_,A,z){if(typeof A=="object"&&A!==null&&A.type===Au&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ih:e:{for(var ie=A.key,he=_;he!==null;){if(he.key===ie){if(ie=A.type,ie===Au){if(he.tag===7){t(x,he.sibling),_=i(he,A.props.children),_.return=x,x=_;break e}}else if(he.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Eo&&Jw(ie)===he.type){t(x,he.sibling),_=i(he,A.props),_.ref=Jc(x,he,A),_.return=x,x=_;break e}t(x,he);break}else e(x,he);he=he.sibling}A.type===Au?(_=Pl(A.props.children,x.mode,z,A.key),_.return=x,x=_):(z=am(A.type,A.key,A.props,null,x.mode,z),z.ref=Jc(x,_,A),z.return=x,x=z)}return l(x);case Iu:e:{for(he=A.key;_!==null;){if(_.key===he)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){t(x,_.sibling),_=i(_,A.children||[]),_.return=x,x=_;break e}else{t(x,_);break}else e(x,_);_=_.sibling}_=Ey(A,x.mode,z),_.return=x,x=_}return l(x);case Eo:return he=A._init,S(x,_,he(A._payload),z)}if(sd(A))return p(x,_,A,z);if(Yc(A))return E(x,_,A,z);gh(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(t(x,_.sibling),_=i(_,A),_.return=x,x=_):(t(x,_),_=vy(A,x.mode,z),_.return=x,x=_),l(x)):t(x,_)}return S}var mc=kk(!0),Ck=kk(!1),Pm=nl(null),Mm=null,Mu=null,Ub=null;function jb(){Ub=Mu=Mm=null}function Bb(n){var e=Pm.current;Ar(Pm),n._currentValue=e}function Fv(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function qu(n,e){Mm=n,Ub=Mu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Bi=!0),n.firstContext=null)}function Sa(n){var e=n._currentValue;if(Ub!==n)if(n={context:n,memoizedValue:e,next:null},Mu===null){if(Mm===null)throw Error(sn(308));Mu=n,Mm.dependencies={lanes:0,firstContext:n}}else Mu=Mu.next=n;return e}var Sl=null;function $b(n){Sl===null?Sl=[n]:Sl.push(n)}function Nk(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,$b(e)):(t.next=i.next,i.next=t),e.interleaved=t,Xs(n,r)}function Xs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var bo=!1;function qb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ks(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function jo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,lr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xs(n,t)}return i=r.interleaved,i===null?(e.next=e,$b(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xs(n,t)}function Jh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Rb(n,t)}}function e_(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Om(n,e,t,r){var i=n.updateQueue;bo=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var m=n.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==l&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=c))}if(o!==null){var f=i.baseState;l=0,m=d=c=null,u=o;do{var h=u.lane,g=u.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=n,E=u;switch(h=e,g=t,E.tag){case 1:if(p=E.payload,typeof p=="function"){f=p.call(g,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=E.payload,h=typeof p=="function"?p.call(g,f,h):p,h==null)break e;f=Mr({},f,h);break e;case 2:bo=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else g={eventTime:g,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=g,c=f):m=m.next=g,l|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(m===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);jl|=l,n.lanes=l,n.memoizedState=f}}function t_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(sn(191,i));i.call(r)}}}var Ef={},xs=nl(Ef),Ud=nl(Ef),jd=nl(Ef);function xl(n){if(n===Ef)throw Error(sn(174));return n}function Gb(n,e){switch(wr(jd,e),wr(Ud,n),wr(xs,Ef),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yv(e,n)}Ar(xs),wr(xs,e)}function gc(){Ar(xs),Ar(Ud),Ar(jd)}function Lk(n){xl(jd.current);var e=xl(xs.current),t=yv(e,n.type);e!==t&&(wr(Ud,n),wr(xs,t))}function Hb(n){Ud.current===n&&(Ar(xs),Ar(Ud))}var Dr=nl(0);function Fm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fy=[];function Vb(){for(var n=0;n<fy.length;n++)fy[n]._workInProgressVersionPrimary=null;fy.length=0}var em=to.ReactCurrentDispatcher,hy=to.ReactCurrentBatchConfig,Ul=0,Pr=null,Qr=null,ti=null,zm=!1,bd=!1,Bd=0,gj=0;function pi(){throw Error(sn(321))}function Kb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Xa(n[t],e[t]))return!1;return!0}function Yb(n,e,t,r,i,o){if(Ul=o,Pr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,em.current=n===null||n.memoizedState===null?Ej:bj,n=t(r,i),bd){o=0;do{if(bd=!1,Bd=0,25<=o)throw Error(sn(301));o+=1,ti=Qr=null,e.updateQueue=null,em.current=Tj,n=t(r,i)}while(bd)}if(em.current=Um,e=Qr!==null&&Qr.next!==null,Ul=0,ti=Qr=Pr=null,zm=!1,e)throw Error(sn(300));return n}function Wb(){var n=Bd!==0;return Bd=0,n}function us(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?Pr.memoizedState=ti=n:ti=ti.next=n,ti}function xa(){if(Qr===null){var n=Pr.alternate;n=n!==null?n.memoizedState:null}else n=Qr.next;var e=ti===null?Pr.memoizedState:ti.next;if(e!==null)ti=e,Qr=n;else{if(n===null)throw Error(sn(310));Qr=n,n={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},ti===null?Pr.memoizedState=ti=n:ti=ti.next=n}return ti}function $d(n,e){return typeof e=="function"?e(n):e}function my(n){var e=xa(),t=e.queue;if(t===null)throw Error(sn(311));t.lastRenderedReducer=n;var r=Qr,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=l=null,c=null,d=o;do{var m=d.lane;if((Ul&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:n(r,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=f,l=r):c=c.next=f,Pr.lanes|=m,jl|=m}d=d.next}while(d!==null&&d!==o);c===null?l=r:c.next=u,Xa(r,e.memoizedState)||(Bi=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Pr.lanes|=o,jl|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gy(n){var e=xa(),t=e.queue;if(t===null)throw Error(sn(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var l=i=i.next;do o=n(o,l.action),l=l.next;while(l!==i);Xa(o,e.memoizedState)||(Bi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function Pk(){}function Mk(n,e){var t=Pr,r=xa(),i=e(),o=!Xa(r.memoizedState,i);if(o&&(r.memoizedState=i,Bi=!0),r=r.queue,Qb(zk.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||ti!==null&&ti.memoizedState.tag&1){if(t.flags|=2048,qd(9,Fk.bind(null,t,r,i,e),void 0,null),ri===null)throw Error(sn(349));Ul&30||Ok(t,e,i)}return i}function Ok(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Pr.updateQueue,e===null?(e={lastEffect:null,stores:null},Pr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Fk(n,e,t,r){e.value=t,e.getSnapshot=r,Uk(e)&&jk(n)}function zk(n,e,t){return t(function(){Uk(e)&&jk(n)})}function Uk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xa(n,t)}catch{return!0}}function jk(n){var e=Xs(n,1);e!==null&&Qa(e,n,1,-1)}function n_(n){var e=us();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:n},e.queue=n,n=n.dispatch=vj.bind(null,Pr,n),[e.memoizedState,n]}function qd(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Pr.updateQueue,e===null?(e={lastEffect:null,stores:null},Pr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Bk(){return xa().memoizedState}function tm(n,e,t,r){var i=us();Pr.flags|=n,i.memoizedState=qd(1|e,t,void 0,r===void 0?null:r)}function _g(n,e,t,r){var i=xa();r=r===void 0?null:r;var o=void 0;if(Qr!==null){var l=Qr.memoizedState;if(o=l.destroy,r!==null&&Kb(r,l.deps)){i.memoizedState=qd(e,t,o,r);return}}Pr.flags|=n,i.memoizedState=qd(1|e,t,o,r)}function r_(n,e){return tm(8390656,8,n,e)}function Qb(n,e){return _g(2048,8,n,e)}function $k(n,e){return _g(4,2,n,e)}function qk(n,e){return _g(4,4,n,e)}function Gk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Hk(n,e,t){return t=t!=null?t.concat([n]):null,_g(4,4,Gk.bind(null,e,n),t)}function Xb(){}function Vk(n,e){var t=xa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Kb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Kk(n,e){var t=xa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Kb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Yk(n,e,t){return Ul&21?(Xa(t,e)||(t=JR(),Pr.lanes|=t,jl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Bi=!0),n.memoizedState=t)}function pj(n,e){var t=yr;yr=t!==0&&4>t?t:4,n(!0);var r=hy.transition;hy.transition={};try{n(!1),e()}finally{yr=t,hy.transition=r}}function Wk(){return xa().memoizedState}function yj(n,e,t){var r=$o(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Qk(n))Xk(e,t);else if(t=Nk(n,e,t,r),t!==null){var i=Ai();Qa(t,n,r,i),Zk(t,e,r)}}function vj(n,e,t){var r=$o(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Qk(n))Xk(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(i.hasEagerState=!0,i.eagerState=u,Xa(u,l)){var c=e.interleaved;c===null?(i.next=i,$b(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=Nk(n,e,i,r),t!==null&&(i=Ai(),Qa(t,n,r,i),Zk(t,e,r))}}function Qk(n){var e=n.alternate;return n===Pr||e!==null&&e===Pr}function Xk(n,e){bd=zm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Zk(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Rb(n,t)}}var Um={readContext:Sa,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Ej={readContext:Sa,useCallback:function(n,e){return us().memoizedState=[n,e===void 0?null:e],n},useContext:Sa,useEffect:r_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,tm(4194308,4,Gk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return tm(4194308,4,n,e)},useInsertionEffect:function(n,e){return tm(4,2,n,e)},useMemo:function(n,e){var t=us();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=us();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=yj.bind(null,Pr,n),[r.memoizedState,n]},useRef:function(n){var e=us();return n={current:n},e.memoizedState=n},useState:n_,useDebugValue:Xb,useDeferredValue:function(n){return us().memoizedState=n},useTransition:function(){var n=n_(!1),e=n[0];return n=pj.bind(null,n[1]),us().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Pr,i=us();if(Rr){if(t===void 0)throw Error(sn(407));t=t()}else{if(t=e(),ri===null)throw Error(sn(349));Ul&30||Ok(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,r_(zk.bind(null,r,o,n),[n]),r.flags|=2048,qd(9,Fk.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=us(),e=ri.identifierPrefix;if(Rr){var t=Hs,r=Gs;t=(r&~(1<<32-Wa(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Bd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=gj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bj={readContext:Sa,useCallback:Vk,useContext:Sa,useEffect:Qb,useImperativeHandle:Hk,useInsertionEffect:$k,useLayoutEffect:qk,useMemo:Kk,useReducer:my,useRef:Bk,useState:function(){return my($d)},useDebugValue:Xb,useDeferredValue:function(n){var e=xa();return Yk(e,Qr.memoizedState,n)},useTransition:function(){var n=my($d)[0],e=xa().memoizedState;return[n,e]},useMutableSource:Pk,useSyncExternalStore:Mk,useId:Wk,unstable_isNewReconciler:!1},Tj={readContext:Sa,useCallback:Vk,useContext:Sa,useEffect:Qb,useImperativeHandle:Hk,useInsertionEffect:$k,useLayoutEffect:qk,useMemo:Kk,useReducer:gy,useRef:Bk,useState:function(){return gy($d)},useDebugValue:Xb,useDeferredValue:function(n){var e=xa();return Qr===null?e.memoizedState=n:Yk(e,Qr.memoizedState,n)},useTransition:function(){var n=gy($d)[0],e=xa().memoizedState;return[n,e]},useMutableSource:Pk,useSyncExternalStore:Mk,useId:Wk,unstable_isNewReconciler:!1};function $a(n,e){if(n&&n.defaultProps){e=Mr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function zv(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Mr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ig={isMounted:function(n){return(n=n._reactInternals)?Zl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ai(),i=$o(n),o=Ks(r,i);o.payload=e,t!=null&&(o.callback=t),e=jo(n,o,i),e!==null&&(Qa(e,n,i,r),Jh(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ai(),i=$o(n),o=Ks(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=jo(n,o,i),e!==null&&(Qa(e,n,i,r),Jh(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ai(),r=$o(n),i=Ks(t,r);i.tag=2,e!=null&&(i.callback=e),e=jo(n,i,r),e!==null&&(Qa(e,n,r,t),Jh(e,n,r))}};function i_(n,e,t,r,i,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Md(t,r)||!Md(i,o):!0}function Jk(n,e,t){var r=!1,i=Yo,o=e.contextType;return typeof o=="object"&&o!==null?o=Sa(o):(i=Gi(e)?Fl:bi.current,r=e.contextTypes,o=(r=r!=null)?fc(n,i):Yo),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ig,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function a_(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ig.enqueueReplaceState(e,e.state,null)}function Uv(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},qb(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Sa(o):(o=Gi(e)?Fl:bi.current,i.context=fc(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(zv(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ig.enqueueReplaceState(i,i.state,null),Om(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function pc(n,e){try{var t="",r=e;do t+=Wz(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function py(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function jv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Sj=typeof WeakMap=="function"?WeakMap:Map;function eC(n,e,t){t=Ks(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Bm||(Bm=!0,Qv=r),jv(n,e)},t}function tC(n,e,t){t=Ks(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){jv(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){jv(n,e),typeof r!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function s_(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Sj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Oj.bind(null,n,e,t),e.then(n,n))}function o_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function l_(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ks(-1,1),e.tag=2,jo(t,e,1))),t.lanes|=1),n)}var xj=to.ReactCurrentOwner,Bi=!1;function xi(n,e,t,r){e.child=n===null?Ck(e,null,t,r):mc(e,n.child,t,r)}function u_(n,e,t,r,i){t=t.render;var o=e.ref;return qu(e,i),r=Yb(n,e,t,r,o,i),t=Wb(),n!==null&&!Bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Zs(n,e,i)):(Rr&&t&&Ob(e),e.flags|=1,xi(n,e,r,i),e.child)}function c_(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!a0(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,nC(n,e,o,r,i)):(n=am(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:Md,t(l,r)&&n.ref===e.ref)return Zs(n,e,i)}return e.flags|=1,n=qo(o,r),n.ref=e.ref,n.return=e,e.child=n}function nC(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(Md(o,r)&&n.ref===e.ref)if(Bi=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Bi=!0);else return e.lanes=n.lanes,Zs(n,e,i)}return Bv(n,e,t,r,i)}function rC(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(Fu,Xi),Xi|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,wr(Fu,Xi),Xi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,wr(Fu,Xi),Xi|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,wr(Fu,Xi),Xi|=r;return xi(n,e,i,t),e.child}function iC(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Bv(n,e,t,r,i){var o=Gi(t)?Fl:bi.current;return o=fc(e,o),qu(e,i),t=Yb(n,e,t,r,o,i),r=Wb(),n!==null&&!Bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Zs(n,e,i)):(Rr&&r&&Ob(e),e.flags|=1,xi(n,e,t,i),e.child)}function d_(n,e,t,r,i){if(Gi(t)){var o=!0;Nm(e)}else o=!1;if(qu(e,i),e.stateNode===null)nm(n,e),Jk(e,t,r),Uv(e,t,r,i),r=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var c=l.context,d=t.contextType;typeof d=="object"&&d!==null?d=Sa(d):(d=Gi(t)?Fl:bi.current,d=fc(e,d));var m=t.getDerivedStateFromProps,f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==d)&&a_(e,l,r,d),bo=!1;var h=e.memoizedState;l.state=h,Om(e,r,l,i),c=e.memoizedState,u!==r||h!==c||qi.current||bo?(typeof m=="function"&&(zv(e,t,m,r),c=e.memoizedState),(u=bo||i_(e,t,u,r,h,c,d))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=d,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Dk(n,e),u=e.memoizedProps,d=e.type===e.elementType?u:$a(e.type,u),l.props=d,f=e.pendingProps,h=l.context,c=t.contextType,typeof c=="object"&&c!==null?c=Sa(c):(c=Gi(t)?Fl:bi.current,c=fc(e,c));var g=t.getDerivedStateFromProps;(m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==f||h!==c)&&a_(e,l,r,c),bo=!1,h=e.memoizedState,l.state=h,Om(e,r,l,i);var p=e.memoizedState;u!==f||h!==p||qi.current||bo?(typeof g=="function"&&(zv(e,t,g,r),p=e.memoizedState),(d=bo||i_(e,t,d,r,h,p,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,p,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,p,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),l.props=r,l.state=p,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return $v(n,e,t,r,o,i)}function $v(n,e,t,r,i,o){iC(n,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Qw(e,t,!1),Zs(n,e,o);r=e.stateNode,xj.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&l?(e.child=mc(e,n.child,null,o),e.child=mc(e,null,u,o)):xi(n,e,u,o),e.memoizedState=r.state,i&&Qw(e,t,!0),e.child}function aC(n){var e=n.stateNode;e.pendingContext?Ww(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ww(n,e.context,!1),Gb(n,e.containerInfo)}function f_(n,e,t,r,i){return hc(),zb(i),e.flags|=256,xi(n,e,t,r),e.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Gv(n){return{baseLanes:n,cachePool:null,transitions:null}}function sC(n,e,t){var r=e.pendingProps,i=Dr.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),wr(Dr,i&1),n===null)return Ov(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,n=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=kg(l,r,0,null),n=Pl(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Gv(t),e.memoizedState=qv,n):Zb(e,l));if(i=n.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return wj(n,e,l,r,u,i,t);if(o){o=r.fallback,l=e.mode,i=n.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=qo(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=qo(u,o):(o=Pl(o,l,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=n.child.memoizedState,l=l===null?Gv(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=qv,r}return o=n.child,n=o.sibling,r=qo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Zb(n,e){return e=kg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ph(n,e,t,r){return r!==null&&zb(r),mc(e,n.child,null,t),n=Zb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function wj(n,e,t,r,i,o,l){if(t)return e.flags&256?(e.flags&=-257,r=py(Error(sn(422))),ph(n,e,l,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=kg({mode:"visible",children:r.children},i,0,null),o=Pl(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&mc(e,n.child,null,l),e.child.memoizedState=Gv(l),e.memoizedState=qv,o);if(!(e.mode&1))return ph(n,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(sn(419)),r=py(o,r,void 0),ph(n,e,l,r)}if(u=(l&n.childLanes)!==0,Bi||u){if(r=ri,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Xs(n,i),Qa(r,n,i,-1))}return i0(),r=py(Error(sn(421))),ph(n,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Fj.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,ta=Uo(i.nextSibling),na=e,Rr=!0,Va=null,n!==null&&(pa[ya++]=Gs,pa[ya++]=Hs,pa[ya++]=zl,Gs=n.id,Hs=n.overflow,zl=e),e=Zb(e,r.children),e.flags|=4096,e)}function h_(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Fv(n.return,e,t)}function yy(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function oC(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xi(n,e,r.children,t),r=Dr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h_(n,t,e);else if(n.tag===19)h_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(wr(Dr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Fm(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),yy(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Fm(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}yy(e,!0,t,null,o);break;case"together":yy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Zs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),jl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(sn(153));if(e.child!==null){for(n=e.child,t=qo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function _j(n,e,t){switch(e.tag){case 3:aC(e),hc();break;case 5:Lk(e);break;case 1:Gi(e.type)&&Nm(e);break;case 4:Gb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wr(Pm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wr(Dr,Dr.current&1),e.flags|=128,null):t&e.child.childLanes?sC(n,e,t):(wr(Dr,Dr.current&1),n=Zs(n,e,t),n!==null?n.sibling:null);wr(Dr,Dr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return oC(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wr(Dr,Dr.current),r)break;return null;case 22:case 23:return e.lanes=0,rC(n,e,t)}return Zs(n,e,t)}var lC,Hv,uC,cC;lC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Hv=function(){};uC=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,xl(xs.current);var o=null;switch(t){case"input":i=hv(n,i),r=hv(n,r),o=[];break;case"select":i=Mr({},i,{value:void 0}),r=Mr({},r,{value:void 0}),o=[];break;case"textarea":i=pv(n,i),r=pv(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=km)}vv(t,r);var l;t=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rd.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(t||(t={}),t[l]=c[l])}else t||(o||(o=[]),o.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ir("scroll",n),o||u===c||(o=[])):(o=o||[]).push(d,c))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};cC=function(n,e,t,r){t!==r&&(e.flags|=4)};function ed(n,e){if(!Rr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function yi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Ij(n,e,t){var r=e.pendingProps;switch(Fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return Gi(e.type)&&Cm(),yi(e),null;case 3:return r=e.stateNode,gc(),Ar(qi),Ar(bi),Vb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(mh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Va!==null&&(Jv(Va),Va=null))),Hv(n,e),yi(e),null;case 5:Hb(e);var i=xl(jd.current);if(t=e.type,n!==null&&e.stateNode!=null)uC(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(sn(166));return yi(e),null}if(n=xl(xs.current),mh(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[gs]=e,r[zd]=o,n=(e.mode&1)!==0,t){case"dialog":Ir("cancel",r),Ir("close",r);break;case"iframe":case"object":case"embed":Ir("load",r);break;case"video":case"audio":for(i=0;i<ld.length;i++)Ir(ld[i],r);break;case"source":Ir("error",r);break;case"img":case"image":case"link":Ir("error",r),Ir("load",r);break;case"details":Ir("toggle",r);break;case"input":Sw(r,o),Ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ir("invalid",r);break;case"textarea":ww(r,o),Ir("invalid",r)}vv(t,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&hh(r.textContent,u,n),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&hh(r.textContent,u,n),i=["children",""+u]):Rd.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Ir("scroll",r)}switch(t){case"input":ah(r),xw(r,o,!0);break;case"textarea":ah(r),_w(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=km)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=l.createElement(t,{is:r.is}):(n=l.createElement(t),t==="select"&&(l=n,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):n=l.createElementNS(n,t),n[gs]=e,n[zd]=r,lC(n,e,!1,!1),e.stateNode=n;e:{switch(l=Ev(t,r),t){case"dialog":Ir("cancel",n),Ir("close",n),i=r;break;case"iframe":case"object":case"embed":Ir("load",n),i=r;break;case"video":case"audio":for(i=0;i<ld.length;i++)Ir(ld[i],n);i=r;break;case"source":Ir("error",n),i=r;break;case"img":case"image":case"link":Ir("error",n),Ir("load",n),i=r;break;case"details":Ir("toggle",n),i=r;break;case"input":Sw(n,r),i=hv(n,r),Ir("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Mr({},r,{value:void 0}),Ir("invalid",n);break;case"textarea":ww(n,r),i=pv(n,r),Ir("invalid",n);break;default:i=r}vv(t,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?BR(n,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&UR(n,c)):o==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&kd(n,c):typeof c=="number"&&kd(n,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Rd.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ir("scroll",n):c!=null&&Sb(n,o,c,l))}switch(t){case"input":ah(n),xw(n,r,!1);break;case"textarea":ah(n),_w(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ko(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Uu(n,!!r.multiple,o,!1):r.defaultValue!=null&&Uu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=km)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(n&&e.stateNode!=null)cC(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(sn(166));if(t=xl(jd.current),xl(xs.current),mh(e)){if(r=e.stateNode,t=e.memoizedProps,r[gs]=e,(o=r.nodeValue!==t)&&(n=na,n!==null))switch(n.tag){case 3:hh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&hh(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[gs]=e,e.stateNode=r}return yi(e),null;case 13:if(Ar(Dr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rr&&ta!==null&&e.mode&1&&!(e.flags&128))Rk(),hc(),e.flags|=98560,o=!1;else if(o=mh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(sn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(sn(317));o[gs]=e}else hc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),o=!1}else Va!==null&&(Jv(Va),Va=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Dr.current&1?Zr===0&&(Zr=3):i0())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return gc(),Hv(n,e),n===null&&Od(e.stateNode.containerInfo),yi(e),null;case 10:return Bb(e.type._context),yi(e),null;case 17:return Gi(e.type)&&Cm(),yi(e),null;case 19:if(Ar(Dr),o=e.memoizedState,o===null)return yi(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)ed(o,!1);else{if(Zr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=Fm(n),l!==null){for(e.flags|=128,ed(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return wr(Dr,Dr.current&1|2),e.child}n=n.sibling}o.tail!==null&&$r()>yc&&(e.flags|=128,r=!0,ed(o,!1),e.lanes=4194304)}else{if(!r)if(n=Fm(l),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ed(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Rr)return yi(e),null}else 2*$r()-o.renderingStartTime>yc&&t!==1073741824&&(e.flags|=128,r=!0,ed(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$r(),e.sibling=null,t=Dr.current,wr(Dr,r?t&1|2:t&1),e):(yi(e),null);case 22:case 23:return r0(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xi&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(sn(156,e.tag))}function Aj(n,e){switch(Fb(e),e.tag){case 1:return Gi(e.type)&&Cm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gc(),Ar(qi),Ar(bi),Vb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Hb(e),null;case 13:if(Ar(Dr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(sn(340));hc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ar(Dr),null;case 4:return gc(),null;case 10:return Bb(e.type._context),null;case 22:case 23:return r0(),null;case 24:return null;default:return null}}var yh=!1,Ei=!1,Rj=typeof WeakSet=="function"?WeakSet:Set,xn=null;function Ou(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Br(n,e,r)}else t.current=null}function Vv(n,e,t){try{t()}catch(r){Br(n,e,r)}}var m_=!1;function kj(n,e){if(kv=Im,n=gk(),Mb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,c=-1,d=0,m=0,f=n,h=null;t:for(;;){for(var g;f!==t||i!==0&&f.nodeType!==3||(u=l+i),f!==o||r!==0&&f.nodeType!==3||(c=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===n)break t;if(h===t&&++d===i&&(u=l),h===o&&++m===r&&(c=l),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}t=u===-1||c===-1?null:{start:u,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Cv={focusedElem:n,selectionRange:t},Im=!1,xn=e;xn!==null;)if(e=xn,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,xn=n;else for(;xn!==null;){e=xn;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var E=p.memoizedProps,S=p.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?E:$a(e.type,E),S);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(sn(163))}}catch(z){Br(e,e.return,z)}if(n=e.sibling,n!==null){n.return=e.return,xn=n;break}xn=e.return}return p=m_,m_=!1,p}function Td(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&Vv(e,t,o)}i=i.next}while(i!==r)}}function Ag(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Kv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function dC(n){var e=n.alternate;e!==null&&(n.alternate=null,dC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[gs],delete e[zd],delete e[Lv],delete e[dj],delete e[fj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fC(n){return n.tag===5||n.tag===3||n.tag===4}function g_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=km));else if(r!==4&&(n=n.child,n!==null))for(Yv(n,e,t),n=n.sibling;n!==null;)Yv(n,e,t),n=n.sibling}function Wv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Wv(n,e,t),n=n.sibling;n!==null;)Wv(n,e,t),n=n.sibling}var si=null,Ha=!1;function fo(n,e,t){for(t=t.child;t!==null;)hC(n,e,t),t=t.sibling}function hC(n,e,t){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Eg,t)}catch{}switch(t.tag){case 5:Ei||Ou(t,e);case 6:var r=si,i=Ha;si=null,fo(n,e,t),si=r,Ha=i,si!==null&&(Ha?(n=si,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):si.removeChild(t.stateNode));break;case 18:si!==null&&(Ha?(n=si,t=t.stateNode,n.nodeType===8?cy(n.parentNode,t):n.nodeType===1&&cy(n,t),Ld(n)):cy(si,t.stateNode));break;case 4:r=si,i=Ha,si=t.stateNode.containerInfo,Ha=!0,fo(n,e,t),si=r,Ha=i;break;case 0:case 11:case 14:case 15:if(!Ei&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Vv(t,e,l),i=i.next}while(i!==r)}fo(n,e,t);break;case 1:if(!Ei&&(Ou(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(u){Br(t,e,u)}fo(n,e,t);break;case 21:fo(n,e,t);break;case 22:t.mode&1?(Ei=(r=Ei)||t.memoizedState!==null,fo(n,e,t),Ei=r):fo(n,e,t);break;default:fo(n,e,t)}}function p_(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Rj),e.forEach(function(r){var i=zj.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Fa(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:si=u.stateNode,Ha=!1;break e;case 3:si=u.stateNode.containerInfo,Ha=!0;break e;case 4:si=u.stateNode.containerInfo,Ha=!0;break e}u=u.return}if(si===null)throw Error(sn(160));hC(o,l,i),si=null,Ha=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Br(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mC(e,n),e=e.sibling}function mC(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fa(e,n),ss(n),r&4){try{Td(3,n,n.return),Ag(3,n)}catch(E){Br(n,n.return,E)}try{Td(5,n,n.return)}catch(E){Br(n,n.return,E)}}break;case 1:Fa(e,n),ss(n),r&512&&t!==null&&Ou(t,t.return);break;case 5:if(Fa(e,n),ss(n),r&512&&t!==null&&Ou(t,t.return),n.flags&32){var i=n.stateNode;try{kd(i,"")}catch(E){Br(n,n.return,E)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&OR(i,o),Ev(u,l);var d=Ev(u,o);for(l=0;l<c.length;l+=2){var m=c[l],f=c[l+1];m==="style"?BR(i,f):m==="dangerouslySetInnerHTML"?UR(i,f):m==="children"?kd(i,f):Sb(i,m,f,d)}switch(u){case"input":mv(i,o);break;case"textarea":FR(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Uu(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Uu(i,!!o.multiple,o.defaultValue,!0):Uu(i,!!o.multiple,o.multiple?[]:"",!1))}i[zd]=o}catch(E){Br(n,n.return,E)}}break;case 6:if(Fa(e,n),ss(n),r&4){if(n.stateNode===null)throw Error(sn(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(E){Br(n,n.return,E)}}break;case 3:if(Fa(e,n),ss(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(E){Br(n,n.return,E)}break;case 4:Fa(e,n),ss(n);break;case 13:Fa(e,n),ss(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(t0=$r())),r&4&&p_(n);break;case 22:if(m=t!==null&&t.memoizedState!==null,n.mode&1?(Ei=(d=Ei)||m,Fa(e,n),Ei=d):Fa(e,n),ss(n),r&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!m&&n.mode&1)for(xn=n,m=n.child;m!==null;){for(f=xn=m;xn!==null;){switch(h=xn,g=h.child,h.tag){case 0:case 11:case 14:case 15:Td(4,h,h.return);break;case 1:Ou(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(E){Br(r,t,E)}}break;case 5:Ou(h,h.return);break;case 22:if(h.memoizedState!==null){v_(f);continue}}g!==null?(g.return=h,xn=g):v_(f)}m=m.sibling}e:for(m=null,f=n;;){if(f.tag===5){if(m===null){m=f;try{i=f.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=jR("display",l))}catch(E){Br(n,n.return,E)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(E){Br(n,n.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fa(e,n),ss(n),r&4&&p_(n);break;case 21:break;default:Fa(e,n),ss(n)}}function ss(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(fC(t)){var r=t;break e}t=t.return}throw Error(sn(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kd(i,""),r.flags&=-33);var o=g_(n);Wv(n,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=g_(n);Yv(n,u,l);break;default:throw Error(sn(161))}}catch(c){Br(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Cj(n,e,t){xn=n,gC(n)}function gC(n,e,t){for(var r=(n.mode&1)!==0;xn!==null;){var i=xn,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||yh;if(!l){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Ei;u=yh;var d=Ei;if(yh=l,(Ei=c)&&!d)for(xn=i;xn!==null;)l=xn,c=l.child,l.tag===22&&l.memoizedState!==null?E_(i):c!==null?(c.return=l,xn=c):E_(i);for(;o!==null;)xn=o,gC(o),o=o.sibling;xn=i,yh=u,Ei=d}y_(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,xn=o):y_(n)}}function y_(n){for(;xn!==null;){var e=xn;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ei||Ag(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ei)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:$a(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&t_(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}t_(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Ld(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(sn(163))}Ei||e.flags&512&&Kv(e)}catch(h){Br(e,e.return,h)}}if(e===n){xn=null;break}if(t=e.sibling,t!==null){t.return=e.return,xn=t;break}xn=e.return}}function v_(n){for(;xn!==null;){var e=xn;if(e===n){xn=null;break}var t=e.sibling;if(t!==null){t.return=e.return,xn=t;break}xn=e.return}}function E_(n){for(;xn!==null;){var e=xn;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ag(4,e)}catch(c){Br(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Br(e,i,c)}}var o=e.return;try{Kv(e)}catch(c){Br(e,o,c)}break;case 5:var l=e.return;try{Kv(e)}catch(c){Br(e,l,c)}}}catch(c){Br(e,e.return,c)}if(e===n){xn=null;break}var u=e.sibling;if(u!==null){u.return=e.return,xn=u;break}xn=e.return}}var Nj=Math.ceil,jm=to.ReactCurrentDispatcher,Jb=to.ReactCurrentOwner,Ea=to.ReactCurrentBatchConfig,lr=0,ri=null,Yr=null,di=0,Xi=0,Fu=nl(0),Zr=0,Gd=null,jl=0,Rg=0,e0=0,Sd=null,ji=null,t0=0,yc=1/0,Us=null,Bm=!1,Qv=null,Bo=null,vh=!1,Po=null,$m=0,xd=0,Xv=null,rm=-1,im=0;function Ai(){return lr&6?$r():rm!==-1?rm:rm=$r()}function $o(n){return n.mode&1?lr&2&&di!==0?di&-di:mj.transition!==null?(im===0&&(im=JR()),im):(n=yr,n!==0||(n=window.event,n=n===void 0?16:sk(n.type)),n):1}function Qa(n,e,t,r){if(50<xd)throw xd=0,Xv=null,Error(sn(185));pf(n,t,r),(!(lr&2)||n!==ri)&&(n===ri&&(!(lr&2)&&(Rg|=t),Zr===4&&wo(n,di)),Hi(n,r),t===1&&lr===0&&!(e.mode&1)&&(yc=$r()+500,wg&&rl()))}function Hi(n,e){var t=n.callbackNode;mU(n,e);var r=_m(n,n===ri?di:0);if(r===0)t!==null&&Rw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Rw(t),e===1)n.tag===0?hj(b_.bind(null,n)):_k(b_.bind(null,n)),uj(function(){!(lr&6)&&rl()}),t=null;else{switch(ek(r)){case 1:t=Ab;break;case 4:t=XR;break;case 16:t=wm;break;case 536870912:t=ZR;break;default:t=wm}t=xC(t,pC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function pC(n,e){if(rm=-1,im=0,lr&6)throw Error(sn(327));var t=n.callbackNode;if(Gu()&&n.callbackNode!==t)return null;var r=_m(n,n===ri?di:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=qm(n,r);else{e=r;var i=lr;lr|=2;var o=vC();(ri!==n||di!==e)&&(Us=null,yc=$r()+500,Ll(n,e));do try{Pj();break}catch(u){yC(n,u)}while(!0);jb(),jm.current=o,lr=i,Yr!==null?e=0:(ri=null,di=0,e=Zr)}if(e!==0){if(e===2&&(i=wv(n),i!==0&&(r=i,e=Zv(n,i))),e===1)throw t=Gd,Ll(n,0),wo(n,r),Hi(n,$r()),t;if(e===6)wo(n,r);else{if(i=n.current.alternate,!(r&30)&&!Dj(i)&&(e=qm(n,r),e===2&&(o=wv(n),o!==0&&(r=o,e=Zv(n,o))),e===1))throw t=Gd,Ll(n,0),wo(n,r),Hi(n,$r()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(sn(345));case 2:El(n,ji,Us);break;case 3:if(wo(n,r),(r&130023424)===r&&(e=t0+500-$r(),10<e)){if(_m(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ai(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Dv(El.bind(null,n,ji,Us),e);break}El(n,ji,Us);break;case 4:if(wo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var l=31-Wa(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=$r()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nj(r/1960))-r,10<r){n.timeoutHandle=Dv(El.bind(null,n,ji,Us),r);break}El(n,ji,Us);break;case 5:El(n,ji,Us);break;default:throw Error(sn(329))}}}return Hi(n,$r()),n.callbackNode===t?pC.bind(null,n):null}function Zv(n,e){var t=Sd;return n.current.memoizedState.isDehydrated&&(Ll(n,e).flags|=256),n=qm(n,e),n!==2&&(e=ji,ji=t,e!==null&&Jv(e)),n}function Jv(n){ji===null?ji=n:ji.push.apply(ji,n)}function Dj(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!Xa(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(n,e){for(e&=~e0,e&=~Rg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Wa(e),r=1<<t;n[t]=-1,e&=~r}}function b_(n){if(lr&6)throw Error(sn(327));Gu();var e=_m(n,0);if(!(e&1))return Hi(n,$r()),null;var t=qm(n,e);if(n.tag!==0&&t===2){var r=wv(n);r!==0&&(e=r,t=Zv(n,r))}if(t===1)throw t=Gd,Ll(n,0),wo(n,e),Hi(n,$r()),t;if(t===6)throw Error(sn(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,El(n,ji,Us),Hi(n,$r()),null}function n0(n,e){var t=lr;lr|=1;try{return n(e)}finally{lr=t,lr===0&&(yc=$r()+500,wg&&rl())}}function Bl(n){Po!==null&&Po.tag===0&&!(lr&6)&&Gu();var e=lr;lr|=1;var t=Ea.transition,r=yr;try{if(Ea.transition=null,yr=1,n)return n()}finally{yr=r,Ea.transition=t,lr=e,!(lr&6)&&rl()}}function r0(){Xi=Fu.current,Ar(Fu)}function Ll(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,lj(t)),Yr!==null)for(t=Yr.return;t!==null;){var r=t;switch(Fb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cm();break;case 3:gc(),Ar(qi),Ar(bi),Vb();break;case 5:Hb(r);break;case 4:gc();break;case 13:Ar(Dr);break;case 19:Ar(Dr);break;case 10:Bb(r.type._context);break;case 22:case 23:r0()}t=t.return}if(ri=n,Yr=n=qo(n.current,null),di=Xi=e,Zr=0,Gd=null,e0=Rg=jl=0,ji=Sd=null,Sl!==null){for(e=0;e<Sl.length;e++)if(t=Sl[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}t.pending=r}Sl=null}return n}function yC(n,e){do{var t=Yr;try{if(jb(),em.current=Um,zm){for(var r=Pr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zm=!1}if(Ul=0,ti=Qr=Pr=null,bd=!1,Bd=0,Jb.current=null,t===null||t.return===null){Zr=1,Gd=e,Yr=null;break}e:{var o=n,l=t.return,u=t,c=e;if(e=di,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=u,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var g=o_(l);if(g!==null){g.flags&=-257,l_(g,l,u,o,e),g.mode&1&&s_(o,d,e),e=g,c=d;var p=e.updateQueue;if(p===null){var E=new Set;E.add(c),e.updateQueue=E}else p.add(c);break e}else{if(!(e&1)){s_(o,d,e),i0();break e}c=Error(sn(426))}}else if(Rr&&u.mode&1){var S=o_(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),l_(S,l,u,o,e),zb(pc(c,u));break e}}o=c=pc(c,u),Zr!==4&&(Zr=2),Sd===null?Sd=[o]:Sd.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=eC(o,c,e);e_(o,x);break e;case 1:u=c;var _=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Bo===null||!Bo.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=tC(o,u,e);e_(o,z);break e}}o=o.return}while(o!==null)}bC(t)}catch(ie){e=ie,Yr===t&&t!==null&&(Yr=t=t.return);continue}break}while(!0)}function vC(){var n=jm.current;return jm.current=Um,n===null?Um:n}function i0(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),ri===null||!(jl&268435455)&&!(Rg&268435455)||wo(ri,di)}function qm(n,e){var t=lr;lr|=2;var r=vC();(ri!==n||di!==e)&&(Us=null,Ll(n,e));do try{Lj();break}catch(i){yC(n,i)}while(!0);if(jb(),lr=t,jm.current=r,Yr!==null)throw Error(sn(261));return ri=null,di=0,Zr}function Lj(){for(;Yr!==null;)EC(Yr)}function Pj(){for(;Yr!==null&&!aU();)EC(Yr)}function EC(n){var e=SC(n.alternate,n,Xi);n.memoizedProps=n.pendingProps,e===null?bC(n):Yr=e,Jb.current=null}function bC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Aj(t,e),t!==null){t.flags&=32767,Yr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Zr=6,Yr=null;return}}else if(t=Ij(t,e,Xi),t!==null){Yr=t;return}if(e=e.sibling,e!==null){Yr=e;return}Yr=e=n}while(e!==null);Zr===0&&(Zr=5)}function El(n,e,t){var r=yr,i=Ea.transition;try{Ea.transition=null,yr=1,Mj(n,e,t,r)}finally{Ea.transition=i,yr=r}return null}function Mj(n,e,t,r){do Gu();while(Po!==null);if(lr&6)throw Error(sn(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(sn(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(gU(n,o),n===ri&&(Yr=ri=null,di=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||vh||(vh=!0,xC(wm,function(){return Gu(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Ea.transition,Ea.transition=null;var l=yr;yr=1;var u=lr;lr|=4,Jb.current=null,kj(n,t),mC(t,n),tj(Cv),Im=!!kv,Cv=kv=null,n.current=t,Cj(t),sU(),lr=u,yr=l,Ea.transition=o}else n.current=t;if(vh&&(vh=!1,Po=n,$m=i),o=n.pendingLanes,o===0&&(Bo=null),uU(t.stateNode),Hi(n,$r()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bm)throw Bm=!1,n=Qv,Qv=null,n;return $m&1&&n.tag!==0&&Gu(),o=n.pendingLanes,o&1?n===Xv?xd++:(xd=0,Xv=n):xd=0,rl(),null}function Gu(){if(Po!==null){var n=ek($m),e=Ea.transition,t=yr;try{if(Ea.transition=null,yr=16>n?16:n,Po===null)var r=!1;else{if(n=Po,Po=null,$m=0,lr&6)throw Error(sn(331));var i=lr;for(lr|=4,xn=n.current;xn!==null;){var o=xn,l=o.child;if(xn.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(xn=d;xn!==null;){var m=xn;switch(m.tag){case 0:case 11:case 15:Td(8,m,o)}var f=m.child;if(f!==null)f.return=m,xn=f;else for(;xn!==null;){m=xn;var h=m.sibling,g=m.return;if(dC(m),m===d){xn=null;break}if(h!==null){h.return=g,xn=h;break}xn=g}}}var p=o.alternate;if(p!==null){var E=p.child;if(E!==null){p.child=null;do{var S=E.sibling;E.sibling=null,E=S}while(E!==null)}}xn=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,xn=l;else e:for(;xn!==null;){if(o=xn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Td(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,xn=x;break e}xn=o.return}}var _=n.current;for(xn=_;xn!==null;){l=xn;var A=l.child;if(l.subtreeFlags&2064&&A!==null)A.return=l,xn=A;else e:for(l=_;xn!==null;){if(u=xn,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ag(9,u)}}catch(ie){Br(u,u.return,ie)}if(u===l){xn=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,xn=z;break e}xn=u.return}}if(lr=i,rl(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Eg,n)}catch{}r=!0}return r}finally{yr=t,Ea.transition=e}}return!1}function T_(n,e,t){e=pc(t,e),e=eC(n,e,1),n=jo(n,e,1),e=Ai(),n!==null&&(pf(n,1,e),Hi(n,e))}function Br(n,e,t){if(n.tag===3)T_(n,n,t);else for(;e!==null;){if(e.tag===3){T_(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bo===null||!Bo.has(r))){n=pc(t,n),n=tC(e,n,1),e=jo(e,n,1),n=Ai(),e!==null&&(pf(e,1,n),Hi(e,n));break}}e=e.return}}function Oj(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ai(),n.pingedLanes|=n.suspendedLanes&t,ri===n&&(di&t)===t&&(Zr===4||Zr===3&&(di&130023424)===di&&500>$r()-t0?Ll(n,0):e0|=t),Hi(n,e)}function TC(n,e){e===0&&(n.mode&1?(e=lh,lh<<=1,!(lh&130023424)&&(lh=4194304)):e=1);var t=Ai();n=Xs(n,e),n!==null&&(pf(n,e,t),Hi(n,t))}function Fj(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),TC(n,t)}function zj(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(sn(314))}r!==null&&r.delete(e),TC(n,t)}var SC;SC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qi.current)Bi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Bi=!1,_j(n,e,t);Bi=!!(n.flags&131072)}else Bi=!1,Rr&&e.flags&1048576&&Ik(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nm(n,e),n=e.pendingProps;var i=fc(e,bi.current);qu(e,t),i=Yb(null,e,r,n,i,t);var o=Wb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gi(r)?(o=!0,Nm(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qb(e),i.updater=Ig,e.stateNode=i,i._reactInternals=e,Uv(e,r,n,t),e=$v(null,e,r,!0,o,t)):(e.tag=0,Rr&&o&&Ob(e),xi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(nm(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jj(r),n=$a(r,n),i){case 0:e=Bv(null,e,r,n,t);break e;case 1:e=d_(null,e,r,n,t);break e;case 11:e=u_(null,e,r,n,t);break e;case 14:e=c_(null,e,r,$a(r.type,n),t);break e}throw Error(sn(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$a(r,i),Bv(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$a(r,i),d_(n,e,r,i,t);case 3:e:{if(aC(e),n===null)throw Error(sn(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Dk(n,e),Om(e,r,null,t);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=pc(Error(sn(423)),e),e=f_(n,e,r,t,i);break e}else if(r!==i){i=pc(Error(sn(424)),e),e=f_(n,e,r,t,i);break e}else for(ta=Uo(e.stateNode.containerInfo.firstChild),na=e,Rr=!0,Va=null,t=Ck(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(hc(),r===i){e=Zs(n,e,t);break e}xi(n,e,r,t)}e=e.child}return e;case 5:return Lk(e),n===null&&Ov(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,l=i.children,Nv(r,i)?l=null:o!==null&&Nv(r,o)&&(e.flags|=32),iC(n,e),xi(n,e,l,t),e.child;case 6:return n===null&&Ov(e),null;case 13:return sC(n,e,t);case 4:return Gb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=mc(e,null,r,t):xi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$a(r,i),u_(n,e,r,i,t);case 7:return xi(n,e,e.pendingProps,t),e.child;case 8:return xi(n,e,e.pendingProps.children,t),e.child;case 12:return xi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,wr(Pm,r._currentValue),r._currentValue=l,o!==null)if(Xa(o.value,l)){if(o.children===i.children&&!qi.current){e=Zs(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ks(-1,t&-t),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}o.lanes|=t,c=o.alternate,c!==null&&(c.lanes|=t),Fv(o.return,t,e),u.lanes|=t;break}c=c.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(sn(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),Fv(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}xi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qu(e,t),i=Sa(i),r=r(i),e.flags|=1,xi(n,e,r,t),e.child;case 14:return r=e.type,i=$a(r,e.pendingProps),i=$a(r.type,i),c_(n,e,r,i,t);case 15:return nC(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$a(r,i),nm(n,e),e.tag=1,Gi(r)?(n=!0,Nm(e)):n=!1,qu(e,t),Jk(e,r,i),Uv(e,r,i,t),$v(null,e,r,!0,n,t);case 19:return oC(n,e,t);case 22:return rC(n,e,t)}throw Error(sn(156,e.tag))};function xC(n,e){return QR(n,e)}function Uj(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(n,e,t,r){return new Uj(n,e,t,r)}function a0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jj(n){if(typeof n=="function")return a0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wb)return 11;if(n===_b)return 14}return 2}function qo(n,e){var t=n.alternate;return t===null?(t=va(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function am(n,e,t,r,i,o){var l=2;if(r=n,typeof n=="function")a0(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case Au:return Pl(t.children,i,o,e);case xb:l=8,i|=8;break;case uv:return n=va(12,t,e,i|2),n.elementType=uv,n.lanes=o,n;case cv:return n=va(13,t,e,i),n.elementType=cv,n.lanes=o,n;case dv:return n=va(19,t,e,i),n.elementType=dv,n.lanes=o,n;case LR:return kg(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case NR:l=10;break e;case DR:l=9;break e;case wb:l=11;break e;case _b:l=14;break e;case Eo:l=16,r=null;break e}throw Error(sn(130,n==null?n:typeof n,""))}return e=va(l,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function Pl(n,e,t,r){return n=va(7,n,r,e),n.lanes=t,n}function kg(n,e,t,r){return n=va(22,n,r,e),n.elementType=LR,n.lanes=t,n.stateNode={isHidden:!1},n}function vy(n,e,t){return n=va(6,n,null,e),n.lanes=t,n}function Ey(n,e,t){return e=va(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Bj(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jp(0),this.expirationTimes=Jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function s0(n,e,t,r,i,o,l,u,c){return n=new Bj(n,e,t,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=va(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},qb(o),n}function $j(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Iu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function wC(n){if(!n)return Yo;n=n._reactInternals;e:{if(Zl(n)!==n||n.tag!==1)throw Error(sn(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(sn(171))}if(n.tag===1){var t=n.type;if(Gi(t))return wk(n,t,e)}return e}function _C(n,e,t,r,i,o,l,u,c){return n=s0(t,r,!0,n,i,o,l,u,c),n.context=wC(null),t=n.current,r=Ai(),i=$o(t),o=Ks(r,i),o.callback=e??null,jo(t,o,i),n.current.lanes=i,pf(n,i,r),Hi(n,r),n}function Cg(n,e,t,r){var i=e.current,o=Ai(),l=$o(i);return t=wC(t),e.context===null?e.context=t:e.pendingContext=t,e=Ks(o,l),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=jo(i,e,l),n!==null&&(Qa(n,i,l,o),Jh(n,i,l)),l}function Gm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function S_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function o0(n,e){S_(n,e),(n=n.alternate)&&S_(n,e)}function qj(){return null}var IC=typeof reportError=="function"?reportError:function(n){console.error(n)};function l0(n){this._internalRoot=n}Ng.prototype.render=l0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(sn(409));Cg(n,e,null,null)};Ng.prototype.unmount=l0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Bl(function(){Cg(null,n,null,null)}),e[Qs]=null}};function Ng(n){this._internalRoot=n}Ng.prototype.unstable_scheduleHydration=function(n){if(n){var e=rk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xo.length&&e!==0&&e<xo[t].priority;t++);xo.splice(t,0,n),t===0&&ak(n)}};function u0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Dg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function x_(){}function Gj(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Gm(l);o.call(d)}}var l=_C(e,r,n,0,null,!1,!1,"",x_);return n._reactRootContainer=l,n[Qs]=l.current,Od(n.nodeType===8?n.parentNode:n),Bl(),l}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Gm(c);u.call(d)}}var c=s0(n,0,!1,null,null,!1,!1,"",x_);return n._reactRootContainer=c,n[Qs]=c.current,Od(n.nodeType===8?n.parentNode:n),Bl(function(){Cg(e,c,t,r)}),c}function Lg(n,e,t,r,i){var o=t._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var u=i;i=function(){var c=Gm(l);u.call(c)}}Cg(e,l,n,i)}else l=Gj(t,e,n,i,r);return Gm(l)}tk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=od(e.pendingLanes);t!==0&&(Rb(e,t|1),Hi(e,$r()),!(lr&6)&&(yc=$r()+500,rl()))}break;case 13:Bl(function(){var r=Xs(n,1);if(r!==null){var i=Ai();Qa(r,n,1,i)}}),o0(n,1)}};kb=function(n){if(n.tag===13){var e=Xs(n,134217728);if(e!==null){var t=Ai();Qa(e,n,134217728,t)}o0(n,134217728)}};nk=function(n){if(n.tag===13){var e=$o(n),t=Xs(n,e);if(t!==null){var r=Ai();Qa(t,n,e,r)}o0(n,e)}};rk=function(){return yr};ik=function(n,e){var t=yr;try{return yr=n,e()}finally{yr=t}};Tv=function(n,e,t){switch(e){case"input":if(mv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=xg(r);if(!i)throw Error(sn(90));MR(r),mv(r,i)}}}break;case"textarea":FR(n,t);break;case"select":e=t.value,e!=null&&Uu(n,!!t.multiple,e,!1)}};GR=n0;HR=Bl;var Hj={usingClientEntryPoint:!1,Events:[vf,Nu,xg,$R,qR,n0]},td={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vj={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=YR(n),n===null?null:n.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||qj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{Eg=Eh.inject(Vj),Ss=Eh}catch{}}sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hj;sa.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u0(e))throw Error(sn(200));return $j(n,e,null,t)};sa.createRoot=function(n,e){if(!u0(n))throw Error(sn(299));var t=!1,r="",i=IC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=s0(n,1,!1,null,null,t,!1,r,i),n[Qs]=e.current,Od(n.nodeType===8?n.parentNode:n),new l0(e)};sa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(sn(188)):(n=Object.keys(n).join(","),Error(sn(268,n)));return n=YR(e),n=n===null?null:n.stateNode,n};sa.flushSync=function(n){return Bl(n)};sa.hydrate=function(n,e,t){if(!Dg(e))throw Error(sn(200));return Lg(null,n,e,!0,t)};sa.hydrateRoot=function(n,e,t){if(!u0(n))throw Error(sn(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",l=IC;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=_C(e,null,n,1,t??null,i,!1,o,l),n[Qs]=e.current,Od(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ng(e)};sa.render=function(n,e,t){if(!Dg(e))throw Error(sn(200));return Lg(null,n,e,!1,t)};sa.unmountComponentAtNode=function(n){if(!Dg(n))throw Error(sn(40));return n._reactRootContainer?(Bl(function(){Lg(null,null,n,!1,function(){n._reactRootContainer=null,n[Qs]=null})}),!0):!1};sa.unstable_batchedUpdates=n0;sa.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Dg(t))throw Error(sn(200));if(n==null||n._reactInternals===void 0)throw Error(sn(38));return Lg(n,e,t,!1,r)};sa.version="18.3.1-next-f1338f8080-20240426";function AC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AC)}catch(n){console.error(n)}}AC(),AR.exports=sa;var Jl=AR.exports;const RC=gR(Jl);var kC,w_=Jl;kC=w_.createRoot,w_.hydrateRoot;const Kj=1,Yj=1e6;let by=0;function Wj(){return by=(by+1)%Number.MAX_SAFE_INTEGER,by.toString()}const Ty=new Map,__=n=>{if(Ty.has(n))return;const e=setTimeout(()=>{Ty.delete(n),wd({type:"REMOVE_TOAST",toastId:n})},Yj);Ty.set(n,e)},Qj=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,Kj)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?__(t):n.toasts.forEach(r=>{__(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},sm=[];let om={toasts:[]};function wd(n){om=Qj(om,n),sm.forEach(e=>{e(om)})}function Xj({...n}){const e=Wj(),t=i=>wd({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>wd({type:"DISMISS_TOAST",toastId:e});return wd({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Zj(){const[n,e]=j.useState(om);return j.useEffect(()=>(sm.push(e),()=>{const t=sm.indexOf(e);t>-1&&sm.splice(t,1)}),[n]),{...n,toast:Xj,dismiss:t=>wd({type:"DISMISS_TOAST",toastId:t})}}function cn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function I_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Pg(...n){return e=>{let t=!1;const r=n.map(i=>{const o=I_(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():I_(n[i],null)}}}}function Yn(...n){return j.useCallback(Pg(...n),n)}function Jj(n,e){const t=j.createContext(e),r=o=>{const{children:l,...u}=o,c=j.useMemo(()=>u,Object.values(u));return T.jsx(t.Provider,{value:c,children:l})};r.displayName=n+"Provider";function i(o){const l=j.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function Ki(n,e=[]){let t=[];function r(o,l){const u=j.createContext(l),c=t.length;t=[...t,l];const d=f=>{var x;const{scope:h,children:g,...p}=f,E=((x=h==null?void 0:h[n])==null?void 0:x[c])||u,S=j.useMemo(()=>p,Object.values(p));return T.jsx(E.Provider,{value:S,children:g})};d.displayName=o+"Provider";function m(f,h){var E;const g=((E=h==null?void 0:h[n])==null?void 0:E[c])||u,p=j.useContext(g);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[d,m]}const i=()=>{const o=t.map(l=>j.createContext(l));return function(u){const c=(u==null?void 0:u[n])||o;return j.useMemo(()=>({[`__scope${n}`]:{...u,[n]:c}}),[u,c])}};return i.scopeName=n,[r,eB(i,...e)]}function eB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=r.reduce((u,{useScope:c,scopeName:d})=>{const f=c(o)[`__scope${d}`];return{...u,...f}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function $l(n){const e=nB(n),t=j.forwardRef((r,i)=>{const{children:o,...l}=r,u=j.Children.toArray(o),c=u.find(iB);if(c){const d=c.props.children,m=u.map(f=>f===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:f);return T.jsx(e,{...l,ref:i,children:j.isValidElement(d)?j.cloneElement(d,void 0,m):null})}return T.jsx(e,{...l,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var tB=$l("Slot");function nB(n){const e=j.forwardRef((t,r)=>{const{children:i,...o}=t;if(j.isValidElement(i)){const l=sB(i),u=aB(o,i.props);return i.type!==j.Fragment&&(u.ref=r?Pg(r,l):l),j.cloneElement(i,u)}return j.Children.count(i)>1?j.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var CC=Symbol("radix.slottable");function rB(n){const e=({children:t})=>T.jsx(T.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=CC,e}function iB(n){return j.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===CC}function aB(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...u)=>{const c=o(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function sB(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function bf(n){const e=n+"CollectionProvider",[t,r]=Ki(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=E=>{const{scope:S,children:x}=E,_=ln.useRef(null),A=ln.useRef(new Map).current;return T.jsx(i,{scope:S,itemMap:A,collectionRef:_,children:x})};l.displayName=e;const u=n+"CollectionSlot",c=$l(u),d=ln.forwardRef((E,S)=>{const{scope:x,children:_}=E,A=o(u,x),z=Yn(S,A.collectionRef);return T.jsx(c,{ref:z,children:_})});d.displayName=u;const m=n+"CollectionItemSlot",f="data-radix-collection-item",h=$l(m),g=ln.forwardRef((E,S)=>{const{scope:x,children:_,...A}=E,z=ln.useRef(null),ie=Yn(S,z),he=o(m,x);return ln.useEffect(()=>(he.itemMap.set(z,{ref:z,...A}),()=>void he.itemMap.delete(z))),T.jsx(h,{[f]:"",ref:ie,children:_})});g.displayName=m;function p(E){const S=o(n+"CollectionConsumer",E);return ln.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const A=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((he,P)=>A.indexOf(he.ref.current)-A.indexOf(P.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:l,Slot:d,ItemSlot:g},p,r]}var oB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dn=oB.reduce((n,e)=>{const t=$l(`Primitive.${e}`),r=j.forwardRef((i,o)=>{const{asChild:l,...u}=i,c=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(c,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function c0(n,e){n&&Jl.flushSync(()=>n.dispatchEvent(e))}function Vi(n){const e=j.useRef(n);return j.useEffect(()=>{e.current=n}),j.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function lB(n,e=globalThis==null?void 0:globalThis.document){const t=Vi(n);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var uB="DismissableLayer",eE="dismissableLayer.update",cB="dismissableLayer.pointerDownOutside",dB="dismissableLayer.focusOutside",A_,NC=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_c=j.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...c}=n,d=j.useContext(NC),[m,f]=j.useState(null),h=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=j.useState({}),p=Yn(e,P=>f(P)),E=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=E.indexOf(S),_=m?E.indexOf(m):-1,A=d.layersWithOutsidePointerEventsDisabled.size>0,z=_>=x,ie=hB(P=>{const U=P.target,ce=[...d.branches].some(de=>de.contains(U));!z||ce||(i==null||i(P),l==null||l(P),P.defaultPrevented||u==null||u())},h),he=mB(P=>{const U=P.target;[...d.branches].some(de=>de.contains(U))||(o==null||o(P),l==null||l(P),P.defaultPrevented||u==null||u())},h);return lB(P=>{_===d.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},h),j.useEffect(()=>{if(m)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(A_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),R_(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=A_)}},[m,h,t,d]),j.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),R_())},[m,d]),j.useEffect(()=>{const P=()=>g({});return document.addEventListener(eE,P),()=>document.removeEventListener(eE,P)},[]),T.jsx(Dn.div,{...c,ref:p,style:{pointerEvents:A?z?"auto":"none":void 0,...n.style},onFocusCapture:cn(n.onFocusCapture,he.onFocusCapture),onBlurCapture:cn(n.onBlurCapture,he.onBlurCapture),onPointerDownCapture:cn(n.onPointerDownCapture,ie.onPointerDownCapture)})});_c.displayName=uB;var fB="DismissableLayerBranch",DC=j.forwardRef((n,e)=>{const t=j.useContext(NC),r=j.useRef(null),i=Yn(e,r);return j.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),T.jsx(Dn.div,{...n,ref:i})});DC.displayName=fB;function hB(n,e=globalThis==null?void 0:globalThis.document){const t=Vi(n),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let c=function(){LC(cB,t,d,{discrete:!0})};const d={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function mB(n,e=globalThis==null?void 0:globalThis.document){const t=Vi(n),r=j.useRef(!1);return j.useEffect(()=>{const i=o=>{o.target&&!r.current&&LC(dB,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function R_(){const n=new CustomEvent(eE);document.dispatchEvent(n)}function LC(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?c0(i,o):i.dispatchEvent(o)}var gB=_c,pB=DC,ii=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},yB="Portal",Tf=j.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[i,o]=j.useState(!1);ii(()=>o(!0),[]);const l=t||i&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?RC.createPortal(T.jsx(Dn.div,{...r,ref:e}),l):null});Tf.displayName=yB;function vB(n,e){return j.useReducer((t,r)=>e[t][r]??t,n)}var Ia=n=>{const{present:e,children:t}=n,r=EB(e),i=typeof t=="function"?t({present:r.isPresent}):j.Children.only(t),o=Yn(r.ref,bB(i));return typeof t=="function"||r.isPresent?j.cloneElement(i,{ref:o}):null};Ia.displayName="Presence";function EB(n){const[e,t]=j.useState(),r=j.useRef(null),i=j.useRef(n),o=j.useRef("none"),l=n?"mounted":"unmounted",[u,c]=vB(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=bh(r.current);o.current=u==="mounted"?d:"none"},[u]),ii(()=>{const d=r.current,m=i.current;if(m!==n){const h=o.current,g=bh(d);n?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(m&&h!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),ii(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,f=g=>{const E=bh(r.current).includes(g.animationName);if(g.target===e&&E&&(c("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},h=g=>{g.target===e&&(o.current=bh(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:j.useCallback(d=>{r.current=d?getComputedStyle(d):null,t(d)},[])}}function bh(n){return(n==null?void 0:n.animationName)||"none"}function bB(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var TB=Eb[" useInsertionEffect ".trim().toString()]||ii;function Za({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,l]=SB({defaultProp:e,onChange:t}),u=n!==void 0,c=u?n:i;{const m=j.useRef(n!==void 0);j.useEffect(()=>{const f=m.current;f!==u&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const d=j.useCallback(m=>{var f;if(u){const h=xB(m)?m(n):m;h!==n&&((f=l.current)==null||f.call(l,h))}else o(m)},[u,n,o,l]);return[c,d]}function SB({defaultProp:n,onChange:e}){const[t,r]=j.useState(n),i=j.useRef(t),o=j.useRef(e);return TB(()=>{o.current=e},[e]),j.useEffect(()=>{var l;i.current!==t&&((l=o.current)==null||l.call(o,t),i.current=t)},[t,i]),[t,r,o]}function xB(n){return typeof n=="function"}var PC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wB="VisuallyHidden",Mg=j.forwardRef((n,e)=>T.jsx(Dn.span,{...n,ref:e,style:{...PC,...n.style}}));Mg.displayName=wB;var _B=Mg,d0="ToastProvider",[f0,IB,AB]=bf("Toast"),[MC]=Ki("Toast",[AB]),[RB,Og]=MC(d0),OC=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:l}=n,[u,c]=j.useState(null),[d,m]=j.useState(0),f=j.useRef(!1),h=j.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${d0}\`. Expected non-empty \`string\`.`),T.jsx(f0.Provider,{scope:e,children:T.jsx(RB,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:d,viewport:u,onViewportChange:c,onToastAdd:j.useCallback(()=>m(g=>g+1),[]),onToastRemove:j.useCallback(()=>m(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:l})})};OC.displayName=d0;var FC="ToastViewport",kB=["F8"],tE="toast.viewportPause",nE="toast.viewportResume",zC=j.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=kB,label:i="Notifications ({hotkey})",...o}=n,l=Og(FC,t),u=IB(t),c=j.useRef(null),d=j.useRef(null),m=j.useRef(null),f=j.useRef(null),h=Yn(e,f,l.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=l.toastCount>0;j.useEffect(()=>{const S=x=>{var A;r.length!==0&&r.every(z=>x[z]||x.code===z)&&((A=f.current)==null||A.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),j.useEffect(()=>{const S=c.current,x=f.current;if(p&&S&&x){const _=()=>{if(!l.isClosePausedRef.current){const he=new CustomEvent(tE);x.dispatchEvent(he),l.isClosePausedRef.current=!0}},A=()=>{if(l.isClosePausedRef.current){const he=new CustomEvent(nE);x.dispatchEvent(he),l.isClosePausedRef.current=!1}},z=he=>{!S.contains(he.relatedTarget)&&A()},ie=()=>{S.contains(document.activeElement)||A()};return S.addEventListener("focusin",_),S.addEventListener("focusout",z),S.addEventListener("pointermove",_),S.addEventListener("pointerleave",ie),window.addEventListener("blur",_),window.addEventListener("focus",A),()=>{S.removeEventListener("focusin",_),S.removeEventListener("focusout",z),S.removeEventListener("pointermove",_),S.removeEventListener("pointerleave",ie),window.removeEventListener("blur",_),window.removeEventListener("focus",A)}}},[p,l.isClosePausedRef]);const E=j.useCallback(({tabbingDirection:S})=>{const _=u().map(A=>{const z=A.ref.current,ie=[z,...$B(z)];return S==="forwards"?ie:ie.reverse()});return(S==="forwards"?_.reverse():_).flat()},[u]);return j.useEffect(()=>{const S=f.current;if(S){const x=_=>{var ie,he,P;const A=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!A){const U=document.activeElement,ce=_.shiftKey;if(_.target===S&&ce){(ie=d.current)==null||ie.focus();return}const je=E({tabbingDirection:ce?"backwards":"forwards"}),Se=je.findIndex(ze=>ze===U);Sy(je.slice(Se+1))?_.preventDefault():ce?(he=d.current)==null||he.focus():(P=m.current)==null||P.focus()}};return S.addEventListener("keydown",x),()=>S.removeEventListener("keydown",x)}},[u,E]),T.jsxs(pB,{ref:c,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&T.jsx(rE,{ref:d,onFocusFromOutsideViewport:()=>{const S=E({tabbingDirection:"forwards"});Sy(S)}}),T.jsx(f0.Slot,{scope:t,children:T.jsx(Dn.ol,{tabIndex:-1,...o,ref:h})}),p&&T.jsx(rE,{ref:m,onFocusFromOutsideViewport:()=>{const S=E({tabbingDirection:"backwards"});Sy(S)}})]})});zC.displayName=FC;var UC="ToastFocusProxy",rE=j.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,o=Og(UC,t);return T.jsx(Mg,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:l=>{var d;const u=l.relatedTarget;!((d=o.viewport)!=null&&d.contains(u))&&r()}})});rE.displayName=UC;var Sf="Toast",CB="toast.swipeStart",NB="toast.swipeMove",DB="toast.swipeCancel",LB="toast.swipeEnd",jC=j.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...l}=n,[u,c]=Za({prop:r,defaultProp:i??!0,onChange:o,caller:Sf});return T.jsx(Ia,{present:t||u,children:T.jsx(OB,{open:u,...l,ref:e,onClose:()=>c(!1),onPause:Vi(n.onPause),onResume:Vi(n.onResume),onSwipeStart:cn(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cn(n.onSwipeMove,d=>{const{x:m,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:cn(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cn(n.onSwipeEnd,d=>{const{x:m,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});jC.displayName=Sf;var[PB,MB]=MC(Sf,{onClose(){}}),OB=j.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:o,onClose:l,onEscapeKeyDown:u,onPause:c,onResume:d,onSwipeStart:m,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:g,...p}=n,E=Og(Sf,t),[S,x]=j.useState(null),_=Yn(e,ze=>x(ze)),A=j.useRef(null),z=j.useRef(null),ie=i||E.duration,he=j.useRef(0),P=j.useRef(ie),U=j.useRef(0),{onToastAdd:ce,onToastRemove:de}=E,_e=Vi(()=>{var Le;(S==null?void 0:S.contains(document.activeElement))&&((Le=E.viewport)==null||Le.focus()),l()}),je=j.useCallback(ze=>{!ze||ze===1/0||(window.clearTimeout(U.current),he.current=new Date().getTime(),U.current=window.setTimeout(_e,ze))},[_e]);j.useEffect(()=>{const ze=E.viewport;if(ze){const Le=()=>{je(P.current),d==null||d()},Re=()=>{const Ye=new Date().getTime()-he.current;P.current=P.current-Ye,window.clearTimeout(U.current),c==null||c()};return ze.addEventListener(tE,Re),ze.addEventListener(nE,Le),()=>{ze.removeEventListener(tE,Re),ze.removeEventListener(nE,Le)}}},[E.viewport,ie,c,d,je]),j.useEffect(()=>{o&&!E.isClosePausedRef.current&&je(ie)},[o,ie,E.isClosePausedRef,je]),j.useEffect(()=>(ce(),()=>de()),[ce,de]);const Se=j.useMemo(()=>S?KC(S):null,[S]);return E.viewport?T.jsxs(T.Fragment,{children:[Se&&T.jsx(FB,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Se}),T.jsx(PB,{scope:t,onClose:_e,children:Jl.createPortal(T.jsx(f0.ItemSlot,{scope:t,children:T.jsx(gB,{asChild:!0,onEscapeKeyDown:cn(u,()=>{E.isFocusedToastEscapeKeyDownRef.current||_e(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:T.jsx(Dn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":E.swipeDirection,...p,ref:_,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:cn(n.onKeyDown,ze=>{ze.key==="Escape"&&(u==null||u(ze.nativeEvent),ze.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,_e()))}),onPointerDown:cn(n.onPointerDown,ze=>{ze.button===0&&(A.current={x:ze.clientX,y:ze.clientY})}),onPointerMove:cn(n.onPointerMove,ze=>{if(!A.current)return;const Le=ze.clientX-A.current.x,Re=ze.clientY-A.current.y,Ye=!!z.current,Ue=["left","right"].includes(E.swipeDirection),Me=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,We=Ue?Me(0,Le):0,Ke=Ue?0:Me(0,Re),nt=ze.pointerType==="touch"?10:2,bt={x:We,y:Ke},Rt={originalEvent:ze,delta:bt};Ye?(z.current=bt,Th(NB,f,Rt,{discrete:!1})):k_(bt,E.swipeDirection,nt)?(z.current=bt,Th(CB,m,Rt,{discrete:!1}),ze.target.setPointerCapture(ze.pointerId)):(Math.abs(Le)>nt||Math.abs(Re)>nt)&&(A.current=null)}),onPointerUp:cn(n.onPointerUp,ze=>{const Le=z.current,Re=ze.target;if(Re.hasPointerCapture(ze.pointerId)&&Re.releasePointerCapture(ze.pointerId),z.current=null,A.current=null,Le){const Ye=ze.currentTarget,Ue={originalEvent:ze,delta:Le};k_(Le,E.swipeDirection,E.swipeThreshold)?Th(LB,g,Ue,{discrete:!0}):Th(DB,h,Ue,{discrete:!0}),Ye.addEventListener("click",Me=>Me.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),FB=n=>{const{__scopeToast:e,children:t,...r}=n,i=Og(Sf,e),[o,l]=j.useState(!1),[u,c]=j.useState(!1);return jB(()=>l(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),u?null:T.jsx(Tf,{asChild:!0,children:T.jsx(Mg,{...r,children:o&&T.jsxs(T.Fragment,{children:[i.label," ",t]})})})},zB="ToastTitle",BC=j.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return T.jsx(Dn.div,{...r,ref:e})});BC.displayName=zB;var UB="ToastDescription",$C=j.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return T.jsx(Dn.div,{...r,ref:e})});$C.displayName=UB;var qC="ToastAction",GC=j.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?T.jsx(VC,{altText:t,asChild:!0,children:T.jsx(h0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${qC}\`. Expected non-empty \`string\`.`),null)});GC.displayName=qC;var HC="ToastClose",h0=j.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=MB(HC,t);return T.jsx(VC,{asChild:!0,children:T.jsx(Dn.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,i.onClose)})})});h0.displayName=HC;var VC=j.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return T.jsx(Dn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function KC(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),BB(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...KC(r))}}),e}function Th(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?c0(i,o):i.dispatchEvent(o)}var k_=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),o=r>i;return e==="left"||e==="right"?o&&r>t:!o&&i>t};function jB(n=()=>{}){const e=Vi(n);ii(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function BB(n){return n.nodeType===n.ELEMENT_NODE}function $B(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Sy(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var qB=OC,YC=zC,WC=jC,QC=BC,XC=$C,ZC=GC,JC=h0;function e1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=e1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function t1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=e1(n))&&(r&&(r+=" "),r+=e);return r}const C_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,N_=t1,Fg=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return N_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,l=Object.keys(i).map(d=>{const m=t==null?void 0:t[d],f=o==null?void 0:o[d];if(m===null)return null;const h=C_(m)||C_(f);return i[d][h]}),u=t&&Object.entries(t).reduce((d,m)=>{let[f,h]=m;return h===void 0||(d[f]=h),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,m)=>{let{class:f,className:h,...g}=m;return Object.entries(g).every(p=>{let[E,S]=p;return Array.isArray(S)?S.includes({...o,...u}[E]):{...o,...u}[E]===S})?[...d,f,h]:d},[]);return N_(n,l,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},c)=>j.createElement("svg",{ref:c,...HB,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:n1("lucide",i),...u},[...l.map(([d,m])=>j.createElement(d,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(n,e)=>{const t=j.forwardRef(({className:r,...i},o)=>j.createElement(VB,{ref:o,iconNode:e,className:n1(`lucide-${GB(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=En("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=En("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=En("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=En("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=En("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=En("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=En("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=En("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=En("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=En("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=En("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=En("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=En("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=En("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=En("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=En("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=En("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=En("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=En("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=En("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=En("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=En("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=En("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=En("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=En("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=En("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=En("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=En("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=En("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=En("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=En("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=En("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=En("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=En("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=En("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=En("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=En("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=En("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=En("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=En("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=En("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=En("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=En("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=En("PictureInPicture2",[["path",{d:"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4",key:"daa4of"}],["rect",{width:"10",height:"7",x:"12",y:"13",rx:"2",key:"1nb8gs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=En("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=En("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=En("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=En("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=En("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=En("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=En("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=En("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=En("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=En("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=En("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=En("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=En("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=En("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=En("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=En("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=En("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=En("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=En("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=En("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=En("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=En("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=En("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=En("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=En("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),E0="-",D3=n=>{const e=P3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const u=l.split(E0);return u[0]===""&&u.length!==1&&u.shift(),m1(u,e)||L3(l)},getConflictingClassGroupIds:(l,u)=>{const c=t[l]||[];return u&&r[l]?[...c,...r[l]]:c}}},m1=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?m1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(E0);return(l=e.validators.find(({validator:u})=>u(o)))==null?void 0:l.classGroupId},M_=/^\[(.+)\]$/,L3=n=>{if(M_.test(n)){const e=M_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},P3=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return O3(Object.entries(n.classGroups),t).forEach(([o,l])=>{sE(l,r,o,e)}),r},sE=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:O_(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(M3(i)){sE(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,l])=>{sE(l,O_(e,o),t,r)})})},O_=(n,e)=>{let t=n;return e.split(E0).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},M3=n=>n.isThemeGetter,O3=(n,e)=>e?n.map(([t,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,u])=>[e+l,u])):o);return[t,i]}):n,F3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){t.has(o)?t.set(o,l):i(o,l)}}},g1="!",z3=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],o=e.length,l=u=>{const c=[];let d=0,m=0,f;for(let S=0;S<u.length;S++){let x=u[S];if(d===0){if(x===i&&(r||u.slice(S,S+o)===e)){c.push(u.slice(m,S)),m=S+o;continue}if(x==="/"){f=S;continue}}x==="["?d++:x==="]"&&d--}const h=c.length===0?u:u.substring(m),g=h.startsWith(g1),p=g?h.substring(1):h,E=f&&f>m?f-m:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:E}};return t?u=>t({className:u,parseClassName:l}):l},U3=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},j3=n=>({cache:F3(n.cacheSize),parseClassName:z3(n),...D3(n)}),B3=/\s+/,$3=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],l=n.trim().split(B3);let u="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:m,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:g}=t(d);let p=!!g,E=r(p?h.substring(0,g):h);if(!E){if(!p){u=d+(u.length>0?" "+u:u);continue}if(E=r(h),!E){u=d+(u.length>0?" "+u:u);continue}p=!1}const S=U3(m).join(":"),x=f?S+g1:S,_=x+E;if(o.includes(_))continue;o.push(_);const A=i(E,p);for(let z=0;z<A.length;++z){const ie=A[z];o.push(x+ie)}u=d+(u.length>0?" "+u:u)}return u};function q3(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=p1(e))&&(r&&(r+=" "),r+=t);return r}const p1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=p1(n[r]))&&(t&&(t+=" "),t+=e);return t};function G3(n,...e){let t,r,i,o=l;function l(c){const d=e.reduce((m,f)=>f(m),n());return t=j3(d),r=t.cache.get,i=t.cache.set,o=u,u(c)}function u(c){const d=r(c);if(d)return d;const m=$3(c,t);return i(c,m),m}return function(){return o(q3.apply(null,arguments))}}const _r=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},y1=/^\[(?:([a-z-]+):)?(.+)\]$/i,H3=/^\d+\/\d+$/,V3=new Set(["px","full","screen"]),K3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Q3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ms=n=>Hu(n)||V3.has(n)||H3.test(n),ho=n=>Ic(n,"length",a4),Hu=n=>!!n&&!Number.isNaN(Number(n)),xy=n=>Ic(n,"number",Hu),nd=n=>!!n&&Number.isInteger(Number(n)),Z3=n=>n.endsWith("%")&&Hu(n.slice(0,-1)),Kn=n=>y1.test(n),mo=n=>K3.test(n),J3=new Set(["length","size","percentage"]),e4=n=>Ic(n,J3,v1),t4=n=>Ic(n,"position",v1),n4=new Set(["image","url"]),r4=n=>Ic(n,n4,o4),i4=n=>Ic(n,"",s4),rd=()=>!0,Ic=(n,e,t)=>{const r=y1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},a4=n=>Y3.test(n)&&!W3.test(n),v1=()=>!1,s4=n=>Q3.test(n),o4=n=>X3.test(n),l4=()=>{const n=_r("colors"),e=_r("spacing"),t=_r("blur"),r=_r("brightness"),i=_r("borderColor"),o=_r("borderRadius"),l=_r("borderSpacing"),u=_r("borderWidth"),c=_r("contrast"),d=_r("grayscale"),m=_r("hueRotate"),f=_r("invert"),h=_r("gap"),g=_r("gradientColorStops"),p=_r("gradientColorStopPositions"),E=_r("inset"),S=_r("margin"),x=_r("opacity"),_=_r("padding"),A=_r("saturate"),z=_r("scale"),ie=_r("sepia"),he=_r("skew"),P=_r("space"),U=_r("translate"),ce=()=>["auto","contain","none"],de=()=>["auto","hidden","clip","visible","scroll"],_e=()=>["auto",Kn,e],je=()=>[Kn,e],Se=()=>["",Ms,ho],ze=()=>["auto",Hu,Kn],Le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Re=()=>["solid","dashed","dotted","double","none"],Ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ue=()=>["start","end","center","between","around","evenly","stretch"],Me=()=>["","0",Kn],We=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ke=()=>[Hu,Kn];return{cacheSize:500,separator:":",theme:{colors:[rd],spacing:[Ms,ho],blur:["none","",mo,Kn],brightness:Ke(),borderColor:[n],borderRadius:["none","","full",mo,Kn],borderSpacing:je(),borderWidth:Se(),contrast:Ke(),grayscale:Me(),hueRotate:Ke(),invert:Me(),gap:je(),gradientColorStops:[n],gradientColorStopPositions:[Z3,ho],inset:_e(),margin:_e(),opacity:Ke(),padding:je(),saturate:Ke(),scale:Ke(),sepia:Me(),skew:Ke(),space:je(),translate:je()},classGroups:{aspect:[{aspect:["auto","square","video",Kn]}],container:["container"],columns:[{columns:[mo]}],"break-after":[{"break-after":We()}],"break-before":[{"break-before":We()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Le(),Kn]}],overflow:[{overflow:de()}],"overflow-x":[{"overflow-x":de()}],"overflow-y":[{"overflow-y":de()}],overscroll:[{overscroll:ce()}],"overscroll-x":[{"overscroll-x":ce()}],"overscroll-y":[{"overscroll-y":ce()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nd,Kn]}],basis:[{basis:_e()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kn]}],grow:[{grow:Me()}],shrink:[{shrink:Me()}],order:[{order:["first","last","none",nd,Kn]}],"grid-cols":[{"grid-cols":[rd]}],"col-start-end":[{col:["auto",{span:["full",nd,Kn]},Kn]}],"col-start":[{"col-start":ze()}],"col-end":[{"col-end":ze()}],"grid-rows":[{"grid-rows":[rd]}],"row-start-end":[{row:["auto",{span:[nd,Kn]},Kn]}],"row-start":[{"row-start":ze()}],"row-end":[{"row-end":ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...Ue()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ue(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ue(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Kn,e]}],"min-w":[{"min-w":[Kn,e,"min","max","fit"]}],"max-w":[{"max-w":[Kn,e,"none","full","min","max","fit","prose",{screen:[mo]},mo]}],h:[{h:[Kn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Kn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Kn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Kn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mo,ho]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xy]}],"font-family":[{font:[rd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Kn]}],"line-clamp":[{"line-clamp":["none",Hu,xy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ms,Kn]}],"list-image":[{"list-image":["none",Kn]}],"list-style-type":[{list:["none","disc","decimal",Kn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ms,ho]}],"underline-offset":[{"underline-offset":["auto",Ms,Kn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:je()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Le(),t4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",e4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},r4]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Re(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Re()]}],"outline-offset":[{"outline-offset":[Ms,Kn]}],"outline-w":[{outline:[Ms,ho]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:Se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ms,ho]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",mo,i4]}],"shadow-color":[{shadow:[rd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ye()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mo,Kn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[A]}],sepia:[{sepia:[ie]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kn]}],duration:[{duration:Ke()}],ease:[{ease:["linear","in","out","in-out",Kn]}],delay:[{delay:Ke()}],animate:[{animate:["none","spin","ping","pulse","bounce",Kn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[nd,Kn]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[he]}],"skew-y":[{"skew-y":[he]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":je()}],"scroll-mx":[{"scroll-mx":je()}],"scroll-my":[{"scroll-my":je()}],"scroll-ms":[{"scroll-ms":je()}],"scroll-me":[{"scroll-me":je()}],"scroll-mt":[{"scroll-mt":je()}],"scroll-mr":[{"scroll-mr":je()}],"scroll-mb":[{"scroll-mb":je()}],"scroll-ml":[{"scroll-ml":je()}],"scroll-p":[{"scroll-p":je()}],"scroll-px":[{"scroll-px":je()}],"scroll-py":[{"scroll-py":je()}],"scroll-ps":[{"scroll-ps":je()}],"scroll-pe":[{"scroll-pe":je()}],"scroll-pt":[{"scroll-pt":je()}],"scroll-pr":[{"scroll-pr":je()}],"scroll-pb":[{"scroll-pb":je()}],"scroll-pl":[{"scroll-pl":je()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ms,ho,xy]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},u4=G3(l4);function Bn(...n){return u4(t1(n))}const c4=qB,E1=j.forwardRef(({className:n,...e},t)=>T.jsx(YC,{ref:t,className:Bn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));E1.displayName=YC.displayName;const d4=Fg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),b1=j.forwardRef(({className:n,variant:e,...t},r)=>T.jsx(WC,{ref:r,className:Bn(d4({variant:e}),n),...t}));b1.displayName=WC.displayName;const f4=j.forwardRef(({className:n,...e},t)=>T.jsx(ZC,{ref:t,className:Bn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));f4.displayName=ZC.displayName;const T1=j.forwardRef(({className:n,...e},t)=>T.jsx(JC,{ref:t,className:Bn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:T.jsx(v0,{className:"h-4 w-4"})}));T1.displayName=JC.displayName;const S1=j.forwardRef(({className:n,...e},t)=>T.jsx(QC,{ref:t,className:Bn("text-sm font-semibold",n),...e}));S1.displayName=QC.displayName;const x1=j.forwardRef(({className:n,...e},t)=>T.jsx(XC,{ref:t,className:Bn("text-sm opacity-90",n),...e}));x1.displayName=XC.displayName;function h4(){const{toasts:n}=Zj();return T.jsxs(c4,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return T.jsxs(b1,{...o,children:[T.jsxs("div",{className:"grid gap-1",children:[t&&T.jsx(S1,{children:t}),r&&T.jsx(x1,{children:r})]}),i,T.jsx(T1,{})]},e)}),T.jsx(E1,{})]})}var F_=["light","dark"],m4="(prefers-color-scheme: dark)",g4=j.createContext(void 0),p4={setTheme:n=>{},themes:[]},y4=()=>{var n;return(n=j.useContext(g4))!=null?n:p4};j.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:l,attrs:u,nonce:c})=>{let d=o==="system",m=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=i?F_.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(p,E=!1,S=!0)=>{let x=l?l[p]:p,_=E?p+"|| ''":`'${x}'`,A="";return i&&S&&!E&&F_.includes(p)&&(A+=`d.style.colorScheme = '${p}';`),t==="class"?E||x?A+=`c.add(${_})`:A+="null":x&&(A+=`d[s](n,${_})`),A},g=n?`!function(){${m}${h(n)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${m4}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${h(l?"x[e]":"e",!0)}}${d?"":"else{"+h(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${e}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${h(l?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${f}}catch(t){}}();`;return j.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var v4=n=>{switch(n){case"success":return T4;case"info":return x4;case"warning":return S4;case"error":return w4;default:return null}},E4=Array(12).fill(0),b4=({visible:n,className:e})=>ln.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ln.createElement("div",{className:"sonner-spinner"},E4.map((t,r)=>ln.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),T4=ln.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ln.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),S4=ln.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ln.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),x4=ln.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ln.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),w4=ln.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ln.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_4=ln.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ln.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ln.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),I4=()=>{let[n,e]=ln.useState(document.hidden);return ln.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},oE=1,A4=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:oE++,o=this.toasts.find(u=>u.id===i),l=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...n,id:i,title:t}),{...u,...n,id:i,dismissible:l,title:t}):u):this.addToast({title:t,...r,dismissible:l,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0,o,l=r.then(async c=>{if(o=["resolve",c],ln.isValidElement(c))i=!1,this.create({id:t,type:"default",message:c});else if(k4(c)&&!c.ok){i=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,m=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:m})}else if(e.success!==void 0){i=!1;let d=typeof e.success=="function"?await e.success(c):e.success,m=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:m})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){i=!1;let d=typeof e.error=="function"?await e.error(c):e.error,m=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:m})}}).finally(()=>{var c;i&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),u=()=>new Promise((c,d)=>l.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:u}:Object.assign(t,{unwrap:u})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||oE++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fi=new A4,R4=(n,e)=>{let t=(e==null?void 0:e.id)||oE++;return Fi.addToast({title:n,...e,id:t}),t},k4=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",C4=R4,N4=()=>Fi.toasts,D4=()=>Fi.getActiveToasts(),z_=Object.assign(C4,{success:Fi.success,info:Fi.info,warning:Fi.warning,error:Fi.error,custom:Fi.custom,message:Fi.message,promise:Fi.promise,dismiss:Fi.dismiss,loading:Fi.loading},{getHistory:N4,getToasts:D4});function L4(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}L4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sh(n){return n.label!==void 0}var P4=3,M4="32px",O4="16px",U_=4e3,F4=356,z4=14,U4=20,j4=200;function za(...n){return n.filter(Boolean).join(" ")}function B4(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var $4=n=>{var e,t,r,i,o,l,u,c,d,m,f;let{invert:h,toast:g,unstyled:p,interacting:E,setHeights:S,visibleToasts:x,heights:_,index:A,toasts:z,expanded:ie,removeToast:he,defaultRichColors:P,closeButton:U,style:ce,cancelButtonStyle:de,actionButtonStyle:_e,className:je="",descriptionClassName:Se="",duration:ze,position:Le,gap:Re,loadingIcon:Ye,expandByDefault:Ue,classNames:Me,icons:We,closeButtonAriaLabel:Ke="Close toast",pauseWhenPageIsHidden:nt}=n,[bt,Rt]=ln.useState(null),[Pe,Ne]=ln.useState(null),[Qe,X]=ln.useState(!1),[W,C]=ln.useState(!1),[O,le]=ln.useState(!1),[te,Be]=ln.useState(!1),[rt,qe]=ln.useState(!1),[Xe,$e]=ln.useState(0),[et,Ve]=ln.useState(0),Ze=ln.useRef(g.duration||ze||U_),ct=ln.useRef(null),Ht=ln.useRef(null),Pt=A===0,Kt=A+1<=x,It=g.type,yn=g.dismissible!==!1,Vn=g.className||"",ar=g.descriptionClassName||"",xr=ln.useMemo(()=>_.findIndex(gt=>gt.toastId===g.id)||0,[_,g.id]),Or=ln.useMemo(()=>{var gt;return(gt=g.closeButton)!=null?gt:U},[g.closeButton,U]),Fr=ln.useMemo(()=>g.duration||ze||U_,[g.duration,ze]),Gt=ln.useRef(0),Ft=ln.useRef(0),_t=ln.useRef(0),yt=ln.useRef(null),[Vt,$t]=Le.split("-"),Wt=ln.useMemo(()=>_.reduce((gt,Jt,dn)=>dn>=xr?gt:gt+Jt.height,0),[_,xr]),rn=I4(),Dt=g.invert||h,Lt=It==="loading";Ft.current=ln.useMemo(()=>xr*Re+Wt,[xr,Wt]),ln.useEffect(()=>{Ze.current=Fr},[Fr]),ln.useEffect(()=>{X(!0)},[]),ln.useEffect(()=>{let gt=Ht.current;if(gt){let Jt=gt.getBoundingClientRect().height;return Ve(Jt),S(dn=>[{toastId:g.id,height:Jt,position:g.position},...dn]),()=>S(dn=>dn.filter(hn=>hn.toastId!==g.id))}},[S,g.id]),ln.useLayoutEffect(()=>{if(!Qe)return;let gt=Ht.current,Jt=gt.style.height;gt.style.height="auto";let dn=gt.getBoundingClientRect().height;gt.style.height=Jt,Ve(dn),S(hn=>hn.find(mn=>mn.toastId===g.id)?hn.map(mn=>mn.toastId===g.id?{...mn,height:dn}:mn):[{toastId:g.id,height:dn,position:g.position},...hn])},[Qe,g.title,g.description,S,g.id]);let qt=ln.useCallback(()=>{C(!0),$e(Ft.current),S(gt=>gt.filter(Jt=>Jt.toastId!==g.id)),setTimeout(()=>{he(g)},j4)},[g,he,S,Ft]);ln.useEffect(()=>{if(g.promise&&It==="loading"||g.duration===1/0||g.type==="loading")return;let gt;return ie||E||nt&&rn?(()=>{if(_t.current<Gt.current){let Jt=new Date().getTime()-Gt.current;Ze.current=Ze.current-Jt}_t.current=new Date().getTime()})():Ze.current!==1/0&&(Gt.current=new Date().getTime(),gt=setTimeout(()=>{var Jt;(Jt=g.onAutoClose)==null||Jt.call(g,g),qt()},Ze.current)),()=>clearTimeout(gt)},[ie,E,g,It,nt,rn,qt]),ln.useEffect(()=>{g.delete&&qt()},[qt,g.delete]);function en(){var gt,Jt,dn;return We!=null&&We.loading?ln.createElement("div",{className:za(Me==null?void 0:Me.loader,(gt=g==null?void 0:g.classNames)==null?void 0:gt.loader,"sonner-loader"),"data-visible":It==="loading"},We.loading):Ye?ln.createElement("div",{className:za(Me==null?void 0:Me.loader,(Jt=g==null?void 0:g.classNames)==null?void 0:Jt.loader,"sonner-loader"),"data-visible":It==="loading"},Ye):ln.createElement(b4,{className:za(Me==null?void 0:Me.loader,(dn=g==null?void 0:g.classNames)==null?void 0:dn.loader),visible:It==="loading"})}return ln.createElement("li",{tabIndex:0,ref:Ht,className:za(je,Vn,Me==null?void 0:Me.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,Me==null?void 0:Me.default,Me==null?void 0:Me[It],(t=g==null?void 0:g.classNames)==null?void 0:t[It]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:P,"data-styled":!(g.jsx||g.unstyled||p),"data-mounted":Qe,"data-promise":!!g.promise,"data-swiped":rt,"data-removed":W,"data-visible":Kt,"data-y-position":Vt,"data-x-position":$t,"data-index":A,"data-front":Pt,"data-swiping":O,"data-dismissible":yn,"data-type":It,"data-invert":Dt,"data-swipe-out":te,"data-swipe-direction":Pe,"data-expanded":!!(ie||Ue&&Qe),style:{"--index":A,"--toasts-before":A,"--z-index":z.length-A,"--offset":`${W?Xe:Ft.current}px`,"--initial-height":Ue?"auto":`${et}px`,...ce,...g.style},onDragEnd:()=>{le(!1),Rt(null),yt.current=null},onPointerDown:gt=>{Lt||!yn||(ct.current=new Date,$e(Ft.current),gt.target.setPointerCapture(gt.pointerId),gt.target.tagName!=="BUTTON"&&(le(!0),yt.current={x:gt.clientX,y:gt.clientY}))},onPointerUp:()=>{var gt,Jt,dn,hn;if(te||!yn)return;yt.current=null;let mn=Number(((gt=Ht.current)==null?void 0:gt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Fn=Number(((Jt=Ht.current)==null?void 0:Jt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yt=new Date().getTime()-((dn=ct.current)==null?void 0:dn.getTime()),ht=bt==="x"?mn:Fn,st=Math.abs(ht)/Yt;if(Math.abs(ht)>=U4||st>.11){$e(Ft.current),(hn=g.onDismiss)==null||hn.call(g,g),Ne(bt==="x"?mn>0?"right":"left":Fn>0?"down":"up"),qt(),Be(!0),qe(!1);return}le(!1),Rt(null)},onPointerMove:gt=>{var Jt,dn,hn,mn;if(!yt.current||!yn||((Jt=window.getSelection())==null?void 0:Jt.toString().length)>0)return;let Fn=gt.clientY-yt.current.y,Yt=gt.clientX-yt.current.x,ht=(dn=n.swipeDirections)!=null?dn:B4(Le);!bt&&(Math.abs(Yt)>1||Math.abs(Fn)>1)&&Rt(Math.abs(Yt)>Math.abs(Fn)?"x":"y");let st={x:0,y:0};bt==="y"?(ht.includes("top")||ht.includes("bottom"))&&(ht.includes("top")&&Fn<0||ht.includes("bottom")&&Fn>0)&&(st.y=Fn):bt==="x"&&(ht.includes("left")||ht.includes("right"))&&(ht.includes("left")&&Yt<0||ht.includes("right")&&Yt>0)&&(st.x=Yt),(Math.abs(st.x)>0||Math.abs(st.y)>0)&&qe(!0),(hn=Ht.current)==null||hn.style.setProperty("--swipe-amount-x",`${st.x}px`),(mn=Ht.current)==null||mn.style.setProperty("--swipe-amount-y",`${st.y}px`)}},Or&&!g.jsx?ln.createElement("button",{"aria-label":Ke,"data-disabled":Lt,"data-close-button":!0,onClick:Lt||!yn?()=>{}:()=>{var gt;qt(),(gt=g.onDismiss)==null||gt.call(g,g)},className:za(Me==null?void 0:Me.closeButton,(i=g==null?void 0:g.classNames)==null?void 0:i.closeButton)},(o=We==null?void 0:We.close)!=null?o:_4):null,g.jsx||j.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:ln.createElement(ln.Fragment,null,It||g.icon||g.promise?ln.createElement("div",{"data-icon":"",className:za(Me==null?void 0:Me.icon,(l=g==null?void 0:g.classNames)==null?void 0:l.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||en():null,g.type!=="loading"?g.icon||(We==null?void 0:We[It])||v4(It):null):null,ln.createElement("div",{"data-content":"",className:za(Me==null?void 0:Me.content,(u=g==null?void 0:g.classNames)==null?void 0:u.content)},ln.createElement("div",{"data-title":"",className:za(Me==null?void 0:Me.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?ln.createElement("div",{"data-description":"",className:za(Se,ar,Me==null?void 0:Me.description,(d=g==null?void 0:g.classNames)==null?void 0:d.description)},typeof g.description=="function"?g.description():g.description):null),j.isValidElement(g.cancel)?g.cancel:g.cancel&&Sh(g.cancel)?ln.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||de,onClick:gt=>{var Jt,dn;Sh(g.cancel)&&yn&&((dn=(Jt=g.cancel).onClick)==null||dn.call(Jt,gt),qt())},className:za(Me==null?void 0:Me.cancelButton,(m=g==null?void 0:g.classNames)==null?void 0:m.cancelButton)},g.cancel.label):null,j.isValidElement(g.action)?g.action:g.action&&Sh(g.action)?ln.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||_e,onClick:gt=>{var Jt,dn;Sh(g.action)&&((dn=(Jt=g.action).onClick)==null||dn.call(Jt,gt),!gt.defaultPrevented&&qt())},className:za(Me==null?void 0:Me.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function j_(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function q4(n,e){let t={};return[n,e].forEach((r,i)=>{let o=i===1,l=o?"--mobile-offset":"--offset",u=o?O4:M4;function c(d){["top","right","bottom","left"].forEach(m=>{t[`${l}-${m}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${l}-${d}`]=u:t[`${l}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(u)}),t}var G4=j.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:c,mobileOffset:d,theme:m="light",richColors:f,duration:h,style:g,visibleToasts:p=P4,toastOptions:E,dir:S=j_(),gap:x=z4,loadingIcon:_,icons:A,containerAriaLabel:z="Notifications",pauseWhenPageIsHidden:ie}=n,[he,P]=ln.useState([]),U=ln.useMemo(()=>Array.from(new Set([r].concat(he.filter(nt=>nt.position).map(nt=>nt.position)))),[he,r]),[ce,de]=ln.useState([]),[_e,je]=ln.useState(!1),[Se,ze]=ln.useState(!1),[Le,Re]=ln.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ye=ln.useRef(null),Ue=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Me=ln.useRef(null),We=ln.useRef(!1),Ke=ln.useCallback(nt=>{P(bt=>{var Rt;return(Rt=bt.find(Pe=>Pe.id===nt.id))!=null&&Rt.delete||Fi.dismiss(nt.id),bt.filter(({id:Pe})=>Pe!==nt.id)})},[]);return ln.useEffect(()=>Fi.subscribe(nt=>{if(nt.dismiss){P(bt=>bt.map(Rt=>Rt.id===nt.id?{...Rt,delete:!0}:Rt));return}setTimeout(()=>{RC.flushSync(()=>{P(bt=>{let Rt=bt.findIndex(Pe=>Pe.id===nt.id);return Rt!==-1?[...bt.slice(0,Rt),{...bt[Rt],...nt},...bt.slice(Rt+1)]:[nt,...bt]})})})}),[]),ln.useEffect(()=>{if(m!=="system"){Re(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Re("dark"):Re("light")),typeof window>"u")return;let nt=window.matchMedia("(prefers-color-scheme: dark)");try{nt.addEventListener("change",({matches:bt})=>{Re(bt?"dark":"light")})}catch{nt.addListener(({matches:Rt})=>{try{Re(Rt?"dark":"light")}catch(Pe){console.error(Pe)}})}},[m]),ln.useEffect(()=>{he.length<=1&&je(!1)},[he]),ln.useEffect(()=>{let nt=bt=>{var Rt,Pe;i.every(Ne=>bt[Ne]||bt.code===Ne)&&(je(!0),(Rt=Ye.current)==null||Rt.focus()),bt.code==="Escape"&&(document.activeElement===Ye.current||(Pe=Ye.current)!=null&&Pe.contains(document.activeElement))&&je(!1)};return document.addEventListener("keydown",nt),()=>document.removeEventListener("keydown",nt)},[i]),ln.useEffect(()=>{if(Ye.current)return()=>{Me.current&&(Me.current.focus({preventScroll:!0}),Me.current=null,We.current=!1)}},[Ye.current]),ln.createElement("section",{ref:e,"aria-label":`${z} ${Ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((nt,bt)=>{var Rt;let[Pe,Ne]=nt.split("-");return he.length?ln.createElement("ol",{key:nt,dir:S==="auto"?j_():S,tabIndex:-1,ref:Ye,className:u,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":Pe,"data-lifted":_e&&he.length>1&&!o,"data-x-position":Ne,style:{"--front-toast-height":`${((Rt=ce[0])==null?void 0:Rt.height)||0}px`,"--width":`${F4}px`,"--gap":`${x}px`,...g,...q4(c,d)},onBlur:Qe=>{We.current&&!Qe.currentTarget.contains(Qe.relatedTarget)&&(We.current=!1,Me.current&&(Me.current.focus({preventScroll:!0}),Me.current=null))},onFocus:Qe=>{Qe.target instanceof HTMLElement&&Qe.target.dataset.dismissible==="false"||We.current||(We.current=!0,Me.current=Qe.relatedTarget)},onMouseEnter:()=>je(!0),onMouseMove:()=>je(!0),onMouseLeave:()=>{Se||je(!1)},onDragEnd:()=>je(!1),onPointerDown:Qe=>{Qe.target instanceof HTMLElement&&Qe.target.dataset.dismissible==="false"||ze(!0)},onPointerUp:()=>ze(!1)},he.filter(Qe=>!Qe.position&&bt===0||Qe.position===nt).map((Qe,X)=>{var W,C;return ln.createElement($4,{key:Qe.id,icons:A,index:X,toast:Qe,defaultRichColors:f,duration:(W=E==null?void 0:E.duration)!=null?W:h,className:E==null?void 0:E.className,descriptionClassName:E==null?void 0:E.descriptionClassName,invert:t,visibleToasts:p,closeButton:(C=E==null?void 0:E.closeButton)!=null?C:l,interacting:Se,position:nt,style:E==null?void 0:E.style,unstyled:E==null?void 0:E.unstyled,classNames:E==null?void 0:E.classNames,cancelButtonStyle:E==null?void 0:E.cancelButtonStyle,actionButtonStyle:E==null?void 0:E.actionButtonStyle,removeToast:Ke,toasts:he.filter(O=>O.position==Qe.position),heights:ce.filter(O=>O.position==Qe.position),setHeights:de,expandByDefault:o,gap:x,loadingIcon:_,expanded:_e,pauseWhenPageIsHidden:ie,swipeDirections:n.swipeDirections})})):null}))});const H4=({...n})=>{const{theme:e="system"}=y4();return T.jsx(G4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var V4=Eb[" useId ".trim().toString()]||(()=>{}),K4=0;function ba(n){const[e,t]=j.useState(V4());return ii(()=>{t(r=>r??String(K4++))},[n]),e?`radix-${e}`:""}const Y4=["top","right","bottom","left"],Qo=Math.min,Ji=Math.max,Ym=Math.round,xh=Math.floor,ws=n=>({x:n,y:n}),W4={left:"right",right:"left",bottom:"top",top:"bottom"},Q4={start:"end",end:"start"};function lE(n,e,t){return Ji(n,Qo(e,t))}function Js(n,e){return typeof n=="function"?n(e):n}function eo(n){return n.split("-")[0]}function Ac(n){return n.split("-")[1]}function b0(n){return n==="x"?"y":"x"}function T0(n){return n==="y"?"height":"width"}const X4=new Set(["top","bottom"]);function ys(n){return X4.has(eo(n))?"y":"x"}function S0(n){return b0(ys(n))}function Z4(n,e,t){t===void 0&&(t=!1);const r=Ac(n),i=S0(n),o=T0(i);let l=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Wm(l)),[l,Wm(l)]}function J4(n){const e=Wm(n);return[uE(n),e,uE(e)]}function uE(n){return n.replace(/start|end/g,e=>Q4[e])}const B_=["left","right"],$_=["right","left"],e$=["top","bottom"],t$=["bottom","top"];function n$(n,e,t){switch(n){case"top":case"bottom":return t?e?$_:B_:e?B_:$_;case"left":case"right":return e?e$:t$;default:return[]}}function r$(n,e,t,r){const i=Ac(n);let o=n$(eo(n),t==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(uE)))),o}function Wm(n){return n.replace(/left|right|bottom|top/g,e=>W4[e])}function i$(n){return{top:0,right:0,bottom:0,left:0,...n}}function w1(n){return typeof n!="number"?i$(n):{top:n,right:n,bottom:n,left:n}}function Qm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function q_(n,e,t){let{reference:r,floating:i}=n;const o=ys(e),l=S0(e),u=T0(l),c=eo(e),d=o==="y",m=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[u]/2-i[u]/2;let g;switch(c){case"top":g={x:m,y:r.y-i.height};break;case"bottom":g={x:m,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Ac(e)){case"start":g[l]-=h*(t&&d?-1:1);break;case"end":g[l]+=h*(t&&d?-1:1);break}return g}const a$=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let d=await l.getElementRects({reference:n,floating:e,strategy:i}),{x:m,y:f}=q_(d,r,c),h=r,g={},p=0;for(let E=0;E<u.length;E++){const{name:S,fn:x}=u[E],{x:_,y:A,data:z,reset:ie}=await x({x:m,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:g,rects:d,platform:l,elements:{reference:n,floating:e}});m=_??m,f=A??f,g={...g,[S]:{...g[S],...z}},ie&&p<=50&&(p++,typeof ie=="object"&&(ie.placement&&(h=ie.placement),ie.rects&&(d=ie.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:i}):ie.rects),{x:m,y:f}=q_(d,h,c)),E=-1)}return{x:m,y:f,placement:h,strategy:i,middlewareData:g}};async function Vd(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=n,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:h=!1,padding:g=0}=Js(e,n),p=w1(g),S=u[h?f==="floating"?"reference":"floating":f],x=Qm(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(S)))==null||t?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:d,rootBoundary:m,strategy:c})),_=f==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),z=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},ie=Qm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:A,strategy:c}):_);return{top:(x.top-ie.top+p.top)/z.y,bottom:(ie.bottom-x.bottom+p.bottom)/z.y,left:(x.left-ie.left+p.left)/z.x,right:(ie.right-x.right+p.right)/z.x}}const s$=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:l,elements:u,middlewareData:c}=e,{element:d,padding:m=0}=Js(n,e)||{};if(d==null)return{};const f=w1(m),h={x:t,y:r},g=S0(i),p=T0(g),E=await l.getDimensions(d),S=g==="y",x=S?"top":"left",_=S?"bottom":"right",A=S?"clientHeight":"clientWidth",z=o.reference[p]+o.reference[g]-h[g]-o.floating[p],ie=h[g]-o.reference[g],he=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let P=he?he[A]:0;(!P||!await(l.isElement==null?void 0:l.isElement(he)))&&(P=u.floating[A]||o.floating[p]);const U=z/2-ie/2,ce=P/2-E[p]/2-1,de=Qo(f[x],ce),_e=Qo(f[_],ce),je=de,Se=P-E[p]-_e,ze=P/2-E[p]/2+U,Le=lE(je,ze,Se),Re=!c.arrow&&Ac(i)!=null&&ze!==Le&&o.reference[p]/2-(ze<je?de:_e)-E[p]/2<0,Ye=Re?ze<je?ze-je:ze-Se:0;return{[g]:h[g]+Ye,data:{[g]:Le,centerOffset:ze-Le-Ye,...Re&&{alignmentOffset:Ye}},reset:Re}}}),o$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:d}=e,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:E=!0,...S}=Js(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const x=eo(i),_=ys(u),A=eo(u)===u,z=await(c.isRTL==null?void 0:c.isRTL(d.floating)),ie=h||(A||!E?[Wm(u)]:J4(u)),he=p!=="none";!h&&he&&ie.push(...r$(u,E,p,z));const P=[u,...ie],U=await Vd(e,S),ce=[];let de=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&ce.push(U[x]),f){const ze=Z4(i,l,z);ce.push(U[ze[0]],U[ze[1]])}if(de=[...de,{placement:i,overflows:ce}],!ce.every(ze=>ze<=0)){var _e,je;const ze=(((_e=o.flip)==null?void 0:_e.index)||0)+1,Le=P[ze];if(Le&&(!(f==="alignment"?_!==ys(Le):!1)||de.every(Ue=>Ue.overflows[0]>0&&ys(Ue.placement)===_)))return{data:{index:ze,overflows:de},reset:{placement:Le}};let Re=(je=de.filter(Ye=>Ye.overflows[0]<=0).sort((Ye,Ue)=>Ye.overflows[1]-Ue.overflows[1])[0])==null?void 0:je.placement;if(!Re)switch(g){case"bestFit":{var Se;const Ye=(Se=de.filter(Ue=>{if(he){const Me=ys(Ue.placement);return Me===_||Me==="y"}return!0}).map(Ue=>[Ue.placement,Ue.overflows.filter(Me=>Me>0).reduce((Me,We)=>Me+We,0)]).sort((Ue,Me)=>Ue[1]-Me[1])[0])==null?void 0:Se[0];Ye&&(Re=Ye);break}case"initialPlacement":Re=u;break}if(i!==Re)return{reset:{placement:Re}}}return{}}}};function G_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function H_(n){return Y4.some(e=>n[e]>=0)}const l$=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Js(n,e);switch(r){case"referenceHidden":{const o=await Vd(e,{...i,elementContext:"reference"}),l=G_(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:H_(l)}}}case"escaped":{const o=await Vd(e,{...i,altBoundary:!0}),l=G_(o,t.floating);return{data:{escapedOffsets:l,escaped:H_(l)}}}default:return{}}}}},_1=new Set(["left","top"]);async function u$(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=eo(t),u=Ac(t),c=ys(t)==="y",d=_1.has(l)?-1:1,m=o&&c?-1:1,f=Js(e,n);let{mainAxis:h,crossAxis:g,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return u&&typeof p=="number"&&(g=u==="end"?p*-1:p),c?{x:g*m,y:h*d}:{x:h*d,y:g*m}}const c$=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:l,middlewareData:u}=e,c=await u$(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},d$=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:S=>{let{x,y:_}=S;return{x,y:_}}},...c}=Js(n,e),d={x:t,y:r},m=await Vd(e,c),f=ys(eo(i)),h=b0(f);let g=d[h],p=d[f];if(o){const S=h==="y"?"top":"left",x=h==="y"?"bottom":"right",_=g+m[S],A=g-m[x];g=lE(_,g,A)}if(l){const S=f==="y"?"top":"left",x=f==="y"?"bottom":"right",_=p+m[S],A=p-m[x];p=lE(_,p,A)}const E=u.fn({...e,[h]:g,[f]:p});return{...E,data:{x:E.x-t,y:E.y-r,enabled:{[h]:o,[f]:l}}}}}},f$=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:c=!0,crossAxis:d=!0}=Js(n,e),m={x:t,y:r},f=ys(i),h=b0(f);let g=m[h],p=m[f];const E=Js(u,e),S=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(c){const A=h==="y"?"height":"width",z=o.reference[h]-o.floating[A]+S.mainAxis,ie=o.reference[h]+o.reference[A]-S.mainAxis;g<z?g=z:g>ie&&(g=ie)}if(d){var x,_;const A=h==="y"?"width":"height",z=_1.has(eo(i)),ie=o.reference[f]-o.floating[A]+(z&&((x=l.offset)==null?void 0:x[f])||0)+(z?0:S.crossAxis),he=o.reference[f]+o.reference[A]+(z?0:((_=l.offset)==null?void 0:_[f])||0)-(z?S.crossAxis:0);p<ie?p=ie:p>he&&(p=he)}return{[h]:g,[f]:p}}}},h$=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:c=()=>{},...d}=Js(n,e),m=await Vd(e,d),f=eo(i),h=Ac(i),g=ys(i)==="y",{width:p,height:E}=o.floating;let S,x;f==="top"||f==="bottom"?(S=f,x=h===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(x=f,S=h==="end"?"top":"bottom");const _=E-m.top-m.bottom,A=p-m.left-m.right,z=Qo(E-m[S],_),ie=Qo(p-m[x],A),he=!e.middlewareData.shift;let P=z,U=ie;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(U=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=_),he&&!h){const de=Ji(m.left,0),_e=Ji(m.right,0),je=Ji(m.top,0),Se=Ji(m.bottom,0);g?U=p-2*(de!==0||_e!==0?de+_e:Ji(m.left,m.right)):P=E-2*(je!==0||Se!==0?je+Se:Ji(m.top,m.bottom))}await c({...e,availableWidth:U,availableHeight:P});const ce=await l.getDimensions(u.floating);return p!==ce.width||E!==ce.height?{reset:{rects:!0}}:{}}}};function Ug(){return typeof window<"u"}function Rc(n){return I1(n)?(n.nodeName||"").toLowerCase():"#document"}function ra(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Rs(n){var e;return(e=(I1(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function I1(n){return Ug()?n instanceof Node||n instanceof ra(n).Node:!1}function Ja(n){return Ug()?n instanceof Element||n instanceof ra(n).Element:!1}function _s(n){return Ug()?n instanceof HTMLElement||n instanceof ra(n).HTMLElement:!1}function V_(n){return!Ug()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ra(n).ShadowRoot}const m$=new Set(["inline","contents"]);function wf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=es(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!m$.has(i)}const g$=new Set(["table","td","th"]);function p$(n){return g$.has(Rc(n))}const y$=[":popover-open",":modal"];function jg(n){return y$.some(e=>{try{return n.matches(e)}catch{return!1}})}const v$=["transform","translate","scale","rotate","perspective"],E$=["transform","translate","scale","rotate","perspective","filter"],b$=["paint","layout","strict","content"];function x0(n){const e=w0(),t=Ja(n)?es(n):n;return v$.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||E$.some(r=>(t.willChange||"").includes(r))||b$.some(r=>(t.contain||"").includes(r))}function T$(n){let e=Xo(n);for(;_s(e)&&!vc(e);){if(x0(e))return e;if(jg(e))return null;e=Xo(e)}return null}function w0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const S$=new Set(["html","body","#document"]);function vc(n){return S$.has(Rc(n))}function es(n){return ra(n).getComputedStyle(n)}function Bg(n){return Ja(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Xo(n){if(Rc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||V_(n)&&n.host||Rs(n);return V_(e)?e.host:e}function A1(n){const e=Xo(n);return vc(e)?n.ownerDocument?n.ownerDocument.body:n.body:_s(e)&&wf(e)?e:A1(e)}function Kd(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=A1(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),l=ra(i);if(o){const u=cE(l);return e.concat(l,l.visualViewport||[],wf(i)?i:[],u&&t?Kd(u):[])}return e.concat(i,Kd(i,[],t))}function cE(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function R1(n){const e=es(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=_s(n),o=i?n.offsetWidth:t,l=i?n.offsetHeight:r,u=Ym(t)!==o||Ym(r)!==l;return u&&(t=o,r=l),{width:t,height:r,$:u}}function _0(n){return Ja(n)?n:n.contextElement}function Vu(n){const e=_0(n);if(!_s(e))return ws(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=R1(e);let l=(o?Ym(t.width):t.width)/r,u=(o?Ym(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const x$=ws(0);function k1(n){const e=ra(n);return!w0()||!e.visualViewport?x$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function w$(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ra(n)?!1:e}function ql(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=_0(n);let l=ws(1);e&&(r?Ja(r)&&(l=Vu(r)):l=Vu(n));const u=w$(o,t,r)?k1(o):ws(0);let c=(i.left+u.x)/l.x,d=(i.top+u.y)/l.y,m=i.width/l.x,f=i.height/l.y;if(o){const h=ra(o),g=r&&Ja(r)?ra(r):r;let p=h,E=cE(p);for(;E&&r&&g!==p;){const S=Vu(E),x=E.getBoundingClientRect(),_=es(E),A=x.left+(E.clientLeft+parseFloat(_.paddingLeft))*S.x,z=x.top+(E.clientTop+parseFloat(_.paddingTop))*S.y;c*=S.x,d*=S.y,m*=S.x,f*=S.y,c+=A,d+=z,p=ra(E),E=cE(p)}}return Qm({width:m,height:f,x:c,y:d})}function I0(n,e){const t=Bg(n).scrollLeft;return e?e.left+t:ql(Rs(n)).left+t}function C1(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:I0(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function _$(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",l=Rs(r),u=e?jg(e.floating):!1;if(r===l||u&&o)return t;let c={scrollLeft:0,scrollTop:0},d=ws(1);const m=ws(0),f=_s(r);if((f||!f&&!o)&&((Rc(r)!=="body"||wf(l))&&(c=Bg(r)),_s(r))){const g=ql(r);d=Vu(r),m.x=g.x+r.clientLeft,m.y=g.y+r.clientTop}const h=l&&!f&&!o?C1(l,c,!0):ws(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+m.x+h.x,y:t.y*d.y-c.scrollTop*d.y+m.y+h.y}}function I$(n){return Array.from(n.getClientRects())}function A$(n){const e=Rs(n),t=Bg(n),r=n.ownerDocument.body,i=Ji(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ji(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+I0(n);const u=-t.scrollTop;return es(r).direction==="rtl"&&(l+=Ji(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}function R$(n,e){const t=ra(n),r=Rs(n),i=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const d=w0();(!d||d&&e==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}return{width:o,height:l,x:u,y:c}}const k$=new Set(["absolute","fixed"]);function C$(n,e){const t=ql(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=_s(n)?Vu(n):ws(1),l=n.clientWidth*o.x,u=n.clientHeight*o.y,c=i*o.x,d=r*o.y;return{width:l,height:u,x:c,y:d}}function K_(n,e,t){let r;if(e==="viewport")r=R$(n,t);else if(e==="document")r=A$(Rs(n));else if(Ja(e))r=C$(e,t);else{const i=k1(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Qm(r)}function N1(n,e){const t=Xo(n);return t===e||!Ja(t)||vc(t)?!1:es(t).position==="fixed"||N1(t,e)}function N$(n,e){const t=e.get(n);if(t)return t;let r=Kd(n,[],!1).filter(u=>Ja(u)&&Rc(u)!=="body"),i=null;const o=es(n).position==="fixed";let l=o?Xo(n):n;for(;Ja(l)&&!vc(l);){const u=es(l),c=x0(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&k$.has(i.position)||wf(l)&&!c&&N1(n,l))?r=r.filter(m=>m!==l):i=u,l=Xo(l)}return e.set(n,r),r}function D$(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const l=[...t==="clippingAncestors"?jg(e)?[]:N$(e,this._c):[].concat(t),r],u=l[0],c=l.reduce((d,m)=>{const f=K_(e,m,i);return d.top=Ji(f.top,d.top),d.right=Qo(f.right,d.right),d.bottom=Qo(f.bottom,d.bottom),d.left=Ji(f.left,d.left),d},K_(e,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function L$(n){const{width:e,height:t}=R1(n);return{width:e,height:t}}function P$(n,e,t){const r=_s(e),i=Rs(e),o=t==="fixed",l=ql(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const c=ws(0);function d(){c.x=I0(i)}if(r||!r&&!o)if((Rc(e)!=="body"||wf(i))&&(u=Bg(e)),r){const g=ql(e,!0,o,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else i&&d();o&&!r&&i&&d();const m=i&&!r&&!o?C1(i,u):ws(0),f=l.left+u.scrollLeft-c.x-m.x,h=l.top+u.scrollTop-c.y-m.y;return{x:f,y:h,width:l.width,height:l.height}}function wy(n){return es(n).position==="static"}function Y_(n,e){if(!_s(n)||es(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Rs(n)===t&&(t=t.ownerDocument.body),t}function D1(n,e){const t=ra(n);if(jg(n))return t;if(!_s(n)){let i=Xo(n);for(;i&&!vc(i);){if(Ja(i)&&!wy(i))return i;i=Xo(i)}return t}let r=Y_(n,e);for(;r&&p$(r)&&wy(r);)r=Y_(r,e);return r&&vc(r)&&wy(r)&&!x0(r)?t:r||T$(n)||t}const M$=async function(n){const e=this.getOffsetParent||D1,t=this.getDimensions,r=await t(n.floating);return{reference:P$(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function O$(n){return es(n).direction==="rtl"}const F$={convertOffsetParentRelativeRectToViewportRelativeRect:_$,getDocumentElement:Rs,getClippingRect:D$,getOffsetParent:D1,getElementRects:M$,getClientRects:I$,getDimensions:L$,getScale:Vu,isElement:Ja,isRTL:O$};function L1(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function z$(n,e){let t=null,r;const i=Rs(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const d=n.getBoundingClientRect(),{left:m,top:f,width:h,height:g}=d;if(u||e(),!h||!g)return;const p=xh(f),E=xh(i.clientWidth-(m+h)),S=xh(i.clientHeight-(f+g)),x=xh(m),A={rootMargin:-p+"px "+-E+"px "+-S+"px "+-x+"px",threshold:Ji(0,Qo(1,c))||1};let z=!0;function ie(he){const P=he[0].intersectionRatio;if(P!==c){if(!z)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!L1(d,n.getBoundingClientRect())&&l(),z=!1}try{t=new IntersectionObserver(ie,{...A,root:i.ownerDocument})}catch{t=new IntersectionObserver(ie,A)}t.observe(n)}return l(!0),o}function U$(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=_0(n),m=i||o?[...d?Kd(d):[],...Kd(e)]:[];m.forEach(x=>{i&&x.addEventListener("scroll",t,{passive:!0}),o&&x.addEventListener("resize",t)});const f=d&&u?z$(d,t):null;let h=-1,g=null;l&&(g=new ResizeObserver(x=>{let[_]=x;_&&_.target===d&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var A;(A=g)==null||A.observe(e)})),t()}),d&&!c&&g.observe(d),g.observe(e));let p,E=c?ql(n):null;c&&S();function S(){const x=ql(n);E&&!L1(E,x)&&t(),E=x,p=requestAnimationFrame(S)}return t(),()=>{var x;m.forEach(_=>{i&&_.removeEventListener("scroll",t),o&&_.removeEventListener("resize",t)}),f==null||f(),(x=g)==null||x.disconnect(),g=null,c&&cancelAnimationFrame(p)}}const j$=c$,B$=d$,$$=o$,q$=h$,G$=l$,W_=s$,H$=f$,V$=(n,e,t)=>{const r=new Map,i={platform:F$,...t},o={...i.platform,_c:r};return a$(n,e,{...i,platform:o})};var K$=typeof document<"u",Y$=function(){},lm=K$?j.useLayoutEffect:Y$;function Xm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Xm(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!Xm(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function P1(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Q_(n,e){const t=P1(n);return Math.round(e*t)/t}function _y(n){const e=j.useRef(n);return lm(()=>{e.current=n}),e}function W$(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:d}=n,[m,f]=j.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,g]=j.useState(r);Xm(h,r)||g(r);const[p,E]=j.useState(null),[S,x]=j.useState(null),_=j.useCallback(Ue=>{Ue!==he.current&&(he.current=Ue,E(Ue))},[]),A=j.useCallback(Ue=>{Ue!==P.current&&(P.current=Ue,x(Ue))},[]),z=o||p,ie=l||S,he=j.useRef(null),P=j.useRef(null),U=j.useRef(m),ce=c!=null,de=_y(c),_e=_y(i),je=_y(d),Se=j.useCallback(()=>{if(!he.current||!P.current)return;const Ue={placement:e,strategy:t,middleware:h};_e.current&&(Ue.platform=_e.current),V$(he.current,P.current,Ue).then(Me=>{const We={...Me,isPositioned:je.current!==!1};ze.current&&!Xm(U.current,We)&&(U.current=We,Jl.flushSync(()=>{f(We)}))})},[h,e,t,_e,je]);lm(()=>{d===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,f(Ue=>({...Ue,isPositioned:!1})))},[d]);const ze=j.useRef(!1);lm(()=>(ze.current=!0,()=>{ze.current=!1}),[]),lm(()=>{if(z&&(he.current=z),ie&&(P.current=ie),z&&ie){if(de.current)return de.current(z,ie,Se);Se()}},[z,ie,Se,de,ce]);const Le=j.useMemo(()=>({reference:he,floating:P,setReference:_,setFloating:A}),[_,A]),Re=j.useMemo(()=>({reference:z,floating:ie}),[z,ie]),Ye=j.useMemo(()=>{const Ue={position:t,left:0,top:0};if(!Re.floating)return Ue;const Me=Q_(Re.floating,m.x),We=Q_(Re.floating,m.y);return u?{...Ue,transform:"translate("+Me+"px, "+We+"px)",...P1(Re.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Me,top:We}},[t,u,Re.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:Se,refs:Le,elements:Re,floatingStyles:Ye}),[m,Se,Le,Re,Ye])}const Q$=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?W_({element:r.current,padding:i}).fn(t):{}:r?W_({element:r,padding:i}).fn(t):{}}}},X$=(n,e)=>({...j$(n),options:[n,e]}),Z$=(n,e)=>({...B$(n),options:[n,e]}),J$=(n,e)=>({...H$(n),options:[n,e]}),eq=(n,e)=>({...$$(n),options:[n,e]}),tq=(n,e)=>({...q$(n),options:[n,e]}),nq=(n,e)=>({...G$(n),options:[n,e]}),rq=(n,e)=>({...Q$(n),options:[n,e]});var iq="Arrow",M1=j.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return T.jsx(Dn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:T.jsx("polygon",{points:"0,0 30,0 15,10"})})});M1.displayName=iq;var aq=M1;function A0(n){const[e,t]=j.useState(void 0);return ii(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let l,u;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,u=d.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var R0="Popper",[O1,kc]=Ki(R0),[sq,F1]=O1(R0),z1=n=>{const{__scopePopper:e,children:t}=n,[r,i]=j.useState(null);return T.jsx(sq,{scope:e,anchor:r,onAnchorChange:i,children:t})};z1.displayName=R0;var U1="PopperAnchor",j1=j.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=F1(U1,t),l=j.useRef(null),u=Yn(e,l);return j.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:T.jsx(Dn.div,{...i,ref:u})});j1.displayName=U1;var k0="PopperContent",[oq,lq]=O1(k0),B1=j.forwardRef((n,e)=>{var Qe,X,W,C,O,le;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:p,...E}=n,S=F1(k0,t),[x,_]=j.useState(null),A=Yn(e,te=>_(te)),[z,ie]=j.useState(null),he=A0(z),P=(he==null?void 0:he.width)??0,U=(he==null?void 0:he.height)??0,ce=r+(o!=="center"?"-"+o:""),de=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},_e=Array.isArray(d)?d:[d],je=_e.length>0,Se={padding:de,boundary:_e.filter(cq),altBoundary:je},{refs:ze,floatingStyles:Le,placement:Re,isPositioned:Ye,middlewareData:Ue}=W$({strategy:"fixed",placement:ce,whileElementsMounted:(...te)=>U$(...te,{animationFrame:g==="always"}),elements:{reference:S.anchor},middleware:[X$({mainAxis:i+U,alignmentAxis:l}),c&&Z$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?J$():void 0,...Se}),c&&eq({...Se}),tq({...Se,apply:({elements:te,rects:Be,availableWidth:rt,availableHeight:qe})=>{const{width:Xe,height:$e}=Be.reference,et=te.floating.style;et.setProperty("--radix-popper-available-width",`${rt}px`),et.setProperty("--radix-popper-available-height",`${qe}px`),et.setProperty("--radix-popper-anchor-width",`${Xe}px`),et.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),z&&rq({element:z,padding:u}),dq({arrowWidth:P,arrowHeight:U}),h&&nq({strategy:"referenceHidden",...Se})]}),[Me,We]=G1(Re),Ke=Vi(p);ii(()=>{Ye&&(Ke==null||Ke())},[Ye,Ke]);const nt=(Qe=Ue.arrow)==null?void 0:Qe.x,bt=(X=Ue.arrow)==null?void 0:X.y,Rt=((W=Ue.arrow)==null?void 0:W.centerOffset)!==0,[Pe,Ne]=j.useState();return ii(()=>{x&&Ne(window.getComputedStyle(x).zIndex)},[x]),T.jsx("div",{ref:ze.setFloating,"data-radix-popper-content-wrapper":"",style:{...Le,transform:Ye?Le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(C=Ue.transformOrigin)==null?void 0:C.x,(O=Ue.transformOrigin)==null?void 0:O.y].join(" "),...((le=Ue.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:T.jsx(oq,{scope:t,placedSide:Me,onArrowChange:ie,arrowX:nt,arrowY:bt,shouldHideArrow:Rt,children:T.jsx(Dn.div,{"data-side":Me,"data-align":We,...E,ref:A,style:{...E.style,animation:Ye?void 0:"none"}})})})});B1.displayName=k0;var $1="PopperArrow",uq={top:"bottom",right:"left",bottom:"top",left:"right"},q1=j.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=lq($1,r),l=uq[o.placedSide];return T.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:T.jsx(aq,{...i,ref:t,style:{...i.style,display:"block"}})})});q1.displayName=$1;function cq(n){return n!==null}var dq=n=>({name:"transformOrigin",options:n,fn(e){var S,x,_;const{placement:t,rects:r,middlewareData:i}=e,l=((S=i.arrow)==null?void 0:S.centerOffset)!==0,u=l?0:n.arrowWidth,c=l?0:n.arrowHeight,[d,m]=G1(t),f={start:"0%",center:"50%",end:"100%"}[m],h=(((x=i.arrow)==null?void 0:x.x)??0)+u/2,g=(((_=i.arrow)==null?void 0:_.y)??0)+c/2;let p="",E="";return d==="bottom"?(p=l?f:`${h}px`,E=`${-c}px`):d==="top"?(p=l?f:`${h}px`,E=`${r.floating.height+c}px`):d==="right"?(p=`${-c}px`,E=l?f:`${g}px`):d==="left"&&(p=`${r.floating.width+c}px`,E=l?f:`${g}px`),{data:{x:p,y:E}}}});function G1(n){const[e,t="center"]=n.split("-");return[e,t]}var C0=z1,N0=j1,D0=B1,L0=q1,[$g]=Ki("Tooltip",[kc]),qg=kc(),H1="TooltipProvider",fq=700,dE="tooltip.open",[hq,P0]=$g(H1),V1=n=>{const{__scopeTooltip:e,delayDuration:t=fq,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=n,l=j.useRef(!0),u=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),T.jsx(hq,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:j.useCallback(d=>{u.current=d},[]),disableHoverableContent:i,children:o})};V1.displayName=H1;var Yd="Tooltip",[mq,Gg]=$g(Yd),K1=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:l,delayDuration:u}=n,c=P0(Yd,n.__scopeTooltip),d=qg(e),[m,f]=j.useState(null),h=ba(),g=j.useRef(0),p=l??c.disableHoverableContent,E=u??c.delayDuration,S=j.useRef(!1),[x,_]=Za({prop:r,defaultProp:i??!1,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(dE))):c.onClose(),o==null||o(P)},caller:Yd}),A=j.useMemo(()=>x?S.current?"delayed-open":"instant-open":"closed",[x]),z=j.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S.current=!1,_(!0)},[_]),ie=j.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),he=j.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{S.current=!0,_(!0),g.current=0},E)},[E,_]);return j.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),T.jsx(C0,{...d,children:T.jsx(mq,{scope:e,contentId:h,open:x,stateAttribute:A,trigger:m,onTriggerChange:f,onTriggerEnter:j.useCallback(()=>{c.isOpenDelayedRef.current?he():z()},[c.isOpenDelayedRef,he,z]),onTriggerLeave:j.useCallback(()=>{p?ie():(window.clearTimeout(g.current),g.current=0)},[ie,p]),onOpen:z,onClose:ie,disableHoverableContent:p,children:t})})};K1.displayName=Yd;var fE="TooltipTrigger",Y1=j.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Gg(fE,t),o=P0(fE,t),l=qg(t),u=j.useRef(null),c=Yn(e,u,i.onTriggerChange),d=j.useRef(!1),m=j.useRef(!1),f=j.useCallback(()=>d.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),T.jsx(N0,{asChild:!0,...l,children:T.jsx(Dn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:cn(n.onPointerMove,h=>{h.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:cn(n.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:cn(n.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:cn(n.onFocus,()=>{d.current||i.onOpen()}),onBlur:cn(n.onBlur,i.onClose),onClick:cn(n.onClick,i.onClose)})})});Y1.displayName=fE;var gq="TooltipPortal",[lX,pq]=$g(gq,{forceMount:void 0}),Ec="TooltipContent",W1=j.forwardRef((n,e)=>{const t=pq(Ec,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...o}=n,l=Gg(Ec,n.__scopeTooltip);return T.jsx(Ia,{present:r||l.open,children:l.disableHoverableContent?T.jsx(Q1,{side:i,...o,ref:e}):T.jsx(yq,{side:i,...o,ref:e})})}),yq=j.forwardRef((n,e)=>{const t=Gg(Ec,n.__scopeTooltip),r=P0(Ec,n.__scopeTooltip),i=j.useRef(null),o=Yn(e,i),[l,u]=j.useState(null),{trigger:c,onClose:d}=t,m=i.current,{onPointerInTransitChange:f}=r,h=j.useCallback(()=>{u(null),f(!1)},[f]),g=j.useCallback((p,E)=>{const S=p.currentTarget,x={x:p.clientX,y:p.clientY},_=Sq(x,S.getBoundingClientRect()),A=xq(x,_),z=wq(E.getBoundingClientRect()),ie=Iq([...A,...z]);u(ie),f(!0)},[f]);return j.useEffect(()=>()=>h(),[h]),j.useEffect(()=>{if(c&&m){const p=S=>g(S,m),E=S=>g(S,c);return c.addEventListener("pointerleave",p),m.addEventListener("pointerleave",E),()=>{c.removeEventListener("pointerleave",p),m.removeEventListener("pointerleave",E)}}},[c,m,g,h]),j.useEffect(()=>{if(l){const p=E=>{const S=E.target,x={x:E.clientX,y:E.clientY},_=(c==null?void 0:c.contains(S))||(m==null?void 0:m.contains(S)),A=!_q(x,l);_?h():A&&(h(),d())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,m,l,d,h]),T.jsx(Q1,{...n,ref:o})}),[vq,Eq]=$g(Yd,{isInside:!1}),bq=rB("TooltipContent"),Q1=j.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:l,...u}=n,c=Gg(Ec,t),d=qg(t),{onClose:m}=c;return j.useEffect(()=>(document.addEventListener(dE,m),()=>document.removeEventListener(dE,m)),[m]),j.useEffect(()=>{if(c.trigger){const f=h=>{const g=h.target;g!=null&&g.contains(c.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,m]),T.jsx(_c,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:T.jsxs(D0,{"data-state":c.stateAttribute,...d,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[T.jsx(bq,{children:r}),T.jsx(vq,{scope:t,isInside:!0,children:T.jsx(_B,{id:c.contentId,role:"tooltip",children:i||r})})]})})});W1.displayName=Ec;var X1="TooltipArrow",Tq=j.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=qg(t);return Eq(X1,t).isInside?null:T.jsx(L0,{...i,...r,ref:e})});Tq.displayName=X1;function Sq(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,r,i,o)){case o:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function xq(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function wq(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function _q(n,e){const{x:t,y:r}=n;let i=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],c=e[l],d=u.x,m=u.y,f=c.x,h=c.y;m>r!=h>r&&t<(f-d)*(r-m)/(h-m)+d&&(i=!i)}return i}function Iq(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Aq(e)}function Aq(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const o=e[e.length-1],l=e[e.length-2];if((o.x-l.x)*(i.y-l.y)>=(o.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const o=t[t.length-1],l=t[t.length-2];if((o.x-l.x)*(i.y-l.y)>=(o.y-l.y)*(i.x-l.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Rq=V1,kq=K1,Cq=Y1,Z1=W1;const J1=Rq,Nq=kq,Dq=Cq,eN=j.forwardRef(({className:n,sideOffset:e=4,...t},r)=>T.jsx(Z1,{ref:r,sideOffset:e,className:Bn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));eN.displayName=Z1.displayName;var _f=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gl=typeof window>"u"||"Deno"in globalThis;function zi(){}function Lq(n,e){return typeof n=="function"?n(e):n}function hE(n){return typeof n=="number"&&n>=0&&n!==1/0}function tN(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Go(n,e){return typeof n=="function"?n(e):n}function ga(n,e){return typeof n=="function"?n(e):n}function X_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:o,queryKey:l,stale:u}=n;if(l){if(r){if(e.queryHash!==M0(l,e.options))return!1}else if(!Qd(e.queryKey,l))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||o&&!o(e))}function Z_(n,e){const{exact:t,status:r,predicate:i,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(Wd(e.options.mutationKey)!==Wd(o))return!1}else if(!Qd(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function M0(n,e){return((e==null?void 0:e.queryKeyHashFn)||Wd)(n)}function Wd(n){return JSON.stringify(n,(e,t)=>gE(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Qd(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Qd(n[t],e[t])):!1}function nN(n,e){if(n===e)return n;const t=J_(n)&&J_(e);if(t||gE(n)&&gE(e)){const r=t?n:Object.keys(n),i=r.length,o=t?e:Object.keys(e),l=o.length,u=t?[]:{},c=new Set(r);let d=0;for(let m=0;m<l;m++){const f=t?m:o[m];(!t&&c.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(u[f]=void 0,d++):(u[f]=nN(n[f],e[f]),u[f]===n[f]&&n[f]!==void 0&&d++)}return i===l&&d===i?n:u}return e}function mE(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function J_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function gE(n){if(!eI(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!eI(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function eI(n){return Object.prototype.toString.call(n)==="[object Object]"}function Pq(n){return new Promise(e=>{setTimeout(e,n)})}function pE(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?nN(n,e):e}function Mq(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Oq(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var O0=Symbol();function rN(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===O0?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Fq(n,e){return typeof n=="function"?n(...e):!!n}var wl,_o,Ju,sR,zq=(sR=class extends _f{constructor(){super();zn(this,wl);zn(this,_o);zn(this,Ju);In(this,Ju,e=>{if(!Gl&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ut(this,_o)||this.setEventListener(ut(this,Ju))}onUnsubscribe(){var e;this.hasListeners()||((e=ut(this,_o))==null||e.call(this),In(this,_o,void 0))}setEventListener(e){var t;In(this,Ju,e),(t=ut(this,_o))==null||t.call(this),In(this,_o,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ut(this,wl)!==e&&(In(this,wl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ut(this,wl)=="boolean"?ut(this,wl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wl=new WeakMap,_o=new WeakMap,Ju=new WeakMap,sR),F0=new zq,ec,Io,tc,oR,Uq=(oR=class extends _f{constructor(){super();zn(this,ec,!0);zn(this,Io);zn(this,tc);In(this,tc,e=>{if(!Gl&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ut(this,Io)||this.setEventListener(ut(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=ut(this,Io))==null||e.call(this),In(this,Io,void 0))}setEventListener(e){var t;In(this,tc,e),(t=ut(this,Io))==null||t.call(this),In(this,Io,e(this.setOnline.bind(this)))}setOnline(e){ut(this,ec)!==e&&(In(this,ec,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ut(this,ec)}},ec=new WeakMap,Io=new WeakMap,tc=new WeakMap,oR),Zm=new Uq;function yE(){let n,e;const t=new Promise((i,o)=>{n=i,e=o});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function jq(n){return Math.min(1e3*2**n,3e4)}function iN(n){return(n??"online")==="online"?Zm.isOnline():!0}var aN=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Iy(n){return n instanceof aN}function sN(n){let e=!1,t=0,r=!1,i;const o=yE(),l=E=>{var S;r||(h(new aN(E)),(S=n.abort)==null||S.call(n))},u=()=>{e=!0},c=()=>{e=!1},d=()=>F0.isFocused()&&(n.networkMode==="always"||Zm.isOnline())&&n.canRun(),m=()=>iN(n.networkMode)&&n.canRun(),f=E=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,E),i==null||i(),o.resolve(E))},h=E=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,E),i==null||i(),o.reject(E))},g=()=>new Promise(E=>{var S;i=x=>{(r||d())&&E(x)},(S=n.onPause)==null||S.call(n)}).then(()=>{var E;i=void 0,r||(E=n.onContinue)==null||E.call(n)}),p=()=>{if(r)return;let E;const S=t===0?n.initialPromise:void 0;try{E=S??n.fn()}catch(x){E=Promise.reject(x)}Promise.resolve(E).then(f).catch(x=>{var he;if(r)return;const _=n.retry??(Gl?0:3),A=n.retryDelay??jq,z=typeof A=="function"?A(t,x):A,ie=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,x);if(e||!ie){h(x);return}t++,(he=n.onFail)==null||he.call(n,t,x),Pq(z).then(()=>d()?void 0:g()).then(()=>{e?h(x):p()})})};return{promise:o,cancel:l,continue:()=>(i==null||i(),o),cancelRetry:u,continueRetry:c,canStart:m,start:()=>(m()?p():g().then(p),o)}}var Bq=n=>setTimeout(n,0);function $q(){let n=[],e=0,t=u=>{u()},r=u=>{u()},i=Bq;const o=u=>{e?n.push(u):i(()=>{t(u)})},l=()=>{const u=n;n=[],u.length&&i(()=>{r(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||l()}return c},batchCalls:u=>(...c)=>{o(()=>{u(...c)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{i=u}}}var ui=$q(),_l,lR,oN=(lR=class{constructor(){zn(this,_l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hE(this.gcTime)&&In(this,_l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Gl?1/0:5*60*1e3))}clearGcTimeout(){ut(this,_l)&&(clearTimeout(ut(this,_l)),In(this,_l,void 0))}},_l=new WeakMap,lR),nc,Il,ma,Al,vi,df,Rl,qa,zs,uR,qq=(uR=class extends oN{constructor(e){super();zn(this,qa);zn(this,nc);zn(this,Il);zn(this,ma);zn(this,Al);zn(this,vi);zn(this,df);zn(this,Rl);In(this,Rl,!1),In(this,df,e.defaultOptions),this.setOptions(e.options),this.observers=[],In(this,Al,e.client),In(this,ma,ut(this,Al).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,In(this,nc,Gq(this.options)),this.state=e.state??ut(this,nc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ut(this,vi))==null?void 0:e.promise}setOptions(e){this.options={...ut(this,df),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ut(this,ma).remove(this)}setData(e,t){const r=pE(this.state.data,e,this.options);return rr(this,qa,zs).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){rr(this,qa,zs).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ut(this,vi))==null?void 0:r.promise;return(i=ut(this,vi))==null||i.cancel(e),t?t.then(zi).catch(zi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ut(this,nc))}isActive(){return this.observers.some(e=>ga(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===O0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Go(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tN(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ut(this,vi))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ut(this,vi))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ut(this,ma).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ut(this,vi)&&(ut(this,Rl)?ut(this,vi).cancel({revert:!0}):ut(this,vi).cancelRetry()),this.scheduleGc()),ut(this,ma).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||rr(this,qa,zs).call(this,{type:"invalidate"})}fetch(e,t){var d,m,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ut(this,vi))return ut(this,vi).continueRetry(),ut(this,vi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(In(this,Rl,!0),r.signal)})},o=()=>{const h=rN(this.options,t),p=(()=>{const E={client:ut(this,Al),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return In(this,Rl,!1),this.options.persister?this.options.persister(h,p,this):h(p)},u=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ut(this,Al),state:this.state,fetchFn:o};return i(h),h})();(d=this.options.behavior)==null||d.onFetch(u,this),In(this,Il,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=u.fetchOptions)==null?void 0:m.meta))&&rr(this,qa,zs).call(this,{type:"fetch",meta:(f=u.fetchOptions)==null?void 0:f.meta});const c=h=>{var g,p,E,S;Iy(h)&&h.silent||rr(this,qa,zs).call(this,{type:"error",error:h}),Iy(h)||((p=(g=ut(this,ma).config).onError)==null||p.call(g,h,this),(S=(E=ut(this,ma).config).onSettled)==null||S.call(E,this.state.data,h,this)),this.scheduleGc()};return In(this,vi,sN({initialPromise:t==null?void 0:t.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var g,p,E,S;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){c(x);return}(p=(g=ut(this,ma).config).onSuccess)==null||p.call(g,h,this),(S=(E=ut(this,ma).config).onSettled)==null||S.call(E,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,g)=>{rr(this,qa,zs).call(this,{type:"failed",failureCount:h,error:g})},onPause:()=>{rr(this,qa,zs).call(this,{type:"pause"})},onContinue:()=>{rr(this,qa,zs).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),ut(this,vi).start()}},nc=new WeakMap,Il=new WeakMap,ma=new WeakMap,Al=new WeakMap,vi=new WeakMap,df=new WeakMap,Rl=new WeakMap,qa=new WeakSet,zs=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lN(r.data,this.options),fetchMeta:e.meta??null};case"success":return In(this,Il,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Iy(i)&&i.revert&&ut(this,Il)?{...ut(this,Il),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ui.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ut(this,ma).notify({query:this,type:"updated",action:e})})},uR);function lN(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iN(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Gq(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ds,cR,Hq=(cR=class extends _f{constructor(e={}){super();zn(this,ds);this.config=e,In(this,ds,new Map)}build(e,t,r){const i=t.queryKey,o=t.queryHash??M0(i,t);let l=this.get(o);return l||(l=new qq({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){ut(this,ds).has(e.queryHash)||(ut(this,ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ut(this,ds).get(e.queryHash);t&&(e.destroy(),t===e&&ut(this,ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ui.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ut(this,ds).get(e)}getAll(){return[...ut(this,ds).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>X_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>X_(e,r)):t}notify(e){ui.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ui.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ui.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ds=new WeakMap,cR),fs,Ti,kl,hs,yo,dR,Vq=(dR=class extends oN{constructor(e){super();zn(this,hs);zn(this,fs);zn(this,Ti);zn(this,kl);this.mutationId=e.mutationId,In(this,Ti,e.mutationCache),In(this,fs,[]),this.state=e.state||Kq(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ut(this,fs).includes(e)||(ut(this,fs).push(e),this.clearGcTimeout(),ut(this,Ti).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){In(this,fs,ut(this,fs).filter(t=>t!==e)),this.scheduleGc(),ut(this,Ti).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ut(this,fs).length||(this.state.status==="pending"?this.scheduleGc():ut(this,Ti).remove(this))}continue(){var e;return((e=ut(this,kl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,u,c,d,m,f,h,g,p,E,S,x,_,A,z,ie,he,P,U;const t=()=>{rr(this,hs,yo).call(this,{type:"continue"})};In(this,kl,sN({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(ce,de)=>{rr(this,hs,yo).call(this,{type:"failed",failureCount:ce,error:de})},onPause:()=>{rr(this,hs,yo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ut(this,Ti).canRun(this)}));const r=this.state.status==="pending",i=!ut(this,kl).canStart();try{if(r)t();else{rr(this,hs,yo).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(o=ut(this,Ti).config).onMutate)==null?void 0:l.call(o,e,this));const de=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,e));de!==this.state.context&&rr(this,hs,yo).call(this,{type:"pending",context:de,variables:e,isPaused:i})}const ce=await ut(this,kl).start();return await((m=(d=ut(this,Ti).config).onSuccess)==null?void 0:m.call(d,ce,e,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,ce,e,this.state.context)),await((p=(g=ut(this,Ti).config).onSettled)==null?void 0:p.call(g,ce,null,this.state.variables,this.state.context,this)),await((S=(E=this.options).onSettled)==null?void 0:S.call(E,ce,null,e,this.state.context)),rr(this,hs,yo).call(this,{type:"success",data:ce}),ce}catch(ce){try{throw await((_=(x=ut(this,Ti).config).onError)==null?void 0:_.call(x,ce,e,this.state.context,this)),await((z=(A=this.options).onError)==null?void 0:z.call(A,ce,e,this.state.context)),await((he=(ie=ut(this,Ti).config).onSettled)==null?void 0:he.call(ie,void 0,ce,this.state.variables,this.state.context,this)),await((U=(P=this.options).onSettled)==null?void 0:U.call(P,void 0,ce,e,this.state.context)),ce}finally{rr(this,hs,yo).call(this,{type:"error",error:ce})}}finally{ut(this,Ti).runNext(this)}}},fs=new WeakMap,Ti=new WeakMap,kl=new WeakMap,hs=new WeakSet,yo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ui.batch(()=>{ut(this,fs).forEach(r=>{r.onMutationUpdate(e)}),ut(this,Ti).notify({mutation:this,type:"updated",action:e})})},dR);function Kq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qs,Ga,ff,fR,Yq=(fR=class extends _f{constructor(e={}){super();zn(this,qs);zn(this,Ga);zn(this,ff);this.config=e,In(this,qs,new Set),In(this,Ga,new Map),In(this,ff,0)}build(e,t,r){const i=new Vq({mutationCache:this,mutationId:++nh(this,ff)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ut(this,qs).add(e);const t=wh(e);if(typeof t=="string"){const r=ut(this,Ga).get(t);r?r.push(e):ut(this,Ga).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ut(this,qs).delete(e)){const t=wh(e);if(typeof t=="string"){const r=ut(this,Ga).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ut(this,Ga).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=wh(e);if(typeof t=="string"){const r=ut(this,Ga).get(t),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=wh(e);if(typeof t=="string"){const i=(r=ut(this,Ga).get(t))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ui.batch(()=>{ut(this,qs).forEach(e=>{this.notify({type:"removed",mutation:e})}),ut(this,qs).clear(),ut(this,Ga).clear()})}getAll(){return Array.from(ut(this,qs))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Z_(t,r))}findAll(e={}){return this.getAll().filter(t=>Z_(e,t))}notify(e){ui.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ui.batch(()=>Promise.all(e.map(t=>t.continue().catch(zi))))}},qs=new WeakMap,Ga=new WeakMap,ff=new WeakMap,fR);function wh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function tI(n){return{onFetch:(e,t)=>{var m,f,h,g,p;const r=e.options,i=(h=(f=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((g=e.state.data)==null?void 0:g.pages)||[],l=((p=e.state.data)==null?void 0:p.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const d=async()=>{let E=!1;const S=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},x=rN(e.options,e.fetchOptions),_=async(A,z,ie)=>{if(E)return Promise.reject();if(z==null&&A.pages.length)return Promise.resolve(A);const P=(()=>{const _e={client:e.client,queryKey:e.queryKey,pageParam:z,direction:ie?"backward":"forward",meta:e.options.meta};return S(_e),_e})(),U=await x(P),{maxPages:ce}=e.options,de=ie?Oq:Mq;return{pages:de(A.pages,U,ce),pageParams:de(A.pageParams,z,ce)}};if(i&&o.length){const A=i==="backward",z=A?Wq:nI,ie={pages:o,pageParams:l},he=z(r,ie);u=await _(ie,he,A)}else{const A=n??o.length;do{const z=c===0?l[0]??r.initialPageParam:nI(r,u);if(c>0&&z==null)break;u=await _(u,z),c++}while(c<A)}return u};e.options.persister?e.fetchFn=()=>{var E,S;return(S=(E=e.options).persister)==null?void 0:S.call(E,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function nI(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Wq(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var jr,Ao,Ro,rc,ic,ko,ac,sc,hR,Qq=(hR=class{constructor(n={}){zn(this,jr);zn(this,Ao);zn(this,Ro);zn(this,rc);zn(this,ic);zn(this,ko);zn(this,ac);zn(this,sc);In(this,jr,n.queryCache||new Hq),In(this,Ao,n.mutationCache||new Yq),In(this,Ro,n.defaultOptions||{}),In(this,rc,new Map),In(this,ic,new Map),In(this,ko,0)}mount(){nh(this,ko)._++,ut(this,ko)===1&&(In(this,ac,F0.subscribe(async n=>{n&&(await this.resumePausedMutations(),ut(this,jr).onFocus())})),In(this,sc,Zm.subscribe(async n=>{n&&(await this.resumePausedMutations(),ut(this,jr).onOnline())})))}unmount(){var n,e;nh(this,ko)._--,ut(this,ko)===0&&((n=ut(this,ac))==null||n.call(this),In(this,ac,void 0),(e=ut(this,sc))==null||e.call(this),In(this,sc,void 0))}isFetching(n){return ut(this,jr).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ut(this,Ao).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ut(this,jr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ut(this,jr).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Go(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ut(this,jr).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ut(this,jr).get(r.queryHash),o=i==null?void 0:i.state.data,l=Lq(e,o);if(l!==void 0)return ut(this,jr).build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return ui.batch(()=>ut(this,jr).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ut(this,jr).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ut(this,jr);ui.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ut(this,jr);return ui.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ui.batch(()=>ut(this,jr).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(zi).catch(zi)}invalidateQueries(n,e={}){return ui.batch(()=>(ut(this,jr).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ui.batch(()=>ut(this,jr).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,t);return t.throwOnError||(o=o.catch(zi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(zi)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ut(this,jr).build(this,e);return t.isStaleByTime(Go(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(zi).catch(zi)}fetchInfiniteQuery(n){return n.behavior=tI(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(zi).catch(zi)}ensureInfiniteQueryData(n){return n.behavior=tI(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Zm.isOnline()?ut(this,Ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return ut(this,jr)}getMutationCache(){return ut(this,Ao)}getDefaultOptions(){return ut(this,Ro)}setDefaultOptions(n){In(this,Ro,n)}setQueryDefaults(n,e){ut(this,rc).set(Wd(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ut(this,rc).values()],t={};return e.forEach(r=>{Qd(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ut(this,ic).set(Wd(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ut(this,ic).values()],t={};return e.forEach(r=>{Qd(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ut(this,Ro).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=M0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===O0&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ut(this,Ro).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ut(this,jr).clear(),ut(this,Ao).clear()}},jr=new WeakMap,Ao=new WeakMap,Ro=new WeakMap,rc=new WeakMap,ic=new WeakMap,ko=new WeakMap,ac=new WeakMap,sc=new WeakMap,hR),Oi,ir,hf,Si,Cl,oc,Co,No,mf,lc,uc,Nl,Dl,Do,cc,dr,ud,vE,EE,bE,TE,SE,xE,wE,uN,mR,Xq=(mR=class extends _f{constructor(e,t){super();zn(this,dr);zn(this,Oi);zn(this,ir);zn(this,hf);zn(this,Si);zn(this,Cl);zn(this,oc);zn(this,Co);zn(this,No);zn(this,mf);zn(this,lc);zn(this,uc);zn(this,Nl);zn(this,Dl);zn(this,Do);zn(this,cc,new Set);this.options=t,In(this,Oi,e),In(this,No,null),In(this,Co,yE()),this.options.experimental_prefetchInRender||ut(this,Co).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ut(this,ir).addObserver(this),rI(ut(this,ir),this.options)?rr(this,dr,ud).call(this):this.updateResult(),rr(this,dr,TE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _E(ut(this,ir),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _E(ut(this,ir),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,rr(this,dr,SE).call(this),rr(this,dr,xE).call(this),ut(this,ir).removeObserver(this)}setOptions(e){const t=this.options,r=ut(this,ir);if(this.options=ut(this,Oi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ga(this.options.enabled,ut(this,ir))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");rr(this,dr,wE).call(this),ut(this,ir).setOptions(this.options),t._defaulted&&!mE(this.options,t)&&ut(this,Oi).getQueryCache().notify({type:"observerOptionsUpdated",query:ut(this,ir),observer:this});const i=this.hasListeners();i&&iI(ut(this,ir),r,this.options,t)&&rr(this,dr,ud).call(this),this.updateResult(),i&&(ut(this,ir)!==r||ga(this.options.enabled,ut(this,ir))!==ga(t.enabled,ut(this,ir))||Go(this.options.staleTime,ut(this,ir))!==Go(t.staleTime,ut(this,ir)))&&rr(this,dr,vE).call(this);const o=rr(this,dr,EE).call(this);i&&(ut(this,ir)!==r||ga(this.options.enabled,ut(this,ir))!==ga(t.enabled,ut(this,ir))||o!==ut(this,Do))&&rr(this,dr,bE).call(this,o)}getOptimisticResult(e){const t=ut(this,Oi).getQueryCache().build(ut(this,Oi),e),r=this.createResult(t,e);return Jq(this,r)&&(In(this,Si,r),In(this,oc,this.options),In(this,Cl,ut(this,ir).state)),r}getCurrentResult(){return ut(this,Si)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(r,i))})}trackProp(e){ut(this,cc).add(e)}getCurrentQuery(){return ut(this,ir)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ut(this,Oi).defaultQueryOptions(e),r=ut(this,Oi).getQueryCache().build(ut(this,Oi),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return rr(this,dr,ud).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ut(this,Si)))}createResult(e,t){var ce;const r=ut(this,ir),i=this.options,o=ut(this,Si),l=ut(this,Cl),u=ut(this,oc),d=e!==r?e.state:ut(this,hf),{state:m}=e;let f={...m},h=!1,g;if(t._optimisticResults){const de=this.hasListeners(),_e=!de&&rI(e,t),je=de&&iI(e,r,t,i);(_e||je)&&(f={...f,...lN(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:E,status:S}=f;g=f.data;let x=!1;if(t.placeholderData!==void 0&&g===void 0&&S==="pending"){let de;o!=null&&o.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(de=o.data,x=!0):de=typeof t.placeholderData=="function"?t.placeholderData((ce=ut(this,uc))==null?void 0:ce.state.data,ut(this,uc)):t.placeholderData,de!==void 0&&(S="success",g=pE(o==null?void 0:o.data,de,t),h=!0)}if(t.select&&g!==void 0&&!x)if(o&&g===(l==null?void 0:l.data)&&t.select===ut(this,mf))g=ut(this,lc);else try{In(this,mf,t.select),g=t.select(g),g=pE(o==null?void 0:o.data,g,t),In(this,lc,g),In(this,No,null)}catch(de){In(this,No,de)}ut(this,No)&&(p=ut(this,No),g=ut(this,lc),E=Date.now(),S="error");const _=f.fetchStatus==="fetching",A=S==="pending",z=S==="error",ie=A&&_,he=g!==void 0,U={status:S,fetchStatus:f.fetchStatus,isPending:A,isSuccess:S==="success",isError:z,isInitialLoading:ie,isLoading:ie,data:g,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:E,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:_,isRefetching:_&&!A,isLoadingError:z&&!he,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:z&&he,isStale:z0(e,t),refetch:this.refetch,promise:ut(this,Co),isEnabled:ga(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const de=Se=>{U.status==="error"?Se.reject(U.error):U.data!==void 0&&Se.resolve(U.data)},_e=()=>{const Se=In(this,Co,U.promise=yE());de(Se)},je=ut(this,Co);switch(je.status){case"pending":e.queryHash===r.queryHash&&de(je);break;case"fulfilled":(U.status==="error"||U.data!==je.value)&&_e();break;case"rejected":(U.status!=="error"||U.error!==je.reason)&&_e();break}}return U}updateResult(){const e=ut(this,Si),t=this.createResult(ut(this,ir),this.options);if(In(this,Cl,ut(this,ir).state),In(this,oc,this.options),ut(this,Cl).data!==void 0&&In(this,uc,ut(this,ir)),mE(t,e))return;In(this,Si,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!ut(this,cc).size)return!0;const l=new Set(o??ut(this,cc));return this.options.throwOnError&&l.add("error"),Object.keys(ut(this,Si)).some(u=>{const c=u;return ut(this,Si)[c]!==e[c]&&l.has(c)})};rr(this,dr,uN).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&rr(this,dr,TE).call(this)}},Oi=new WeakMap,ir=new WeakMap,hf=new WeakMap,Si=new WeakMap,Cl=new WeakMap,oc=new WeakMap,Co=new WeakMap,No=new WeakMap,mf=new WeakMap,lc=new WeakMap,uc=new WeakMap,Nl=new WeakMap,Dl=new WeakMap,Do=new WeakMap,cc=new WeakMap,dr=new WeakSet,ud=function(e){rr(this,dr,wE).call(this);let t=ut(this,ir).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(zi)),t},vE=function(){rr(this,dr,SE).call(this);const e=Go(this.options.staleTime,ut(this,ir));if(Gl||ut(this,Si).isStale||!hE(e))return;const r=tN(ut(this,Si).dataUpdatedAt,e)+1;In(this,Nl,setTimeout(()=>{ut(this,Si).isStale||this.updateResult()},r))},EE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ut(this,ir)):this.options.refetchInterval)??!1},bE=function(e){rr(this,dr,xE).call(this),In(this,Do,e),!(Gl||ga(this.options.enabled,ut(this,ir))===!1||!hE(ut(this,Do))||ut(this,Do)===0)&&In(this,Dl,setInterval(()=>{(this.options.refetchIntervalInBackground||F0.isFocused())&&rr(this,dr,ud).call(this)},ut(this,Do)))},TE=function(){rr(this,dr,vE).call(this),rr(this,dr,bE).call(this,rr(this,dr,EE).call(this))},SE=function(){ut(this,Nl)&&(clearTimeout(ut(this,Nl)),In(this,Nl,void 0))},xE=function(){ut(this,Dl)&&(clearInterval(ut(this,Dl)),In(this,Dl,void 0))},wE=function(){const e=ut(this,Oi).getQueryCache().build(ut(this,Oi),this.options);if(e===ut(this,ir))return;const t=ut(this,ir);In(this,ir,e),In(this,hf,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},uN=function(e){ui.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ut(this,Si))}),ut(this,Oi).getQueryCache().notify({query:ut(this,ir),type:"observerResultsUpdated"})})},mR);function Zq(n,e){return ga(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function rI(n,e){return Zq(n,e)||n.state.data!==void 0&&_E(n,e,e.refetchOnMount)}function _E(n,e,t){if(ga(e.enabled,n)!==!1&&Go(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&z0(n,e)}return!1}function iI(n,e,t,r){return(n!==e||ga(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&z0(n,t)}function z0(n,e){return ga(e.enabled,n)!==!1&&n.isStaleByTime(Go(e.staleTime,n))}function Jq(n,e){return!mE(n.getCurrentResult(),e)}var cN=j.createContext(void 0),e8=n=>{const e=j.useContext(cN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},t8=({client:n,children:e})=>(j.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),T.jsx(cN.Provider,{value:n,children:e})),dN=j.createContext(!1),n8=()=>j.useContext(dN);dN.Provider;function r8(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var i8=j.createContext(r8()),a8=()=>j.useContext(i8),s8=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},o8=n=>{j.useEffect(()=>{n.clearReset()},[n])},l8=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||Fq(t,[n.error,r])),u8=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},c8=(n,e)=>n.isLoading&&n.isFetching&&!e,d8=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,aI=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function f8(n,e,t){var f,h,g,p,E;const r=n8(),i=a8(),o=e8(),l=o.defaultQueryOptions(n);(h=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,l),l._optimisticResults=r?"isRestoring":"optimistic",u8(l),s8(l,i),o8(i);const u=!o.getQueryCache().get(l.queryHash),[c]=j.useState(()=>new e(o,l)),d=c.getOptimisticResult(l),m=!r&&n.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(S=>{const x=m?c.subscribe(ui.batchCalls(S)):zi;return c.updateResult(),x},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(l)},[l,c]),d8(l,d))throw aI(l,c,i);if(l8({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((p=(g=o.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||p.call(g,l,d),l.experimental_prefetchInRender&&!Gl&&c8(d,r)){const S=u?aI(l,c,i):(E=o.getQueryCache().get(l.queryHash))==null?void 0:E.promise;S==null||S.catch(zi).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function U0(n,e){return f8(n,Xq)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xd(){return Xd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xd.apply(this,arguments)}var Mo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Mo||(Mo={}));const sI="popstate";function h8(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:u}=r.location;return IE("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Jm(i)}return g8(e,t,null,n)}function Gr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fN(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m8(){return Math.random().toString(36).substr(2,8)}function oI(n,e){return{usr:n.state,key:n.key,idx:e}}function IE(n,e,t,r){return t===void 0&&(t=null),Xd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cc(e):e,{state:t,key:e&&e.key||r||m8()})}function Jm(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function g8(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Mo.Pop,c=null,d=m();d==null&&(d=0,l.replaceState(Xd({},l.state,{idx:d}),""));function m(){return(l.state||{idx:null}).idx}function f(){u=Mo.Pop;let S=m(),x=S==null?null:S-d;d=S,c&&c({action:u,location:E.location,delta:x})}function h(S,x){u=Mo.Push;let _=IE(E.location,S,x);d=m()+1;let A=oI(_,d),z=E.createHref(_);try{l.pushState(A,"",z)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;i.location.assign(z)}o&&c&&c({action:u,location:E.location,delta:1})}function g(S,x){u=Mo.Replace;let _=IE(E.location,S,x);d=m();let A=oI(_,d),z=E.createHref(_);l.replaceState(A,"",z),o&&c&&c({action:u,location:E.location,delta:0})}function p(S){let x=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof S=="string"?S:Jm(S);return _=_.replace(/ $/,"%20"),Gr(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let E={get action(){return u},get location(){return n(i,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(sI,f),c=S,()=>{i.removeEventListener(sI,f),c=null}},createHref(S){return e(i,S)},createURL:p,encodeLocation(S){let x=p(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(S){return l.go(S)}};return E}var lI;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lI||(lI={}));function p8(n,e,t){return t===void 0&&(t="/"),y8(n,e,t)}function y8(n,e,t,r){let i=typeof e=="string"?Cc(e):e,o=j0(i.pathname||"/",t);if(o==null)return null;let l=hN(n);v8(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let d=C8(o);u=A8(l[c],d)}return u}function hN(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Gr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ho([r,c.relativePath]),m=t.concat(c);o.children&&o.children.length>0&&(Gr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),hN(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:_8(d,o.index),routesMeta:m})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of mN(o.path))i(o,l,c)}),e}function mN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=mN(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function v8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:I8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const E8=/^:[\w-]+$/,b8=3,T8=2,S8=1,x8=10,w8=-2,uI=n=>n==="*";function _8(n,e){let t=n.split("/"),r=t.length;return t.some(uI)&&(r+=w8),e&&(r+=T8),t.filter(i=>!uI(i)).reduce((i,o)=>i+(E8.test(o)?b8:o===""?S8:x8),r)}function I8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function A8(n,e,t){let{routesMeta:r}=n,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",f=R8({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),h=c.route;if(!f)return null;Object.assign(i,f.params),l.push({params:i,pathname:Ho([o,f.pathname]),pathnameBase:P8(Ho([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Ho([o,f.pathnameBase]))}return l}function R8(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=k8(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,m,f)=>{let{paramName:h,isOptional:g}=m;if(h==="*"){let E=u[f]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const p=u[f];return g&&!p?d[h]=void 0:d[h]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function k8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),fN(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function C8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fN(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function j0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function N8(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Cc(n):n;return{pathname:t?t.startsWith("/")?t:D8(t,e):e,search:M8(r),hash:O8(i)}}function D8(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ay(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function B0(n,e){let t=L8(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function $0(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Cc(n):(i=Xd({},n),Gr(!i.pathname||!i.pathname.includes("?"),Ay("?","pathname","search",i)),Gr(!i.pathname||!i.pathname.includes("#"),Ay("#","pathname","hash",i)),Gr(!i.search||!i.search.includes("#"),Ay("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=t;else{let f=e.length-1;if(!r&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}u=f>=0?e[f]:"/"}let c=N8(i,u),d=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Ho=n=>n.join("/").replace(/\/\/+/g,"/"),P8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),M8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,O8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function F8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const gN=["post","put","patch","delete"];new Set(gN);const z8=["get",...gN];new Set(z8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zd.apply(this,arguments)}const q0=j.createContext(null),U8=j.createContext(null),il=j.createContext(null),Hg=j.createContext(null),ks=j.createContext({outlet:null,matches:[],isDataRoute:!1}),pN=j.createContext(null);function j8(n,e){let{relative:t}=e===void 0?{}:e;Nc()||Gr(!1);let{basename:r,navigator:i}=j.useContext(il),{hash:o,pathname:l,search:u}=vN(n,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:Ho([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Nc(){return j.useContext(Hg)!=null}function al(){return Nc()||Gr(!1),j.useContext(Hg).location}function yN(n){j.useContext(il).static||j.useLayoutEffect(n)}function Dc(){let{isDataRoute:n}=j.useContext(ks);return n?t5():B8()}function B8(){Nc()||Gr(!1);let n=j.useContext(q0),{basename:e,future:t,navigator:r}=j.useContext(il),{matches:i}=j.useContext(ks),{pathname:o}=al(),l=JSON.stringify(B0(i,t.v7_relativeSplatPath)),u=j.useRef(!1);return yN(()=>{u.current=!0}),j.useCallback(function(d,m){if(m===void 0&&(m={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let f=$0(d,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ho([e,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[e,r,l,o,n])}const $8=j.createContext(null);function q8(n){let e=j.useContext(ks).outlet;return e&&j.createElement($8.Provider,{value:n},e)}function G0(){let{matches:n}=j.useContext(ks),e=n[n.length-1];return e?e.params:{}}function vN(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=j.useContext(il),{matches:i}=j.useContext(ks),{pathname:o}=al(),l=JSON.stringify(B0(i,r.v7_relativeSplatPath));return j.useMemo(()=>$0(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function G8(n,e){return H8(n,e)}function H8(n,e,t,r){Nc()||Gr(!1);let{navigator:i}=j.useContext(il),{matches:o}=j.useContext(ks),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=al(),m;if(e){var f;let S=typeof e=="string"?Cc(e):e;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||Gr(!1),m=S}else m=d;let h=m.pathname||"/",g=h;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let p=p8(n,{pathname:g}),E=Q8(p&&p.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Ho([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Ho([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,t,r);return e&&E?j.createElement(Hg.Provider,{value:{location:Zd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Mo.Pop}},E):E}function V8(){let n=e5(),e=F8(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:i},t):null,null)}const K8=j.createElement(V8,null);class Y8 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(ks.Provider,{value:this.props.routeContext},j.createElement(pN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function W8(n){let{routeContext:e,match:t,children:r}=n,i=j.useContext(q0);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(ks.Provider,{value:e},r)}function Q8(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=l.findIndex(f=>f.route.id&&(u==null?void 0:u[f.route.id])!==void 0);m>=0||Gr(!1),l=l.slice(0,Math.min(l.length,m+1))}let c=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let f=l[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:h,errors:g}=t,p=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((m,f,h)=>{let g,p=!1,E=null,S=null;t&&(g=u&&f.route.id?u[f.route.id]:void 0,E=f.route.errorElement||K8,c&&(d<0&&h===0?(n5("route-fallback"),p=!0,S=null):d===h&&(p=!0,S=f.route.hydrateFallbackElement||null)));let x=e.concat(l.slice(0,h+1)),_=()=>{let A;return g?A=E:p?A=S:f.route.Component?A=j.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=m,j.createElement(W8,{match:f,routeContext:{outlet:m,matches:x,isDataRoute:t!=null},children:A})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?j.createElement(Y8,{location:t.location,revalidation:t.revalidation,component:E,error:g,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var EN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(EN||{}),bN=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(bN||{});function X8(n){let e=j.useContext(q0);return e||Gr(!1),e}function Z8(n){let e=j.useContext(U8);return e||Gr(!1),e}function J8(n){let e=j.useContext(ks);return e||Gr(!1),e}function TN(n){let e=J8(),t=e.matches[e.matches.length-1];return t.route.id||Gr(!1),t.route.id}function e5(){var n;let e=j.useContext(pN),t=Z8(),r=TN();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function t5(){let{router:n}=X8(EN.UseNavigateStable),e=TN(bN.UseNavigateStable),t=j.useRef(!1);return yN(()=>{t.current=!0}),j.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Zd({fromRouteId:e},o)))},[n,e])}const cI={};function n5(n,e,t){cI[n]||(cI[n]=!0)}function r5(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Tu(n){let{to:e,replace:t,state:r,relative:i}=n;Nc()||Gr(!1);let{future:o,static:l}=j.useContext(il),{matches:u}=j.useContext(ks),{pathname:c}=al(),d=Dc(),m=$0(e,B0(u,o.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(m);return j.useEffect(()=>d(JSON.parse(f),{replace:t,state:r,relative:i}),[d,f,i,t,r]),null}function i5(n){return q8(n.context)}function Cr(n){Gr(!1)}function a5(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Mo.Pop,navigator:o,static:l=!1,future:u}=n;Nc()&&Gr(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:o,static:l,future:Zd({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=Cc(r));let{pathname:m="/",search:f="",hash:h="",state:g=null,key:p="default"}=r,E=j.useMemo(()=>{let S=j0(m,c);return S==null?null:{location:{pathname:S,search:f,hash:h,state:g,key:p},navigationType:i}},[c,m,f,h,g,p,i]);return E==null?null:j.createElement(il.Provider,{value:d},j.createElement(Hg.Provider,{children:t,value:E}))}function s5(n){let{children:e,location:t}=n;return G8(AE(e),t)}new Promise(()=>{});function AE(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(r,i)=>{if(!j.isValidElement(r))return;let o=[...e,i];if(r.type===j.Fragment){t.push.apply(t,AE(r.props.children,o));return}r.type!==Cr&&Gr(!1),!r.props.index||!r.props.children||Gr(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=AE(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RE(){return RE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RE.apply(this,arguments)}function o5(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function l5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function u5(n,e){return n.button===0&&(!e||e==="_self")&&!l5(n)}function kE(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function c5(n,e){let t=kE(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(o=>{t.append(i,o)})}),t}const d5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f5="6";try{window.__reactRouterVersion=f5}catch{}const h5="startTransition",dI=Eb[h5];function m5(n){let{basename:e,children:t,future:r,window:i}=n,o=j.useRef();o.current==null&&(o.current=h8({window:i,v5Compat:!0}));let l=o.current,[u,c]=j.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},m=j.useCallback(f=>{d&&dI?dI(()=>c(f)):c(f)},[c,d]);return j.useLayoutEffect(()=>l.listen(m),[l,m]),j.useEffect(()=>r5(r),[r]),j.createElement(a5,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:l,future:r})}const g5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wi=j.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:d,preventScrollReset:m,viewTransition:f}=e,h=o5(e,d5),{basename:g}=j.useContext(il),p,E=!1;if(typeof d=="string"&&p5.test(d)&&(p=d,g5))try{let A=new URL(window.location.href),z=d.startsWith("//")?new URL(A.protocol+d):new URL(d),ie=j0(z.pathname,g);z.origin===A.origin&&ie!=null?d=ie+z.search+z.hash:E=!0}catch{}let S=j8(d,{relative:i}),x=y5(d,{replace:l,state:u,target:c,preventScrollReset:m,relative:i,viewTransition:f});function _(A){r&&r(A),A.defaultPrevented||x(A)}return j.createElement("a",RE({},h,{href:p||S,onClick:E||o?r:_,ref:t,target:c}))});var fI;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fI||(fI={}));var hI;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(hI||(hI={}));function y5(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=e===void 0?{}:e,c=Dc(),d=al(),m=vN(n,{relative:l});return j.useCallback(f=>{if(u5(f,t)){f.preventDefault();let h=r!==void 0?r:Jm(d)===Jm(m);c(n,{replace:h,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[d,c,m,r,i,t,n,o,l,u])}function v5(n){let e=j.useRef(kE(n)),t=j.useRef(!1),r=al(),i=j.useMemo(()=>c5(r.search,t.current?null:e.current),[r.search]),o=Dc(),l=j.useCallback((u,c)=>{const d=kE(typeof u=="function"?u(i):u);t.current=!0,o("?"+d,c)},[o,i]);return[i,l]}const SN=[{code:"en",name:"English",nativeName:"English"},{code:"ja",name:"Japanese",nativeName:"日本語"}],mI={en:{login:"Login",password:"Password",enterPassword:"Enter password",submit:"Submit",search:"Search videos...",home:"Home",trending:"Trending",history:"History",favorites:"Favorites",tools:"Tools",games:"Games",settings:"Settings",language:"Language",logout:"Logout",watchNow:"Watch Now",download:"Download",quality:"Quality",views:"views",ago:"ago",noResults:"No results found",loading:"Loading...",error:"An error occurred",retry:"Retry",addToFavorites:"Add to Favorites",removeFromFavorites:"Remove from Favorites",clearHistory:"Clear History",player:"Player",audio:"Audio Only",live:"Live",hls:"HLS Stream",incorrectPassword:"Incorrect password",welcomeBack:"Welcome Back",enterToAccess:"Enter password to access",comments:"Comments",noComments:"No comments",failedToLoad:"Failed to load",changeParameter:"Change Parameter",reloadVideo:"Reload Video",currentParameter:"Current Parameter",invidiousStream:"Invidious Stream",noCookieEmbed:"No-Cookie Embed",eduEmbed:"Education Embed",selectPlayback:"Select Playback Method",share:"Share",region:"Region",noHistory:"No history",noFavorites:"No favorites",videoOnly:"Video Only",audioOnly:"Audio Only",hlsNotAvailable:"HLS stream not available",noStreamsAvailable:"No streams available",selectQuality:"Select quality",downloadOptions:"Download Options",ytdlpStream:"ytdlp Stream",ytdlpFailed:"ytdlp failed, using embed player",ytdlpFetching:"Fetching stream via ytdlp...",useEmbedPlayer:"Use Embed Player",liveStream:"Live Stream"},ja:{login:"ログイン",password:"パスワード",enterPassword:"パスワードを入力",submit:"送信",search:"動画を検索...",home:"ホーム",trending:"トレンド",history:"履歴",favorites:"お気に入り",tools:"ツール",games:"ゲーム",settings:"設定",language:"言語",logout:"ログアウト",watchNow:"今すぐ見る",download:"ダウンロード",quality:"画質",views:"回視聴",ago:"前",noResults:"結果が見つかりません",loading:"読み込み中...",error:"エラーが発生しました",retry:"再試行",addToFavorites:"お気に入りに追加",removeFromFavorites:"お気に入りから削除",clearHistory:"履歴をクリア",player:"プレイヤー",audio:"音声のみ",live:"ライブ",hls:"HLSストリーム",incorrectPassword:"パスワードが間違っています",welcomeBack:"おかえりなさい",enterToAccess:"アクセスするにはパスワードを入力してください",comments:"コメント",noComments:"コメントがありません",failedToLoad:"取得できませんでした",changeParameter:"パラメーターを変更",reloadVideo:"動画を再読み込み",currentParameter:"現在のパラメーター",invidiousStream:"Invidiousストリーム",noCookieEmbed:"No-Cookie埋め込み",eduEmbed:"教育用埋め込み",selectPlayback:"再生方法を選択",share:"共有",region:"地域",noHistory:"履歴がありません",noFavorites:"お気に入りがありません",videoOnly:"映像のみ",audioOnly:"音声のみ",hlsNotAvailable:"HLSストリームは利用できません",noStreamsAvailable:"ストリームが見つかりません",selectQuality:"画質を選択",downloadOptions:"ダウンロードオプション",ytdlpStream:"ytdlpストリーム",ytdlpFailed:"ytdlp取得失敗、埋め込みプレーヤーを使用",ytdlpFetching:"ytdlpでストリームを取得中...",useEmbedPlayer:"埋め込みプレーヤーを使用",liveStream:"ライブ配信"}},E5=()=>navigator.language.split("-")[0]==="ja"?"ja":"en",ai={AUTH:"tube_auth",LANGUAGE:"tube_language",HISTORY:"tube_history",FAVORITES:"tube_favorites",QUALITY:"tube_quality",API_PRIORITY:"tube_api_priority",THUMBNAIL_SOURCE:"tube_thumbnail_source"},cd=["choco_video","choco_stream","min_tube","edge_function","piped","invidious","cobalt"],b5={choco_video:{name:"Choco Video",description:"高速・安定（推奨）"},choco_stream:{name:"Choco Stream",description:"ダイレクトストリーム"},min_tube:{name:"MIN-Tube",description:"複数サーバー並列取得"},edge_function:{name:"Edge Function",description:"サーバーサイド処理"},piped:{name:"Piped",description:"プライバシー重視"},invidious:{name:"Invidious",description:"オープンソース"},cobalt:{name:"Cobalt",description:"最終フォールバック"}},xN=()=>{try{const n=localStorage.getItem(ai.API_PRIORITY);if(n){const t=JSON.parse(n).filter(i=>cd.includes(i)),r=cd.filter(i=>!t.includes(i));return[...t,...r]}return cd}catch{return cd}},gI=n=>{localStorage.setItem(ai.API_PRIORITY,JSON.stringify(n))},T5=()=>{localStorage.removeItem(ai.API_PRIORITY)},S5=()=>localStorage.getItem(ai.AUTH)==="true",x5=n=>{localStorage.setItem(ai.AUTH,n.toString())},w5=()=>{localStorage.removeItem(ai.AUTH)},_5=()=>localStorage.getItem(ai.LANGUAGE),I5=n=>{localStorage.setItem(ai.LANGUAGE,n)},wN=()=>{try{const n=localStorage.getItem(ai.HISTORY);return n?JSON.parse(n):[]}catch{return[]}},pI=n=>{const e=wN().filter(t=>t.videoId!==n.videoId);e.unshift(n),localStorage.setItem(ai.HISTORY,JSON.stringify(e.slice(0,100)))},A5=()=>{localStorage.removeItem(ai.HISTORY)},Vg=()=>{try{const n=localStorage.getItem(ai.FAVORITES);return n?JSON.parse(n):[]}catch{return[]}},R5=n=>{const e=Vg().filter(t=>t.videoId!==n.videoId);e.unshift(n),localStorage.setItem(ai.FAVORITES,JSON.stringify(e))},k5=n=>{const e=Vg().filter(t=>t.videoId!==n);localStorage.setItem(ai.FAVORITES,JSON.stringify(e))},C5=n=>Vg().some(e=>e.videoId===n),N5=()=>localStorage.getItem(ai.QUALITY)||"720p",D5=n=>{localStorage.setItem(ai.QUALITY,n)},_N=()=>{const n=localStorage.getItem(ai.THUMBNAIL_SOURCE);return n==="i.ytimg.com"||n==="img.youtube.com"?n:"i.ytimg.com"},L5=n=>{localStorage.setItem(ai.THUMBNAIL_SOURCE,n)},IN=j.createContext(void 0),P5=({children:n})=>{const[e,t]=j.useState(()=>_5()||E5()),r=o=>{t(o),I5(o)},i=o=>mI[e][o]||mI.en[o]||o;return j.useEffect(()=>{document.documentElement.lang=e},[e]),T.jsx(IN.Provider,{value:{language:e,setLanguage:r,t:i},children:n})},Hr=()=>{const n=j.useContext(IN);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n},M5=()=>S5()?T.jsx(i5,{}):T.jsx(Tu,{to:"/login",replace:!0}),O5="wista-pass",F5=()=>{const[n,e]=j.useState(""),[t,r]=j.useState(!1),[i,o]=j.useState(""),[l,u]=j.useState(!1),c=Dc(),{t:d}=Hr(),m=async f=>{f.preventDefault(),u(!0),o(""),await new Promise(h=>setTimeout(h,500)),n===O5?(x5(!0),c("/home")):o(d("incorrectPassword")),u(!1)};return T.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-primary/10"}),T.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl animate-pulse"}),T.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),T.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-primary/10 rounded-full blur-2xl animate-pulse",style:{animationDelay:"0.5s"}}),T.jsxs("div",{className:"relative w-full max-w-md slide-up",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-3xl bg-gradient-to-br from-primary via-accent to-primary mb-6 pulse-glow shadow-2xl",children:T.jsx(Wo,{className:"w-12 h-12 text-primary-foreground fill-current"})}),T.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent",children:"Wista"}),T.jsx("p",{className:"text-muted-foreground mt-3 text-lg",children:d("enterToAccess")})]}),T.jsxs("form",{onSubmit:m,className:"glass-card rounded-3xl p-8 space-y-6",children:[T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:d("password")}),T.jsxs("div",{className:"relative group",children:[T.jsx(h3,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),T.jsx("input",{id:"password",type:t?"text":"password",value:n,onChange:f=>e(f.target.value),placeholder:d("enterPassword"),className:"w-full bg-secondary/50 border-2 border-border/50 rounded-2xl pl-12 pr-12 py-4 text-foreground placeholder:text-muted-foreground focus:border-primary focus:bg-secondary/70 focus:outline-none transition-all backdrop-blur-sm",autoFocus:!0}),T.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:t?T.jsx(n3,{className:"w-5 h-5"}):T.jsx(r3,{className:"w-5 h-5"})})]})]}),i&&T.jsx("div",{className:"text-destructive text-sm text-center fade-in bg-destructive/10 rounded-xl py-3 px-4 border border-destructive/20",children:i}),T.jsx("button",{type:"submit",disabled:l||!n,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg py-4 rounded-2xl",children:l?T.jsx("div",{className:"w-6 h-6 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}):T.jsxs(T.Fragment,{children:[T.jsx(Wo,{className:"w-5 h-5"}),d("login")]})}),T.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2",children:[T.jsx("div",{className:"h-1 w-1 rounded-full bg-primary/50"}),T.jsx("div",{className:"h-1 w-2 rounded-full bg-primary/70"}),T.jsx("div",{className:"h-1 w-1 rounded-full bg-primary/50"})]})]})]})]})};var z5=j.createContext(void 0);function If(n){const e=j.useContext(z5);return n||e||"ltr"}var Ry=0;function H0(){j.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??yI()),document.body.insertAdjacentElement("beforeend",n[1]??yI()),Ry++,()=>{Ry===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ry--}},[])}function yI(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ky="focusScope.autoFocusOnMount",Cy="focusScope.autoFocusOnUnmount",vI={bubbles:!1,cancelable:!0},U5="FocusScope",Kg=j.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=n,[u,c]=j.useState(null),d=Vi(i),m=Vi(o),f=j.useRef(null),h=Yn(e,E=>c(E)),g=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let E=function(A){if(g.paused||!u)return;const z=A.target;u.contains(z)?f.current=z:vo(f.current,{select:!0})},S=function(A){if(g.paused||!u)return;const z=A.relatedTarget;z!==null&&(u.contains(z)||vo(f.current,{select:!0}))},x=function(A){if(document.activeElement===document.body)for(const ie of A)ie.removedNodes.length>0&&vo(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",S);const _=new MutationObserver(x);return u&&_.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",S),_.disconnect()}}},[r,u,g.paused]),j.useEffect(()=>{if(u){bI.add(g);const E=document.activeElement;if(!u.contains(E)){const x=new CustomEvent(ky,vI);u.addEventListener(ky,d),u.dispatchEvent(x),x.defaultPrevented||(j5(H5(AN(u)),{select:!0}),document.activeElement===E&&vo(u))}return()=>{u.removeEventListener(ky,d),setTimeout(()=>{const x=new CustomEvent(Cy,vI);u.addEventListener(Cy,m),u.dispatchEvent(x),x.defaultPrevented||vo(E??document.body,{select:!0}),u.removeEventListener(Cy,m),bI.remove(g)},0)}}},[u,d,m,g]);const p=j.useCallback(E=>{if(!t&&!r||g.paused)return;const S=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,x=document.activeElement;if(S&&x){const _=E.currentTarget,[A,z]=B5(_);A&&z?!E.shiftKey&&x===z?(E.preventDefault(),t&&vo(A,{select:!0})):E.shiftKey&&x===A&&(E.preventDefault(),t&&vo(z,{select:!0})):x===_&&E.preventDefault()}},[t,r,g.paused]);return T.jsx(Dn.div,{tabIndex:-1,...l,ref:h,onKeyDown:p})});Kg.displayName=U5;function j5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(vo(r,{select:e}),document.activeElement!==t)return}function B5(n){const e=AN(n),t=EI(e,n),r=EI(e.reverse(),n);return[t,r]}function AN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function EI(n,e){for(const t of n)if(!$5(t,{upTo:e}))return t}function $5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function q5(n){return n instanceof HTMLInputElement&&"select"in n}function vo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&q5(n)&&e&&n.select()}}var bI=G5();function G5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=TI(n,e),n.unshift(e)},remove(e){var t;n=TI(n,e),(t=n[0])==null||t.resume()}}}function TI(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function H5(n){return n.filter(e=>e.tagName!=="A")}var Ny="rovingFocusGroup.onEntryFocus",V5={bubbles:!1,cancelable:!0},Af="RovingFocusGroup",[CE,RN,K5]=bf(Af),[Y5,Yg]=Ki(Af,[K5]),[W5,Q5]=Y5(Af),kN=j.forwardRef((n,e)=>T.jsx(CE.Provider,{scope:n.__scopeRovingFocusGroup,children:T.jsx(CE.Slot,{scope:n.__scopeRovingFocusGroup,children:T.jsx(X5,{...n,ref:e})})}));kN.displayName=Af;var X5=j.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...f}=n,h=j.useRef(null),g=Yn(e,h),p=If(o),[E,S]=Za({prop:l,defaultProp:u??null,onChange:c,caller:Af}),[x,_]=j.useState(!1),A=Vi(d),z=RN(t),ie=j.useRef(!1),[he,P]=j.useState(0);return j.useEffect(()=>{const U=h.current;if(U)return U.addEventListener(Ny,A),()=>U.removeEventListener(Ny,A)},[A]),T.jsx(W5,{scope:t,orientation:r,dir:p,loop:i,currentTabStopId:E,onItemFocus:j.useCallback(U=>S(U),[S]),onItemShiftTab:j.useCallback(()=>_(!0),[]),onFocusableItemAdd:j.useCallback(()=>P(U=>U+1),[]),onFocusableItemRemove:j.useCallback(()=>P(U=>U-1),[]),children:T.jsx(Dn.div,{tabIndex:x||he===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...n.style},onMouseDown:cn(n.onMouseDown,()=>{ie.current=!0}),onFocus:cn(n.onFocus,U=>{const ce=!ie.current;if(U.target===U.currentTarget&&ce&&!x){const de=new CustomEvent(Ny,V5);if(U.currentTarget.dispatchEvent(de),!de.defaultPrevented){const _e=z().filter(Re=>Re.focusable),je=_e.find(Re=>Re.active),Se=_e.find(Re=>Re.id===E),Le=[je,Se,..._e].filter(Boolean).map(Re=>Re.ref.current);DN(Le,m)}}ie.current=!1}),onBlur:cn(n.onBlur,()=>_(!1))})})}),CN="RovingFocusGroupItem",NN=j.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:o,children:l,...u}=n,c=ba(),d=o||c,m=Q5(CN,t),f=m.currentTabStopId===d,h=RN(t),{onFocusableItemAdd:g,onFocusableItemRemove:p,currentTabStopId:E}=m;return j.useEffect(()=>{if(r)return g(),()=>p()},[r,g,p]),T.jsx(CE.ItemSlot,{scope:t,id:d,focusable:r,active:i,children:T.jsx(Dn.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...u,ref:e,onMouseDown:cn(n.onMouseDown,S=>{r?m.onItemFocus(d):S.preventDefault()}),onFocus:cn(n.onFocus,()=>m.onItemFocus(d)),onKeyDown:cn(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=eG(S,m.orientation,m.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=h().filter(z=>z.focusable).map(z=>z.ref.current);if(x==="last")A.reverse();else if(x==="prev"||x==="next"){x==="prev"&&A.reverse();const z=A.indexOf(S.currentTarget);A=m.loop?tG(A,z+1):A.slice(z+1)}setTimeout(()=>DN(A))}}),children:typeof l=="function"?l({isCurrentTabStop:f,hasTabStop:E!=null}):l})})});NN.displayName=CN;var Z5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function J5(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function eG(n,e,t){const r=J5(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Z5[r]}function DN(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function tG(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var LN=kN,PN=NN,nG=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},fu=new WeakMap,_h=new WeakMap,Ih={},Dy=0,MN=function(n){return n&&(n.host||MN(n.parentNode))},rG=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=MN(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},iG=function(n,e,t,r){var i=rG(e,Array.isArray(n)?n:[n]);Ih[t]||(Ih[t]=new WeakMap);var o=Ih[t],l=[],u=new Set,c=new Set(i),d=function(f){!f||u.has(f)||(u.add(f),d(f.parentNode))};i.forEach(d);var m=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(u.has(h))m(h);else try{var g=h.getAttribute(r),p=g!==null&&g!=="false",E=(fu.get(h)||0)+1,S=(o.get(h)||0)+1;fu.set(h,E),o.set(h,S),l.push(h),E===1&&p&&_h.set(h,!0),S===1&&h.setAttribute(t,"true"),p||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return m(e),u.clear(),Dy++,function(){l.forEach(function(f){var h=fu.get(f)-1,g=o.get(f)-1;fu.set(f,h),o.set(f,g),h||(_h.has(f)||f.removeAttribute(r),_h.delete(f)),g||f.removeAttribute(t)}),Dy--,Dy||(fu=new WeakMap,fu=new WeakMap,_h=new WeakMap,Ih={})}},V0=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=nG(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),iG(r,i,t,"aria-hidden")):function(){return null}},ps=function(){return ps=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ps.apply(this,arguments)};function ON(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function aG(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var um="right-scroll-bar-position",cm="width-before-scroll-bar",sG="with-scroll-bars-hidden",oG="--removed-body-scroll-bar-size";function Ly(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function lG(n,e){var t=j.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var uG=typeof window<"u"?j.useLayoutEffect:j.useEffect,SI=new WeakMap;function cG(n,e){var t=lG(null,function(r){return n.forEach(function(i){return Ly(i,r)})});return uG(function(){var r=SI.get(t);if(r){var i=new Set(r),o=new Set(n),l=t.current;i.forEach(function(u){o.has(u)||Ly(u,null)}),o.forEach(function(u){i.has(u)||Ly(u,l)})}SI.set(t,n)},[n]),t}function dG(n){return n}function fG(n,e){e===void 0&&(e=dG);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var c=function(){var m=l;l=[],m.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(m){l.push(m),d()},filter:function(m){return l=l.filter(m),t}}}};return i}function hG(n){n===void 0&&(n={});var e=fG(null);return e.options=ps({async:!0,ssr:!1},n),e}var FN=function(n){var e=n.sideCar,t=ON(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,ps({},t))};FN.isSideCarExport=!0;function mG(n,e){return n.useMedium(e),FN}var zN=hG(),Py=function(){},Wg=j.forwardRef(function(n,e){var t=j.useRef(null),r=j.useState({onScrollCapture:Py,onWheelCapture:Py,onTouchMoveCapture:Py}),i=r[0],o=r[1],l=n.forwardProps,u=n.children,c=n.className,d=n.removeScrollBar,m=n.enabled,f=n.shards,h=n.sideCar,g=n.noRelative,p=n.noIsolation,E=n.inert,S=n.allowPinchZoom,x=n.as,_=x===void 0?"div":x,A=n.gapMode,z=ON(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ie=h,he=cG([t,e]),P=ps(ps({},z),i);return j.createElement(j.Fragment,null,m&&j.createElement(ie,{sideCar:zN,removeScrollBar:d,shards:f,noRelative:g,noIsolation:p,inert:E,setCallbacks:o,allowPinchZoom:!!S,lockRef:t,gapMode:A}),l?j.cloneElement(j.Children.only(u),ps(ps({},P),{ref:he})):j.createElement(_,ps({},P,{className:c,ref:he}),u))});Wg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Wg.classNames={fullWidth:cm,zeroRight:um};var gG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pG(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=gG();return e&&n.setAttribute("nonce",e),n}function yG(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function vG(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var EG=function(){var n=0,e=null;return{add:function(t){n==0&&(e=pG())&&(yG(e,t),vG(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},bG=function(){var n=EG();return function(e,t){j.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},UN=function(){var n=bG(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},TG={left:0,top:0,right:0,gap:0},My=function(n){return parseInt(n||"",10)||0},SG=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[My(t),My(r),My(i)]},xG=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return TG;var e=SG(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},wG=UN(),Ku="data-scroll-locked",_G=function(n,e,t,r){var i=n.left,o=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(sG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ku,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(um,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(cm,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(um," .").concat(um,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cm," .").concat(cm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ku,`] {
    `).concat(oG,": ").concat(u,`px;
  }
`)},xI=function(){var n=parseInt(document.body.getAttribute(Ku)||"0",10);return isFinite(n)?n:0},IG=function(){j.useEffect(function(){return document.body.setAttribute(Ku,(xI()+1).toString()),function(){var n=xI()-1;n<=0?document.body.removeAttribute(Ku):document.body.setAttribute(Ku,n.toString())}},[])},AG=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;IG();var o=j.useMemo(function(){return xG(i)},[i]);return j.createElement(wG,{styles:_G(o,!e,i,t?"":"!important")})},NE=!1;if(typeof window<"u")try{var Ah=Object.defineProperty({},"passive",{get:function(){return NE=!0,!0}});window.addEventListener("test",Ah,Ah),window.removeEventListener("test",Ah,Ah)}catch{NE=!1}var hu=NE?{passive:!1}:!1,RG=function(n){return n.tagName==="TEXTAREA"},jN=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!RG(n)&&t[e]==="visible")},kG=function(n){return jN(n,"overflowY")},CG=function(n){return jN(n,"overflowX")},wI=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=BN(n,r);if(i){var o=$N(n,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},NG=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},DG=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},BN=function(n,e){return n==="v"?kG(e):CG(e)},$N=function(n,e){return n==="v"?NG(e):DG(e)},LG=function(n,e){return n==="h"&&e==="rtl"?-1:1},PG=function(n,e,t,r,i){var o=LG(n,window.getComputedStyle(e).direction),l=o*r,u=t.target,c=e.contains(u),d=!1,m=l>0,f=0,h=0;do{if(!u)break;var g=$N(n,u),p=g[0],E=g[1],S=g[2],x=E-S-o*p;(p||x)&&BN(n,u)&&(f+=x,h+=p);var _=u.parentNode;u=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&u!==document.body||c&&(e.contains(u)||e===u));return(m&&Math.abs(f)<1||!m&&Math.abs(h)<1)&&(d=!0),d},Rh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},_I=function(n){return[n.deltaX,n.deltaY]},II=function(n){return n&&"current"in n?n.current:n},MG=function(n,e){return n[0]===e[0]&&n[1]===e[1]},OG=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},FG=0,mu=[];function zG(n){var e=j.useRef([]),t=j.useRef([0,0]),r=j.useRef(),i=j.useState(FG++)[0],o=j.useState(UN)[0],l=j.useRef(n);j.useEffect(function(){l.current=n},[n]),j.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var E=aG([n.lockRef.current],(n.shards||[]).map(II),!0).filter(Boolean);return E.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var u=j.useCallback(function(E,S){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!l.current.allowPinchZoom;var x=Rh(E),_=t.current,A="deltaX"in E?E.deltaX:_[0]-x[0],z="deltaY"in E?E.deltaY:_[1]-x[1],ie,he=E.target,P=Math.abs(A)>Math.abs(z)?"h":"v";if("touches"in E&&P==="h"&&he.type==="range")return!1;var U=wI(P,he);if(!U)return!0;if(U?ie=P:(ie=P==="v"?"h":"v",U=wI(P,he)),!U)return!1;if(!r.current&&"changedTouches"in E&&(A||z)&&(r.current=ie),!ie)return!0;var ce=r.current||ie;return PG(ce,S,E,ce==="h"?A:z)},[]),c=j.useCallback(function(E){var S=E;if(!(!mu.length||mu[mu.length-1]!==o)){var x="deltaY"in S?_I(S):Rh(S),_=e.current.filter(function(ie){return ie.name===S.type&&(ie.target===S.target||S.target===ie.shadowParent)&&MG(ie.delta,x)})[0];if(_&&_.should){S.cancelable&&S.preventDefault();return}if(!_){var A=(l.current.shards||[]).map(II).filter(Boolean).filter(function(ie){return ie.contains(S.target)}),z=A.length>0?u(S,A[0]):!l.current.noIsolation;z&&S.cancelable&&S.preventDefault()}}},[]),d=j.useCallback(function(E,S,x,_){var A={name:E,delta:S,target:x,should:_,shadowParent:UG(x)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(z){return z!==A})},1)},[]),m=j.useCallback(function(E){t.current=Rh(E),r.current=void 0},[]),f=j.useCallback(function(E){d(E.type,_I(E),E.target,u(E,n.lockRef.current))},[]),h=j.useCallback(function(E){d(E.type,Rh(E),E.target,u(E,n.lockRef.current))},[]);j.useEffect(function(){return mu.push(o),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,hu),document.addEventListener("touchmove",c,hu),document.addEventListener("touchstart",m,hu),function(){mu=mu.filter(function(E){return E!==o}),document.removeEventListener("wheel",c,hu),document.removeEventListener("touchmove",c,hu),document.removeEventListener("touchstart",m,hu)}},[]);var g=n.removeScrollBar,p=n.inert;return j.createElement(j.Fragment,null,p?j.createElement(o,{styles:OG(i)}):null,g?j.createElement(AG,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function UG(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const jG=mG(zN,zG);var Qg=j.forwardRef(function(n,e){return j.createElement(Wg,ps({},n,{ref:e,sideCar:jG}))});Qg.classNames=Wg.classNames;var DE=["Enter"," "],BG=["ArrowDown","PageUp","Home"],qN=["ArrowUp","PageDown","End"],$G=[...BG,...qN],qG={ltr:[...DE,"ArrowRight"],rtl:[...DE,"ArrowLeft"]},GG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rf="Menu",[Jd,HG,VG]=bf(Rf),[eu,GN]=Ki(Rf,[VG,kc,Yg]),Xg=kc(),HN=Yg(),[KG,tu]=eu(Rf),[YG,kf]=eu(Rf),VN=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:o,modal:l=!0}=n,u=Xg(e),[c,d]=j.useState(null),m=j.useRef(!1),f=Vi(o),h=If(i);return j.useEffect(()=>{const g=()=>{m.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>m.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),T.jsx(C0,{...u,children:T.jsx(KG,{scope:e,open:t,onOpenChange:f,content:c,onContentChange:d,children:T.jsx(YG,{scope:e,onClose:j.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:h,modal:l,children:r})})})};VN.displayName=Rf;var WG="MenuAnchor",K0=j.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Xg(t);return T.jsx(N0,{...i,...r,ref:e})});K0.displayName=WG;var Y0="MenuPortal",[QG,KN]=eu(Y0,{forceMount:void 0}),YN=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,o=tu(Y0,e);return T.jsx(QG,{scope:e,forceMount:t,children:T.jsx(Ia,{present:t||o.open,children:T.jsx(Tf,{asChild:!0,container:i,children:r})})})};YN.displayName=Y0;var Ta="MenuContent",[XG,W0]=eu(Ta),WN=j.forwardRef((n,e)=>{const t=KN(Ta,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,o=tu(Ta,n.__scopeMenu),l=kf(Ta,n.__scopeMenu);return T.jsx(Jd.Provider,{scope:n.__scopeMenu,children:T.jsx(Ia,{present:r||o.open,children:T.jsx(Jd.Slot,{scope:n.__scopeMenu,children:l.modal?T.jsx(ZG,{...i,ref:e}):T.jsx(JG,{...i,ref:e})})})})}),ZG=j.forwardRef((n,e)=>{const t=tu(Ta,n.__scopeMenu),r=j.useRef(null),i=Yn(e,r);return j.useEffect(()=>{const o=r.current;if(o)return V0(o)},[]),T.jsx(Q0,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:cn(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),JG=j.forwardRef((n,e)=>{const t=tu(Ta,n.__scopeMenu);return T.jsx(Q0,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),e6=$l("MenuContent.ScrollLock"),Q0=j.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:g,disableOutsideScroll:p,...E}=n,S=tu(Ta,t),x=kf(Ta,t),_=Xg(t),A=HN(t),z=HG(t),[ie,he]=j.useState(null),P=j.useRef(null),U=Yn(e,P,S.onContentChange),ce=j.useRef(0),de=j.useRef(""),_e=j.useRef(0),je=j.useRef(null),Se=j.useRef("right"),ze=j.useRef(0),Le=p?Qg:j.Fragment,Re=p?{as:e6,allowPinchZoom:!0}:void 0,Ye=Me=>{var Qe,X;const We=de.current+Me,Ke=z().filter(W=>!W.disabled),nt=document.activeElement,bt=(Qe=Ke.find(W=>W.ref.current===nt))==null?void 0:Qe.textValue,Rt=Ke.map(W=>W.textValue),Pe=f6(Rt,We,bt),Ne=(X=Ke.find(W=>W.textValue===Pe))==null?void 0:X.ref.current;(function W(C){de.current=C,window.clearTimeout(ce.current),C!==""&&(ce.current=window.setTimeout(()=>W(""),1e3))})(We),Ne&&setTimeout(()=>Ne.focus())};j.useEffect(()=>()=>window.clearTimeout(ce.current),[]),H0();const Ue=j.useCallback(Me=>{var Ke,nt;return Se.current===((Ke=je.current)==null?void 0:Ke.side)&&m6(Me,(nt=je.current)==null?void 0:nt.area)},[]);return T.jsx(XG,{scope:t,searchRef:de,onItemEnter:j.useCallback(Me=>{Ue(Me)&&Me.preventDefault()},[Ue]),onItemLeave:j.useCallback(Me=>{var We;Ue(Me)||((We=P.current)==null||We.focus(),he(null))},[Ue]),onTriggerLeave:j.useCallback(Me=>{Ue(Me)&&Me.preventDefault()},[Ue]),pointerGraceTimerRef:_e,onPointerGraceIntentChange:j.useCallback(Me=>{je.current=Me},[]),children:T.jsx(Le,{...Re,children:T.jsx(Kg,{asChild:!0,trapped:i,onMountAutoFocus:cn(o,Me=>{var We;Me.preventDefault(),(We=P.current)==null||We.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:T.jsx(_c,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:h,onDismiss:g,children:T.jsx(LN,{asChild:!0,...A,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:ie,onCurrentTabStopIdChange:he,onEntryFocus:cn(c,Me=>{x.isUsingKeyboardRef.current||Me.preventDefault()}),preventScrollOnEntryFocus:!0,children:T.jsx(D0,{role:"menu","aria-orientation":"vertical","data-state":dD(S.open),"data-radix-menu-content":"",dir:x.dir,..._,...E,ref:U,style:{outline:"none",...E.style},onKeyDown:cn(E.onKeyDown,Me=>{const Ke=Me.target.closest("[data-radix-menu-content]")===Me.currentTarget,nt=Me.ctrlKey||Me.altKey||Me.metaKey,bt=Me.key.length===1;Ke&&(Me.key==="Tab"&&Me.preventDefault(),!nt&&bt&&Ye(Me.key));const Rt=P.current;if(Me.target!==Rt||!$G.includes(Me.key))return;Me.preventDefault();const Ne=z().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);qN.includes(Me.key)&&Ne.reverse(),c6(Ne)}),onBlur:cn(n.onBlur,Me=>{Me.currentTarget.contains(Me.target)||(window.clearTimeout(ce.current),de.current="")}),onPointerMove:cn(n.onPointerMove,ef(Me=>{const We=Me.target,Ke=ze.current!==Me.clientX;if(Me.currentTarget.contains(We)&&Ke){const nt=Me.clientX>ze.current?"right":"left";Se.current=nt,ze.current=Me.clientX}}))})})})})})})});WN.displayName=Ta;var t6="MenuGroup",X0=j.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return T.jsx(Dn.div,{role:"group",...r,ref:e})});X0.displayName=t6;var n6="MenuLabel",QN=j.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return T.jsx(Dn.div,{...r,ref:e})});QN.displayName=n6;var eg="MenuItem",AI="menu.itemSelect",Zg=j.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,o=j.useRef(null),l=kf(eg,n.__scopeMenu),u=W0(eg,n.__scopeMenu),c=Yn(e,o),d=j.useRef(!1),m=()=>{const f=o.current;if(!t&&f){const h=new CustomEvent(AI,{bubbles:!0,cancelable:!0});f.addEventListener(AI,g=>r==null?void 0:r(g),{once:!0}),c0(f,h),h.defaultPrevented?d.current=!1:l.onClose()}};return T.jsx(XN,{...i,ref:c,disabled:t,onClick:cn(n.onClick,m),onPointerDown:f=>{var h;(h=n.onPointerDown)==null||h.call(n,f),d.current=!0},onPointerUp:cn(n.onPointerUp,f=>{var h;d.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:cn(n.onKeyDown,f=>{const h=u.searchRef.current!=="";t||h&&f.key===" "||DE.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Zg.displayName=eg;var XN=j.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...o}=n,l=W0(eg,t),u=HN(t),c=j.useRef(null),d=Yn(e,c),[m,f]=j.useState(!1),[h,g]=j.useState("");return j.useEffect(()=>{const p=c.current;p&&g((p.textContent??"").trim())},[o.children]),T.jsx(Jd.ItemSlot,{scope:t,disabled:r,textValue:i??h,children:T.jsx(PN,{asChild:!0,...u,focusable:!r,children:T.jsx(Dn.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:d,onPointerMove:cn(n.onPointerMove,ef(p=>{r?l.onItemLeave(p):(l.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:cn(n.onPointerLeave,ef(p=>l.onItemLeave(p))),onFocus:cn(n.onFocus,()=>f(!0)),onBlur:cn(n.onBlur,()=>f(!1))})})})}),r6="MenuCheckboxItem",ZN=j.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return T.jsx(rD,{scope:n.__scopeMenu,checked:t,children:T.jsx(Zg,{role:"menuitemcheckbox","aria-checked":tg(t)?"mixed":t,...i,ref:e,"data-state":J0(t),onSelect:cn(i.onSelect,()=>r==null?void 0:r(tg(t)?!0:!t),{checkForDefaultPrevented:!1})})})});ZN.displayName=r6;var JN="MenuRadioGroup",[i6,a6]=eu(JN,{value:void 0,onValueChange:()=>{}}),eD=j.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,o=Vi(r);return T.jsx(i6,{scope:n.__scopeMenu,value:t,onValueChange:o,children:T.jsx(X0,{...i,ref:e})})});eD.displayName=JN;var tD="MenuRadioItem",nD=j.forwardRef((n,e)=>{const{value:t,...r}=n,i=a6(tD,n.__scopeMenu),o=t===i.value;return T.jsx(rD,{scope:n.__scopeMenu,checked:o,children:T.jsx(Zg,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":J0(o),onSelect:cn(r.onSelect,()=>{var l;return(l=i.onValueChange)==null?void 0:l.call(i,t)},{checkForDefaultPrevented:!1})})})});nD.displayName=tD;var Z0="MenuItemIndicator",[rD,s6]=eu(Z0,{checked:!1}),iD=j.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,o=s6(Z0,t);return T.jsx(Ia,{present:r||tg(o.checked)||o.checked===!0,children:T.jsx(Dn.span,{...i,ref:e,"data-state":J0(o.checked)})})});iD.displayName=Z0;var o6="MenuSeparator",aD=j.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return T.jsx(Dn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});aD.displayName=o6;var l6="MenuArrow",sD=j.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Xg(t);return T.jsx(L0,{...i,...r,ref:e})});sD.displayName=l6;var u6="MenuSub",[uX,oD]=eu(u6),dd="MenuSubTrigger",lD=j.forwardRef((n,e)=>{const t=tu(dd,n.__scopeMenu),r=kf(dd,n.__scopeMenu),i=oD(dd,n.__scopeMenu),o=W0(dd,n.__scopeMenu),l=j.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:c}=o,d={__scopeMenu:n.__scopeMenu},m=j.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return j.useEffect(()=>m,[m]),j.useEffect(()=>{const f=u.current;return()=>{window.clearTimeout(f),c(null)}},[u,c]),T.jsx(K0,{asChild:!0,...d,children:T.jsx(XN,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":dD(t.open),...n,ref:Pg(e,i.onTriggerChange),onClick:f=>{var h;(h=n.onClick)==null||h.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:cn(n.onPointerMove,ef(f=>{o.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:cn(n.onPointerLeave,ef(f=>{var g,p;m();const h=(g=t.content)==null?void 0:g.getBoundingClientRect();if(h){const E=(p=t.content)==null?void 0:p.dataset.side,S=E==="right",x=S?-5:5,_=h[S?"left":"right"],A=h[S?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:_,y:h.top},{x:A,y:h.top},{x:A,y:h.bottom},{x:_,y:h.bottom}],side:E}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:cn(n.onKeyDown,f=>{var g;const h=o.searchRef.current!=="";n.disabled||h&&f.key===" "||qG[r.dir].includes(f.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),f.preventDefault())})})})});lD.displayName=dd;var uD="MenuSubContent",cD=j.forwardRef((n,e)=>{const t=KN(Ta,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,o=tu(Ta,n.__scopeMenu),l=kf(Ta,n.__scopeMenu),u=oD(uD,n.__scopeMenu),c=j.useRef(null),d=Yn(e,c);return T.jsx(Jd.Provider,{scope:n.__scopeMenu,children:T.jsx(Ia,{present:r||o.open,children:T.jsx(Jd.Slot,{scope:n.__scopeMenu,children:T.jsx(Q0,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var f;l.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:cn(n.onFocusOutside,m=>{m.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:cn(n.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:cn(n.onKeyDown,m=>{var g;const f=m.currentTarget.contains(m.target),h=GG[l.dir].includes(m.key);f&&h&&(o.onOpenChange(!1),(g=u.trigger)==null||g.focus(),m.preventDefault())})})})})})});cD.displayName=uD;function dD(n){return n?"open":"closed"}function tg(n){return n==="indeterminate"}function J0(n){return tg(n)?"indeterminate":n?"checked":"unchecked"}function c6(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function d6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function f6(n,e,t){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=d6(n,Math.max(o,0));i.length===1&&(l=l.filter(d=>d!==t));const c=l.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function h6(n,e){const{x:t,y:r}=n;let i=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],c=e[l],d=u.x,m=u.y,f=c.x,h=c.y;m>r!=h>r&&t<(f-d)*(r-m)/(h-m)+d&&(i=!i)}return i}function m6(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return h6(t,e)}function ef(n){return e=>e.pointerType==="mouse"?n(e):void 0}var g6=VN,p6=K0,y6=YN,v6=WN,E6=X0,b6=QN,T6=Zg,S6=ZN,x6=eD,w6=nD,_6=iD,I6=aD,A6=sD,R6=lD,k6=cD,Jg="DropdownMenu",[C6]=Ki(Jg,[GN]),Ci=GN(),[N6,fD]=C6(Jg),hD=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:o,onOpenChange:l,modal:u=!0}=n,c=Ci(e),d=j.useRef(null),[m,f]=Za({prop:i,defaultProp:o??!1,onChange:l,caller:Jg});return T.jsx(N6,{scope:e,triggerId:ba(),triggerRef:d,contentId:ba(),open:m,onOpenChange:f,onOpenToggle:j.useCallback(()=>f(h=>!h),[f]),modal:u,children:T.jsx(g6,{...c,open:m,onOpenChange:f,dir:r,modal:u,children:t})})};hD.displayName=Jg;var mD="DropdownMenuTrigger",gD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,o=fD(mD,t),l=Ci(t);return T.jsx(p6,{asChild:!0,...l,children:T.jsx(Dn.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Pg(e,o.triggerRef),onPointerDown:cn(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:cn(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});gD.displayName=mD;var D6="DropdownMenuPortal",pD=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Ci(e);return T.jsx(y6,{...r,...t})};pD.displayName=D6;var yD="DropdownMenuContent",vD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=fD(yD,t),o=Ci(t),l=j.useRef(!1);return T.jsx(v6,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:cn(n.onCloseAutoFocus,u=>{var c;l.current||(c=i.triggerRef.current)==null||c.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:cn(n.onInteractOutside,u=>{const c=u.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,m=c.button===2||d;(!i.modal||m)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vD.displayName=yD;var L6="DropdownMenuGroup",P6=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(E6,{...i,...r,ref:e})});P6.displayName=L6;var M6="DropdownMenuLabel",ED=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(b6,{...i,...r,ref:e})});ED.displayName=M6;var O6="DropdownMenuItem",bD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(T6,{...i,...r,ref:e})});bD.displayName=O6;var F6="DropdownMenuCheckboxItem",TD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(S6,{...i,...r,ref:e})});TD.displayName=F6;var z6="DropdownMenuRadioGroup",U6=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(x6,{...i,...r,ref:e})});U6.displayName=z6;var j6="DropdownMenuRadioItem",SD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(w6,{...i,...r,ref:e})});SD.displayName=j6;var B6="DropdownMenuItemIndicator",xD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(_6,{...i,...r,ref:e})});xD.displayName=B6;var $6="DropdownMenuSeparator",wD=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(I6,{...i,...r,ref:e})});wD.displayName=$6;var q6="DropdownMenuArrow",G6=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(A6,{...i,...r,ref:e})});G6.displayName=q6;var H6="DropdownMenuSubTrigger",_D=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(R6,{...i,...r,ref:e})});_D.displayName=H6;var V6="DropdownMenuSubContent",ID=j.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Ci(t);return T.jsx(k6,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ID.displayName=V6;var K6=hD,Y6=gD,W6=pD,AD=vD,RD=ED,kD=bD,CD=TD,ND=SD,DD=xD,LD=wD,PD=_D,MD=ID;const RI=K6,kI=Y6,Q6=j.forwardRef(({className:n,inset:e,children:t,...r},i)=>T.jsxs(PD,{ref:i,className:Bn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",n),...r,children:[t,T.jsx(WB,{className:"ml-auto h-4 w-4"})]}));Q6.displayName=PD.displayName;const X6=j.forwardRef(({className:n,...e},t)=>T.jsx(MD,{ref:t,className:Bn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));X6.displayName=MD.displayName;const LE=j.forwardRef(({className:n,sideOffset:e=4,...t},r)=>T.jsx(W6,{children:T.jsx(AD,{ref:r,sideOffset:e,className:Bn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));LE.displayName=AD.displayName;const Su=j.forwardRef(({className:n,inset:e,...t},r)=>T.jsx(kD,{ref:r,className:Bn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",n),...t}));Su.displayName=kD.displayName;const Z6=j.forwardRef(({className:n,children:e,checked:t,...r},i)=>T.jsxs(CD,{ref:i,className:Bn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),checked:t,...r,children:[T.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx(DD,{children:T.jsx(m0,{className:"h-4 w-4"})})}),e]}));Z6.displayName=CD.displayName;const J6=j.forwardRef(({className:n,children:e,...t},r)=>T.jsxs(ND,{ref:r,className:Bn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[T.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx(DD,{children:T.jsx(XB,{className:"h-2 w-2 fill-current"})})}),e]}));J6.displayName=ND.displayName;const eH=j.forwardRef(({className:n,inset:e,...t},r)=>T.jsx(RD,{ref:r,className:Bn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));eH.displayName=RD.displayName;const OD=j.forwardRef(({className:n,...e},t)=>T.jsx(LD,{ref:t,className:Bn("-mx-1 my-1 h-px bg-muted",n),...e}));OD.displayName=LD.displayName;const Hl=()=>{const[n,e]=j.useState(""),[t,r]=j.useState(!1),i=Dc(),o=al(),{t:l,language:u,setLanguage:c}=Hr(),d=g=>{g.preventDefault(),n.trim()&&i(`/tube/search?q=${encodeURIComponent(n.trim())}`)},m=()=>{w5(),i("/login")},f=[{to:"/home",icon:u3,label:l("home")},{to:"/tube/trending",icon:zg,label:l("trending")},{to:"/tube/history",icon:aE,label:l("history")},{to:"/tube/favorites",icon:Km,label:l("favorites")}],h=g=>o.pathname===g;return T.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 glass-card border-b border-border",children:[T.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between gap-4",children:[T.jsxs(wi,{to:"/home",className:"flex items-center gap-2 shrink-0",children:[T.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:T.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"W"})}),T.jsx("span",{className:"font-bold text-xl hidden sm:block bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Wista"})]}),T.jsx("form",{onSubmit:d,className:"flex-1 max-w-2xl hidden md:block",children:T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"text",value:n,onChange:g=>e(g.target.value),placeholder:l("search"),className:"search-input pr-12"}),T.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-muted-foreground hover:text-foreground transition-colors",children:T.jsx(Hd,{className:"w-5 h-5"})})]})}),T.jsx("nav",{className:"hidden lg:flex items-center gap-1",children:f.map(g=>T.jsxs(wi,{to:g.to,className:`nav-link flex items-center gap-2 ${h(g.to)?"active":""}`,children:[T.jsx(g.icon,{className:"w-4 h-4"}),T.jsx("span",{children:g.label})]},g.to))}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs(RI,{children:[T.jsx(kI,{className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:T.jsx(g0,{className:"w-5 h-5 text-muted-foreground"})}),T.jsx(LE,{align:"end",className:"bg-card border-border",children:SN.map(g=>T.jsx(Su,{onClick:()=>c(g.code),className:`cursor-pointer ${u===g.code?"text-primary":""}`,children:g.nativeName},g.code))})]}),T.jsxs(RI,{children:[T.jsx(kI,{className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:T.jsx(P_,{className:"w-5 h-5 text-muted-foreground"})}),T.jsxs(LE,{align:"end",className:"bg-card border-border w-48",children:[T.jsx(Su,{asChild:!0,children:T.jsxs(wi,{to:"/tools",className:"flex items-center gap-2 cursor-pointer",children:[T.jsx(h1,{className:"w-4 h-4"}),l("tools")]})}),T.jsx(Su,{asChild:!0,children:T.jsxs(wi,{to:"/games",className:"flex items-center gap-2 cursor-pointer",children:[T.jsx(a1,{className:"w-4 h-4"}),l("games")]})}),T.jsx(OD,{}),T.jsx(Su,{asChild:!0,children:T.jsxs(wi,{to:"/tube/settings",className:"flex items-center gap-2 cursor-pointer",children:[T.jsx(c1,{className:"w-4 h-4"}),l("settings")]})}),T.jsxs(Su,{onClick:m,className:"flex items-center gap-2 cursor-pointer text-destructive",children:[T.jsx(m3,{className:"w-4 h-4"}),l("logout")]})]})]}),T.jsx("button",{onClick:()=>r(!t),className:"lg:hidden p-2 rounded-lg hover:bg-secondary transition-colors",children:t?T.jsx(v0,{className:"w-5 h-5"}):T.jsx(P_,{className:"w-5 h-5"})})]})]}),T.jsx("div",{className:"md:hidden px-4 pb-3",children:T.jsx("form",{onSubmit:d,children:T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"text",value:n,onChange:g=>e(g.target.value),placeholder:l("search"),className:"search-input pr-12 text-sm"}),T.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-muted-foreground hover:text-foreground transition-colors",children:T.jsx(Hd,{className:"w-4 h-4"})})]})})}),t&&T.jsx("nav",{className:"lg:hidden border-t border-border px-4 py-3 fade-in",children:f.map(g=>T.jsxs(wi,{to:g.to,onClick:()=>r(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${h(g.to)?"bg-primary/10 text-primary":"hover:bg-secondary"}`,children:[T.jsx(g.icon,{className:"w-5 h-5"}),T.jsx("span",{children:g.label})]},g.to))})]})},tH=30*60*1e3,nH=60*60*1e3,kh=100;class rH{constructor(){Kc(this,"streamCache",new Map);Kc(this,"videoInfoCache",new Map);Kc(this,"pendingRequests",new Map);Kc(this,"pendingVideoInfo",new Map)}getStream(e){const t=this.streamCache.get(e);return t&&Date.now()-t.timestamp<tH?(console.log(`[StreamCache] Cache hit for stream: ${e}`),t):null}setStream(e,t){this.cleanupIfNeeded(),this.streamCache.set(e,{...t,timestamp:Date.now()}),console.log(`[StreamCache] Cached stream: ${e}`)}getVideoInfo(e){const t=this.videoInfoCache.get(e);return t&&Date.now()-t.timestamp<nH?(console.log(`[StreamCache] Cache hit for video info: ${e}`),t):null}setVideoInfo(e,t){this.cleanupIfNeeded(),this.videoInfoCache.set(e,{...t,timestamp:Date.now()}),console.log(`[StreamCache] Cached video info: ${e}`)}async getOrFetchStream(e,t){const r=this.getStream(e);if(r)return r;const i=this.pendingRequests.get(e);if(i)return console.log(`[StreamCache] Waiting for pending stream request: ${e}`),i;const o=t().then(l=>{if(this.pendingRequests.delete(e),l){const u={...l,timestamp:Date.now()};return this.streamCache.set(e,u),u}return null}).catch(l=>{throw this.pendingRequests.delete(e),l});return this.pendingRequests.set(e,o),o}async getOrFetchVideoInfo(e,t){const r=this.getVideoInfo(e);if(r)return r;const i=this.pendingVideoInfo.get(e);if(i)return console.log(`[StreamCache] Waiting for pending video info request: ${e}`),i;const o=t().then(l=>{if(this.pendingVideoInfo.delete(e),l){const u={...l,timestamp:Date.now()};return this.videoInfoCache.set(e,u),u}return null}).catch(l=>{throw this.pendingVideoInfo.delete(e),l});return this.pendingVideoInfo.set(e,o),o}cleanupIfNeeded(){if(this.streamCache.size>kh){const e=Array.from(this.streamCache.entries());e.sort((r,i)=>r[1].timestamp-i[1].timestamp),e.slice(0,Math.floor(kh/2)).forEach(([r])=>this.streamCache.delete(r))}if(this.videoInfoCache.size>kh){const e=Array.from(this.videoInfoCache.entries());e.sort((r,i)=>r[1].timestamp-i[1].timestamp),e.slice(0,Math.floor(kh/2)).forEach(([r])=>this.videoInfoCache.delete(r))}}prefetchVideoInfo(e,t){e.slice(0,5).forEach(r=>{!this.getVideoInfo(r)&&!this.pendingVideoInfo.has(r)&&this.getOrFetchVideoInfo(r,()=>t(r)).catch(()=>{})})}clear(){this.streamCache.clear(),this.videoInfoCache.clear(),console.log("[StreamCache] Cache cleared")}}const dm=new rH,iH=["https://api.allorigins.win/raw?url=","https://api.codetabs.com/v1/proxy?quest=","https://thingproxy.freeboard.io/fetch/","https://corsproxy.io/?url=","https://cors.lol/?url=","https://yacdn.org/proxy/","https://proxy.cors.sh/","https://cors.wtf/?url=","https://corsproxy.rocks/?url=","https://cors.hyoo.ru/?url=","https://cors.miaouf.com/?url=","https://crossorigin.me/","https://cors.x2u.in/","https://jsonp.afeld.me/?url=","https://cors-proxy.htmldriven.com/?url=","https://corsproxy.our.buildo.io/?url=","https://cors.now.sh/","https://api.allorigins.win/get?url="],aH="https://raw.githubusercontent.com/woolisbest/crosproxy-list/refs/heads/main/main.txt",FD="cors_proxies_github",zD="cors_proxies_github_ts",sH=30*60*1e3;let tf=[],CI=0;const oH=5*60*1e3,lH=()=>{try{const n=localStorage.getItem(FD),e=localStorage.getItem(zD);if(n&&e){const t=parseInt(e,10);if(Date.now()-t<sH)return JSON.parse(n)}}catch{}return[]},uH=n=>{try{localStorage.setItem(FD,JSON.stringify(n)),localStorage.setItem(zD,Date.now().toString())}catch{}},cH=n=>{const e=n.split(`
`),t=[];for(const r of e){let i=r.trim();!i||i.startsWith("#")||i.startsWith("//")||((i.startsWith('"')||i.startsWith("'"))&&(i=i.replace(/^["']|["'],?$/g,"")),i.startsWith("-")&&(i=i.substring(1).trim()),(i.startsWith("http://")||i.startsWith("https://"))&&(!i.includes("?")&&!i.endsWith("/")&&(i+="/"),t.push(i)))}return t},dH=async()=>{const n=Date.now();if(n-CI<oH)return tf;CI=n;try{console.log("[CORSProxy] Fetching proxy list from GitHub...");const e=await fetch(aH,{signal:AbortSignal.timeout(5e3)});if(e.ok){const t=await e.text(),r=cH(t);if(r.length>0)return console.log(`[CORSProxy] Loaded ${r.length} proxies from GitHub`),tf=r,uH(r),r}}catch(e){console.log("[CORSProxy] Failed to fetch from GitHub:",e)}return[]};tf=lH();const fH=()=>[...iH],hH=async()=>(tf.length===0&&await dH(),tf),mH=["https://app.materialio.us","https://inv.kamuridesu.com","https://inv.nadeko.net","https://inv.vern.cc","https://inv1.nadeko.net","https://inv2.nadeko.net","https://inv3.nadeko.net","https://inv4.nadeko.net","https://inv5.nadeko.net","https://inv6.nadeko.net","https://inv7.nadeko.net","https://inv8.nadeko.net","https://inv9.nadeko.net","https://invidious.f5.si","https://invidious.lunivers.trade","https://invidious.nerdvpn.de","https://invidious.nietzospannend.nl","https://invidious.projectsegfau.lt","https://invidious.protokolla.fi","https://invidious.tiekoetter.com","https://lekker.gay","https://nyc1.iv.ggtyler.dev","https://rust.oskamp.nl","https://y.com.sb","https://yewtu.be","https://yt.thechangebook.org","https://yt.vern.cc"],Oy=2e3,gH=3,gu=6,UD="invidious_working_instances",jD="invidious_instance_update",BD=()=>{try{const n=localStorage.getItem(UD);if(n)return JSON.parse(n)}catch{}return[]},PE=n=>{try{localStorage.setItem(UD,JSON.stringify(n)),localStorage.setItem(jD,Date.now().toString())}catch{}},$D=()=>{try{return parseInt(localStorage.getItem(jD)||"0",10)}catch{return 0}};let Zi=BD(),ME=$D();const pH=10*60*1e3,yH=async(n,e)=>{const t=new AbortController,r=setTimeout(()=>t.abort(),e);try{const i=await fetch(n,{signal:t.signal});return clearTimeout(r),i}catch(i){throw clearTimeout(r),i}},vH=n=>!["shutdown","blocked","Forbidden","error","<!DOCTYPE","<html","Rate limit","not found","temporarily unavailable","maintenance"].some(t=>n.toLowerCase().includes(t.toLowerCase())),Fy=async(n,e,t,r)=>{const i=[];for(const o of e){const l=`${o}/api/v1${n}`,u=t?`${t}${encodeURIComponent(l)}`:l;i.push(yH(u,r).then(async c=>{if(!c.ok)return null;const d=await c.text();if(!vH(d))return null;try{const m=JSON.parse(d);if(m&&typeof m=="object"&&!m.error)return Zi.includes(o)?(Zi=[o,...Zi.filter(f=>f!==o)].slice(0,8),PE(Zi)):(Zi=[o,...Zi].slice(0,8),ME=Date.now(),PE(Zi)),{data:m,instance:o}}catch{return null}return null}).catch(()=>null))}return new Promise(o=>{let l=!1,u=0;i.forEach(c=>{c.then(d=>{u++,!l&&d?(l=!0,console.log(`[Invidious] Success from ${d.instance}`),o(d.data)):u===i.length&&!l&&o(null)})}),setTimeout(()=>{l||(l=!0,o(null))},r+500)})},Yu=async n=>{const e=Date.now(),t=$D();e-t>pH?(Zi=[],PE([])):t>ME&&(Zi=BD(),ME=t);const r=[...Zi,...mH.filter(l=>!Zi.includes(l))],i=fH();if(Zi.length>0&&i.length>0){const l=await Fy(n,Zi,i[0],Oy);if(l)return l;console.log("[Invidious] Fast path failed, trying full search...")}for(let l=0;l<gH;l++)for(const u of i)for(let c=0;c<Math.ceil(r.length/gu);c++){const d=r.slice(c*gu,(c+1)*gu),m=await Fy(n,d,u,Oy);if(m)return m;console.log(`[Invidious] Retry ${l+1}, Batch ${c+1} with proxy "${u}" failed`)}console.log("[Invidious] Static proxies exhausted, trying GitHub proxy list...");const o=await hH();for(const l of o)for(let u=0;u<Math.ceil(r.length/gu);u++){const c=r.slice(u*gu,(u+1)*gu),d=await Fy(n,c,l,Oy);if(d)return console.log(`[Invidious] Success with GitHub proxy: ${l}`),d}throw new Error("All Invidious instances failed")},qD=async n=>Yu(`/search?q=${encodeURIComponent(n)}&type=video`),GD=async(n="JP")=>Yu(`/trending?region=${n}`),ep=async n=>{if(dm.getVideoInfo(n))return Yu(`/videos/${n}`);const t=await Yu(`/videos/${n}`);if(t){const r=Vl(t.videoThumbnails);if(dm.setVideoInfo(n,{videoId:t.videoId,title:t.title,author:t.author,authorId:t.authorId,description:t.description,viewCount:t.viewCount,lengthSeconds:t.lengthSeconds,publishedText:t.publishedText,thumbnail:r}),t.recommendedVideos&&t.recommendedVideos.length>0){const i=t.recommendedVideos.slice(0,5).map(o=>o.videoId);dm.prefetchVideoInfo(i,async o=>{try{const l=await Yu(`/videos/${o}`);return{videoId:l.videoId,title:l.title,author:l.author,authorId:l.authorId,description:l.description,viewCount:l.viewCount,lengthSeconds:l.lengthSeconds,publishedText:l.publishedText,thumbnail:Vl(l.videoThumbnails)}}catch{return null}})}}return t},EH=async n=>Yu(`/comments/${n}`),NI=n=>{const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${t}:${r.toString().padStart(2,"0")}`},OE=n=>n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toString(),Vl=(n,e)=>{var i;const t=n.find(o=>o.quality==="medium"||o.quality==="high"),r=(t==null?void 0:t.url)||((i=n[0])==null?void 0:i.url)||"";if(r){const o=_N(),l=r.match(/\/vi\/([a-zA-Z0-9_-]+)\//);if(l)return`https://${o}/vi/${l[1]}/mqdefault.jpg`}return r},ng=({videoId:n,title:e,author:t,viewCount:r,lengthSeconds:i,publishedText:o,thumbnails:l,liveNow:u,compact:c=!1})=>{const{t:d}=Hr(),m=Vl(l);return c?T.jsxs(wi,{to:`/tube/watch/${n}`,className:"flex gap-3 p-2 rounded-lg hover:bg-secondary transition-colors group",children:[T.jsxs("div",{className:"relative w-40 shrink-0",children:[T.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:T.jsx("img",{src:m,alt:e,className:"w-full h-full object-cover",loading:"lazy"})}),u?T.jsxs("span",{className:"absolute bottom-1 right-1 bg-destructive text-destructive-foreground text-xs px-1.5 py-0.5 rounded flex items-center gap-1",children:[T.jsx(Ml,{className:"w-3 h-3"}),d("live")]}):i?T.jsx("span",{className:"absolute bottom-1 right-1 bg-background/80 text-xs px-1.5 py-0.5 rounded",children:NI(i)}):null]}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("h3",{className:"font-medium text-sm line-clamp-2 group-hover:text-primary transition-colors",children:e}),T.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t}),T.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[r!==void 0&&T.jsxs("span",{children:[OE(r)," ",d("views")]}),o&&T.jsxs("span",{children:["• ",o]})]})]})]}):T.jsxs(wi,{to:`/tube/watch/${n}`,className:"group block",children:[T.jsxs("div",{className:"video-thumbnail aspect-video bg-muted",children:[T.jsx("img",{src:m,alt:e,className:"w-full h-full object-cover",loading:"lazy"}),T.jsx("div",{className:"absolute inset-0 bg-background/0 group-hover:bg-background/20 transition-colors flex items-center justify-center",children:T.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity scale-90 group-hover:scale-100",children:T.jsx(Wo,{className:"w-6 h-6 text-primary-foreground ml-1",fill:"currentColor"})})}),u?T.jsxs("span",{className:"absolute bottom-2 right-2 bg-destructive text-destructive-foreground text-xs font-medium px-2 py-1 rounded flex items-center gap-1",children:[T.jsx(Ml,{className:"w-3 h-3"}),d("live")]}):i?T.jsx("span",{className:"absolute bottom-2 right-2 bg-background/80 backdrop-blur-sm text-xs font-medium px-2 py-1 rounded",children:NI(i)}):null]}),T.jsxs("div",{className:"mt-3",children:[T.jsx("h3",{className:"font-medium line-clamp-2 group-hover:text-primary transition-colors",children:e}),T.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t}),T.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r!==void 0&&T.jsxs("span",{children:[OE(r)," ",d("views")]}),o&&T.jsxs("span",{children:["• ",o]})]})]})]})},tp=({videos:n,loading:e,compact:t})=>e?T.jsx("div",{className:t?"space-y-2":"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((r,i)=>T.jsxs("div",{className:t?"flex gap-3 p-2":"",children:[T.jsx("div",{className:`${t?"w-40":"w-full"} aspect-video bg-muted rounded-lg animate-pulse`}),t&&T.jsxs("div",{className:"flex-1 space-y-2",children:[T.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-3/4"}),T.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-1/2"})]}),!t&&T.jsxs("div",{className:"mt-3 space-y-2",children:[T.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),T.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]})]},i))}):t?T.jsx("div",{className:"space-y-1",children:n.map(r=>T.jsx(ng,{videoId:r.videoId,title:r.title,author:r.author,authorId:r.authorId,viewCount:r.viewCount,lengthSeconds:r.lengthSeconds,publishedText:r.publishedText,thumbnails:r.videoThumbnails,liveNow:r.liveNow,compact:!0},r.videoId))}):T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(r=>T.jsx(ng,{videoId:r.videoId,title:r.title,author:r.author,authorId:r.authorId,viewCount:r.viewCount,lengthSeconds:r.lengthSeconds,publishedText:r.publishedText,thumbnails:r.videoThumbnails,liveNow:r.liveNow},r.videoId))}),bH=Fg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Hn=j.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const l=r?tB:"button";return T.jsx(l,{className:Bn(bH({variant:e,size:t,className:n})),ref:o,...i})});Hn.displayName="Button";const TH=()=>{const[n,e]=j.useState(""),[t,r]=j.useState([]),[i,o]=j.useState(!0),[l,u]=j.useState(""),c=Dc(),{t:d,language:m}=Hr();j.useEffect(()=>{f()},[]);const f=async()=>{o(!0),u("");try{const g=await GD();r(g.slice(0,8))}catch(g){console.error("Failed to load trending:",g),u(d("failedToLoad"))}finally{o(!1)}},h=g=>{g.preventDefault(),n.trim()&&c(`/tube/search?q=${encodeURIComponent(n.trim())}`)};return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12",children:[T.jsxs("section",{className:"relative py-20 overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent"}),T.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[400px] bg-primary/10 rounded-full blur-3xl"}),T.jsx("div",{className:"container mx-auto px-4 relative",children:T.jsxs("div",{className:"text-center max-w-3xl mx-auto slide-up",children:[T.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6",children:[T.jsx(Wo,{className:"w-4 h-4",fill:"currentColor"}),"Wista - ",m==="ja"?"動画を検索・視聴":"Search and Watch Videos"]}),T.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:[T.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Wista"}),m==="ja"?"で動画を":" - Discover Your"," ",T.jsx("span",{className:"text-primary",children:m==="ja"?"発見":"Favorites"})]}),T.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:m==="ja"?"Wistaでトレンド動画を探索し、履歴やお気に入りを管理":"Explore trending videos with Wista and manage your history and favorites"}),T.jsx("form",{onSubmit:h,className:"max-w-2xl mx-auto",children:T.jsxs("div",{className:"relative",children:[T.jsx(Hd,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-6 h-6 text-muted-foreground"}),T.jsx("input",{type:"text",value:n,onChange:g=>e(g.target.value),placeholder:d("search"),className:"w-full bg-card border-2 border-border rounded-full pl-16 pr-6 py-5 text-lg text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none transition-all shadow-lg"}),T.jsx(Hn,{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2",children:d("search").replace("...","")})]})})]})})]}),T.jsxs("section",{className:"container mx-auto px-4 mt-12",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[T.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:T.jsx(zg,{className:"w-5 h-5 text-primary"})}),T.jsx("h2",{className:"text-2xl font-bold",children:d("trending")})]}),l?T.jsxs("div",{className:"text-center py-12",children:[T.jsx("p",{className:"text-muted-foreground mb-4",children:l}),T.jsx(Hn,{onClick:f,children:d("retry")})]}):T.jsx(tp,{videos:t,loading:i})]})]})]})},SH=()=>{const[n]=v5(),e=n.get("q")||"",[t,r]=j.useState([]),[i,o]=j.useState(!1),[l,u]=j.useState(""),{t:c,language:d}=Hr();j.useEffect(()=>{e&&m()},[e]);const m=async()=>{o(!0),u("");try{const f=await qD(e);r(f)}catch(f){console.error("Search failed:",f),u(c("failedToLoad"))}finally{o(!1)}};return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12 container mx-auto px-4",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:T.jsx(Hd,{className:"w-6 h-6 text-primary"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-primary font-medium",children:"Wista Search"}),T.jsx("h1",{className:"text-2xl font-bold",children:e?`"${e}" ${d==="ja"?"の検索結果":"results"}`:c("search")}),t.length>0&&T.jsxs("p",{className:"text-muted-foreground",children:[t.length," ",d==="ja"?"件の動画が見つかりました":"videos found"]})]})]}),l?T.jsxs("div",{className:"text-center py-12",children:[T.jsx("p",{className:"text-muted-foreground mb-4",children:l}),T.jsx("button",{onClick:m,className:"btn-primary",children:c("retry")})]}):t.length===0&&!i?T.jsxs("div",{className:"text-center py-12",children:[T.jsx(Hd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),T.jsx("p",{className:"text-xl text-muted-foreground",children:c("noResults")})]}):T.jsx(tp,{videos:t,loading:i})]})]})};function rg(n,[e,t]){return Math.min(t,Math.max(e,n))}function eT(n){const e=j.useRef({value:n,previous:n});return j.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var xH=[" ","Enter","ArrowUp","ArrowDown"],wH=[" ","Enter"],Kl="Select",[np,rp,_H]=bf(Kl),[Lc]=Ki(Kl,[_H,kc]),ip=kc(),[IH,sl]=Lc(Kl),[AH,RH]=Lc(Kl),HD=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:o,value:l,defaultValue:u,onValueChange:c,dir:d,name:m,autoComplete:f,disabled:h,required:g,form:p}=n,E=ip(e),[S,x]=j.useState(null),[_,A]=j.useState(null),[z,ie]=j.useState(!1),he=If(d),[P,U]=Za({prop:r,defaultProp:i??!1,onChange:o,caller:Kl}),[ce,de]=Za({prop:l,defaultProp:u,onChange:c,caller:Kl}),_e=j.useRef(null),je=S?p||!!S.closest("form"):!0,[Se,ze]=j.useState(new Set),Le=Array.from(Se).map(Re=>Re.props.value).join(";");return T.jsx(C0,{...E,children:T.jsxs(IH,{required:g,scope:e,trigger:S,onTriggerChange:x,valueNode:_,onValueNodeChange:A,valueNodeHasChildren:z,onValueNodeHasChildrenChange:ie,contentId:ba(),value:ce,onValueChange:de,open:P,onOpenChange:U,dir:he,triggerPointerDownPosRef:_e,disabled:h,children:[T.jsx(np.Provider,{scope:e,children:T.jsx(AH,{scope:n.__scopeSelect,onNativeOptionAdd:j.useCallback(Re=>{ze(Ye=>new Set(Ye).add(Re))},[]),onNativeOptionRemove:j.useCallback(Re=>{ze(Ye=>{const Ue=new Set(Ye);return Ue.delete(Re),Ue})},[]),children:t})}),je?T.jsxs(pL,{"aria-hidden":!0,required:g,tabIndex:-1,name:m,autoComplete:f,value:ce,onChange:Re=>de(Re.target.value),disabled:h,form:p,children:[ce===void 0?T.jsx("option",{value:""}):null,Array.from(Se)]},Le):null]})})};HD.displayName=Kl;var VD="SelectTrigger",KD=j.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,o=ip(t),l=sl(VD,t),u=l.disabled||r,c=Yn(e,l.onTriggerChange),d=rp(t),m=j.useRef("touch"),[f,h,g]=vL(E=>{const S=d().filter(A=>!A.disabled),x=S.find(A=>A.value===l.value),_=EL(S,E,x);_!==void 0&&l.onValueChange(_.value)}),p=E=>{u||(l.onOpenChange(!0),g()),E&&(l.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return T.jsx(N0,{asChild:!0,...o,children:T.jsx(Dn.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":yL(l.value)?"":void 0,...i,ref:c,onClick:cn(i.onClick,E=>{E.currentTarget.focus(),m.current!=="mouse"&&p(E)}),onPointerDown:cn(i.onPointerDown,E=>{m.current=E.pointerType;const S=E.target;S.hasPointerCapture(E.pointerId)&&S.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(p(E),E.preventDefault())}),onKeyDown:cn(i.onKeyDown,E=>{const S=f.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&h(E.key),!(S&&E.key===" ")&&xH.includes(E.key)&&(p(),E.preventDefault())})})})});KD.displayName=VD;var YD="SelectValue",WD=j.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:o,placeholder:l="",...u}=n,c=sl(YD,t),{onValueNodeHasChildrenChange:d}=c,m=o!==void 0,f=Yn(e,c.onValueNodeChange);return ii(()=>{d(m)},[d,m]),T.jsx(Dn.span,{...u,ref:f,style:{pointerEvents:"none"},children:yL(c.value)?T.jsx(T.Fragment,{children:l}):o})});WD.displayName=YD;var kH="SelectIcon",QD=j.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return T.jsx(Dn.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});QD.displayName=kH;var CH="SelectPortal",XD=n=>T.jsx(Tf,{asChild:!0,...n});XD.displayName=CH;var Yl="SelectContent",ZD=j.forwardRef((n,e)=>{const t=sl(Yl,n.__scopeSelect),[r,i]=j.useState();if(ii(()=>{i(new DocumentFragment)},[]),!t.open){const o=r;return o?Jl.createPortal(T.jsx(JD,{scope:n.__scopeSelect,children:T.jsx(np.Slot,{scope:n.__scopeSelect,children:T.jsx("div",{children:n.children})})}),o):null}return T.jsx(eL,{...n,ref:e})});ZD.displayName=Yl;var ja=10,[JD,ol]=Lc(Yl),NH="SelectContentImpl",DH=$l("SelectContent.RemoveScroll"),eL=j.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:c,align:d,alignOffset:m,arrowPadding:f,collisionBoundary:h,collisionPadding:g,sticky:p,hideWhenDetached:E,avoidCollisions:S,...x}=n,_=sl(Yl,t),[A,z]=j.useState(null),[ie,he]=j.useState(null),P=Yn(e,Qe=>z(Qe)),[U,ce]=j.useState(null),[de,_e]=j.useState(null),je=rp(t),[Se,ze]=j.useState(!1),Le=j.useRef(!1);j.useEffect(()=>{if(A)return V0(A)},[A]),H0();const Re=j.useCallback(Qe=>{const[X,...W]=je().map(le=>le.ref.current),[C]=W.slice(-1),O=document.activeElement;for(const le of Qe)if(le===O||(le==null||le.scrollIntoView({block:"nearest"}),le===X&&ie&&(ie.scrollTop=0),le===C&&ie&&(ie.scrollTop=ie.scrollHeight),le==null||le.focus(),document.activeElement!==O))return},[je,ie]),Ye=j.useCallback(()=>Re([U,A]),[Re,U,A]);j.useEffect(()=>{Se&&Ye()},[Se,Ye]);const{onOpenChange:Ue,triggerPointerDownPosRef:Me}=_;j.useEffect(()=>{if(A){let Qe={x:0,y:0};const X=C=>{var O,le;Qe={x:Math.abs(Math.round(C.pageX)-(((O=Me.current)==null?void 0:O.x)??0)),y:Math.abs(Math.round(C.pageY)-(((le=Me.current)==null?void 0:le.y)??0))}},W=C=>{Qe.x<=10&&Qe.y<=10?C.preventDefault():A.contains(C.target)||Ue(!1),document.removeEventListener("pointermove",X),Me.current=null};return Me.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",W,{capture:!0})}}},[A,Ue,Me]),j.useEffect(()=>{const Qe=()=>Ue(!1);return window.addEventListener("blur",Qe),window.addEventListener("resize",Qe),()=>{window.removeEventListener("blur",Qe),window.removeEventListener("resize",Qe)}},[Ue]);const[We,Ke]=vL(Qe=>{const X=je().filter(O=>!O.disabled),W=X.find(O=>O.ref.current===document.activeElement),C=EL(X,Qe,W);C&&setTimeout(()=>C.ref.current.focus())}),nt=j.useCallback((Qe,X,W)=>{const C=!Le.current&&!W;(_.value!==void 0&&_.value===X||C)&&(ce(Qe),C&&(Le.current=!0))},[_.value]),bt=j.useCallback(()=>A==null?void 0:A.focus(),[A]),Rt=j.useCallback((Qe,X,W)=>{const C=!Le.current&&!W;(_.value!==void 0&&_.value===X||C)&&_e(Qe)},[_.value]),Pe=r==="popper"?FE:tL,Ne=Pe===FE?{side:u,sideOffset:c,align:d,alignOffset:m,arrowPadding:f,collisionBoundary:h,collisionPadding:g,sticky:p,hideWhenDetached:E,avoidCollisions:S}:{};return T.jsx(JD,{scope:t,content:A,viewport:ie,onViewportChange:he,itemRefCallback:nt,selectedItem:U,onItemLeave:bt,itemTextRefCallback:Rt,focusSelectedItem:Ye,selectedItemText:de,position:r,isPositioned:Se,searchRef:We,children:T.jsx(Qg,{as:DH,allowPinchZoom:!0,children:T.jsx(Kg,{asChild:!0,trapped:_.open,onMountAutoFocus:Qe=>{Qe.preventDefault()},onUnmountAutoFocus:cn(i,Qe=>{var X;(X=_.trigger)==null||X.focus({preventScroll:!0}),Qe.preventDefault()}),children:T.jsx(_c,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:Qe=>Qe.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:T.jsx(Pe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Qe=>Qe.preventDefault(),...x,...Ne,onPlaced:()=>ze(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:cn(x.onKeyDown,Qe=>{const X=Qe.ctrlKey||Qe.altKey||Qe.metaKey;if(Qe.key==="Tab"&&Qe.preventDefault(),!X&&Qe.key.length===1&&Ke(Qe.key),["ArrowUp","ArrowDown","Home","End"].includes(Qe.key)){let C=je().filter(O=>!O.disabled).map(O=>O.ref.current);if(["ArrowUp","End"].includes(Qe.key)&&(C=C.slice().reverse()),["ArrowUp","ArrowDown"].includes(Qe.key)){const O=Qe.target,le=C.indexOf(O);C=C.slice(le+1)}setTimeout(()=>Re(C)),Qe.preventDefault()}})})})})})})});eL.displayName=NH;var LH="SelectItemAlignedPosition",tL=j.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,o=sl(Yl,t),l=ol(Yl,t),[u,c]=j.useState(null),[d,m]=j.useState(null),f=Yn(e,P=>m(P)),h=rp(t),g=j.useRef(!1),p=j.useRef(!0),{viewport:E,selectedItem:S,selectedItemText:x,focusSelectedItem:_}=l,A=j.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&d&&E&&S&&x){const P=o.trigger.getBoundingClientRect(),U=d.getBoundingClientRect(),ce=o.valueNode.getBoundingClientRect(),de=x.getBoundingClientRect();if(o.dir!=="rtl"){const O=de.left-U.left,le=ce.left-O,te=P.left-le,Be=P.width+te,rt=Math.max(Be,U.width),qe=window.innerWidth-ja,Xe=rg(le,[ja,Math.max(ja,qe-rt)]);u.style.minWidth=Be+"px",u.style.left=Xe+"px"}else{const O=U.right-de.right,le=window.innerWidth-ce.right-O,te=window.innerWidth-P.right-le,Be=P.width+te,rt=Math.max(Be,U.width),qe=window.innerWidth-ja,Xe=rg(le,[ja,Math.max(ja,qe-rt)]);u.style.minWidth=Be+"px",u.style.right=Xe+"px"}const _e=h(),je=window.innerHeight-ja*2,Se=E.scrollHeight,ze=window.getComputedStyle(d),Le=parseInt(ze.borderTopWidth,10),Re=parseInt(ze.paddingTop,10),Ye=parseInt(ze.borderBottomWidth,10),Ue=parseInt(ze.paddingBottom,10),Me=Le+Re+Se+Ue+Ye,We=Math.min(S.offsetHeight*5,Me),Ke=window.getComputedStyle(E),nt=parseInt(Ke.paddingTop,10),bt=parseInt(Ke.paddingBottom,10),Rt=P.top+P.height/2-ja,Pe=je-Rt,Ne=S.offsetHeight/2,Qe=S.offsetTop+Ne,X=Le+Re+Qe,W=Me-X;if(X<=Rt){const O=_e.length>0&&S===_e[_e.length-1].ref.current;u.style.bottom="0px";const le=d.clientHeight-E.offsetTop-E.offsetHeight,te=Math.max(Pe,Ne+(O?bt:0)+le+Ye),Be=X+te;u.style.height=Be+"px"}else{const O=_e.length>0&&S===_e[0].ref.current;u.style.top="0px";const te=Math.max(Rt,Le+E.offsetTop+(O?nt:0)+Ne)+W;u.style.height=te+"px",E.scrollTop=X-Rt+E.offsetTop}u.style.margin=`${ja}px 0`,u.style.minHeight=We+"px",u.style.maxHeight=je+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[h,o.trigger,o.valueNode,u,d,E,S,x,o.dir,r]);ii(()=>A(),[A]);const[z,ie]=j.useState();ii(()=>{d&&ie(window.getComputedStyle(d).zIndex)},[d]);const he=j.useCallback(P=>{P&&p.current===!0&&(A(),_==null||_(),p.current=!1)},[A,_]);return T.jsx(MH,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:he,children:T.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:z},children:T.jsx(Dn.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});tL.displayName=LH;var PH="SelectPopperPosition",FE=j.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=ja,...o}=n,l=ip(t);return T.jsx(D0,{...l,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});FE.displayName=PH;var[MH,tT]=Lc(Yl,{}),zE="SelectViewport",nL=j.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,o=ol(zE,t),l=tT(zE,t),u=Yn(e,o.onViewportChange),c=j.useRef(0);return T.jsxs(T.Fragment,{children:[T.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),T.jsx(np.Slot,{scope:t,children:T.jsx(Dn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:cn(i.onScroll,d=>{const m=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&f){const g=Math.abs(c.current-m.scrollTop);if(g>0){const p=window.innerHeight-ja*2,E=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),x=Math.max(E,S);if(x<p){const _=x+g,A=Math.min(p,_),z=_-A;f.style.height=A+"px",f.style.bottom==="0px"&&(m.scrollTop=z>0?z:0,f.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});nL.displayName=zE;var rL="SelectGroup",[OH,FH]=Lc(rL),iL=j.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ba();return T.jsx(OH,{scope:t,id:i,children:T.jsx(Dn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});iL.displayName=rL;var aL="SelectLabel",sL=j.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=FH(aL,t);return T.jsx(Dn.div,{id:i.id,...r,ref:e})});sL.displayName=aL;var ig="SelectItem",[zH,oL]=Lc(ig),lL=j.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:o,...l}=n,u=sl(ig,t),c=ol(ig,t),d=u.value===r,[m,f]=j.useState(o??""),[h,g]=j.useState(!1),p=Yn(e,_=>{var A;return(A=c.itemRefCallback)==null?void 0:A.call(c,_,r,i)}),E=ba(),S=j.useRef("touch"),x=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return T.jsx(zH,{scope:t,value:r,disabled:i,textId:E,isSelected:d,onItemTextChange:j.useCallback(_=>{f(A=>A||((_==null?void 0:_.textContent)??"").trim())},[]),children:T.jsx(np.ItemSlot,{scope:t,value:r,disabled:i,textValue:m,children:T.jsx(Dn.div,{role:"option","aria-labelledby":E,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:p,onFocus:cn(l.onFocus,()=>g(!0)),onBlur:cn(l.onBlur,()=>g(!1)),onClick:cn(l.onClick,()=>{S.current!=="mouse"&&x()}),onPointerUp:cn(l.onPointerUp,()=>{S.current==="mouse"&&x()}),onPointerDown:cn(l.onPointerDown,_=>{S.current=_.pointerType}),onPointerMove:cn(l.onPointerMove,_=>{var A;S.current=_.pointerType,i?(A=c.onItemLeave)==null||A.call(c):S.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cn(l.onPointerLeave,_=>{var A;_.currentTarget===document.activeElement&&((A=c.onItemLeave)==null||A.call(c))}),onKeyDown:cn(l.onKeyDown,_=>{var z;((z=c.searchRef)==null?void 0:z.current)!==""&&_.key===" "||(wH.includes(_.key)&&x(),_.key===" "&&_.preventDefault())})})})})});lL.displayName=ig;var fd="SelectItemText",uL=j.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...o}=n,l=sl(fd,t),u=ol(fd,t),c=oL(fd,t),d=RH(fd,t),[m,f]=j.useState(null),h=Yn(e,x=>f(x),c.onItemTextChange,x=>{var _;return(_=u.itemTextRefCallback)==null?void 0:_.call(u,x,c.value,c.disabled)}),g=m==null?void 0:m.textContent,p=j.useMemo(()=>T.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:E,onNativeOptionRemove:S}=d;return ii(()=>(E(p),()=>S(p)),[E,S,p]),T.jsxs(T.Fragment,{children:[T.jsx(Dn.span,{id:c.textId,...o,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Jl.createPortal(o.children,l.valueNode):null]})});uL.displayName=fd;var cL="SelectItemIndicator",dL=j.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return oL(cL,t).isSelected?T.jsx(Dn.span,{"aria-hidden":!0,...r,ref:e}):null});dL.displayName=cL;var UE="SelectScrollUpButton",fL=j.forwardRef((n,e)=>{const t=ol(UE,n.__scopeSelect),r=tT(UE,n.__scopeSelect),[i,o]=j.useState(!1),l=Yn(e,r.onScrollButtonChange);return ii(()=>{if(t.viewport&&t.isPositioned){let u=function(){const d=c.scrollTop>0;o(d)};const c=t.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?T.jsx(mL,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=t;u&&c&&(u.scrollTop=u.scrollTop-c.offsetHeight)}}):null});fL.displayName=UE;var jE="SelectScrollDownButton",hL=j.forwardRef((n,e)=>{const t=ol(jE,n.__scopeSelect),r=tT(jE,n.__scopeSelect),[i,o]=j.useState(!1),l=Yn(e,r.onScrollButtonChange);return ii(()=>{if(t.viewport&&t.isPositioned){let u=function(){const d=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<d;o(m)};const c=t.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?T.jsx(mL,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=t;u&&c&&(u.scrollTop=u.scrollTop+c.offsetHeight)}}):null});hL.displayName=jE;var mL=j.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,o=ol("SelectScrollButton",t),l=j.useRef(null),u=rp(t),c=j.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),ii(()=>{var m;const d=u().find(f=>f.ref.current===document.activeElement);(m=d==null?void 0:d.ref.current)==null||m.scrollIntoView({block:"nearest"})},[u]),T.jsx(Dn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:cn(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:cn(i.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:cn(i.onPointerLeave,()=>{c()})})}),UH="SelectSeparator",gL=j.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return T.jsx(Dn.div,{"aria-hidden":!0,...r,ref:e})});gL.displayName=UH;var BE="SelectArrow",jH=j.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ip(t),o=sl(BE,t),l=ol(BE,t);return o.open&&l.position==="popper"?T.jsx(L0,{...i,...r,ref:e}):null});jH.displayName=BE;var BH="SelectBubbleInput",pL=j.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=j.useRef(null),o=Yn(r,i),l=eT(e);return j.useEffect(()=>{const u=i.current;if(!u)return;const c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==e&&m){const f=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(f)}},[l,e]),T.jsx(Dn.select,{...t,style:{...PC,...t.style},ref:o,defaultValue:e})});pL.displayName=BH;function yL(n){return n===""||n===void 0}function vL(n){const e=Vi(n),t=j.useRef(""),r=j.useRef(0),i=j.useCallback(l=>{const u=t.current+l;e(u),function c(d){t.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(u)},[e]),o=j.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,o]}function EL(n,e,t){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=$H(n,Math.max(o,0));i.length===1&&(l=l.filter(d=>d!==t));const c=l.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function $H(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var qH=HD,bL=KD,GH=WD,HH=QD,VH=XD,TL=ZD,KH=nL,YH=iL,SL=sL,xL=lL,WH=uL,QH=dL,wL=fL,_L=hL,IL=gL;const vs=qH,DI=YH,Es=GH,Ka=j.forwardRef(({className:n,children:e,...t},r)=>T.jsxs(bL,{ref:r,className:Bn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,T.jsx(HH,{asChild:!0,children:T.jsx(r1,{className:"h-4 w-4 opacity-50"})})]}));Ka.displayName=bL.displayName;const AL=j.forwardRef(({className:n,...e},t)=>T.jsx(wL,{ref:t,className:Bn("flex cursor-default items-center justify-center py-1",n),...e,children:T.jsx(QB,{className:"h-4 w-4"})}));AL.displayName=wL.displayName;const RL=j.forwardRef(({className:n,...e},t)=>T.jsx(_L,{ref:t,className:Bn("flex cursor-default items-center justify-center py-1",n),...e,children:T.jsx(r1,{className:"h-4 w-4"})}));RL.displayName=_L.displayName;const Ya=j.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>T.jsx(VH,{children:T.jsxs(TL,{ref:i,className:Bn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[T.jsx(AL,{}),T.jsx(KH,{className:Bn("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),T.jsx(RL,{})]})}));Ya.displayName=TL.displayName;const $E=j.forwardRef(({className:n,...e},t)=>T.jsx(SL,{ref:t,className:Bn("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));$E.displayName=SL.displayName;const _i=j.forwardRef(({className:n,children:e,...t},r)=>T.jsxs(xL,{ref:r,className:Bn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[T.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:T.jsx(QH,{children:T.jsx(m0,{className:"h-4 w-4"})})}),T.jsx(WH,{children:e})]}));_i.displayName=xL.displayName;const XH=j.forwardRef(({className:n,...e},t)=>T.jsx(IL,{ref:t,className:Bn("-mx-1 my-1 h-px bg-muted",n),...e}));XH.displayName=IL.displayName;const ZH=[{code:"JP",name:"日本"},{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"DE",name:"Deutschland"},{code:"FR",name:"France"}],JH=()=>{const[n,e]=j.useState([]),[t,r]=j.useState(!0),[i,o]=j.useState(""),[l,u]=j.useState("JP"),{t:c,language:d}=Hr();j.useEffect(()=>{m()},[l]);const m=async()=>{r(!0),o("");try{const f=await GD(l);e(f)}catch(f){console.error("Failed to load trending:",f),o(c("failedToLoad"))}finally{r(!1)}};return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12 container mx-auto px-4",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:T.jsx(zg,{className:"w-6 h-6 text-primary"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-primary font-medium",children:"Wista Trending"}),T.jsx("h1",{className:"text-2xl font-bold",children:c("trending")}),T.jsx("p",{className:"text-muted-foreground",children:d==="ja"?"Wistaで人気の動画をチェック":"Check out popular videos on Wista"})]})]}),T.jsxs(vs,{value:l,onValueChange:u,children:[T.jsxs(Ka,{className:"w-40 bg-secondary border-border",children:[T.jsx(g0,{className:"w-4 h-4 mr-2"}),T.jsx(Es,{})]}),T.jsx(Ya,{className:"bg-card border-border",children:ZH.map(f=>T.jsx(_i,{value:f.code,children:f.name},f.code))})]})]}),i?T.jsxs("div",{className:"text-center py-12",children:[T.jsx("p",{className:"text-muted-foreground mb-4",children:i}),T.jsx(Hn,{onClick:m,children:c("retry")})]}):T.jsx(tp,{videos:n,loading:t})]})]})},eV=()=>{const[n,e]=ln.useState([]),{t,language:r}=Hr();ln.useEffect(()=>{e(wN())},[]);const i=()=>{A5(),e([])};return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12 container mx-auto px-4",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:T.jsx(aE,{className:"w-6 h-6 text-primary"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-primary font-medium",children:"Wista"}),T.jsx("h1",{className:"text-2xl font-bold",children:t("history")}),T.jsxs("p",{className:"text-muted-foreground",children:[n.length," ",r==="ja"?"件の視聴履歴":"items"]})]})]}),n.length>0&&T.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 text-destructive hover:bg-destructive/10 rounded-lg transition-colors",children:[T.jsx(k3,{className:"w-4 h-4"}),t("clearHistory")]})]}),n.length===0?T.jsxs("div",{className:"text-center py-12",children:[T.jsx(aE,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),T.jsx("p",{className:"text-xl text-muted-foreground",children:t("noHistory")})]}):T.jsx("div",{className:"space-y-2",children:n.map(o=>T.jsx(ng,{videoId:o.videoId,title:o.title,author:o.author,lengthSeconds:o.duration,thumbnails:[{url:o.thumbnail,width:320,height:180,quality:"medium"}],compact:!0},`${o.videoId}-${o.timestamp}`))})]})]})},tV=()=>{const[n,e]=ln.useState([]),{t,language:r}=Hr();return ln.useEffect(()=>{e(Vg())},[]),T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12 container mx-auto px-4",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:T.jsx(Km,{className:"w-6 h-6 text-primary"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-primary font-medium",children:"Wista"}),T.jsx("h1",{className:"text-2xl font-bold",children:t("favorites")}),T.jsxs("p",{className:"text-muted-foreground",children:[n.length," ",r==="ja"?"件のお気に入り":"favorites"]})]})]}),n.length===0?T.jsxs("div",{className:"text-center py-12",children:[T.jsx(Km,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),T.jsx("p",{className:"text-xl text-muted-foreground",children:t("noFavorites")})]}):T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(i=>T.jsx(ng,{videoId:i.videoId,title:i.title,author:i.author,lengthSeconds:i.duration,thumbnails:[{url:i.thumbnail,width:320,height:180,quality:"medium"}]},i.videoId))})]})]})};function nV({className:n,...e}){return T.jsx("div",{className:Bn("animate-pulse rounded-md bg-muted",n),...e})}const rV=({comment:n})=>{var e,t,r;return T.jsxs("div",{className:"flex gap-3 py-3 border-b",children:[T.jsx("div",{className:"flex-shrink-0",children:(t=(e=n.authorThumbnails)==null?void 0:e[0])!=null&&t.url?T.jsx("img",{src:n.authorThumbnails[0].url,alt:n.author,className:"w-10 h-10 rounded-full object-cover"}):T.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:T.jsx("span",{className:"text-xs",children:n.author.charAt(0)})})}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx("span",{className:"font-medium text-sm",children:n.author}),T.jsx("span",{className:"text-xs text-muted-foreground",children:n.publishedText})]}),T.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:n.content}),T.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(R3,{className:"h-3 w-3"}),n.likeCount]}),((r=n.replies)==null?void 0:r.replyCount)&&n.replies.replyCount>0&&T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(g3,{className:"h-3 w-3"}),n.replies.replyCount]})]})]})]})},iV=({videoId:n})=>{var o;const{t:e}=Hr(),{data:t,isLoading:r,error:i}=U0({queryKey:["comments",n],queryFn:()=>EH(n),staleTime:5*60*1e3,retry:2});return r?T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("comments")}),T.jsx(nV,{className:"h-20 w-full"})]}):i?T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("comments")}),T.jsx("p",{className:"text-muted-foreground text-center py-8",children:e("failedToLoad")})]}):(o=t==null?void 0:t.comments)!=null&&o.length?T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("comments")}),T.jsx("div",{className:"space-y-0",children:t.comments.map((l,u)=>T.jsx(rV,{comment:l},u))})]}):T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("comments")}),T.jsx("p",{className:"text-muted-foreground text-center py-8",children:e("noComments")})]})};var ap="Tabs",[aV]=Ki(ap,[Yg]),kL=Yg(),[sV,nT]=aV(ap),CL=j.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:u,activationMode:c="automatic",...d}=n,m=If(u),[f,h]=Za({prop:r,onChange:i,defaultProp:o??"",caller:ap});return T.jsx(sV,{scope:t,baseId:ba(),value:f,onValueChange:h,orientation:l,dir:m,activationMode:c,children:T.jsx(Dn.div,{dir:m,"data-orientation":l,...d,ref:e})})});CL.displayName=ap;var NL="TabsList",DL=j.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,o=nT(NL,t),l=kL(t);return T.jsx(LN,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:r,children:T.jsx(Dn.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});DL.displayName=NL;var LL="TabsTrigger",PL=j.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...o}=n,l=nT(LL,t),u=kL(t),c=FL(l.baseId,r),d=zL(l.baseId,r),m=r===l.value;return T.jsx(PN,{asChild:!0,...u,focusable:!i,active:m,children:T.jsx(Dn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...o,ref:e,onMouseDown:cn(n.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?l.onValueChange(r):f.preventDefault()}),onKeyDown:cn(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&l.onValueChange(r)}),onFocus:cn(n.onFocus,()=>{const f=l.activationMode!=="manual";!m&&!i&&f&&l.onValueChange(r)})})})});PL.displayName=LL;var ML="TabsContent",OL=j.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:o,...l}=n,u=nT(ML,t),c=FL(u.baseId,r),d=zL(u.baseId,r),m=r===u.value,f=j.useRef(m);return j.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),T.jsx(Ia,{present:i||m,children:({present:h})=>T.jsx(Dn.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});OL.displayName=ML;function FL(n,e){return`${n}-trigger-${e}`}function zL(n,e){return`${n}-content-${e}`}var oV=CL,UL=DL,jL=PL,BL=OL;const $L=oV,rT=j.forwardRef(({className:n,...e},t)=>T.jsx(UL,{ref:t,className:Bn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));rT.displayName=UL.displayName;const Vs=j.forwardRef(({className:n,...e},t)=>T.jsx(jL,{ref:t,className:Bn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...e}));Vs.displayName=jL.displayName;const lV=j.forwardRef(({className:n,...e},t)=>T.jsx(BL,{ref:t,className:Bn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));lV.displayName=BL.displayName;var qL=["PageUp","PageDown"],GL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Pc="Slider",[qE,uV,cV]=bf(Pc),[VL]=Ki(Pc,[cV]),[dV,sp]=VL(Pc),KL=j.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:o=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:m,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:g=!1,form:p,...E}=n,S=j.useRef(new Set),x=j.useRef(0),A=l==="horizontal"?fV:hV,[z=[],ie]=Za({prop:m,defaultProp:d,onChange:_e=>{var Se;(Se=[...S.current][x.current])==null||Se.focus(),f(_e)}}),he=j.useRef(z);function P(_e){const je=vV(z,_e);de(_e,je)}function U(_e){de(_e,x.current)}function ce(){const _e=he.current[x.current];z[x.current]!==_e&&h(z)}function de(_e,je,{commit:Se}={commit:!1}){const ze=SV(o),Le=xV(Math.round((_e-r)/o)*o+r,ze),Re=rg(Le,[r,i]);ie((Ye=[])=>{const Ue=pV(Ye,Re,je);if(TV(Ue,c*o)){x.current=Ue.indexOf(Re);const Me=String(Ue)!==String(Ye);return Me&&Se&&h(Ue),Me?Ue:Ye}else return Ye})}return T.jsx(dV,{scope:n.__scopeSlider,name:t,disabled:u,min:r,max:i,valueIndexToChangeRef:x,thumbs:S.current,values:z,orientation:l,form:p,children:T.jsx(qE.Provider,{scope:n.__scopeSlider,children:T.jsx(qE.Slot,{scope:n.__scopeSlider,children:T.jsx(A,{"aria-disabled":u,"data-disabled":u?"":void 0,...E,ref:e,onPointerDown:cn(E.onPointerDown,()=>{u||(he.current=z)}),min:r,max:i,inverted:g,onSlideStart:u?void 0:P,onSlideMove:u?void 0:U,onSlideEnd:u?void 0:ce,onHomeKeyDown:()=>!u&&de(r,0,{commit:!0}),onEndKeyDown:()=>!u&&de(i,z.length-1,{commit:!0}),onStepKeyDown:({event:_e,direction:je})=>{if(!u){const Le=qL.includes(_e.key)||_e.shiftKey&&GL.includes(_e.key)?10:1,Re=x.current,Ye=z[Re],Ue=o*Le*je;de(Ye+Ue,Re,{commit:!0})}}})})})})});KL.displayName=Pc;var[YL,WL]=VL(Pc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),fV=j.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:o,onSlideStart:l,onSlideMove:u,onSlideEnd:c,onStepKeyDown:d,...m}=n,[f,h]=j.useState(null),g=Yn(e,A=>h(A)),p=j.useRef(void 0),E=If(i),S=E==="ltr",x=S&&!o||!S&&o;function _(A){const z=p.current||f.getBoundingClientRect(),ie=[0,z.width],P=iT(ie,x?[t,r]:[r,t]);return p.current=z,P(A-z.left)}return T.jsx(YL,{scope:n.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:T.jsx(QL,{dir:E,"data-orientation":"horizontal",...m,ref:g,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const z=_(A.clientX);l==null||l(z)},onSlideMove:A=>{const z=_(A.clientX);u==null||u(z)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:A=>{const ie=HL[x?"from-left":"from-right"].includes(A.key);d==null||d({event:A,direction:ie?-1:1})}})})}),hV=j.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:c,...d}=n,m=j.useRef(null),f=Yn(e,m),h=j.useRef(void 0),g=!i;function p(E){const S=h.current||m.current.getBoundingClientRect(),x=[0,S.height],A=iT(x,g?[r,t]:[t,r]);return h.current=S,A(E-S.top)}return T.jsx(YL,{scope:n.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:T.jsx(QL,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:E=>{const S=p(E.clientY);o==null||o(S)},onSlideMove:E=>{const S=p(E.clientY);l==null||l(S)},onSlideEnd:()=>{h.current=void 0,u==null||u()},onStepKeyDown:E=>{const x=HL[g?"from-bottom":"from-top"].includes(E.key);c==null||c({event:E,direction:x?-1:1})}})})}),QL=j.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:u,onStepKeyDown:c,...d}=n,m=sp(Pc,t);return T.jsx(Dn.span,{...d,ref:e,onKeyDown:cn(n.onKeyDown,f=>{f.key==="Home"?(l(f),f.preventDefault()):f.key==="End"?(u(f),f.preventDefault()):qL.concat(GL).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:cn(n.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),m.thumbs.has(h)?h.focus():r(f)}),onPointerMove:cn(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:cn(n.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),XL="SliderTrack",ZL=j.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=sp(XL,t);return T.jsx(Dn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});ZL.displayName=XL;var GE="SliderRange",JL=j.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=sp(GE,t),o=WL(GE,t),l=j.useRef(null),u=Yn(e,l),c=i.values.length,d=i.values.map(h=>nP(h,i.min,i.max)),m=c>1?Math.min(...d):0,f=100-Math.max(...d);return T.jsx(Dn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:u,style:{...n.style,[o.startEdge]:m+"%",[o.endEdge]:f+"%"}})});JL.displayName=GE;var HE="SliderThumb",eP=j.forwardRef((n,e)=>{const t=uV(n.__scopeSlider),[r,i]=j.useState(null),o=Yn(e,u=>i(u)),l=j.useMemo(()=>r?t().findIndex(u=>u.ref.current===r):-1,[t,r]);return T.jsx(mV,{...n,ref:o,index:l})}),mV=j.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...o}=n,l=sp(HE,t),u=WL(HE,t),[c,d]=j.useState(null),m=Yn(e,_=>d(_)),f=c?l.form||!!c.closest("form"):!0,h=A0(c),g=l.values[r],p=g===void 0?0:nP(g,l.min,l.max),E=yV(r,l.values.length),S=h==null?void 0:h[u.size],x=S?EV(S,p,u.direction):0;return j.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),T.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${p}% + ${x}px)`},children:[T.jsx(qE.ItemSlot,{scope:n.__scopeSlider,children:T.jsx(Dn.span,{role:"slider","aria-label":n["aria-label"]||E,"aria-valuemin":l.min,"aria-valuenow":g,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:m,style:g===void 0?{display:"none"}:n.style,onFocus:cn(n.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),f&&T.jsx(tP,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:g},r)]})});eP.displayName=HE;var gV="RadioBubbleInput",tP=j.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=j.useRef(null),o=Yn(i,r),l=eT(e);return j.useEffect(()=>{const u=i.current;if(!u)return;const c=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==e&&m){const f=new Event("input",{bubbles:!0});m.call(u,e),u.dispatchEvent(f)}},[l,e]),T.jsx(Dn.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});tP.displayName=gV;function pV(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,o)=>i-o)}function nP(n,e,t){const o=100/(t-e)*(n-e);return rg(o,[0,100])}function yV(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function vV(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function EV(n,e,t){const r=n/2,o=iT([0,50],[0,r]);return(r-o(e)*t)*t}function bV(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function TV(n,e){if(e>0){const t=bV(n);return Math.min(...t)>=e}return!0}function iT(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function SV(n){return(String(n).split(".")[1]||"").length}function xV(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var rP=KL,wV=ZL,_V=JL,IV=eP;const nf=j.forwardRef(({className:n,...e},t)=>T.jsxs(rP,{ref:t,className:Bn("relative flex w-full touch-none select-none items-center",n),...e,children:[T.jsx(wV,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:T.jsx(_V,{className:"absolute h-full bg-primary"})}),T.jsx(IV,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));nf.displayName=rP.displayName;const AV=({videoId:n,onError:e,onSuccess:t})=>{const{t:r}=Hr(),i=j.useRef(null),[o,l]=j.useState(!1),[u,c]=j.useState(!1),[d,m]=j.useState(0),[f,h]=j.useState(0),[g,p]=j.useState(1),[E,S]=j.useState(""),[x,_]=j.useState(0),[A,z]=j.useState(!1),[ie,he]=j.useState("combined"),{data:P,isLoading:U,error:ce}=U0({queryKey:["videoDetails",n],queryFn:()=>ep(n),staleTime:5*60*1e3}),de=j.useMemo(()=>{var Ue,Me;if(!P)return{combined:[],video:[],audio:[],hls:null};const Le=[],Re=[],Ye=[];return(Ue=P.formatStreams)==null||Ue.forEach(We=>{if(We.url){const Ke=We.container||"mp4";Le.push({url:We.url,quality:We.quality||We.resolution||"unknown",label:`${We.resolution||We.quality||"Stream"} (${Ke.toUpperCase()})`,type:We.type||"video/mp4",container:Ke,isAdaptive:!1})}}),(Me=P.adaptiveFormats)==null||Me.forEach(We=>{var Ke,nt,bt,Rt;if(We.url){const Pe=We.container||((Ke=We.type)!=null&&Ke.includes("webm")?"webm":(nt=We.type)!=null&&nt.includes("mp4")?"mp4":"unknown"),Ne=(bt=We.type)==null?void 0:bt.includes("audio"),Qe=(Rt=We.type)==null?void 0:Rt.includes("video"),X={url:We.url,quality:We.qualityLabel||We.quality||We.bitrate||"unknown",label:Ne?`${We.bitrate||We.quality} (${Pe.toUpperCase()} Audio)`:`${We.qualityLabel||We.resolution||We.quality} (${Pe.toUpperCase()})`,type:We.type||"",container:Pe,isAdaptive:!0};Ne?Ye.push(X):Qe&&Re.push(X)}}),{combined:Le,video:Re,audio:Ye,hls:P.hlsUrl||null}},[P]),_e=j.useMemo(()=>{switch(ie){case"video":return de.video;case"audio":return de.audio;case"hls":return de.hls?[{url:de.hls,quality:"HLS",label:"HLS Live",type:"application/x-mpegURL",container:"m3u8",isAdaptive:!1}]:[];default:return de.combined}},[ie,de]);j.useEffect(()=>{if(_e.length>0){const Le=_e.find(Re=>Re.quality.includes("720"))||_e[0];S(Le.url)}},[_e]);const je=_e.find(Le=>Le.url===E)||_e[0],Se=Le=>`${Math.floor(Le/60)}:${Math.floor(Le%60).toString().padStart(2,"0")}`,ze=Le=>{const Re=document.createElement("a");Re.href=Le.url,Re.download=`${n}.${Le.container}`,Re.target="_blank",Re.rel="noopener noreferrer",document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)};return j.useEffect(()=>{ce&&!A&&(z(!0),e==null||e())},[ce,A,e]),j.useEffect(()=>{!U&&de.combined.length===0&&!de.hls&&!A&&(z(!0),e==null||e())},[U,de,A,e]),U?T.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center text-white",children:r("loading")}):ce?T.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center text-white",children:r("failedToLoad")}):T.jsxs("div",{className:"space-y-4",children:[T.jsx($L,{value:ie,onValueChange:he,children:T.jsxs(rT,{className:"grid w-full grid-cols-4",children:[T.jsxs(Vs,{value:"combined",className:"flex items-center gap-1 text-xs",children:[T.jsx(iE,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:"MP4/WebM"}),T.jsx("span",{className:"sm:hidden",children:"Video"})]}),T.jsxs(Vs,{value:"video",className:"flex items-center gap-1 text-xs",children:[T.jsx(C3,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:r("videoOnly")}),T.jsx("span",{className:"sm:hidden",children:"V"})]}),T.jsxs(Vs,{value:"audio",className:"flex items-center gap-1 text-xs",children:[T.jsx(p0,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:r("audioOnly")}),T.jsx("span",{className:"sm:hidden",children:"A"})]}),T.jsxs(Vs,{value:"hls",disabled:!de.hls,className:"flex items-center gap-1 text-xs",children:[T.jsx(a3,{className:"w-3 h-3"}),"HLS"]})]})}),je&&T.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[T.jsx("video",{ref:i,src:je.url,className:"w-full aspect-video",onTimeUpdate:()=>i.current&&m(i.current.currentTime),onLoadedMetadata:()=>{i.current&&(h(i.current.duration),t==null||t())},onPlay:()=>l(!0),onPause:()=>l(!1),onError:()=>{A||(z(!0),e==null||e())}},`${x}-${E}`),T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:[T.jsx(nf,{value:[d],max:f||100,step:1,onValueChange:Le=>{i.current&&(i.current.currentTime=Le[0])},className:"mb-3"}),T.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{i.current&&(o?i.current.pause():i.current.play())},children:o?T.jsx(y0,{className:"h-4 w-4"}):T.jsx(Wo,{className:"h-4 w-4"})}),T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{i.current&&(i.current.muted=!u,c(!u))},children:u?T.jsx(f1,{className:"h-4 w-4"}):T.jsx(d1,{className:"h-4 w-4"})}),T.jsx("div",{className:"w-20 hidden sm:block",children:T.jsx(nf,{value:[u?0:g],max:1,step:.1,onValueChange:Le=>{p(Le[0]),i.current&&(i.current.volume=Le[0]),c(Le[0]===0)}})}),T.jsxs("span",{className:"text-white text-xs",children:[Se(d)," / ",Se(f)]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs(vs,{value:E,onValueChange:S,children:[T.jsx(Ka,{className:"w-32 sm:w-40 h-8 bg-transparent text-white border-white/50 text-xs",children:T.jsx(Es,{placeholder:r("selectQuality")})}),T.jsx(Ya,{children:_e.map((Le,Re)=>T.jsx(_i,{value:Le.url,className:"text-xs",children:Le.label},Re))})]}),T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{var Le;return(Le=i.current)==null?void 0:Le.requestFullscreen()},children:T.jsx(o1,{className:"h-4 w-4"})})]})]})]})]}),!je&&T.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center text-white",children:r(ie==="hls"?"hlsNotAvailable":"noStreamsAvailable")}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsxs(Hn,{variant:"outline",size:"sm",onClick:()=>{_(Le=>Le+1),l(!1)},children:[T.jsx(Ys,{className:"h-4 w-4 mr-1"}),r("reloadVideo")]}),je&&T.jsxs(Hn,{variant:"outline",size:"sm",onClick:()=>ze(je),children:[T.jsx(Vm,{className:"h-4 w-4 mr-1"}),r("download")," (",je.container.toUpperCase(),")"]})]}),_e.length>1&&T.jsxs("div",{className:"border rounded-lg p-3",children:[T.jsx("h4",{className:"text-sm font-medium mb-2",children:r("downloadOptions")}),T.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:_e.slice(0,8).map((Le,Re)=>T.jsxs(Hn,{variant:"secondary",size:"sm",className:"text-xs",onClick:()=>ze(Le),children:[T.jsx(Vm,{className:"h-3 w-3 mr-1"}),Le.label]},Re))})]})]})},RV=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?","https://api.codetabs.com/v1/proxy?quest="],Ch=[{id:"nocookie",name:"Nocookie",url:null,category:"nocookie",parseType:"text"},{id:"wakame",name:"Education - wakame",url:"https://raw.githubusercontent.com/wakame02/wktopu/refs/heads/main/edu.text",category:"education",parseType:"text"},{id:"siawaseok",name:"Education - siawaseok",url:"https://raw.githubusercontent.com/siawaseok3/wakame/master/video_config.json",category:"education",parseType:"json-params"},{id:"woolisbest4520-1",name:"Education - woolisbest4520-1",url:"https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/edu.txt",category:"education",parseType:"text"},{id:"woolisbest4520-2",name:"Education - woolisbest4520-2",url:"https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/parameter.txt",category:"education",parseType:"text"},{id:"woolisbest4520-3",name:"Education - woolisbest4520-3",url:"https://raw.githubusercontent.com/woolisbest-4520/about-youtube/refs/heads/main/edu/ep.txt",category:"education",parseType:"text"},{id:"toka-kun-1",name:"Education - Toka_Kun_-1",url:"https://raw.githubusercontent.com/toka-kun/Education/refs/heads/main/keys/key1.json",category:"education",parseType:"json-result"},{id:"toka-kun-2",name:"Education - Toka_Kun_-2",url:"https://raw.githubusercontent.com/toka-kun/Education/refs/heads/main/keys/key2.json",category:"education",parseType:"json-result"}],kV=async n=>{try{const e=await fetch(n,{signal:AbortSignal.timeout(3e3),cache:"no-store"});if(e.ok)return await e.text()}catch{}for(const e of RV)try{const t=await fetch(`${e}${encodeURIComponent(n)}`,{signal:AbortSignal.timeout(3e3)});if(t.ok)return await t.text()}catch{continue}throw new Error("All proxies failed")},CV=async n=>{if(!n.url)return"";try{const e=await kV(n.url);switch(n.parseType){case"text":return e.trim();case"json-params":return JSON.parse(e).params||"";case"json-result":return JSON.parse(e).result||"";default:return e.trim()}}catch(e){return console.warn(`Failed to fetch parameter from ${n.name}:`,e),""}},NV=(n,e,t)=>{const r=`https://www.youtubeeducation.com/embed/${n}`;let i=e?`${e}`:"";const o=[];if((t==null?void 0:t.autoplay)!==!1&&o.push("autoplay=1"),t!=null&&t.loop&&(o.push("loop=1"),o.push(`playlist=${n}`)),(t==null?void 0:t.start)!==void 0&&t.start>0&&o.push(`start=${t.start}`),(t==null?void 0:t.end)!==void 0&&t.end>0&&o.push(`end=${t.end}`),t!=null&&t.listId&&(t.listId===n?o.push(`playlist=${t.listId}`):o.push(`list=${t.listId}`)),o.length>0){const l=o.join("&");i?i.startsWith("?")?i=`${i}&${l}`:i=`?${i}&${l}`:i=`?${l}`}else i&&!i.startsWith("?")&&(i=`?${i}`);return`${r}${i}`},iP=(n,e)=>{const t=[];(e==null?void 0:e.autoplay)!==!1&&t.push("autoplay=1"),t.push("mute=0"),e!=null&&e.loop&&(t.push("loop=1"),t.push(`playlist=${n}`)),(e==null?void 0:e.start)!==void 0&&e.start>0&&t.push(`start=${e.start}`),(e==null?void 0:e.end)!==void 0&&e.end>0&&t.push(`end=${e.end}`),e!=null&&e.listId&&(e.listId===n?t.push(`playlist=${e.listId}`):t.push(`list=${e.listId}`));const r=t.length>0?`?${t.join("&")}`:"";return`https://www.youtube-nocookie.com/embed/${n}${r}`},LI=n=>{if(!n)return null;const e=n.replace(/[０-９]/g,r=>String.fromCharCode(r.charCodeAt(0)-65248)).replace(/：/g,":").trim();if(!e)return null;if(e.includes(":")){const r=e.split(":").map(Number);if(r.some(isNaN))return null;if(r.length===3)return r[0]*3600+r[1]*60+r[2];if(r.length===2)return r[0]*60+r[1]}const t=parseInt(e,10);return isNaN(t)?null:t},aP=({videoId:n,onError:e,onSuccess:t})=>{const{t:r}=Hr(),[i,o]=j.useState(0),[l,u]=j.useState(!1),c=j.useCallback(()=>{o(m=>m+1),u(!1)},[]),d=j.useCallback(()=>{u(!0),t==null||t()},[t]);return T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:T.jsx("iframe",{src:iP(n),className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:d},i)}),T.jsxs(Hn,{variant:"outline",onClick:c,children:[T.jsx(Ys,{className:"h-4 w-4 mr-1"}),r("reloadVideo")]})]})},sP=j.forwardRef(({className:n,...e},t)=>T.jsx("div",{ref:t,className:Bn("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));sP.displayName="Card";const DV=j.forwardRef(({className:n,...e},t)=>T.jsx("div",{ref:t,className:Bn("flex flex-col space-y-1.5 p-6",n),...e}));DV.displayName="CardHeader";const LV=j.forwardRef(({className:n,...e},t)=>T.jsx("h3",{ref:t,className:Bn("text-2xl font-semibold leading-none tracking-tight",n),...e}));LV.displayName="CardTitle";const PV=j.forwardRef(({className:n,...e},t)=>T.jsx("p",{ref:t,className:Bn("text-sm text-muted-foreground",n),...e}));PV.displayName="CardDescription";const oP=j.forwardRef(({className:n,...e},t)=>T.jsx("div",{ref:t,className:Bn("p-6 pt-0",n),...e}));oP.displayName="CardContent";const MV=j.forwardRef(({className:n,...e},t)=>T.jsx("div",{ref:t,className:Bn("flex items-center p-6 pt-0",n),...e}));MV.displayName="CardFooter";const VE=j.forwardRef(({className:n,type:e,...t},r)=>T.jsx("input",{type:e,className:Bn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));VE.displayName="Input";var OV="Label",lP=j.forwardRef((n,e)=>T.jsx(Dn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));lP.displayName=OV;var uP=lP;const FV=Fg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xu=j.forwardRef(({className:n,...e},t)=>T.jsx(uP,{ref:t,className:Bn(FV(),n),...e}));xu.displayName=uP.displayName;var op="Switch",[zV]=Ki(op),[UV,jV]=zV(op),cP=j.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:l,disabled:u,value:c="on",onCheckedChange:d,form:m,...f}=n,[h,g]=j.useState(null),p=Yn(e,A=>g(A)),E=j.useRef(!1),S=h?m||!!h.closest("form"):!0,[x,_]=Za({prop:i,defaultProp:o??!1,onChange:d,caller:op});return T.jsxs(UV,{scope:t,checked:x,disabled:u,children:[T.jsx(Dn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":l,"data-state":mP(x),"data-disabled":u?"":void 0,disabled:u,value:c,...f,ref:p,onClick:cn(n.onClick,A=>{_(z=>!z),S&&(E.current=A.isPropagationStopped(),E.current||A.stopPropagation())})}),S&&T.jsx(hP,{control:h,bubbles:!E.current,name:r,value:c,checked:x,required:l,disabled:u,form:m,style:{transform:"translateX(-100%)"}})]})});cP.displayName=op;var dP="SwitchThumb",fP=j.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=jV(dP,t);return T.jsx(Dn.span,{"data-state":mP(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});fP.displayName=dP;var BV="SwitchBubbleInput",hP=j.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},o)=>{const l=j.useRef(null),u=Yn(l,o),c=eT(t),d=A0(e);return j.useEffect(()=>{const m=l.current;if(!m)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==t&&g){const p=new Event("click",{bubbles:r});g.call(m,t),m.dispatchEvent(p)}},[c,t,r]),T.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:u,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hP.displayName=BV;function mP(n){return n?"checked":"unchecked"}var gP=cP,$V=fP;const KE=j.forwardRef(({className:n,...e},t)=>T.jsx(gP,{className:Bn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",n),...e,ref:t,children:T.jsx($V,{className:Bn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));KE.displayName=gP.displayName;var lp="Collapsible",[qV]=Ki(lp),[GV,aT]=qV(lp),pP=j.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:i,disabled:o,onOpenChange:l,...u}=n,[c,d]=Za({prop:r,defaultProp:i??!1,onChange:l,caller:lp});return T.jsx(GV,{scope:t,disabled:o,contentId:ba(),open:c,onOpenToggle:j.useCallback(()=>d(m=>!m),[d]),children:T.jsx(Dn.div,{"data-state":oT(c),"data-disabled":o?"":void 0,...u,ref:e})})});pP.displayName=lp;var yP="CollapsibleTrigger",vP=j.forwardRef((n,e)=>{const{__scopeCollapsible:t,...r}=n,i=aT(yP,t);return T.jsx(Dn.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":oT(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:cn(n.onClick,i.onOpenToggle)})});vP.displayName=yP;var sT="CollapsibleContent",EP=j.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=aT(sT,n.__scopeCollapsible);return T.jsx(Ia,{present:t||i.open,children:({present:o})=>T.jsx(HV,{...r,ref:e,present:o})})});EP.displayName=sT;var HV=j.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:r,children:i,...o}=n,l=aT(sT,t),[u,c]=j.useState(r),d=j.useRef(null),m=Yn(e,d),f=j.useRef(0),h=f.current,g=j.useRef(0),p=g.current,E=l.open||u,S=j.useRef(E),x=j.useRef(void 0);return j.useEffect(()=>{const _=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(_)},[]),ii(()=>{const _=d.current;if(_){x.current=x.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const A=_.getBoundingClientRect();f.current=A.height,g.current=A.width,S.current||(_.style.transitionDuration=x.current.transitionDuration,_.style.animationName=x.current.animationName),c(r)}},[l.open,r]),T.jsx(Dn.div,{"data-state":oT(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!E,...o,ref:m,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...n.style},children:E&&i})});function oT(n){return n?"open":"closed"}var VV=pP;const KV=VV,YV=vP,WV=EP,bP=({videoId:n,listId:e,onError:t,onSuccess:r})=>{const{t:i}=Hr(),[o,l]=j.useState(()=>localStorage.getItem("eduPlayerSource")||"nocookie"),[u,c]=j.useState(""),[d,m]=j.useState(!1),[f,h]=j.useState(0),[g,p]=j.useState(!0),[E,S]=j.useState(!1),[x,_]=j.useState(""),[A,z]=j.useState(""),[ie,he]=j.useState(!1),P=Ch.find(ze=>ze.id===o)||Ch[0];j.useEffect(()=>{(async()=>{if(P.category==="nocookie"){c("");return}m(!0);try{const Le=await CV(P);c(Le)}catch(Le){console.error("Failed to fetch parameter:",Le),c("")}finally{m(!1)}})()},[P]),j.useEffect(()=>{localStorage.setItem("eduPlayerSource",o)},[o]);const U=j.useCallback(()=>{const ze={autoplay:g,loop:E,start:LI(x)??void 0,end:LI(A)??void 0,listId:e};return P.category==="nocookie"?iP(n,ze):NV(n,u,ze)},[n,P,u,g,E,x,A,e]),ce=j.useCallback(()=>h(ze=>ze+1),[]),de=j.useCallback(()=>{S(!1),h(ze=>ze+1)},[]),_e=j.useCallback(()=>{S(!0),h(ze=>ze+1)},[]),je=Ch.filter(ze=>ze.category==="education"),Se=Ch.filter(ze=>ze.category==="nocookie");return T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:d?T.jsxs("div",{className:"w-full h-full flex items-center justify-center text-white",children:[T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent mr-2"}),i("loading")]}):T.jsx("iframe",{src:U(),className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",onLoad:()=>r==null?void 0:r()},f)}),T.jsx(sP,{children:T.jsxs(oP,{className:"p-4 space-y-4",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx(xu,{children:i("selectSource")||"再生方法を選択"}),T.jsxs(vs,{value:o,onValueChange:l,children:[T.jsx(Ka,{children:T.jsx(Es,{placeholder:"再生方法を選択"})}),T.jsxs(Ya,{children:[T.jsxs(DI,{children:[T.jsx($E,{children:"埋め込み再生"}),Se.map(ze=>T.jsx(_i,{value:ze.id,children:ze.name},ze.id))]}),T.jsxs(DI,{children:[T.jsx($E,{children:"Education埋め込み"}),je.map(ze=>T.jsx(_i,{value:ze.id,children:ze.name},ze.id))]})]})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsxs(Hn,{onClick:de,className:"flex-1 min-w-[120px]",children:[T.jsx(Wo,{className:"h-4 w-4 mr-1"}),i("play")||"再生"]}),T.jsxs(Hn,{onClick:_e,variant:"secondary",className:"flex-1 min-w-[120px]",children:[T.jsx(u1,{className:"h-4 w-4 mr-1"}),i("loopPlay")||"ループ再生"]}),T.jsx(Hn,{variant:"outline",onClick:ce,children:T.jsx(Ys,{className:"h-4 w-4"})})]}),T.jsxs(KV,{open:ie,onOpenChange:he,children:[T.jsx(YV,{asChild:!0,children:T.jsxs(Hn,{variant:"ghost",size:"sm",className:"w-full justify-between",children:[T.jsxs("span",{className:"flex items-center gap-2",children:[T.jsx(S3,{className:"h-4 w-4"}),i("advancedOptions")||"詳細オプション"]}),T.jsx("span",{className:"text-muted-foreground text-xs",children:ie?"▲":"▼"})]})}),T.jsxs(WV,{className:"space-y-4 pt-4",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx(xu,{htmlFor:"startTime",children:i("startPosition")||"開始位置"}),T.jsx(VE,{id:"startTime",placeholder:"例: 1:30, 90",value:x,onChange:ze=>_(ze.target.value)})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx(xu,{htmlFor:"endTime",children:i("endPosition")||"終了位置"}),T.jsx(VE,{id:"endTime",placeholder:"例: 2:00, 120",value:A,onChange:ze=>z(ze.target.value)})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-4",children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx(KE,{id:"autoplay",checked:g,onCheckedChange:p}),T.jsx(xu,{htmlFor:"autoplay",children:i("autoplay")||"自動再生"})]}),T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx(KE,{id:"loop",checked:E,onCheckedChange:S}),T.jsx(xu,{htmlFor:"loop",children:i("loop")||"ループ"})]})]}),P.category==="education"&&T.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:[T.jsxs("p",{className:"font-medium mb-1",children:[i("currentParameter")||"現在のパラメーター",":"]}),T.jsx("p",{className:"break-all font-mono",children:u?u.substring(0,100)+(u.length>100?"...":""):"(なし)"}),P.url&&T.jsxs("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline mt-2",children:[T.jsx(t3,{className:"h-3 w-3"}),"ソースを見る"]})]})]})]}),T.jsxs("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[T.jsxs("span",{children:[P.category==="education"?"🎓":"🔒"," ",P.name]}),E&&T.jsx("span",{className:"text-primary",children:"🔁 ループ中"})]})]})})]})},gn=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},QV=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=XV},XV=Number.MAX_SAFE_INTEGER||9007199254740991;let Nn=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),pt=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n}({}),pe=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n}({});var Zn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Sn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class pu{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class ZV{constructor(e,t,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new pu(e),this.fast_=new pu(t),this.defaultTTFB_=i,this.ttfb_=new pu(e)}update(e,t){const{slow_:r,fast_:i,ttfb_:o}=this;r.halfLife!==e&&(this.slow_=new pu(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new pu(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new pu(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const r=8*t,i=e/1e3,o=r/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function JV(n,e,t){return(e=tK(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function br(){return br=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},br.apply(null,arguments)}function PI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PI(Object(t),!0).forEach(function(r){JV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eK(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tK(n){var e=eK(n,"string");return typeof e=="symbol"?e:e+""}class Aa{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=To,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const To=function(){},nK={trace:To,debug:To,log:To,warn:To,info:To,error:To};function YE(){return br({},nK)}function rK(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):To}function MI(n,e,t){return e[n]?e[n].bind(e):rK(n,t)}const WE=YE();function iK(n,e,t){const r=YE();if(typeof console=="object"&&n===!0||typeof n=="object"){const i=["debug","log","info","warn","error"];i.forEach(o=>{r[o]=MI(o,n,t)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return YE()}i.forEach(o=>{WE[o]=MI(o,n)})}else br(WE,r);return r}const pr=WE;function Zo(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function aK(n){return typeof self<"u"&&n===self.ManagedMediaSource}function TP(n,e){const t=Object.keys(n),r=Object.keys(e),i=t.length,o=r.length;return!i||!o||i===o&&!t.some(l=>r.indexOf(l)===-1)}function ia(n,e=!1){if(typeof TextDecoder<"u"){const d=new TextDecoder("utf-8").decode(n);if(e){const m=d.indexOf("\0");return m!==-1?d.substring(0,m):d}return d.replace(/\0/g,"")}const t=n.length;let r,i,o,l="",u=0;for(;u<t;){if(r=n[u++],r===0&&e)return l;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:i=n[u++],l+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=n[u++],o=n[u++],l+=String.fromCharCode((r&15)<<12|(i&63)<<6|(o&63)<<0);break}}return l}function li(n){let e="";for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return e}function SP(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function sK(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zy={exports:{}},OI;function oK(){return OI||(OI=1,function(n,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,u={buildAbsoluteURL:function(c,d,m){if(m=m||{},c=c.trim(),d=d.trim(),!d){if(!m.alwaysNormalize)return c;var f=u.parseURL(c);if(!f)throw new Error("Error trying to parse base URL.");return f.path=u.normalizePath(f.path),u.buildURLFromParts(f)}var h=u.parseURL(d);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return m.alwaysNormalize?(h.path=u.normalizePath(h.path),u.buildURLFromParts(h)):d;var g=u.parseURL(c);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var p=i.exec(g.path);g.netLoc=p[1],g.path=p[2]}g.netLoc&&!g.path&&(g.path="/");var E={scheme:g.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(E.netLoc=g.netLoc,h.path[0]!=="/"))if(!h.path)E.path=g.path,h.params||(E.params=g.params,h.query||(E.query=g.query));else{var S=g.path,x=S.substring(0,S.lastIndexOf("/")+1)+h.path;E.path=u.normalizePath(x)}return E.path===null&&(E.path=m.alwaysNormalize?u.normalizePath(h.path):h.path),u.buildURLFromParts(E)},parseURL:function(c){var d=r.exec(c);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(o,"");c.length!==(c=c.replace(l,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};n.exports=u})()}(zy)),zy.exports}var lT=oK();class uT{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Tr={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class xP{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,uK(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let i;r.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Tr.AUDIO]:null,[Tr.VIDEO]:null,[Tr.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new uT),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=lT.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Tr.AUDIO]=null,e[Tr.VIDEO]=null,e[Tr.AUDIOVIDEO]=null}}function qr(n){return n.sn!=="initSegment"}class Uy extends xP{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(gn(e)&&gn(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const r=Object.keys(t);if(r.length===1){const i=this._decryptdata=t[r[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=gn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const r=Object.keys(this.levelkeys),i=r.length;if(i>1||i===1&&(t=this.levelkeys[r[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!gn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return qr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var r;const i=t[e];i&&!((r=this._decryptdata)!=null&&r.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,r,i,o,l=!1){const{elementaryStreams:u}=this,c=u[e];if(!c){u[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:o,partial:l};return}c.startPTS=Math.min(c.startPTS,t),c.endPTS=Math.max(c.endPTS,r),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,o)}}class lK extends xP{constructor(e,t,r,i,o){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function wP(n,e){const t=Object.getPrototypeOf(n);if(t){const r=Object.getOwnPropertyDescriptor(t,e);return r||wP(t,e)}}function uK(n,e){const t=wP(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const FI=Math.pow(2,32)-1,cK=[].push,_P={video:1,audio:2,id3:3,text:4};function Wr(n){return String.fromCharCode.apply(null,n)}function IP(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function jn(n,e){const t=AP(n,e);return t<0?4294967296+t:t}function zI(n,e){let t=jn(n,e);return t*=Math.pow(2,32),t+=jn(n,e+4),t}function AP(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function dK(n){const e=n.byteLength;for(let t=0;t<e;){const r=jn(n,t);if(r>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=r>1?t+r:e}return!1}function Qn(n,e){const t=[];if(!e.length)return t;const r=n.byteLength;for(let i=0;i<r;){const o=jn(n,i),l=Wr(n.subarray(i+4,i+8)),u=o>1?i+o:r;if(l===e[0])if(e.length===1)t.push(n.subarray(i+8,u));else{const c=Qn(n.subarray(i+8,u),e.slice(1));c.length&&cK.apply(t,c)}i=u}return t}function fK(n){const e=[],t=n[0];let r=8;const i=jn(n,r);r+=4;let o=0,l=0;t===0?(o=jn(n,r),l=jn(n,r+4),r+=8):(o=zI(n,r),l=zI(n,r+8),r+=16),r+=2;let u=n.length+l;const c=IP(n,r);r+=2;for(let d=0;d<c;d++){let m=r;const f=jn(n,m);m+=4;const h=f&2147483647;if((f&2147483648)>>>31===1)return pr.warn("SIDX has hierarchical references (not supported)"),null;const p=jn(n,m);m+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/i,start:u,end:u+h-1}}),u+=h,m+=4,r=m}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:c,references:e}}function RP(n){const e=[],t=Qn(n,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],l=Qn(o,["tkhd"])[0];if(l){let u=l[0];const c=jn(l,u===0?12:20),d=Qn(o,["mdia","mdhd"])[0];if(d){u=d[0];const m=jn(d,u===0?12:20),f=Qn(o,["mdia","hdlr"])[0];if(f){const h=Wr(f.subarray(8,12)),g={soun:Tr.AUDIO,vide:Tr.VIDEO}[h],p=Qn(o,["mdia","minf","stbl","stsd"])[0],E=hK(p);g?(e[c]={timescale:m,type:g,stsd:E},e[g]=gr({timescale:m,id:c},E)):e[c]={timescale:m,type:h,stsd:E}}}}}return Qn(n,["moov","mvex","trex"]).forEach(i=>{const o=jn(i,4),l=e[o];l&&(l.default={duration:jn(i,12),flags:jn(i,20)})}),e}function hK(n){const e=n.subarray(8),t=e.subarray(86),r=Wr(e.subarray(4,8));let i=r,o;const l=r==="enca"||r==="encv";if(l){const d=Qn(e,[r])[0].subarray(r==="enca"?28:78);Qn(d,["sinf"]).forEach(f=>{const h=Qn(f,["schm"])[0];if(h){const g=Wr(h.subarray(4,8));if(g==="cbcs"||g==="cenc"){const p=Qn(f,["frma"])[0];p&&(i=Wr(p))}}})}const u=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Qn(t,["avcC"])[0];c&&c.length>3&&(i+="."+Dh(c[1])+Dh(c[2])+Dh(c[3]),o=Nh(u==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const c=Qn(e,[r])[0],d=Qn(c.subarray(28),["esds"])[0];if(d&&d.length>7){let m=4;if(d[m++]!==3)break;m=jy(d,m),m+=2;const f=d[m++];if(f&128&&(m+=2),f&64&&(m+=d[m++]),d[m++]!==4)break;m=jy(d,m);const h=d[m++];if(h===64)i+="."+Dh(h);else break;if(m+=12,d[m++]!==5)break;m=jy(d,m);const g=d[m++];let p=(g&248)>>3;p===31&&(p+=1+((g&7)<<3)+((d[m]&224)>>5)),i+="."+p}break}case"hvc1":case"hev1":{const c=Qn(t,["hvcC"])[0];if(c&&c.length>12){const d=c[1],m=["","A","B","C"][d>>6],f=d&31,h=jn(c,2),g=(d&32)>>5?"H":"L",p=c[12],E=c.subarray(6,12);i+="."+m+f,i+="."+mK(h).toString(16).toUpperCase(),i+="."+g+p;let S="";for(let x=E.length;x--;){const _=E[x];(_||S)&&(S="."+_.toString(16).toUpperCase()+S)}i+=S}o=Nh(u=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Nh(i,t)||i;break}case"vp09":{const c=Qn(t,["vpcC"])[0];if(c&&c.length>6){const d=c[4],m=c[5],f=c[6]>>4&15;i+="."+cs(d)+"."+cs(m)+"."+cs(f)}break}case"av01":{const c=Qn(t,["av1C"])[0];if(c&&c.length>2){const d=c[1]>>>5,m=c[1]&31,f=c[2]>>>7?"H":"M",h=(c[2]&64)>>6,g=(c[2]&32)>>5,p=d===2&&h?g?12:10:h?10:8,E=(c[2]&16)>>4,S=(c[2]&8)>>3,x=(c[2]&4)>>2,_=c[2]&3;i+="."+d+"."+cs(m)+f+"."+cs(p)+"."+E+"."+S+x+_+"."+cs(1)+"."+cs(1)+"."+cs(1)+"."+0,o=Nh("dav1",t)}break}}return{codec:i,encrypted:l,supplemental:o}}function Nh(n,e){const t=Qn(e,["dvvC"]),r=t.length?t[0]:Qn(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,o=r[2]<<5&32|r[3]>>3&31;return n+"."+cs(i)+"."+cs(o)}}function mK(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function jy(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function Dh(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function cs(n){return(n<10?"0":"")+n}function gK(n,e){if(!n||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&kP(n,(r,i)=>{const o=r.subarray(8,24);o.some(l=>l!==0)||(pr.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${li(o)} -> ${li(t)}`),r.set(t,8))})}function pK(n){const e=[];return kP(n,t=>e.push(t.subarray(8,24))),e}function kP(n,e){Qn(n,["moov","trak"]).forEach(r=>{const i=Qn(r,["mdia","minf","stbl","stsd"])[0];if(!i)return;const o=i.subarray(8);let l=Qn(o,["enca"]);const u=l.length>0;u||(l=Qn(o,["encv"])),l.forEach(c=>{const d=u?c.subarray(28):c.subarray(78);Qn(d,["sinf"]).forEach(f=>{const h=CP(f);h&&e(h,u)})})})}function CP(n){const e=Qn(n,["schm"])[0];if(e){const t=Wr(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const r=Qn(n,["schi","tenc"])[0];if(r)return r}}}function yK(n,e,t){const r={},i=Qn(n,["moof","traf"]);for(let o=0;o<i.length;o++){const l=i[o],u=Qn(l,["tfhd"])[0],c=jn(u,4),d=e[c];if(!d)continue;r[c]||(r[c]={start:NaN,duration:0,sampleCount:0,timescale:d.timescale,type:d.type});const m=r[c],f=Qn(l,["tfdt"])[0];if(f){const A=f[0];let z=jn(f,4);A===1&&(z===FI?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(z*=FI+1,z+=jn(f,8))),gn(z)&&(!gn(m.start)||z<m.start)&&(m.start=z)}const h=d.default,g=jn(u,0)|(h==null?void 0:h.flags);let p=(h==null?void 0:h.duration)||0;g&8&&(g&2?p=jn(u,12):p=jn(u,8));const E=Qn(l,["trun"]);let S=m.start||0,x=0,_=p;for(let A=0;A<E.length;A++){const z=E[A],ie=jn(z,4),he=m.sampleCount;m.sampleCount+=ie;const P=z[3]&1,U=z[3]&4,ce=z[2]&1,de=z[2]&2,_e=z[2]&4,je=z[2]&8;let Se=8,ze=ie;for(P&&(Se+=4),U&&ie&&(!(z[Se+1]&1)&&m.keyFrameIndex===void 0&&(m.keyFrameIndex=he),Se+=4,ce?(_=jn(z,Se),Se+=4):_=p,de&&(Se+=4),je&&(Se+=4),S+=_,x+=_,ze--);ze--;)ce?(_=jn(z,Se),Se+=4):_=p,de&&(Se+=4),_e&&(z[Se+1]&1||m.keyFrameIndex===void 0&&(m.keyFrameIndex=m.sampleCount-(ze+1),m.keyFrameStart=S),Se+=4),je&&(Se+=4),S+=_,x+=_;!x&&p&&(x+=p*ie)}m.duration+=x}if(!Object.keys(r).some(o=>r[o].duration)){let o=1/0,l=0;const u=Qn(n,["sidx"]);for(let c=0;c<u.length;c++){const d=fK(u[c]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const m=d.references.reduce((f,h)=>f+h.info.duration||0,0);l=Math.max(l,m+d.earliestPresentationTime/d.timescale)}}l&&gn(l)&&Object.keys(r).forEach(c=>{r[c].duration||(r[c].duration=l*r[c].timescale-r[c].start)})}return r}function vK(n){const e={valid:null,remainder:null},t=Qn(n,["moof"]);if(t.length<2)return e.remainder=n,e;const r=t[t.length-1];return e.valid=n.slice(0,r.byteOffset-8),e.remainder=n.slice(r.byteOffset-8),e}function wa(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function UI(n,e){const t=[],r=e.samples,i=e.timescale,o=e.id;let l=!1;return Qn(r,["moof"]).map(c=>{const d=c.byteOffset-8;Qn(c,["traf"]).map(f=>{const h=Qn(f,["tfdt"]).map(g=>{const p=g[0];let E=jn(g,4);return p===1&&(E*=Math.pow(2,32),E+=jn(g,8)),E/i})[0];return h!==void 0&&(n=h),Qn(f,["tfhd"]).map(g=>{const p=jn(g,4),E=jn(g,0)&16777215,S=(E&1)!==0,x=(E&2)!==0,_=(E&8)!==0;let A=0;const z=(E&16)!==0;let ie=0;const he=(E&32)!==0;let P=8;p===o&&(S&&(P+=8),x&&(P+=4),_&&(A=jn(g,P),P+=4),z&&(ie=jn(g,P),P+=4),he&&(P+=4),e.type==="video"&&(l=up(e.codec)),Qn(f,["trun"]).map(U=>{const ce=U[0],de=jn(U,0)&16777215,_e=(de&1)!==0;let je=0;const Se=(de&4)!==0,ze=(de&256)!==0;let Le=0;const Re=(de&512)!==0;let Ye=0;const Ue=(de&1024)!==0,Me=(de&2048)!==0;let We=0;const Ke=jn(U,4);let nt=8;_e&&(je=jn(U,nt),nt+=4),Se&&(nt+=4);let bt=je+d;for(let Rt=0;Rt<Ke;Rt++){if(ze?(Le=jn(U,nt),nt+=4):Le=A,Re?(Ye=jn(U,nt),nt+=4):Ye=ie,Ue&&(nt+=4),Me&&(ce===0?We=jn(U,nt):We=AP(U,nt),nt+=4),e.type===Tr.VIDEO){let Pe=0;for(;Pe<Ye;){const Ne=jn(r,bt);if(bt+=4,EK(l,r[bt])){const Qe=r.subarray(bt,bt+Ne);cT(Qe,l?2:1,n+We/i,t)}bt+=Ne,Pe+=Ne+4}}n+=Le/i}}))})})}),t}function up(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function EK(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function cT(n,e,t,r){const i=NP(n);let o=0;o+=e;let l=0,u=0,c=0;for(;o<i.length;){l=0;do{if(o>=i.length)break;c=i[o++],l+=c}while(c===255);u=0;do{if(o>=i.length)break;c=i[o++],u+=c}while(c===255);const d=i.length-o;let m=o;if(u<d)o+=u;else if(u>d){pr.error(`Malformed SEI payload. ${u} is too small, only ${d} bytes left to parse.`);break}if(l===4){if(i[m++]===181){const h=IP(i,m);if(m+=2,h===49){const g=jn(i,m);if(m+=4,g===1195456820){const p=i[m++];if(p===3){const E=i[m++],S=31&E,x=64&E,_=x?2+S*3:0,A=new Uint8Array(_);if(x){A[0]=E;for(let z=1;z<_;z++)A[z]=i[m++]}r.push({type:p,payloadType:l,pts:t,bytes:A})}}}}}else if(l===5&&u>16){const f=[];for(let p=0;p<16;p++){const E=i[m++].toString(16);f.push(E.length==1?"0"+E:E),(p===3||p===5||p===7||p===9)&&f.push("-")}const h=u-16,g=new Uint8Array(h);for(let p=0;p<h;p++)g[p]=i[m++];r.push({payloadType:l,pts:t,uuid:f.join(""),userData:ia(g),userDataBytes:g})}}}function NP(n){const e=n.byteLength,t=[];let r=1;for(;r<e-2;)n[r]===0&&n[r+1]===0&&n[r+2]===3?(t.push(r+2),r+=2):r++;if(t.length===0)return n;const i=e-t.length,o=new Uint8Array(i);let l=0;for(r=0;r<i;l++,r++)l===t[0]&&(l++,t.shift()),o[r]=n[l];return o}function bK(n){const e=n[0];let t="",r="",i=0,o=0,l=0,u=0,c=0,d=0;if(e===0){for(;Wr(n.subarray(d,d+1))!=="\0";)t+=Wr(n.subarray(d,d+1)),d+=1;for(t+=Wr(n.subarray(d,d+1)),d+=1;Wr(n.subarray(d,d+1))!=="\0";)r+=Wr(n.subarray(d,d+1)),d+=1;r+=Wr(n.subarray(d,d+1)),d+=1,i=jn(n,12),o=jn(n,16),u=jn(n,20),c=jn(n,24),d=28}else if(e===1){d+=4,i=jn(n,d),d+=4;const f=jn(n,d);d+=4;const h=jn(n,d);for(d+=4,l=2**32*f+h,QV(l)||(l=Number.MAX_SAFE_INTEGER,pr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),u=jn(n,d),d+=4,c=jn(n,d),d+=4;Wr(n.subarray(d,d+1))!=="\0";)t+=Wr(n.subarray(d,d+1)),d+=1;for(t+=Wr(n.subarray(d,d+1)),d+=1;Wr(n.subarray(d,d+1))!=="\0";)r+=Wr(n.subarray(d,d+1)),d+=1;r+=Wr(n.subarray(d,d+1)),d+=1}const m=n.subarray(d,n.byteLength);return{schemeIdUri:t,value:r,timeScale:i,presentationTime:l,presentationTimeDelta:o,eventDuration:u,id:c,payload:m}}function TK(n,...e){const t=e.length;let r=8,i=t;for(;i--;)r+=e[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(n,4),i=0,r=8;i<t;i++)o.set(e[i],r),r+=e[i].byteLength;return o}function SK(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let o;r>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const l=new Uint8Array(4);return t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),TK([112,115,115,104],new Uint8Array([r,0,0,0]),n,o,i,l,t)}function xK(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let r=0;for(;r+32<t;){const i=new DataView(n,r),o=wK(i);e.push(o),r+=o.size}}return e}function wK(n){const e=n.getUint32(0),t=n.byteOffset,r=n.byteLength;if(r<e)return{offset:t,size:r};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const o=n.getUint32(8)>>>24;if(o!==0&&o!==1)return{offset:t,size:e};const l=n.buffer,u=li(new Uint8Array(l,t+12,16));let c=null,d=null,m=0;if(o===0)m=28;else{const h=n.getUint32(28);if(!h||r<32+h*16)return{offset:t,size:e};c=[];for(let g=0;g<h;g++)c.push(new Uint8Array(l,t+32+g*16,16));m=32+h*16}if(!m)return{offset:t,size:e};const f=n.getUint32(m);return e-32<f?{offset:t,size:e}:(d=new Uint8Array(l,t+m+4,f),{version:o,systemId:u,kids:c,data:d,offset:t,size:e})}const DP=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),bc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function dT(n,e){const t=bc[e];return!!t&&!!t[n.slice(0,4)]}function rf(n,e,t=!0){return!n.split(",").some(r=>!fT(r,e,t))}function fT(n,e,t=!0){var r;const i=Zo(t);return(r=i==null?void 0:i.isTypeSupported(af(n,e)))!=null?r:!1}function af(n,e){return`${e}/mp4;codecs=${n}`}function jI(n){if(n){const e=n.substring(0,4);return bc.video[e]}return 2}function ag(n){const e=DP();return n.split(",").reduce((t,r)=>{const o=e&&up(r)?9:bc.video[r];return o?(o*2+t)/(t?3:2):(bc.audio[r]+t)/(t?2:1)},0)}const By={};function _K(n,e=!0){if(By[n])return By[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let i=0;i<t.length;i++){var r;if(fT(t[i],"audio",e))return By[n]=t[i],t[i];if(t[i]==="mp3"&&(r=Zo(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return n}const IK=/flac|opus|mp4a\.40\.34/i;function sg(n,e=!0){return n.replace(IK,t=>_K(t.toLowerCase(),e))}function AK(n,e){const t=[];if(n){const r=n.split(",");for(let i=0;i<r.length;i++)dT(r[i],"video")||t.push(r[i])}return e&&t.push(e),t.join(",")}function fm(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(BI(n,"audio")||BI(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let r=t.length;r--;)if(t[r].substring(0,4)===n.substring(0,4))return t[r]}return t[0]}}return e||n}function BI(n,e){return dT(n,e)&&fT(n,e)}function RK(n){const e=n.split(",");for(let t=0;t<e.length;t++){const r=e[t].split(".");r.length>2&&r[0]==="avc1"&&(e[t]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function kK(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=t[r-4];return e.join(".")}return n}function $I(n){const e=Zo(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function QE(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const CK={supported:!0,powerEfficient:!0,smooth:!0},NK={supported:!1,smooth:!1,powerEfficient:!1},LP={supported:!0,configurations:[],decodingInfoResults:[CK]};function PP(n,e){return{supported:!1,configurations:e,decodingInfoResults:[NK],error:n}}function DK(n,e,t,r,i,o){const l=n.videoCodec,u=n.audioCodec?n.audioGroups:null,c=o==null?void 0:o.audioCodec,d=o==null?void 0:o.channels,m=d?parseInt(d):c?1/0:2;let f=null;if(u!=null&&u.length)try{u.length===1&&u[0]?f=e.groups[u[0]].channels:f=u.reduce((h,g)=>{if(g){const p=e.groups[g];if(!p)throw new Error(`Audio track group ${g} not found`);Object.keys(p.channels).forEach(E=>{h[E]=(h[E]||0)+p.channels[E]})}return h},{2:0})}catch{return!0}return l!==void 0&&(l.split(",").some(h=>up(h))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(r,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(i,8e6))||!!f&&gn(m)&&Object.keys(f).some(h=>parseInt(h)>m)}function MP(n,e,t,r={}){const i=n.videoCodec;if(!i&&!n.audioCodec||!t)return Promise.resolve(LP);const o=[],l=LK(n),u=l.length,c=PK(n,e,u>0),d=c.length;for(let m=u||1*d||1;m--;){const f={type:"media-source"};if(u&&(f.video=l[m%u]),d){f.audio=c[m%d];const h=f.audio.bitrate;f.video&&h&&(f.video.bitrate-=h)}o.push(f)}if(i){const m=navigator.userAgent;if(i.split(",").some(f=>up(f))&&DP())return Promise.resolve(PP(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${m})`),o))}return Promise.all(o.map(m=>{const f=OK(m);return r[f]||(r[f]=t.decodingInfo(m))})).then(m=>({supported:!m.some(f=>!f.supported),configurations:o,decodingInfoResults:m})).catch(m=>({supported:!1,configurations:o,decodingInfoResults:[],error:m}))}function LK(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),r=OP(n),i=n.width||640,o=n.height||480,l=n.frameRate||30,u=n.videoRange.toLowerCase();return t?t.map(c=>{const d={contentType:af(kK(c),"video"),width:i,height:o,bitrate:r,framerate:l};return u!=="sdr"&&(d.transferFunction=u),d}):[]}function PK(n,e,t){var r;const i=(r=n.audioCodec)==null?void 0:r.split(","),o=OP(n);return i&&n.audioGroups?n.audioGroups.reduce((l,u)=>{var c;const d=u?(c=e.groups[u])==null?void 0:c.tracks:null;return d?d.reduce((m,f)=>{if(f.groupId===u){const h=parseFloat(f.channels||"");i.forEach(g=>{const p={contentType:af(g,"audio"),bitrate:t?MK(g,o):o};h&&(p.channels=""+h),m.push(p)})}return m},l):l},[]):[]}function MK(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function OP(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function OK(n){let e="";const{audio:t,video:r}=n;if(r){const i=QE(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(t){const i=QE(t.contentType);e+=`${r?"_":""}${i}_c${t.channels}`}return e}const XE=["NONE","TYPE-0","TYPE-1",null];function FK(n){return XE.indexOf(n)>-1}const og=["SDR","PQ","HLG"];function zK(n){return!!n&&og.indexOf(n)>-1}var hm={No:"",Yes:"YES",v2:"v2"};function qI(n){const{canSkipUntil:e,canSkipDateRanges:t,age:r}=n,i=r<e/2;return e&&i?t?hm.v2:hm.Yes:hm.No}class GI{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class sf{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=(t=e.supplemental)==null?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return HI(this._audioGroups,e)}hasSubtitleGroup(e){return HI(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(t)===-1&&r.push(t)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(t)===-1&&r.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function HI(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function UK(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function jK(n,e){let t=!1,r=[];if(n&&(t=n!=="SDR",r=[n]),e){r=e.allowedVideoRanges||og.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&UK(),t||(r=["SDR"])}return{preferHDR:t,allowedVideoRanges:r}}const BK=n=>{const e=new WeakSet;return(t,r)=>{if(n&&(r=n(t,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Sr=(n,e)=>JSON.stringify(n,BK(e));function $K(n,e,t,r,i){const o=Object.keys(n),l=r==null?void 0:r.channels,u=r==null?void 0:r.audioCodec,c=i==null?void 0:i.videoCodec,d=l&&parseInt(l)===2;let m=!1,f=!1,h=1/0,g=1/0,p=1/0,E=1/0,S=0,x=[];const{preferHDR:_,allowedVideoRanges:A}=jK(e,i);for(let U=o.length;U--;){const ce=n[o[U]];m||(m=ce.channels[2]>0),h=Math.min(h,ce.minHeight),g=Math.min(g,ce.minFramerate),p=Math.min(p,ce.minBitrate),A.filter(_e=>ce.videoRanges[_e]>0).length>0&&(f=!0)}h=gn(h)?h:0,g=gn(g)?g:0;const z=Math.max(1080,h),ie=Math.max(30,g);p=gn(p)?p:t,t=Math.max(p,t),f||(e=void 0);const he=o.length>1;return{codecSet:o.reduce((U,ce)=>{const de=n[ce];if(ce===U)return U;if(x=f?A.filter(_e=>de.videoRanges[_e]>0):[],he){if(de.minBitrate>t)return os(ce,`min bitrate of ${de.minBitrate} > current estimate of ${t}`),U;if(!de.hasDefaultAudio)return os(ce,"no renditions with default or auto-select sound found"),U;if(u&&ce.indexOf(u.substring(0,4))%5!==0)return os(ce,`audio codec preference "${u}" not found`),U;if(l&&!d){if(!de.channels[l])return os(ce,`no renditions with ${l} channel sound found (channels options: ${Object.keys(de.channels)})`),U}else if((!u||d)&&m&&de.channels[2]===0)return os(ce,"no renditions with stereo sound found"),U;if(de.minHeight>z)return os(ce,`min resolution of ${de.minHeight} > maximum of ${z}`),U;if(de.minFramerate>ie)return os(ce,`min framerate of ${de.minFramerate} > maximum of ${ie}`),U;if(!x.some(_e=>de.videoRanges[_e]>0))return os(ce,`no variants with VIDEO-RANGE of ${Sr(x)} found`),U;if(c&&ce.indexOf(c.substring(0,4))%5!==0)return os(ce,`video codec preference "${c}" not found`),U;if(de.maxScore<S)return os(ce,`max score of ${de.maxScore} < selected max of ${S}`),U}return U&&(ag(ce)>=ag(U)||de.fragmentError>n[U].fragmentError)?U:(E=de.minIndex,S=de.maxScore,ce)},void 0),videoRanges:x,preferHDR:_,minFramerate:g,minBitrate:p,minIndex:E}}function os(n,e){pr.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function FP(n){return n.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function qK(n,e,t,r){return n.slice(t,r+1).reduce((i,o,l)=>{if(!o.codecSet)return i;const u=o.audioGroups;let c=i[o.codecSet];c||(i[o.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!u,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,o.bitrate);const d=Math.min(o.height,o.width);return c.minHeight=Math.min(c.minHeight,d),c.minFramerate=Math.min(c.minFramerate,o.frameRate),c.minIndex=Math.min(c.minIndex,l),c.maxScore=Math.max(c.maxScore,o.score),c.fragmentError+=o.fragmentError,c.videoRanges[o.videoRange]=(c.videoRanges[o.videoRange]||0)+1,u&&u.forEach(m=>{if(!m)return;const f=e.groups[m];f&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?f.hasDefault:f.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(f.channels).forEach(h=>{c.channels[h]=(c.channels[h]||0)+f.channels[h]}))}),i},{})}function VI(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}=n;return{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}}function bs(n,e,t){if("attrs"in n){const r=e.indexOf(n);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Ol(n,i,t))return r}return-1}function Ol(n,e,t){const{groupId:r,name:i,lang:o,assocLang:l,default:u}=n,c=n.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(o===void 0||GK(o,e.lang))&&(o===void 0||e.assocLang===l)&&(u===void 0||e.default===u)&&(c===void 0||e.forced===c)&&(!("characteristics"in n)||HK(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function GK(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function HK(n,e=""){const t=n.split(","),r=e.split(",");return t.length===r.length&&!t.some(i=>r.indexOf(i)===-1)}function bl(n,e){const{audioCodec:t,channels:r}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function VK(n,e,t,r,i){const o=e[r],u=e.reduce((h,g,p)=>{const E=g.uri;return(h[E]||(h[E]=[])).push(p),h},{})[o.uri];u.length>1&&(r=Math.max.apply(Math,u));const c=o.videoRange,d=o.frameRate,m=o.codecSet.substring(0,4),f=KI(e,r,h=>{if(h.videoRange!==c||h.frameRate!==d||h.codecSet.substring(0,4)!==m)return!1;const g=h.audioGroups,p=t.filter(E=>!g||g.indexOf(E.groupId)!==-1);return bs(n,p,i)>-1});return f>-1?f:KI(e,r,h=>{const g=h.audioGroups,p=t.filter(E=>!g||g.indexOf(E.groupId)!==-1);return bs(n,p,i)>-1})}function KI(n,e,t){for(let r=e;r>-1;r--)if(t(n[r]))return r;for(let r=e+1;r<n.length;r++)if(t(n[r]))return r;return-1}function lg(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class KK extends Aa{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var r;const{fragCurrent:i,partCurrent:o,hls:l}=this,{autoLevelEnabled:u,media:c}=l;if(!i||!c)return;const d=performance.now(),m=o?o.stats:i.stats,f=o?o.duration:i.duration,h=d-m.loading.start,g=l.minAutoLevel,p=i.level,E=this._nextAutoLevel;if(m.aborted||m.loaded&&m.loaded===m.total||p<=g){this.clearTimer(),this._nextAutoLevel=-1;return}if(!u)return;const S=E>-1&&E!==p,x=!!t||S;if(!x&&(c.paused||!c.playbackRate||!c.readyState))return;const _=l.mainForwardBufferInfo;if(!x&&_===null)return;const A=this.bwEstimator.getEstimateTTFB(),z=Math.abs(c.playbackRate);if(h<=Math.max(A,1e3*(f/(z*2))))return;const ie=_?_.len/z:0,he=m.loading.first?m.loading.first-m.loading.start:-1,P=m.loaded&&he>-1,U=this.getBwEstimate(),ce=l.levels,de=ce[p],_e=Math.max(m.loaded,Math.round(f*(i.bitrate||de.averageBitrate)/8));let je=P?h-he:h;je<1&&P&&(je=Math.min(h,m.loaded*8/U));const Se=P?m.loaded*1e3/je:0,ze=A/1e3,Le=Se?(_e-m.loaded)/Se:_e*8/U+ze;if(Le<=ie)return;const Re=Se?Se*8:U,Ye=((r=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,Ue=this.hls.config.abrBandWidthUpFactor;let Me=Number.POSITIVE_INFINITY,We;for(We=p-1;We>g;We--){const Rt=ce[We].maxBitrate,Pe=!ce[We].details||Ye;if(Me=this.getTimeToLoadFrag(ze,Re,f*Rt,Pe),Me<Math.min(ie,f+ze))break}if(Me>=Le||Me>f*10)return;P?this.bwEstimator.sample(h-Math.min(A,he),m.loaded):this.bwEstimator.sampleTTFB(h);const Ke=ce[We].maxBitrate;this.getBwEstimate()*Ue>Ke&&this.resetEstimator(Ke);const nt=this.findBestLevel(Ke,g,We,0,ie,1,1);nt>-1&&(We=nt),this.warn(`Fragment ${i.sn}${o?" part "+o.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${ie.toFixed(3)} s
      Estimated load time for current fragment: ${Le.toFixed(3)} s
      Estimated load time for down switch fragment: ${Me.toFixed(3)} s
      TTFB estimate: ${he|0} ms
      Current BW estimate: ${gn(U)?U|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${We} @ ${Ke|0} bps`),l.nextLoadLevel=l.nextAutoLevel=We,this.clearTimer();const bt=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===We&&We>0){const Rt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${We>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${Rt.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,We>g){let Pe=this.findBestLevel(this.hls.levels[g].bitrate,g,We,0,Rt,1,1);Pe===-1&&(Pe=g),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Pe,this.resetEstimator(this.hls.levels[Pe].bitrate)}}};S||Le>Me*2?bt():this.timer=self.setInterval(bt,Me*1e3),l.trigger(pe.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:o,stats:m})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new ZV(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(pe.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case pt.BUFFER_ADD_CODEC_ERROR:case pt.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case pt.FRAG_LOAD_TIMEOUT:{const r=t.frag,{fragCurrent:i,partCurrent:o}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const l=performance.now(),u=o?o.stats:r.stats,c=l-u.loading.start,d=u.loading.first?u.loading.first-u.loading.start:-1;if(u.loaded&&d>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(f,d),u.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,t,r,i){const o=e+r/t,l=i?e+this.lastLevelLoadSec:0;return o+l}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,o=i.end-i.first;gn(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const i=r?r.stats:t.stats;if(t.type===Sn.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=r?r.duration:t.duration,l=this.hls.levels[t.level],u=(l.loaded?l.loaded.bytes:0)+i.loaded,c=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:u,duration:c},l.realBitrate=Math.round(8*u/c)}if(t.bitrateTest){const o={stats:i,frag:t,part:r,id:t.type};this.onFragBuffered(pe.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:r.stats;if(o.aborted||this.ignoreFragment(r))return;const l=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,o.loaded),o.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Sn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(r,t,e,0,i,1,1);if(o>-1)return o;const l=this.hls.firstLevel,u=Math.min(Math.max(l,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${u}`),u}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,o)&&l[e].loadError<=l[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:o,minAutoLevel:l}=r,u=t?t.duration:e?e.duration:0,c=this.getBwEstimate(),d=this.getStarvationDelay();let m=o.abrBandWidthFactor,f=o.abrBandWidthUpFactor;if(d){const S=this.findBestLevel(c,l,i,d,0,m,f);if(S>=0)return this.rebufferNotice=-1,S}let h=u?Math.min(u,o.maxStarvationDelay):o.maxStarvationDelay;if(!d){const S=this.bitrateTestDelay;S&&(h=(u?Math.min(u,o.maxLoadingDelay):o.maxLoadingDelay)-S,this.info(`bitrate test took ${Math.round(1e3*S)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),m=f=1)}const g=this.findBestLevel(c,l,i,d,h,m,f);if(this.rebufferNotice!==g&&(this.rebufferNotice=g,this.info(`${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${g}`)),g>-1)return g;const p=r.levels[l],E=r.loadLevelObj;return E&&(p==null?void 0:p.bitrate)<E.bitrate?l:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,o,l,u){var c;const d=i+o,m=this.lastLoadedFragLevel,f=m===-1?this.hls.firstLevel:m,{fragCurrent:h,partCurrent:g}=this,{levels:p,allAudioTracks:E,loadLevel:S,config:x}=this.hls;if(p.length===1)return 0;const _=p[f],A=!!((c=this.hls.latestLevelDetails)!=null&&c.live),z=S===-1||m===-1;let ie,he="SDR",P=(_==null?void 0:_.frameRate)||0;const{audioPreference:U,videoPreference:ce}=x,de=this.audioTracksByGroup||(this.audioTracksByGroup=FP(E));let _e=-1;if(z){if(this.firstSelection!==-1)return this.firstSelection;const Re=this.codecTiers||(this.codecTiers=qK(p,de,t,r)),Ye=$K(Re,he,e,U,ce),{codecSet:Ue,videoRanges:Me,minFramerate:We,minBitrate:Ke,minIndex:nt,preferHDR:bt}=Ye;_e=nt,ie=Ue,he=bt?Me[Me.length-1]:Me[0],P=We,e=Math.max(e,Ke),this.log(`picked start tier ${Sr(Ye)}`)}else ie=_==null?void 0:_.codecSet,he=_==null?void 0:_.videoRange;const je=g?g.duration:h?h.duration:0,Se=this.bwEstimator.getEstimateTTFB()/1e3,ze=[];for(let Re=r;Re>=t;Re--){var Le;const Ye=p[Re],Ue=Re>f;if(!Ye)continue;if(x.useMediaCapabilities&&!Ye.supportedResult&&!Ye.supportedPromise){const Pe=navigator.mediaCapabilities;typeof(Pe==null?void 0:Pe.decodingInfo)=="function"&&DK(Ye,de,he,P,e,U)?(Ye.supportedPromise=MP(Ye,de,Pe,this.supportedCache),Ye.supportedPromise.then(Ne=>{if(!this.hls)return;Ye.supportedResult=Ne;const Qe=this.hls.levels,X=Qe.indexOf(Ye);Ne.error?this.warn(`MediaCapabilities decodingInfo error: "${Ne.error}" for level ${X} ${Sr(Ne)}`):Ne.supported?Ne.decodingInfoResults.some(W=>W.smooth===!1||W.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${X} not smooth or powerEfficient: ${Sr(Ne)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${X} ${Sr(Ne)}`),X>-1&&Qe.length>1&&(this.log(`Removing unsupported level ${X}`),this.hls.removeLevel(X),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Ne=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Ne}`)})):Ye.supportedResult=LP}if((ie&&Ye.codecSet!==ie||he&&Ye.videoRange!==he||Ue&&P>Ye.frameRate||!Ue&&P>0&&P<Ye.frameRate||(Le=Ye.supportedResult)!=null&&(Le=Le.decodingInfoResults)!=null&&Le.some(Pe=>Pe.smooth===!1))&&(!z||Re!==_e)){ze.push(Re);continue}const Me=Ye.details,We=(g?Me==null?void 0:Me.partTarget:Me==null?void 0:Me.averagetargetduration)||je;let Ke;Ue?Ke=u*e:Ke=l*e;const nt=je&&i>=je*2&&o===0?Ye.averageBitrate:Ye.maxBitrate,bt=this.getTimeToLoadFrag(Se,Ke,nt*We,Me===void 0);if(Ke>=nt&&(Re===m||Ye.loadError===0&&Ye.fragmentError===0)&&(bt<=Se||!gn(bt)||A&&!this.bitrateTestDelay||bt<d)){const Pe=this.forcedAutoLevel;return Re!==S&&(Pe===-1||Pe!==S)&&(ze.length&&this.trace(`Skipped level(s) ${ze.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[ze[0]].codecs}" ${p[ze[0]].videoRange}; not compatible with "${ie}" ${he}`),this.info(`switch candidate:${f}->${Re} adjustedbw(${Math.round(Ke)})-bitrate=${Math.round(Ke-nt)} ttfb:${Se.toFixed(1)} avgDuration:${We.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${bt.toFixed(1)} firstSelection:${z} codecSet:${Ye.codecSet} videoRange:${Ye.videoRange} hls.loadLevel:${S}`)),z&&(this.firstSelection=Re),Re}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}}const zP={search:function(n,e){let t=0,r=n.length-1,i=null,o=null;for(;t<=r;){i=(t+r)/2|0,o=n[i];const l=e(o);if(l>0)t=i+1;else if(l<0)r=i-1;else return o}return null}};function YK(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!gn(e))return null;const r=n[0].programDateTime;if(e<(r||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let o=0;o<n.length;++o){const l=n[o];if(QK(e,t,l))return l}return null}function Wl(n,e,t=0,r=0,i=.005){let o=null;if(n){o=e[1+n.sn-e[0].sn]||null;const u=n.endDTS-t;u>0&&u<15e-7&&(t+=15e-7),o&&n.level!==o.level&&o.end<=n.end&&(o=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!n||n.level===o.level)&&YI(t,r,o)===0||WK(o,n,Math.min(i,r))))return o;const l=zP.search(e,YI.bind(null,t,r));return l&&(l!==n||!o)?l:o}function WK(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return n.start<=r}return!1}function YI(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=n?1:t.start-r>n&&t.start?-1:0}function QK(n,e,t){const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-r>n}function UP(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let r=n.fragments;const{fragmentHint:i}=n;i&&(r=r.concat(i));let o;return zP.search(r,l=>l.cc<e?1:l.cc>e?-1:(o=l,l.end<=t?1:l.start>t?-1:0)),o||null}return null}function ug(n){switch(n.details){case pt.FRAG_LOAD_TIMEOUT:case pt.KEY_LOAD_TIMEOUT:case pt.LEVEL_LOAD_TIMEOUT:case pt.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function jP(n){return n.details.startsWith("key")}function BP(n){return jP(n)&&!!n.frag&&!n.frag.decryptdata}function WI(n,e){const t=ug(e);return n.default[`${t?"timeout":"error"}Retry`]}function hT(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function QI(n){return gr(gr({},n),{errorRetry:null,timeoutRetry:null})}function cg(n,e,t,r){if(!n)return!1;const i=r==null?void 0:r.code,o=e<n.maxNumRetry&&(XK(i)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,r,o):o}function XK(n){return ZE(n)||!!n&&(n<400||n>499)}function ZE(n){return n===0&&navigator.onLine===!1}var oi={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Wi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class ZK extends Aa{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.ERROR,this.onError,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.ERROR,this.onError,this),e.off(pe.ERROR,this.onErrorOut,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Sn.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,r=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||r===-1?t.loadLevel:r}variantHasKey(e,t){if(e){var r;if((r=e.details)!=null&&r.hasKey(t))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(l=>i.indexOf(l.groupId)>=0).some(l=>{var u;return(u=l.details)==null?void 0:u.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case pt.FRAG_LOAD_ERROR:case pt.FRAG_LOAD_TIMEOUT:case pt.KEY_LOAD_ERROR:case pt.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case pt.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap){t.errorAction=Wu();return}case pt.FRAG_GAP:case pt.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=oi.SendAlternateToPenaltyBox;return}case pt.LEVEL_EMPTY_ERROR:case pt.LEVEL_PARSING_ERROR:{var l;const c=t.parent===Sn.MAIN?t.level:i.loadLevel;t.details===pt.LEVEL_EMPTY_ERROR&&((l=t.context)!=null&&(l=l.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case pt.LEVEL_LOAD_ERROR:case pt.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case pt.AUDIO_TRACK_LOAD_ERROR:case pt.AUDIO_TRACK_LOAD_TIMEOUT:case pt.SUBTITLE_LOAD_ERROR:case pt.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=i.loadLevelObj;if(c&&(o.type===Zn.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===Zn.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=oi.SendAlternateToPenaltyBox,t.errorAction.flags=Wi.MoveAllAlternatesMatchingHost;return}}return;case pt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:oi.SendAlternateToPenaltyBox,flags:Wi.MoveAllAlternatesMatchingHDCP};return;case pt.KEY_SYSTEM_SESSION_UPDATE_FAILED:case pt.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case pt.KEY_SYSTEM_NO_SESSION:t.errorAction={action:oi.SendAlternateToPenaltyBox,flags:Wi.MoveAllAlternatesMatchingKey};return;case pt.BUFFER_ADD_CODEC_ERROR:case pt.REMUX_ALLOC_ERROR:case pt.BUFFER_APPEND_ERROR:if(!t.errorAction){var u;t.errorAction=this.getLevelSwitchAction(t,(u=t.level)!=null?u:i.loadLevel)}return;case pt.INTERNAL_EXCEPTION:case pt.BUFFER_APPENDING_ERROR:case pt.BUFFER_FULL_ERROR:case pt.LEVEL_SWITCH_ERROR:case pt.BUFFER_STALLED_ERROR:case pt.BUFFER_SEEK_OVER_HOLE:case pt.BUFFER_NUDGE_ON_STALL:t.errorAction=Wu();return}t.type===Nn.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Wu())}getPlaylistRetryOrSwitchAction(e,t){const r=this.hls,i=WI(r.config.playlistLoadPolicy,e),o=this.playlistError++;if(cg(i,o,ug(e),e.response))return{action:oi.RetryRequest,flags:Wi.None,retryConfig:i,retryCount:o};const u=this.getLevelSwitchAction(e,t);return i&&(u.retryConfig=i,u.retryCount=o),u}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],{fragLoadPolicy:o,keyLoadPolicy:l}=t.config,u=WI(jP(e)?l:o,e),c=t.levels.reduce((m,f)=>m+f.fragmentError,0);if(i&&(e.details!==pt.FRAG_GAP&&i.fragmentError++,!BP(e)&&cg(u,c,ug(e),e.response)))return{action:oi.RetryRequest,flags:Wi.None,retryConfig:u,retryCount:c};const d=this.getLevelSwitchAction(e,r);return u&&(d.retryConfig=u,d.retryCount=c),d}getLevelSwitchAction(e,t){const r=this.hls;t==null&&(t=r.loadLevel);const i=this.hls.levels[t];if(i){var o,l;const d=e.details;i.loadError++,d===pt.BUFFER_APPEND_ERROR&&i.fragmentError++;let m=-1;const{levels:f,loadLevel:h,minAutoLevel:g,maxAutoLevel:p}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const E=(o=e.frag)==null?void 0:o.type,x=(E===Sn.AUDIO&&d===pt.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===pt.BUFFER_ADD_CODEC_ERROR||d===pt.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:he})=>i.audioCodec!==he),A=e.sourceBufferName==="video"&&(d===pt.BUFFER_ADD_CODEC_ERROR||d===pt.BUFFER_APPEND_ERROR)&&f.some(({codecSet:he,audioCodec:P})=>i.codecSet!==he&&i.audioCodec===P),{type:z,groupId:ie}=(l=e.context)!=null?l:{};for(let he=f.length;he--;){const P=(he+h)%f.length;if(P!==h&&P>=g&&P<=p&&f[P].loadError===0){var u,c;const U=f[P];if(d===pt.FRAG_GAP&&E===Sn.MAIN&&e.frag){const ce=f[P].details;if(ce){const de=Wl(e.frag,ce.fragments,e.frag.start);if(de!=null&&de.gap)continue}}else{if(z===Zn.AUDIO_TRACK&&U.hasAudioGroup(ie)||z===Zn.SUBTITLE_TRACK&&U.hasSubtitleGroup(ie))continue;if(E===Sn.AUDIO&&(u=i.audioGroups)!=null&&u.some(ce=>U.hasAudioGroup(ce))||E===Sn.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(ce=>U.hasSubtitleGroup(ce))||x&&i.audioCodec===U.audioCodec||A&&i.codecSet===U.codecSet||!x&&i.codecSet!==U.codecSet)continue}m=P;break}}if(m>-1&&r.loadLevel!==m)return e.levelRetry=!0,this.playlistError=0,{action:oi.SendAlternateToPenaltyBox,flags:Wi.None,nextAutoLevel:m}}return{action:oi.SendAlternateToPenaltyBox,flags:Wi.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case oi.DoNothing:break;case oi.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==pt.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:i}=r,o=r.nextAutoLevel;switch(i){case Wi.None:this.switchLevel(e,o);break;case Wi.MoveAllAlternatesMatchingHDCP:{const c=this.getVariantLevelIndex(e.frag),d=t.levels[c],m=d==null?void 0:d.attrs["HDCP-LEVEL"];if(r.hdcpLevel=m,m==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(m){t.maxHdcpLevel=XE[XE.indexOf(m)-1],r.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Wi.MoveAllAlternatesMatchingKey:{const c=e.decryptdata;if(c){const d=this.hls.levels,m=d.length;for(let h=m;h--;)if(this.variantHasKey(d[h],c)){var l,u;this.log(`Banned key found in level ${h} (${d[h].bitrate}bps) or audio group "${(l=d[h].audioGroups)==null?void 0:l.join(",")}" (${(u=e.frag)==null?void 0:u.type} fragment) ${li(c.keyId||[])}`),d[h].fragmentError++,d[h].loadError++,this.log(`Removing level ${h} with key error (${e.error})`),this.hls.removeLevel(h)}const f=e.frag;if(this.hls.levels.length<m)r.resolved=!0;else if(f&&f.type!==Sn.MAIN){const h=f.decryptdata;h&&!c.matches(h)&&(r.resolved=!0)}}break}}r.resolved||this.switchLevel(e,o)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===pt.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=QE(e.mimeType),i=this.hls.levels;for(let o=i.length;o--;)i[o][`${e.sourceBufferName}Codec`]===r&&(this.log(`Removing level ${o} for ${e.details} ("${r}" not supported)`),this.hls.removeLevel(o))}}}function Wu(n){const e={action:oi.DoNothing,flags:Wi.None};return n&&(e.resolved=!0),e}var Xr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class JK{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let i=r.length;i--;){const o=r[i];if(!o)break;if(o.start<=e&&e<=o.end&&o.loaded)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:i}=this,o=Object.keys(i);for(let l=o.length;l--;){const u=i[o[l]];if((u==null?void 0:u.body.type)===t&&(!r||u.buffered)){const c=u.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,t,r,i,o){this.timeRanges&&(this.timeRanges[e]=t);const l=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(u=>{const c=this.fragments[u];if(!c||l>=c.body.sn)return;if(!c.buffered&&(!c.loaded||o)){c.body.type===r&&this.removeFragment(c.body);return}const d=c.range[e];if(d){if(d.time.length===0){this.removeFragment(c.body);return}d.time.some(m=>{const f=!this.isTimeBuffered(m.startPTS,m.endPTS,t);return f&&this.removeFragment(c.body),f})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const r=e.frag,i=yu(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const l=!r.relurl;Object.keys(t).forEach(u=>{const c=r.elementaryStreams[u];if(!c)return;const d=t[u],m=l||c.partial===!0;o.range[u]=this.getBufferedTimes(r,e.part,m,d)}),o.loaded=null,Object.keys(o.range).length?(this.bufferedEnd(o,r),Lh(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=XI(r,i=>i.fragment.sn>=e))}fragBuffered(e,t){const r=yu(e);let i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,t,r,i){const o={time:[],partial:r},l=e.start,u=e.end,c=e.minEndPTS||u,d=e.maxStartPTS||l;for(let m=0;m<i.length;m++){const f=i.start(m)-this.bufferPadding,h=i.end(m)+this.bufferPadding;if(d>=f&&c<=h){o.time.push({startPTS:Math.max(l,i.start(m)),endPTS:Math.min(u,i.end(m))});break}else if(l<h&&u>f){const g=Math.max(l,i.start(m)),p=Math.min(u,i.end(m));p>g&&(o.partial=!0,o.time.push({startPTS:g,endPTS:p}))}else if(u<=f)break}return o}getPartialFragment(e){let t=null,r,i,o,l=0;const{bufferPadding:u,fragments:c}=this;return Object.keys(c).forEach(d=>{const m=c[d];m&&Lh(m)&&(i=m.body.start-u,o=m.body.end+u,e>=i&&e<=o&&(r=Math.min(e-i,o-e),l<=r&&(t=m.body,l=r)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Lh(t))}getState(e){const t=yu(e),r=this.fragments[t];return r?r.buffered?Lh(r)?Xr.PARTIAL:Xr.OK:Xr.APPENDING:Xr.NOT_LOADED}isTimeBuffered(e,t,r){let i,o;for(let l=0;l<r.length;l++){if(i=r.start(l)-this.bufferPadding,o=r.end(l)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const r=t.frag,i=t.part?null:t,o=yu(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:i,timeRanges:o,type:l}=t;if(r.sn==="initSegment")return;const u=r.type;if(i){let d=this.activePartLists[u];d||(this.activePartLists[u]=d=[]),d.push(i)}this.timeRanges=o;const c=o[l];this.detectEvictedFragments(l,c,u,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=yu(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let i=r.length;i--;){const o=t[r[i]];if((o==null?void 0:o.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,r,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const u=this.fragments[l];if(!u)return;const c=u.body;c.type!==r||i&&!c.gap||c.start<t&&c.end>e&&(u.buffered||o)&&this.removeFragment(c)})}removeFragment(e){const t=yu(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=XI(r,o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(r=>r.clearElementaryStreamInfo())}}function Lh(n){var e,t,r;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(r=n.range.audiovideo)!=null&&r.partial)}function yu(n){return`${n.type}_${n.level}_${n.sn}`}function XI(n,e){return n.filter(t=>{const r=e(t);return r||t.clearElementaryStreamInfo(),r})}var Jo={cbc:0,ctr:1};class eY{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case Jo.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Jo.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function tY(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class nY{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=t.getUint32(i*4);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],o=r[1],l=r[2],u=r[3],c=this.invSubMix,d=c[0],m=c[1],f=c[2],h=c[3],g=new Uint32Array(256);let p=0,E=0,S=0;for(S=0;S<256;S++)S<128?g[S]=S<<1:g[S]=S<<1^283;for(S=0;S<256;S++){let x=E^E<<1^E<<2^E<<3^E<<4;x=x>>>8^x&255^99,e[p]=x,t[x]=p;const _=g[p],A=g[_],z=g[A];let ie=g[x]*257^x*16843008;i[p]=ie<<24|ie>>>8,o[p]=ie<<16|ie>>>16,l[p]=ie<<8|ie>>>24,u[p]=ie,ie=z*16843009^A*65537^_*257^p*16843008,d[x]=ie<<24|ie>>>8,m[x]=ie<<16|ie>>>16,f[x]=ie<<8|ie>>>24,h[x]=ie,p?(p=_^g[g[g[z^_]]],E^=g[g[E]]):p=E=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<t.length&&r;)r=t[i]===this.key[i],i++;if(r)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const l=this.ksRows=(o+6+1)*4;let u,c;const d=this.keySchedule=new Uint32Array(l),m=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,g=this.invSubMix,p=g[0],E=g[1],S=g[2],x=g[3];let _,A;for(u=0;u<l;u++){if(u<o){_=d[u]=t[u];continue}A=_,u%o===0?(A=A<<8|A>>>24,A=f[A>>>24]<<24|f[A>>>16&255]<<16|f[A>>>8&255]<<8|f[A&255],A^=h[u/o|0]<<24):o>6&&u%o===4&&(A=f[A>>>24]<<24|f[A>>>16&255]<<16|f[A>>>8&255]<<8|f[A&255]),d[u]=_=(d[u-o]^A)>>>0}for(c=0;c<l;c++)u=l-c,c&3?A=d[u]:A=d[u-4],c<4||u<=4?m[c]=A:m[c]=p[f[A>>>24]]^E[f[A>>>16&255]]^S[f[A>>>8&255]]^x[f[A&255]],m[c]=m[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,r){const i=this.keySize+6,o=this.invKeySchedule,l=this.invSBox,u=this.invSubMix,c=u[0],d=u[1],m=u[2],f=u[3],h=this.uint8ArrayToUint32Array_(r);let g=h[0],p=h[1],E=h[2],S=h[3];const x=new Int32Array(e),_=new Int32Array(x.length);let A,z,ie,he,P,U,ce,de,_e,je,Se,ze,Le,Re;const Ye=this.networkToHostOrderSwap;for(;t<x.length;){for(_e=Ye(x[t]),je=Ye(x[t+1]),Se=Ye(x[t+2]),ze=Ye(x[t+3]),P=_e^o[0],U=ze^o[1],ce=Se^o[2],de=je^o[3],Le=4,Re=1;Re<i;Re++)A=c[P>>>24]^d[U>>16&255]^m[ce>>8&255]^f[de&255]^o[Le],z=c[U>>>24]^d[ce>>16&255]^m[de>>8&255]^f[P&255]^o[Le+1],ie=c[ce>>>24]^d[de>>16&255]^m[P>>8&255]^f[U&255]^o[Le+2],he=c[de>>>24]^d[P>>16&255]^m[U>>8&255]^f[ce&255]^o[Le+3],P=A,U=z,ce=ie,de=he,Le=Le+4;A=l[P>>>24]<<24^l[U>>16&255]<<16^l[ce>>8&255]<<8^l[de&255]^o[Le],z=l[U>>>24]<<24^l[ce>>16&255]<<16^l[de>>8&255]<<8^l[P&255]^o[Le+1],ie=l[ce>>>24]<<24^l[de>>16&255]<<16^l[P>>8&255]<<8^l[U&255]^o[Le+2],he=l[de>>>24]<<24^l[P>>16&255]<<16^l[U>>8&255]<<8^l[ce&255]^o[Le+3],_[t]=Ye(A^g),_[t+1]=Ye(he^p),_[t+2]=Ye(ie^E),_[t+3]=Ye(z^S),g=_e,p=je,E=Se,S=ze,t=t+4}return _.buffer}}class rY{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=iY(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function iY(n){switch(n){case Jo.cbc:return"AES-CBC";case Jo.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const aY=16;class mT{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?tY(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,i){return this.useSoftware?new Promise((o,l)=>{const u=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(u,t,r,i);const c=this.flush();c?o(c.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,i)}softwareDecrypt(e,t,r,i){const{currentIV:o,currentResult:l,remainderData:u}=this;if(i!==Jo.cbc||t.byteLength!==16)return pr.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),u&&(e=wa(u,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;o&&(r=o);let d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new nY),d.expandKey(t);const m=l;return this.currentResult=d.decrypt(c.buffer,0,r),this.currentIV=c.slice(-16).buffer,m||null}webCryptoDecrypt(e,t,r,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,i));this.key=t,this.fastAesKey=new rY(this.subtle,t,i)}return this.fastAesKey.expandKey().then(o=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new eY(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,o)):Promise.reject(new Error("web crypto not initialized"))).catch(o=>(pr.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${o.name}: ${o.message}`),this.onWebCryptoError(e,t,r,i)))}onWebCryptoError(e,t,r,i){const o=this.enableSoftwareAES;if(o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,i);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(o?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%aY;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(pr.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const ZI=Math.pow(2,17);class sY{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new js({type:Nn.NETWORK_ERROR,details:pt.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((u,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){c(eA(e));return}else e.gap=!1;const d=this.loader=o?new o(i):new l(i),m=JI(e);e.loader=d;const f=QI(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:ZI};e.stats=d.stats;const g={onSuccess:(p,E,S,x)=>{this.resetLoader(e,d);let _=p.data;S.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),u({frag:e,part:null,payload:_,networkDetails:x})},onError:(p,E,S,x)=>{this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:gr({url:r,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:S,stats:x}))},onAbort:(p,E,S)=>{this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:S,stats:p}))},onTimeout:(p,E,S)=>{this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:S,stats:p}))}};t&&(g.onProgress=(p,E,S,x)=>t({frag:e,part:null,payload:S,networkDetails:x})),d.load(m,h,g)})}loadPart(e,t,r){this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((u,c)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){c(eA(e,t));return}const d=this.loader=o?new o(i):new l(i),m=JI(e,t);e.loader=d;const f=QI(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ZI};t.stats=d.stats,d.load(m,h,{onSuccess:(g,p,E,S)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const x={frag:e,part:t,payload:g.data,networkDetails:S};r(x),u(x)},onError:(g,p,E,S)=>{this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:gr({url:m.url,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:E,stats:S}))},onAbort:(g,p,E)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:E,stats:g}))},onTimeout:(g,p,E)=>{this.resetLoader(e,d),c(new js({type:Nn.NETWORK_ERROR,details:pt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:E,stats:g}))}})})}updateStatsFromPart(e,t){const r=e.stats,i=t.stats,o=i.total;if(r.loaded+=i.loaded,o){const c=Math.round(e.duration/t.duration),d=Math.min(Math.round(r.loaded/o),c),f=(c-d)*Math.round(r.loaded/d);r.total=r.loaded+f}else r.total=Math.max(r.loaded,r.total);const l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function JI(n,e=null){const t=e||n,r={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(gn(i)&&gn(o)){var l;let u=i,c=o;if(n.sn==="initSegment"&&oY((l=n.decryptdata)==null?void 0:l.method)){const d=o-i;d%16&&(c=o+(16-d%16)),i!==0&&(r.resetIV=!0,u=i-16)}r.rangeStart=u,r.rangeEnd=c}return r}function eA(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),r={type:Nn.MEDIA_ERROR,details:pt.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(r.part=e),(e||n).stats.aborted=!0,new js(r)}function oY(n){return n==="AES-128"||n==="AES-256"}class js extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class $P extends Aa{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class gT{constructor(e,t,r,i=0,o=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Ph(),this.buffering={audio:Ph(),video:Ph(),audiovideo:Ph()},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=o,this.partial=l}}function Ph(){return{start:0,executeStart:0,executeEnd:0,end:0}}const tA={length:0,start:()=>0,end:()=>0};class qn{static isBuffered(e,t){if(e){const r=qn.getBuffered(e);for(let i=r.length;i--;)if(t>=r.start(i)&&t<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=qn.getBuffered(e);return qn.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const i=qn.bufferedRanges(e);if(i.length)return qn.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort((m,f)=>m.start-f.start||f.end-m.end);let i=-1,o=[];if(r)for(let m=0;m<e.length;m++){t>=e[m].start&&t<=e[m].end&&(i=m);const f=o.length;if(f){const h=o[f-1].end;e[m].start-h<r?e[m].end>h&&(o[f-1].end=e[m].end):o.push(e[m])}else o.push(e[m])}else o=e;let l=0,u,c=t,d=t;for(let m=0;m<o.length;m++){const f=o[m].start,h=o[m].end;if(i===-1&&t>=f&&t<=h&&(i=m),t+r>=f&&t<h)c=f,d=h,l=d-t;else if(t+r<f){u=f;break}}return{len:l,start:c||0,end:d||0,nextStart:u,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||tA}catch(t){return pr.log("failed to get media.buffered",t),tA}}}const qP=/\{\$([a-zA-Z0-9-_]+)\}/g;function nA(n){return qP.test(n)}function JE(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(qP,r=>{const i=r.substring(2,r.length-1),o=t==null?void 0:t[i];return o===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):o})}return e}function rA(n,e,t){let r=n.variableList;r||(n.variableList=r={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(i))o=l.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(l){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else i=e.NAME,o=e.VALUE;i in r?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=o||""}function lY(n,e,t){const r=e.IMPORT;if(t&&r in t){let i=n.variableList;i||(n.variableList=i={}),i[r]=t[r]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const uY=/^(\d+)x(\d+)$/,iA=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Nr{constructor(e,t){typeof e=="string"&&(e=Nr.parseAttrList(e,t)),br(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const r=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,o)=>(i[o.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=uY.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const i={},o='"';for(iA.lastIndex=0;(r=iA.exec(e))!==null;){const l=r[1].trim();let u=r[2];const c=u.indexOf(o)===0&&u.lastIndexOf(o)===u.length-1;let d=!1;if(c)u=u.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":d=!0}if(t&&(c||d))u=JE(t,u);else if(!d&&!c)switch(l){case"CLOSED-CAPTIONS":if(u==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":pr.warn(`${e}: attribute ${l} is missing quotes`)}i[l]=u}return i}}const cY="com.apple.hls.interstitial";function dY(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function fY(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class GP{constructor(e,t,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(i=t==null?void 0:t.tagOrder)!=null?i:r,t){const o=t.attr;for(const l in o)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==o[l]){pr.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=l;break}e=br(new Nr({}),o,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const o=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);gn(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(pr.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(gn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===cY}get isValid(){return!!this.id&&!this._badValueForSameId&&gn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const hY=10;class mY{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let r=t.decryptdata;return r||(t.setKeyFormat(e.keyFormat),r=t.decryptdata),!!r&&e.matches(r)})}get hasProgramDateTime(){return this.fragments.length?gn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||hY}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function dg(n,e){return n.length===e.length?!n.some((t,r)=>t!==e[r]):!1}function aA(n,e){return!n&&!e?!0:!n||!e?!1:dg(n,e)}function Qu(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function pT(n){switch(n){case"AES-128":case"AES-256":return Jo.cbc;case"AES-256-CTR":return Jo.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function yT(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function eb(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function gY(n){const e=eb(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function HP(n){const e=function(r,i,o){const l=r[i];r[i]=r[o],r[o]=l};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function VP(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const o=i[0]==="base64",l=i[1];o?(r.splice(-1,1),t=yT(l)):t=gY(l)}}return t}const fg=typeof self<"u"?self:void 0;var Lr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ci={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function mm(n){switch(n){case ci.FAIRPLAY:return Lr.FAIRPLAY;case ci.PLAYREADY:return Lr.PLAYREADY;case ci.WIDEVINE:return Lr.WIDEVINE;case ci.CLEARKEY:return Lr.CLEARKEY}}function $y(n){switch(n){case Lr.FAIRPLAY:return ci.FAIRPLAY;case Lr.PLAYREADY:return ci.PLAYREADY;case Lr.WIDEVINE:return ci.WIDEVINE;case Lr.CLEARKEY:return ci.CLEARKEY}}function hd(n){const{drmSystems:e,widevineLicenseUrl:t}=n,r=e?[Lr.FAIRPLAY,Lr.WIDEVINE,Lr.PLAYREADY,Lr.CLEARKEY].filter(i=>!!e[i]):[];return!r[Lr.WIDEVINE]&&t&&r.push(Lr.WIDEVINE),r}const KP=function(n){return fg!=null&&(n=fg.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function pY(n,e,t,r){let i;switch(n){case Lr.FAIRPLAY:i=["cenc","sinf"];break;case Lr.WIDEVINE:case Lr.PLAYREADY:i=["cenc"];break;case Lr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return yY(i,e,t,r)}function yY(n,e,t,r){return[{initDataTypes:n,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs=${o}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs=${o}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function vY(n){var e;return!!n&&(n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function YP(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),r=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(l){const u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){const c=yT(u).subarray(0,16);return HP(c),c}}return null}let vu={};class Vo{static clearKeyUriToKeyIdMap(){vu={}}static setKeyIdForUri(e,t){vu[e]=t}static addKeyIdForUri(e){const t=Object.keys(vu).length%Number.MAX_SAFE_INTEGER,r=new Uint8Array(16);return new DataView(r.buffer,12,4).setUint32(0,t),vu[e]=r,r}constructor(e,t,r,i=[1],o=null,l){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Qu(e),l!=null&&l.startsWith("0x")&&(this.keyId=new Uint8Array(SP(l)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&dg(e.keyFormatVersions,this.keyFormatVersions)&&aA(e.iv,this.iv)&&aA(e.keyId,this.keyId)}isSupported(){if(this.method){if(Qu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case ci.FAIRPLAY:case ci.WIDEVINE:case ci.PLAYREADY:case ci.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Qu(this.method)){let o=this.iv;return o||(typeof e!="number"&&(pr.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),o=bY(e)),new Vo(this.method,this.uri,"identity",this.keyFormatVersions,o)}if(this.keyId){const o=vu[this.uri];if(o&&!dg(this.keyId,o)&&Vo.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const r=VP(this.uri);if(r)switch(this.keyFormat){case ci.WIDEVINE:if(this.pssh=r,!this.keyId){const o=xK(r.buffer);if(o.length){var i;const l=o[0];this.keyId=(i=l.kids)!=null&&i.length?l.kids[0]:null}}this.keyId||(this.keyId=sA(t));break;case ci.PLAYREADY:{const o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=SK(o,null,r),this.keyId=YP(r);break}default:{let o=r.subarray(0,16);if(o.length!==16){const l=new Uint8Array(16);l.set(o,16-o.length),o=l}this.keyId=o;break}}if(!this.keyId||this.keyId.byteLength!==16){let o;o=EY(t),o||(o=sA(t),o||(o=vu[this.uri])),o&&(this.keyId=o,Vo.setKeyIdForUri(this.uri,o))}return this}}function EY(n){const e=n==null?void 0:n[ci.WIDEVINE];return e?e.keyId:null}function sA(n){const e=n==null?void 0:n[ci.PLAYREADY];if(e){const t=VP(e.uri);if(t)return YP(t)}return null}function bY(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const oA=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,lA=/#EXT-X-MEDIA:(.*)/g,TY=/^#EXT(?:INF|-X-TARGETDURATION):/m,qy=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),SY=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Ts{static findGroup(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===t)return i}}static resolve(e,t){return lT.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return TY.test(e)}static parseMasterPlaylist(e,t){const r=nA(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},o=[];if(oA.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let l;for(;(l=oA.exec(e))!=null;)if(l[1]){var u;const d=new Nr(l[1],i),m=JE(i,l[2]),f={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:Ts.resolve(m,t)},h=d.decimalResolution("RESOLUTION");h&&(f.width=h.width,f.height=h.height),dA(d.CODECS,f);const g=d["SUPPLEMENTAL-CODECS"];g&&(f.supplemental={},dA(g,f.supplemental)),(u=f.unknownCodecs)!=null&&u.length||o.push(f),i.levels.push(f)}else if(l[3]){const d=l[3],m=l[4];switch(d){case"SESSION-DATA":{const f=new Nr(m,i),h=f["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=f);break}case"SESSION-KEY":{const f=uA(m,t,i);f.encrypted&&f.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(f)):pr.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${m}"`);break}case"DEFINE":{{const f=new Nr(m,i);rA(i,f,t)}break}case"CONTENT-STEERING":{const f=new Nr(m,i);i.contentSteering={uri:Ts.resolve(f["SERVER-URI"],t),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=cA(m);break}}}const c=o.length>0&&o.length<i.levels.length;return i.levels=c?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,r){let i;const o={},l=r.levels,u={AUDIO:l.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:l.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(lA.lastIndex=0;(i=lA.exec(e))!==null;){const d=new Nr(i[1],r),m=d.TYPE;if(m){const f=u[m],h=o[m]||[];o[m]=h;const g=d.LANGUAGE,p=d["ASSOC-LANGUAGE"],E=d.CHANNELS,S=d.CHARACTERISTICS,x=d["INSTREAM-ID"],_={attrs:d,bitrate:0,id:c++,groupId:d["GROUP-ID"]||"",name:d.NAME||g||"",type:m,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:g,url:d.URI?Ts.resolve(d.URI,t):""};if(p&&(_.assocLang=p),E&&(_.channels=E),S&&(_.characteristics=S),x&&(_.instreamId=x),f!=null&&f.length){const A=Ts.findGroup(f,_.groupId)||f[0];fA(_,A,"audioCodec"),fA(_,A,"textCodec")}h.push(_)}}return o}static parseLevelPlaylist(e,t,r,i,o,l){var u;const c={url:t},d=new mY(t),m=d.fragments,f=[];let h=null,g=0,p=0,E=0,S=0,x=0,_=null,A=new Uy(i,c),z,ie,he,P=-1,U=!1,ce=null,de;if(qy.lastIndex=0,d.m3u8=e,d.hasVariableRefs=nA(e),((u=qy.exec(e))==null?void 0:u[0])!=="#EXTM3U")return d.playlistParsingError=new Error("Missing format identifier #EXTM3U"),d;for(;(z=qy.exec(e))!==null;){U&&(U=!1,A=new Uy(i,c),A.playlistOffset=E,A.setStart(E),A.sn=g,A.cc=S,x&&(A.bitrate=x),A.level=r,h&&(A.initSegment=h,h.rawProgramDateTime&&(A.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),ce&&(A.setByteRange(ce),ce=null)));const ze=z[1];if(ze){A.duration=parseFloat(ze);const Le=(" "+z[2]).slice(1);A.title=Le||null,A.tagList.push(Le?["INF",ze,Le]:["INF",ze])}else if(z[3]){if(gn(A.duration)){A.playlistOffset=E,A.setStart(E),he&&mA(A,he,d),A.sn=g,A.level=r,A.cc=S,m.push(A);const Le=(" "+z[3]).slice(1);A.relurl=JE(d,Le),tb(A,_,f),_=A,E+=A.duration,g++,p=0,U=!0}}else{if(z=z[0].match(SY),!z){pr.warn("No matches on slow regex match for level playlist!");continue}for(ie=1;ie<z.length&&z[ie]===void 0;ie++);const Le=(" "+z[ie]).slice(1),Re=(" "+z[ie+1]).slice(1),Ye=z[ie+2]?(" "+z[ie+2]).slice(1):null;switch(Le){case"BYTERANGE":_?A.setByteRange(Re,_):A.setByteRange(Re);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=Re,A.tagList.push(["PROGRAM-DATE-TIME",Re]),P===-1&&(P=m.length);break;case"PLAYLIST-TYPE":d.type&&Os(d,Le,z),d.type=Re.toUpperCase();break;case"MEDIA-SEQUENCE":d.startSN!==0?Os(d,Le,z):m.length>0&&gA(d,Le,z),g=d.startSN=parseInt(Re);break;case"SKIP":{d.skippedSegments&&Os(d,Le,z);const Ue=new Nr(Re,d),Me=Ue.decimalInteger("SKIPPED-SEGMENTS");if(gn(Me)){d.skippedSegments+=Me;for(let Ke=Me;Ke--;)m.push(null);g+=Me}const We=Ue.enumeratedString("RECENTLY-REMOVED-DATERANGES");We&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(We.split("	")));break}case"TARGETDURATION":d.targetduration!==0&&Os(d,Le,z),d.targetduration=Math.max(parseInt(Re),1);break;case"VERSION":d.version!==null&&Os(d,Le,z),d.version=parseInt(Re);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":d.live||Os(d,Le,z),d.live=!1;break;case"#":(Re||Ye)&&A.tagList.push(Ye?[Re,Ye]:[Re]);break;case"DISCONTINUITY":S++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([Le]);break;case"BITRATE":A.tagList.push([Le,Re]),x=parseInt(Re)*1e3,gn(x)?A.bitrate=x:x=0;break;case"DATERANGE":{const Ue=new Nr(Re,d),Me=new GP(Ue,d.dateRanges[Ue.ID],d.dateRangeTagCount);d.dateRangeTagCount++,Me.isValid||d.skippedSegments?d.dateRanges[Me.id]=Me:pr.warn(`Ignoring invalid DATERANGE tag: "${Re}"`),A.tagList.push(["EXT-X-DATERANGE",Re]);break}case"DEFINE":{{const Ue=new Nr(Re,d);"IMPORT"in Ue?lY(d,Ue,l):rA(d,Ue,t)}break}case"DISCONTINUITY-SEQUENCE":d.startCC!==0?Os(d,Le,z):m.length>0&&gA(d,Le,z),d.startCC=S=parseInt(Re);break;case"KEY":{const Ue=uA(Re,t,d);if(Ue.isSupported()){if(Ue.method==="NONE"){he=void 0;break}he||(he={});const Me=he[Ue.keyFormat];Me!=null&&Me.matches(Ue)||(Me&&(he=br({},he)),he[Ue.keyFormat]=Ue)}else pr.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${Re}"`);break}case"START":d.startTimeOffset=cA(Re);break;case"MAP":{const Ue=new Nr(Re,d);if(A.duration){const Me=new Uy(i,c);hA(Me,Ue,r,he),h=Me,A.initSegment=h,h.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=h.rawProgramDateTime)}else{const Me=A.byteRangeEndOffset;if(Me){const We=A.byteRangeStartOffset;ce=`${Me-We}@${We}`}else ce=null;hA(A,Ue,r,he),h=A,U=!0}h.cc=S;break}case"SERVER-CONTROL":{de&&Os(d,Le,z),de=new Nr(Re),d.canBlockReload=de.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=de.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&de.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=de.optionalFloat("PART-HOLD-BACK",0),d.holdBack=de.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{d.partTarget&&Os(d,Le,z);const Ue=new Nr(Re);d.partTarget=Ue.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Ue=d.partList;Ue||(Ue=d.partList=[]);const Me=p>0?Ue[Ue.length-1]:void 0,We=p++,Ke=new Nr(Re,d),nt=new lK(Ke,A,c,We,Me);Ue.push(nt),A.duration+=nt.duration;break}case"PRELOAD-HINT":{const Ue=new Nr(Re,d);d.preloadHint=Ue;break}case"RENDITION-REPORT":{const Ue=new Nr(Re,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push(Ue);break}default:pr.warn(`line parsed but not handled: ${z}`);break}}}_&&!_.relurl?(m.pop(),E-=_.duration,d.partList&&(d.fragmentHint=_)):d.partList&&(tb(A,_,f),A.cc=S,d.fragmentHint=A,he&&mA(A,he,d)),d.targetduration||(d.playlistParsingError=new Error("Missing Target Duration"));const _e=m.length,je=m[0],Se=m[_e-1];if(E+=d.skippedSegments*d.targetduration,E>0&&_e&&Se){d.averagetargetduration=E/_e;const ze=Se.sn;d.endSN=ze!=="initSegment"?ze:0,d.live||(Se.endList=!0),P>0&&(wY(m,P),je&&f.unshift(je))}return d.fragmentHint&&(E+=d.fragmentHint.duration),d.totalduration=E,f.length&&d.dateRangeTagCount&&je&&WP(f,d),d.endCC=S,d}}function WP(n,e){let t=n.length;if(!t)if(e.hasProgramDateTime){const u=e.fragments[e.fragments.length-1];n.push(u),t++}else return;const r=n[t-1],i=e.live?1/0:e.totalduration,o=Object.keys(e.dateRanges);for(let u=o.length;u--;){const c=e.dateRanges[o[u]],d=c.startDate.getTime();c.tagAnchor=r.ref;for(let m=t;m--;){var l;if(((l=n[m])==null?void 0:l.sn)<e.startSN)break;const f=xY(e,d,n,m,i);if(f!==-1){c.tagAnchor=e.fragments[f].ref;break}}}}function xY(n,e,t,r,i){const o=t[r];if(o){const u=o.programDateTime;if(e>=u||r===0){var l;const c=(((l=t[r+1])==null?void 0:l.start)||i)-o.start;if(e<=u+c*1e3){const d=t[r].sn-n.startSN;if(d<0)return-1;const m=n.fragments;if(m.length>t.length){const h=(t[r+1]||m[m.length-1]).sn-n.startSN;for(let g=h;g>d;g--){const p=m[g].programDateTime;if(e>=p&&e<p+m[g].duration*1e3)return g}}return d}}}return-1}function uA(n,e,t){var r,i;const o=new Nr(n,t),l=(r=o.METHOD)!=null?r:"",u=o.URI,c=o.hexadecimalInteger("IV"),d=o.KEYFORMATVERSIONS,m=(i=o.KEYFORMAT)!=null?i:"identity";u&&o.IV&&!c&&pr.error(`Invalid IV: ${o.IV}`);const f=u?Ts.resolve(u,e):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new Vo(l,f,m,h,c,o.KEYID)}function cA(n){const t=new Nr(n).decimalFloatingPoint("TIME-OFFSET");return gn(t)?t:null}function dA(n,e){let t=(n||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=t.filter(o=>dT(o,r));i.length&&(e[`${r}Codec`]=i.map(o=>o.split("/")[0]).join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function fA(n,e,t){const r=e[t];r&&(n[t]=r)}function wY(n,e){let t=n[e];for(let r=e;r--;){const i=n[r];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function tb(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function hA(n,e,t,r){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",r&&(n.levelkeys=r),n.initSegment=null}function mA(n,e,t){n.levelkeys=e;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(n)}function Os(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function gA(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Gy(n,e){const t=e.startPTS;if(gn(t)){let r=0,i;e.sn>n.sn?(r=t-n.start,i=n):(r=n.start-t,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function QP(n,e,t,r,i,o,l){r-t<=0&&(l.warn("Fragment should have a positive duration",e),r=t+e.duration,o=i+e.duration);let c=t,d=r;const m=e.startPTS,f=e.endPTS;if(gn(m)){const x=Math.abs(m-t);n&&x>n.totalduration?l.warn(`media timestamps and playlist times differ by ${x}s for level ${e.level} ${n.url}`):gn(e.deltaPTS)?e.deltaPTS=Math.max(x,e.deltaPTS):e.deltaPTS=x,c=Math.max(t,m),t=Math.min(t,m),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,d=Math.min(r,f),r=Math.max(r,f),o=e.endDTS!==void 0?Math.max(o,e.endDTS):o}const h=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(r-e.start),e.startPTS=t,e.maxStartPTS=c,e.startDTS=i,e.endPTS=r,e.minEndPTS=d,e.endDTS=o;const g=e.sn;if(!n||g<n.startSN||g>n.endSN)return 0;let p;const E=g-n.startSN,S=n.fragments;for(S[E]=e,p=E;p>0;p--)Gy(S[p],S[p-1]);for(p=E;p<S.length-1;p++)Gy(S[p],S[p+1]);return n.fragmentHint&&Gy(S[S.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,h}function _Y(n,e,t){if(n===e)return;let r=null;const i=n.fragments;for(let m=i.length-1;m>=0;m--){const f=i[m].initSegment;if(f){r=f;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let o;RY(n,e,(m,f,h,g)=>{if((!e.startCC||e.skippedSegments)&&f.cc!==m.cc){const p=m.cc-f.cc;for(let E=h;E<g.length;E++)g[E].cc+=p;e.endCC=g[g.length-1].cc}gn(m.startPTS)&&gn(m.endPTS)&&(f.setStart(f.startPTS=m.startPTS),f.startDTS=m.startDTS,f.maxStartPTS=m.maxStartPTS,f.endPTS=m.endPTS,f.endDTS=m.endDTS,f.minEndPTS=m.minEndPTS,f.setDuration(m.endPTS-m.startPTS),f.duration&&(o=f),e.PTSKnown=e.alignedSliding=!0),m.hasStreams&&(f.elementaryStreams=m.elementaryStreams),f.loader=m.loader,m.hasStats&&(f.stats=m.stats),m.initSegment&&(f.initSegment=m.initSegment,r=m.initSegment)});const l=e.fragments,u=e.fragmentHint?l.concat(e.fragmentHint):l;if(r&&u.forEach(m=>{var f;m&&(!m.initSegment||m.initSegment.relurl===((f=r)==null?void 0:f.relurl))&&(m.initSegment=r)}),e.skippedSegments){if(e.deltaUpdateFailed=l.some(m=>!m),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let m=e.skippedSegments;m--;)l.shift();e.startSN=l[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=IY(n.dateRanges,e,t));const m=n.fragments.filter(f=>f.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let f=1;f<u.length;f++)u[f].programDateTime===null&&tb(u[f],u[f-1],m);WP(m,e)}e.endCC=l[l.length-1].cc}if(!e.startCC){var c;const m=JP(n,e.startSN-1);e.startCC=(c=m==null?void 0:m.cc)!=null?c:l[0].cc}AY(n.partList,e.partList,(m,f)=>{f.elementaryStreams=m.elementaryStreams,f.stats=m.stats}),o?QP(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS,t):XP(n,e),l.length&&(e.totalduration=e.edge-l[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const d=e.advancedDateTime;if(e.advanced&&d){const m=e.edge;e.driftStart||(e.driftStartTime=d,e.driftStart=m),e.driftEndTime=d,e.driftEnd=m}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function IY(n,e,t){const{dateRanges:r,recentlyRemovedDateranges:i}=e,o=br({},n);i&&i.forEach(c=>{delete o[c]});const u=Object.keys(o).length;return u?(Object.keys(r).forEach(c=>{const d=o[c],m=new GP(r[c].attr,d);m.isValid?(o[c]=m,d||(m.tagOrder+=u)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Sr(r[c].attr)}"`)}),o):r}function AY(n,e,t){if(n&&e){let r=0;for(let i=0,o=n.length;i<=o;i++){const l=n[i],u=e[i+r];l&&u&&l.index===u.index&&l.fragment.sn===u.fragment.sn?t(l,u):r--}}}function RY(n,e,t){const r=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,o=(n.fragmentHint?1:0)+(r?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,l=e.startSN-n.startSN,u=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let d=i;d<=o;d++){const m=c[l+d];let f=u[d];if(r&&!f&&m&&(f=e.fragments[d]=m),m&&f){t(m,f,d,u);const h=m.relurl,g=f.relurl;if(h&&kY(h,g)){e.playlistParsingError=pA(`media sequence mismatch ${f.sn}:`,n,e,m,f);return}else if(m.cc!==f.cc){e.playlistParsingError=pA(`discontinuity sequence mismatch (${m.cc}!=${f.cc})`,n,e,m,f);return}}}}function pA(n,e,t,r,i){return new Error(`${n} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function XP(n,e,t=!0){const r=e.startSN+e.skippedSegments-n.startSN,i=n.fragments,o=r>=0;let l=0;if(o&&r<i.length)l=i[r].start;else if(o&&e.startSN===n.endSN+1)l=n.fragmentEnd;else if(o&&t)l=n.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)l=n.fragmentStart;else return;nb(e,l)}function nb(n,e){if(e){const t=n.fragments;for(let r=n.skippedSegments;r<t.length;r++)t[r].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function ZP(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const r=n.fragments;if(r.length&&t*4>e){const o=r[r.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function JP(n,e,t){if(!n)return null;let r=n.fragments[e-n.startSN];return r||(r=n.fragmentHint,r&&r.sn===e)?r:e<n.startSN&&t&&t.sn===e?t:null}function yA(n,e,t){return n?eM(n.partList,e,t):null}function eM(n,e,t){if(n)for(let r=n.length;r--;){const i=n[r];if(i.index===t&&i.fragment.sn===e)return i}return null}function tM(n){n.forEach((e,t)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function kY(n,e){return n!==e&&e?vA(n)!==vA(e):!1}function vA(n){return n.replace(/\?[^?]*$/,"")}function _d(n,e){for(let r=0,i=n.length;r<i;r++){var t;if(((t=n[r])==null?void 0:t.cc)===e)return n[r]}return null}function CY(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function EA(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function nM(n,e){const t=e.fragments;for(let r=0,i=t.length;r<i;r++)EA(t[r],n);e.fragmentHint&&EA(e.fragmentHint,n),e.alignedSliding=!0}function NY(n,e){n&&(rM(e,n),e.alignedSliding||hg(e,n),!e.alignedSliding&&!e.skippedSegments&&XP(n,e,!1))}function rM(n,e){if(!CY(e,n))return;const t=Math.min(e.endCC,n.endCC),r=_d(e.fragments,t),i=_d(n.fragments,t);if(!r||!i)return;pr.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const o=r.start-i.start;nM(o,n)}function hg(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,r=e.fragments;if(!t.length||!r.length)return;let i,o;const l=Math.min(e.endCC,n.endCC);e.startCC<l&&n.startCC<l&&(i=_d(r,l),o=_d(t,l)),(!i||!o)&&(i=r[Math.floor(r.length/2)],o=_d(t,i.cc)||t[Math.floor(t.length/2)]);const u=i.programDateTime,c=o.programDateTime;if(!u||!c)return;const d=(c-u)/1e3-(o.start-i.start);nM(d,n)}function Ii(n,e,t){$i(n,e,t),n.addEventListener(e,t)}function $i(n,e,t){n.removeEventListener(e,t)}const DY={toString:function(n){let e="";const t=n.length;for(let r=0;r<t;r++)e+=`[${n.start(r).toFixed(3)}-${n.end(r).toFixed(3)}]`;return e}},Bt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class vT extends $P{constructor(e,t,r,i,o){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Bt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:u,media:c,mediaBuffer:d,state:m}=this,f=c?c.currentTime:0,h=qn.bufferInfo(d||c,f,l.maxBufferHole),g=!h.len;if(this.log(`Media seeking to ${gn(f)?f.toFixed(3):f}, state: ${m}, ${g?"out of":"in"} buffer`),this.state===Bt.ENDED)this.resetLoadingState();else if(u){const p=l.maxFragLookUpTolerance,E=u.start-p,S=u.start+u.duration+p;if(g||S<h.start||E>h.end){const x=f>S;(f<E||x)&&(x&&u.loader&&(this.log(`Cancelling fragment load for seek (sn: ${u.sn})`),u.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(f,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(f>p&&(this.lastCurrentTime=f),!this.loadingParts){const E=Math.max(h.end,f),S=this.shouldLoadParts(this.getLevelDetails(),E);S&&(this.log(`LL-Part loading ON after seeking to ${f.toFixed(2)} with buffer @${E.toFixed(2)}`),this.loadingParts=S)}}this.hls.hasEnoughToStart||(this.log(`Setting ${g?"startPosition":"nextLoadPosition"} to ${f} for seek without enough to start`),this.nextLoadPosition=f,g&&(this.startPosition=f)),g&&this.state===Bt.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=o,this.hls=e,this.fragmentLoader=new sY(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new mT(e.config)}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Bt.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Bt.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const o=e.buffered;this.config.maxBufferHole&&o&&o.length>1&&(e=qn.bufferedInfo(o,e.start,0));const l=e.nextStart;if(l&&l>i&&l<t.edge||this.media.currentTime<e.start)return!1;const c=t.partList;if(c!=null&&c.length){const m=c[c.length-1];return qn.isBuffered(this.media,m.start+m.duration/2)}const d=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(d)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;Ii(r,"seeking",this.onMediaSeeking),Ii(r,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Bt.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),$i(i,"seeking",this.onMediaSeeking),$i(i,"ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Bt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){const i=o=>{const l=o.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${o.part?" part: "+o.part.index:""} of ${this.fragInfo(l,!1,o.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,r,i).then(o=>{if(!o)return;const l=this.state,u=o.frag;if(this.fragContextChanged(u)){(l===Bt.FRAG_LOADING||!this.fragCurrent&&l===Bt.PARSING)&&(this.fragmentTracker.removeFragment(u),this.state=Bt.IDLE);return}"payload"in o&&(this.log(`Loaded ${u.type} sn: ${u.sn} of ${this.playlistLabel()} ${u.level}`),this.hls.trigger(pe.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===Bt.STOPPED||this.state===Bt.ERROR||(this.warn(`Frag error: ${(o==null?void 0:o.message)||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===Xr.APPENDING){const o=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,o),u=Math.max(e.duration,l?l.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(u,e.duration))&&r.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Xr.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:r};this.hls.trigger(pe.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:o,payload:l}=r,u=o.decryptdata;if(l&&l.byteLength>0&&u!=null&&u.key&&u.iv&&Qu(u.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),u.key.buffer,u.iv.buffer,pT(u.method)).catch(d=>{throw i.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:o}),d}).then(d=>{const m=self.performance.now();return i.trigger(pe.FRAG_DECRYPTED,{frag:o,payload:d,stats:{tstart:c,tdecrypt:m}}),r.payload=d,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===Bt.STOPPED||this.state===Bt.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==Bt.STOPPED&&(this.state=Bt.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var r,i;const o=e.tracks;if(o&&!t.encrypted&&((r=o.audio)!=null&&r.encrypted||(i=o.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const l=this.media,u=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${l?"attached mediaKeys: "+l.mediaKeys:"detached"})`);return this.warn(u.message),!l||l.mediaKeys?!1:(this.hls.trigger(pe.ERROR,{type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_NO_KEYS,fatal:!1,error:u,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?DY.toString(qn.getBuffered(r)):"(detached)"})`),qr(e)){var i;if(e.type!==Sn.SUBTITLE){const l=e.elementaryStreams;if(!Object.keys(l).some(u=>!!l[u])){this.state=Bt.IDLE;return}}const o=(i=this.levels)==null?void 0:i[e.level];o!=null&&o.fragmentError&&(this.log(`Resetting level fragment error count of ${o.fragmentError} on frag buffered`),o.fragmentError=0)}this.state=Bt.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:i,partsLoaded:o}=e,l=!o||o.length===0||o.some(c=>!c),u=new gT(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!l);t.flush(u)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var o;this.fragCurrent=e;const l=t.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let u=null;if(e.encrypted&&!((o=e.decryptdata)!=null&&o.key)){if(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Bt.KEY_LOADING,this.fragCurrent=e,u=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(pe.KEY_LOADED,h),this.state===Bt.KEY_LOADING&&(this.state=Bt.IDLE),h}),this.hls.trigger(pe.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(u=this.keyLoader.loadClear(e,l.encryptedFragments,this.startFragRequested),u&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(qr(e)&&(!c||e.sn!==c.sn)){const h=this.shouldLoadParts(t.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${c==null?void 0:c.sn}->${e.sn}`),this.loadingParts=h)}if(r=Math.max(e.start,r||0),this.loadingParts&&qr(e)){const h=l.partList;if(h&&i){r>l.fragmentEnd&&l.fragmentHint&&(e=l.fragmentHint);const g=this.getNextPart(h,e,r);if(g>-1){const p=h[g];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${g}/${h.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=Bt.FRAG_LOADING;let E;return u?E=u.then(S=>!S||this.fragContextChanged(S.frag)?null:this.doFragPartsLoad(e,p,t,i)).catch(S=>this.handleFragLoadError(S)):E=this.doFragPartsLoad(e,p,t,i).catch(S=>this.handleFragLoadError(S)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,part:p,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):E}else if(!e.url||this.loadedEndOfParts(h,r))return Promise.resolve(null)}}if(qr(e)&&this.loadingParts){var d;this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(d=l.partList)==null?void 0:d.filter(h=>h.loaded).map(h=>`[${h.start}-${h.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+l.startSN+"-"+l.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),gn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Bt.FRAG_LOADING;const m=this.config.progressive&&e.type!==Sn.SUBTITLE;let f;return m&&u?f=u.then(h=>!h||this.fragContextChanged(h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):f=Promise.all([this.fragmentLoader.load(e,m?i:void 0),u]).then(([h])=>(!m&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,t,r,i){return new Promise((o,l)=>{var u;const c=[],d=(u=r.details)==null?void 0:u.partList,m=f=>{this.fragmentLoader.loadPart(e,f,i).then(h=>{c[f.index]=h;const g=h.part;this.hls.trigger(pe.FRAG_LOADED,h);const p=yA(r.details,e.sn,f.index+1)||eM(d,e.sn,f.index+1);if(p)m(p);else return o({frag:e,part:g,partsLoaded:c})}).catch(l)};m(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===pt.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Nn.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(pe.ERROR,t)}else this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Bt.PARSING){!this.fragCurrent&&this.state!==Bt.STOPPED&&this.state!==Bt.ERROR&&(this.state=Bt.IDLE);return}const{frag:r,part:i,level:o}=t,l=self.performance.now();r.stats.parsing.end=l,i&&(i.stats.parsing.end=l);const u=this.getLevelDetails(),d=u&&r.sn>u.endSN||this.shouldLoadParts(u,r.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=d),this.updateLevelTiming(r,i,o,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var r;const o=e.partList[0];if(o.fragment.type===Sn.SUBTITLE)return!1;const l=o.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(t>=l){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>o.start-o.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:i,sn:o,part:l}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const u=t[i],c=u.details,d=l>-1?yA(c,o,l):null,m=d?d.fragment:JP(c,o,r);return m?(r&&r!==m&&(m.stats=r.stats),{frag:m,part:d,level:u}):null}bufferFragmentData(e,t,r,i,o){if(this.state!==Bt.PARSING)return;const{data1:l,data2:u}=e;let c=l;if(u&&(c=wa(l,u)),!c.length)return;const d=this.initPTS[t.cc],m=d?-d.baseTime/d.timescale:void 0,f={type:e.type,frag:t,part:r,chunkMeta:i,offset:m,parent:t.type,data:c};if(this.hls.trigger(pe.BUFFER_APPENDING,f),e.dropped&&e.independent&&!r){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!qn.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const r=t.currentTime,i=qn.bufferInfo(t,r,0),o=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),u=Math.max(Math.min(e.start-l,i.end-l),r+l);e.start-u>l&&this.flushMainBuffer(u,e.start)}getFwdBufferInfo(e,t){var r;const i=this.getLoadPosition();if(!gn(i))return null;const l=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,l)}getFwdBufferInfoAtPos(e,t,r,i){const o=qn.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,r);if(l&&(o.nextStart<=l.end||l.gap)){const u=Math.max(Math.min(o.nextStart,l.end)-t,i);return qn.bufferInfo(e,t,u)}}return o}getMaxBufferLength(e){const{config:t}=this;let r;return e?r=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):r=t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),o=Math.max(e-t*3,r.maxMaxBufferLength/2,i);return o>=i?(r.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=Sn.MAIN){const r=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const r=t.fragments,i=r.length;if(!i)return null;const{config:o}=this,l=r[0].start,u=o.lowLatencyMode&&!!t.partList;let c=null;if(t.live){const f=o.initialLiveManifestSize;if(i<f)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${f})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l){var d;u&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(t);const h=this.hls.startPosition,g=this.hls.liveSyncPosition,p=c?(h!==-1&&h>=l?h:g)||c.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${g} frag.start: ${(d=c)==null?void 0:d.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=l&&(c=r[0]);if(!c){const f=this.loadingParts?t.partEnd:t.fragmentEnd;c=this.getFragmentAtPosition(e,f,t)}let m=this.filterReplacedPrimary(c,t);if(!m&&c){const f=c.sn-t.startSN;m=this.filterReplacedPrimary(r[f+1]||null,t)}return this.mapToInitFragWhenRequired(m)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===Xr.OK||r===Xr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,i,o){let l=null;if(e.gap&&(l=this.getNextFragment(this.nextLoadPosition,t),l&&!l.gap&&r.nextStart)){const u=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(u!==null&&r.len+u.len>=o){const c=l.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if(bA(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(bA(this.config)&&e.type!==Sn.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const l=i.event;if(l){if(l.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(t==null?void 0:t.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const o=r==null?void 0:r.playerQueue;if(o)for(let l=o.length;l--;){const u=o[l].interstitial;if(u.appendInPlace&&e.start>=u.startTime&&e.end<=u.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,r){let i=-1,o=!1,l=!0;for(let u=0,c=e.length;u<c;u++){const d=e[u];if(l=l&&!d.independent,i>-1&&r<d.start)break;const m=d.loaded;m?i=-1:(o||(d.independent||l)&&d.fragment===t)&&(d.fragment!==t&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${d.start}`),i=u),o=m}return i}loadedEndOfParts(e,t){let r;for(let i=e.length;i--;){if(r=e[i],!r.loaded)return!1;if(t>r.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=YK(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=r.sn+1;if(o>=e.startSN&&o<=e.endSN){const l=t[o-e.startSN];r.cc===l.cc&&(i=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=UP(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){const{config:i}=this;let{fragPrevious:o}=this,{fragments:l,endSN:u}=r;const{fragmentHint:c}=r,{maxFragLookUpTolerance:d}=i,m=r.partList,f=!!(this.loadingParts&&m!=null&&m.length&&c);f&&!this.bitrateTest&&m[m.length-1].fragment.sn===c.sn&&(l=l.concat(c),u=c.sn);let h;if(e<t){var g;const E=e<this.lastCurrentTime||e>t-d||(g=this.media)!=null&&g.paused||!this.startFragRequested?0:d;h=Wl(o,l,e,E)}else h=l[l.length-1];if(h){const p=h.sn-r.startSN,E=this.fragmentTracker.getState(h);if((E===Xr.OK||E===Xr.PARTIAL&&h.gap)&&(o=h),o&&h.sn===o.sn&&(!f||m[0].fragment.sn>h.sn||!r.live)&&h.level===o.level){const x=l[p+1];h.sn<u&&this.fragmentTracker.getState(x)!==Xr.OK?h=x:h=null}}return h}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragmentStart,l=!t,u=e.alignedSliding&&gn(o);if(l||!u&&!o){NY(r,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),c}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const i=this.timelineOffset;if(r===-1){const o=this.startTimeOffset!==null,l=o?this.startTimeOffset:e.startTimeOffset;l!==null&&gn(l)?(r=t+l,l<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${l} found in ${o?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:t}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&qr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Bt.FRAG_LOADING_WAITING_RETRY)&&(this.state=Bt.IDLE)}onFragmentOrKeyLoadError(e,t){var r;if(t.chunkMeta&&!t.frag){const x=this.getCurrentContext(t.chunkMeta);x&&(t.frag=x.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var o;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(o=this.fragCurrent)==null?void 0:o.url}`);return}const l=t.details===pt.FRAG_GAP;l&&this.fragmentTracker.fragBuffered(i,!0);const u=t.errorAction;if(!u){this.state=Bt.ERROR;return}const{action:c,flags:d,retryCount:m=0,retryConfig:f}=u,h=!!f,g=h&&c===oi.RetryRequest,p=h&&!u.resolved&&d===Wi.MoveAllAlternatesMatchingHost,E=(r=this.hls.latestLevelDetails)==null?void 0:r.live;if(!g&&p&&qr(i)&&!i.endList&&E&&!BP(t))this.resetFragmentErrors(e),this.treatAsGap(i),u.resolved=!0;else if((g||p)&&m<f.maxNumRetry){var S;const x=ZE((S=t.response)==null?void 0:S.code),_=hT(f,m);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+_,this.state=Bt.FRAG_LOADING_WAITING_RETRY,u.resolved=!0,x){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${m+1}/${f.maxNumRetry} in ${_}ms`)}else if(f)if(this.resetFragmentErrors(e),m<f.maxNumRetry)!l&&c!==oi.RemoveAlternatePermanently&&(u.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${m})`);return}else c===oi.SendAlternateToPenaltyBox?this.state=Bt.WAITING_LEVEL:this.state=Bt.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,r=t===1/0;(!t||e>=t||r&&!ZE(0))&&(r&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Bt.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Bt.PARSING||this.state===Bt.PARSED){const t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const l=!o;return l&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===Sn.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Bt.STOPPED&&(this.state=Bt.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;const i=qn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===Bt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Bt.STOPPED&&(this.state=Bt.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,i){const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,d)=>{const m=e.elementaryStreams[d];if(m){const f=m.endPTS-m.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${f})`),c||!1;const h=i?0:QP(o,e,m.startPTS,m.endPTS,m.startDTS,m.endDTS,this);return this.hls.trigger(pe.LEVEL_PTS_UPDATED,{details:o,level:r,drift:h,type:d,frag:e,start:m.startPTS,end:m.endPTS}),!0}return c},!1)){var u;const c=((u=this.transmuxer)==null?void 0:u.error)===null;if((r.fragmentError===0||c&&(r.fragmentError<2||e.endList))&&this.treatAsGap(e,r),c){const d=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(d.message),this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_PARSING_ERROR,fatal:!1,error:d,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Bt.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(pe.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Sn.MAIN?"level":"track"}fragInfo(e,t=!0,r){var i,o;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=t&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((o=t&&!r?e.endPTS:(r||e).end)!=null?o:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function bA(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class iM{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;if(e.length)e.length===1?r=e[0]:r=LY(e,t);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function LY(n,e){const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;i++){const o=n[i];t.set(o,r),r+=o.length}return t}var Hy={exports:{}},TA;function PY(){return TA||(TA=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,d,m){this.fn=c,this.context=d,this.once=m||!1}function o(c,d,m,f,h){if(typeof m!="function")throw new TypeError("The listener must be a function");var g=new i(m,f||c,h),p=t?t+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],g]:c._events[p].push(g):(c._events[p]=g,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],m,f;if(this._eventsCount===0)return d;for(f in m=this._events)e.call(m,f)&&d.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},u.prototype.listeners=function(d){var m=t?t+d:d,f=this._events[m];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,p=new Array(g);h<g;h++)p[h]=f[h].fn;return p},u.prototype.listenerCount=function(d){var m=t?t+d:d,f=this._events[m];return f?f.fn?1:f.length:0},u.prototype.emit=function(d,m,f,h,g,p){var E=t?t+d:d;if(!this._events[E])return!1;var S=this._events[E],x=arguments.length,_,A;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),x){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,f),!0;case 4:return S.fn.call(S.context,m,f,h),!0;case 5:return S.fn.call(S.context,m,f,h,g),!0;case 6:return S.fn.call(S.context,m,f,h,g,p),!0}for(A=1,_=new Array(x-1);A<x;A++)_[A-1]=arguments[A];S.fn.apply(S.context,_)}else{var z=S.length,ie;for(A=0;A<z;A++)switch(S[A].once&&this.removeListener(d,S[A].fn,void 0,!0),x){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,m);break;case 3:S[A].fn.call(S[A].context,m,f);break;case 4:S[A].fn.call(S[A].context,m,f,h);break;default:if(!_)for(ie=1,_=new Array(x-1);ie<x;ie++)_[ie-1]=arguments[ie];S[A].fn.apply(S[A].context,_)}}return!0},u.prototype.on=function(d,m,f){return o(this,d,m,f,!1)},u.prototype.once=function(d,m,f){return o(this,d,m,f,!0)},u.prototype.removeListener=function(d,m,f,h){var g=t?t+d:d;if(!this._events[g])return this;if(!m)return l(this,g),this;var p=this._events[g];if(p.fn)p.fn===m&&(!h||p.once)&&(!f||p.context===f)&&l(this,g);else{for(var E=0,S=[],x=p.length;E<x;E++)(p[E].fn!==m||h&&!p[E].once||f&&p[E].context!==f)&&S.push(p[E]);S.length?this._events[g]=S.length===1?S[0]:S:l(this,g)}return this},u.prototype.removeAllListeners=function(d){var m;return d?(m=t?t+d:d,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u}(Hy)),Hy.exports}var MY=PY(),ET=sK(MY);const of="1.6.15",Tc={};function OY(){return typeof __HLS_WORKER_BUNDLE__=="function"}function FY(){const n=Tc[of];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Tc[of]=i,i}function zY(n){const e=Tc[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Tc[n]=i,i}function UY(n){const e=Tc[n||of];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete Tc[n||of],i&&self.URL.revokeObjectURL(i),r.terminate()}}function aM(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function bT(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function cp(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function lf(n,e){const t=e;let r=0;for(;bT(n,e);){r+=10;const i=cp(n,e+6);r+=i,aM(n,e+10)&&(r+=10),e+=r}if(r>0)return n.subarray(t,t+r)}function jY(n,e,t,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=e[t+2],l=o>>2&15;if(l>12){const g=new Error(`invalid ADTS sampling index:${l}`);n.emit(pe.ERROR,pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}const u=(o>>6&3)+1,c=e[t+3]>>6&3|(o&1)<<2,d="mp4a.40."+u,m=i[l];let f=l;(u===5||u===29)&&(f-=3);const h=[u<<3|(f&14)>>1,(f&1)<<7|c<<3];return pr.log(`manifest codec:${r}, parsed codec:${d}, channels:${c}, rate:${m} (ADTS object type:${u} sampling index:${l})`),{config:h,samplerate:m,channelCount:c,codec:d,parsedCodec:d,manifestCodec:r}}function sM(n,e){return n[e]===255&&(n[e+1]&246)===240}function oM(n,e){return n[e+1]&1?7:9}function TT(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function BY(n,e){return e+5<n.length}function mg(n,e){return e+1<n.length&&sM(n,e)}function $Y(n,e){return BY(n,e)&&sM(n,e)&&TT(n,e)<=n.length-e}function qY(n,e){if(mg(n,e)){const t=oM(n,e);if(e+t>=n.length)return!1;const r=TT(n,e);if(r<=t)return!1;const i=e+r;return i===n.length||mg(n,i)}return!1}function lM(n,e,t,r,i){if(!n.samplerate){const o=jY(e,t,r,i);if(!o)return;br(n,o)}}function uM(n){return 1024*9e4/n}function GY(n,e){const t=oM(n,e);if(e+t<=n.length){const r=TT(n,e)-t;if(r>0)return{headerLength:t,frameLength:r}}}function cM(n,e,t,r,i){const o=uM(n.samplerate),l=r+i*o,u=GY(e,t);let c;if(u){const{frameLength:f,headerLength:h}=u,g=h+f,p=Math.max(0,t+g-e.length);p?(c=new Uint8Array(g-h),c.set(e.subarray(t+h,e.length),0)):c=e.subarray(t+h,t+g);const E={unit:c,pts:l};return p||n.samples.push(E),{sample:E,length:g,missing:p}}const d=e.length-t;return c=new Uint8Array(d),c.set(e.subarray(t,e.length),0),{sample:{unit:c,pts:l},length:d,missing:-1}}function HY(n,e){return bT(n,e)&&cp(n,e+6)+10<=n.length-e}function VY(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function Vy(n,e=0,t=1/0){return KY(n,e,t,Uint8Array)}function KY(n,e,t,r){const i=YY(n);let o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);const l=WY(n)?n.byteOffset:0,u=(l+n.byteLength)/o,c=(l+e)/o,d=Math.floor(Math.max(0,Math.min(c,u))),m=Math.floor(Math.min(d+Math.max(t,0),u));return new r(i,d,m-d)}function YY(n){return n instanceof ArrayBuffer?n:n.buffer}function WY(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function QY(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const r=n.data.subarray(1).indexOf(0);if(r===-1)return;const i=ia(Vy(n.data,1,r)),o=n.data[2+r],l=n.data.subarray(3+r).indexOf(0);if(l===-1)return;const u=ia(Vy(n.data,3+r,l));let c;return i==="-->"?c=ia(Vy(n.data,4+r+l)):c=VY(n.data.subarray(4+r+l)),e.mimeType=i,e.pictureType=o,e.description=u,e.data=c,e}function XY(n){if(n.size<2)return;const e=ia(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function ZY(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const r=ia(n.data.subarray(t),!0);t+=r.length+1;const i=ia(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=ia(n.data.subarray(1));return{key:n.type,info:"",data:e}}function JY(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const r=ia(n.data.subarray(t),!0);t+=r.length+1;const i=ia(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=ia(n.data);return{key:n.type,info:"",data:e}}function e9(n){return n.type==="PRIV"?XY(n):n.type[0]==="W"?JY(n):n.type==="APIC"?QY(n):ZY(n)}function t9(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=cp(n,4),r=10;return{type:e,size:t,data:n.subarray(r,r+t)}}const Mh=10,n9=10;function dM(n){let e=0;const t=[];for(;bT(n,e);){const r=cp(n,e+6);n[e+5]>>6&1&&(e+=Mh),e+=Mh;const i=e+r;for(;e+n9<i;){const o=t9(n.subarray(e)),l=e9(o);l&&t.push(l),e+=o.size+Mh}aM(n,e)&&(e+=Mh)}return t}function fM(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function r9(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,t&&(r+=4772185884e-2),Math.round(r)}}function ST(n){const e=dM(n);for(let t=0;t<e.length;t++){const r=e[t];if(fM(r))return r9(r)}}let ea=function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n}({});function ms(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class xT{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=wa(this.cachedData,e),this.cachedData=null);let r=lf(e,0),i=r?r.length:0,o;const l=this._audioTrack,u=this._id3Track,c=r?ST(r):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&gn(c))&&(this.basePTS=i9(c,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ea.audioId3,duration:Number.POSITIVE_INFINITY});i<d;){if(this.canParse(e,i)){const m=this.appendFrame(l,e,i);m?(this.frameIndex++,this.lastPTS=m.sample.pts,i+=m.length,o=i):i=d}else HY(e,i)?(r=lf(e,i),u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ea.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,o=i):i++;if(i===d&&o!==d){const m=e.slice(o);this.cachedData?this.cachedData=wa(this.cachedData,m):this.cachedData=m}}return{audioTrack:l,videoTrack:ms(),id3Track:u,textTrack:ms()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ms(),id3Track:this._id3Track,textTrack:ms()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const i9=(n,e,t)=>{if(gn(n))return n*90;const r=t?t.baseTime*9e4/t.timescale:0;return e*9e4+r};let Oh=null;const a9=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s9=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],l9=[0,1,1,4];function hM(n,e,t,r,i){if(t+24>e.length)return;const o=mM(e,t);if(o&&t+o.frameLength<=e.length){const l=o.samplesPerFrame*9e4/o.sampleRate,u=r+i*l,c={unit:e.subarray(t,t+o.frameLength),pts:u,dts:u};return n.config=[],n.channelCount=o.channelCount,n.samplerate=o.sampleRate,n.samples.push(c),{sample:c,length:o.frameLength,missing:0}}}function mM(n,e){const t=n[e+1]>>3&3,r=n[e+1]>>1&3,i=n[e+2]>>4&15,o=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const l=n[e+2]>>1&1,u=n[e+3]>>6,c=t===3?3-r:r===3?3:4,d=a9[c*14+i-1]*1e3,f=s9[(t===3?0:t===2?1:2)*3+o],h=u===3?1:2,g=o9[t][r],p=l9[r],E=g*8*p,S=Math.floor(g*d/f+l)*p;if(Oh===null){const A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Oh=A?parseInt(A[1]):0}return!!Oh&&Oh<=87&&r===2&&d>=224e3&&u===0&&(n[e+3]=n[e+3]|128),{sampleRate:f,channelCount:h,frameLength:S,samplesPerFrame:E}}}function wT(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function gM(n,e){return e+1<n.length&&wT(n,e)}function u9(n,e){return wT(n,e)&&4<=n.length-e}function pM(n,e){if(e+1<n.length&&wT(n,e)){const r=mM(n,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const o=e+i;return o===n.length||gM(n,o)}return!1}class c9 extends xT{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=lf(e,0);let i=(r==null?void 0:r.length)||0;if(pM(e,i))return!1;for(let o=e.length;i<o;i++)if(qY(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return $Y(e,t)}appendFrame(e,t,r){lM(e,this.observer,t,r,e.manifestCodec);const i=cM(e,t,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const yM=(n,e)=>{let t=0,r=5;e+=r;const i=new Uint32Array(1),o=new Uint32Array(1),l=new Uint8Array(1);for(;r>0;){l[0]=n[e];const u=Math.min(r,8),c=8-u;o[0]=4278190080>>>24+c<<c,i[0]=(l[0]&o[0])>>c,t=t?t<<u|i[0]:i[0],e+=1,r-=u}return t};class d9 extends xT{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const i=vM(e,t,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=lf(e,0);if(!t)return!1;const r=t.length;return e[r]===11&&e[r+1]===119&&ST(t)!==void 0&&yM(e,r)<16}}function vM(n,e,t,r,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const u=[48e3,44100,32e3][o],c=e[t+4]&63,m=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+o]*2;if(t+m>e.length)return-1;const f=e[t+6]>>5;let h=0;f===2?h+=2:(f&1&&f!==1&&(h+=2),f&4&&(h+=2));const g=(e[t+6]<<8|e[t+7])>>12-h&1,E=[2,1,2,3,3,4,4,5][f]+g,S=e[t+5]>>3,x=e[t+5]&7,_=new Uint8Array([o<<6|S<<1|x>>2,(x&3)<<6|f<<3|g<<2|c>>4,c<<4&224]),A=1536/u*9e4,z=r+i*A,ie=e.subarray(t,t+m);return n.config=_,n.channelCount=E,n.samplerate=u,n.samples.push({unit:ie,pts:z}),m}class f9 extends xT{resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=lf(e,0);let r=(t==null?void 0:t.length)||0;if(t&&e[r]===11&&e[r+1]===119&&ST(t)!==void 0&&yM(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(pM(e,r))return pr.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return u9(e,t)}appendFrame(e,t,r){if(this.basePTS!==null)return hM(e,t,r,this.basePTS,this.frameIndex)}}const h9=/\/emsg[-/]ID3/i;class m9{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,i){const o=this.videoTrack=ms("video",1),l=this.audioTrack=ms("audio",1),u=this.txtTrack=ms("text",1);if(this.id3Track=ms("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=RP(e);if(c.video){const{id:d,timescale:m,codec:f,supplemental:h}=c.video;o.id=d,o.timescale=u.timescale=m,o.codec=f,o.supplemental=h}if(c.audio){const{id:d,timescale:m,codec:f}=c.audio;l.id=d,l.timescale=m,l.codec=f}u.id=_P.text,o.sampleDuration=0,o.duration=l.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return dK(e)}demux(e,t){this.timeOffset=t;let r=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=wa(this.remainderData,e));const u=vK(r);this.remainderData=u.remainder,i.samples=u.valid||new Uint8Array}else i.samples=r;const l=this.extractID3Track(i,t);return o.samples=UI(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return r.samples=UI(e,t),{videoTrack:t,audioTrack:ms(),id3Track:i,textTrack:ms()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const i=Qn(e.samples,["emsg"]);i&&i.forEach(o=>{const l=bK(o);if(h9.test(l.schemeIdUri)){const u=SA(l,t);let c=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const d=l.payload;r.samples.push({data:d,len:d.byteLength,dts:u,pts:u,type:ea.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const u=SA(l,t);r.samples.push({data:l.payload,len:l.payload.byteLength,dts:u,pts:u,type:ea.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function SA(n,e){return gn(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class g9{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new mT(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Jo.cbc)}decryptAacSample(e,t,r){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),l=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(l).then(u=>{const c=new Uint8Array(u);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)}).catch(r)}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)r.set(e.subarray(o,o+16),i);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(r.subarray(i,i+16),o);return e}decryptAvcSample(e,t,r,i,o){const l=NP(o.data),u=this.getAvcEncryptedData(l);this.decryptBuffer(u.buffer).then(c=>{o.data=this.getAvcDecryptedUnit(l,c),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,i)}).catch(i)}decryptAvcSamples(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(r>=o.length);r++){const l=o[r];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,r,i,l),!this.decrypter.isSync()))return}}}}class EM{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(t=r)!=null&&t.units){const o=r.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const r=t.samples,i=r.length;if(i){const o=r[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,r){const i=t.byteLength;let o=e.naluState||0;const l=o,u=[];let c=0,d,m,f,h=-1,g=0;for(o===-1&&(h=0,g=this.getNALuType(t,0),o=0,c=1);c<i;){if(d=t[c++],!o){o=d?0:1;continue}if(o===1){o=d?0:2;continue}if(!d)o=3;else if(d===1){if(m=c-o-1,h>=0){const p={data:t.subarray(h,m),type:g};u.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(l&&c<=4-l&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-l)),m>0&&(p.data=wa(p.data,t.subarray(0,m)),p.state=0))}c<i?(f=this.getNALuType(t,c),h=c,g=f,o=0):o=-1}else o=0}if(h>=0&&o>=0){const p={data:t.subarray(h,i),type:g,state:o};u.push(p)}if(u.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=wa(p.data,t))}return e.naluState=o,u}}class Id{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(r,r+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&pr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class p9 extends EM{parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let l=this.VideoSample,u,c=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(d=>{var m,f;switch(d.type){case 1:{let E=!1;u=!0;const S=d.data;if(c&&S.length>4){const x=this.readSliceType(S);(x===2||x===4||x===7||x===9)&&(E=!0)}if(E){var h;(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.frame=!0,l.key=E;break}case 5:u=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 6:{u=!0,cT(d.data,1,r.pts,t.samples);break}case 7:{var g,p;u=!0,c=!0;const E=d.data,S=this.readSPS(E);if(!e.sps||e.width!==S.width||e.height!==S.height||((g=e.pixelRatio)==null?void 0:g[0])!==S.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==S.pixelRatio[1]){e.width=S.width,e.height=S.height,e.pixelRatio=S.pixelRatio,e.sps=[E];const x=E.subarray(1,4);let _="avc1.";for(let A=0;A<3;A++){let z=x[A].toString(16);z.length<2&&(z="0"+z),_+=z}e.codec=_}break}case 8:u=!0,e.pps=[d.data];break;case 9:u=!0,e.audFound=!0,(f=l)!=null&&f.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:u=!0;break;default:u=!1;break}l&&u&&l.units.push(d)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Id(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r=8,i=8,o;for(let l=0;l<e;l++)i!==0&&(o=t.readEG(),i=(r+o+256)%256),r=i===0?r:i}readSPS(e){const t=new Id(e);let r=0,i=0,o=0,l=0,u,c,d;const m=t.readUByte.bind(t),f=t.readBits.bind(t),h=t.readUEG.bind(t),g=t.readBoolean.bind(t),p=t.skipBits.bind(t),E=t.skipEG.bind(t),S=t.skipUEG.bind(t),x=this.skipScalingList.bind(this);m();const _=m();if(f(5),p(3),m(),S(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const U=h();if(U===3&&p(1),S(),S(),p(1),g())for(c=U!==3?8:12,d=0;d<c;d++)g()&&(d<6?x(16,t):x(64,t))}S();const A=h();if(A===0)h();else if(A===1)for(p(1),E(),E(),u=h(),d=0;d<u;d++)E();S(),p(1);const z=h(),ie=h(),he=f(1);he===0&&p(1),p(1),g()&&(r=h(),i=h(),o=h(),l=h());let P=[1,1];if(g()&&g())switch(m()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:{P=[m()<<8|m(),m()<<8|m()];break}}return{width:Math.ceil((z+1)*16-r*2-i*2),height:(2-he)*(ie+1)*16-(he?2:4)*(o+l),pixelRatio:P}}}class y9 extends EM{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let l=this.VideoSample,u,c=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(d=>{var m,f;switch(d.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),l.frame=!0,u=!0;break;case 16:case 17:case 18:case 21:if(u=!0,c){var h;(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:u=!0,(m=l)!=null&&m.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 39:u=!0,cT(d.data,2,r.pts,t.samples);break;case 32:u=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=br(e.params,this.readVPS(d.data)),this.initVPS=d.data),e.vps=[d.data];break;case 33:if(u=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],d.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const g=this.readSPS(d.data);e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.codec=g.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in g.params)e.params[p]=g.params[p]}this.pushParameterSet(e.sps,d.data,e.vps),l||(l=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),l.key=!0;break;case 34:if(u=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const g=this.readPPS(d.data);for(const p in g)e.params[p]=g[p]}this.pushParameterSet(e.pps,d.data,e.vps)}break;case 35:u=!0,e.audFound=!0,(f=l)!=null&&f.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:u=!1;break}l&&u&&l.units.push(d)}),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[r]=e[i],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Id(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const r=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const t=new Id(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const i=t.readBits(2),o=t.readBoolean(),l=t.readBits(5),u=t.readUByte(),c=t.readUByte(),d=t.readUByte(),m=t.readUByte(),f=t.readUByte(),h=t.readUByte(),g=t.readUByte(),p=t.readUByte(),E=t.readUByte(),S=t.readUByte(),x=t.readUByte(),_=[],A=[];for(let qe=0;qe<r;qe++)_.push(t.readBoolean()),A.push(t.readBoolean());if(r>0)for(let qe=r;qe<8;qe++)t.readBits(2);for(let qe=0;qe<r;qe++)_[qe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),A[qe]&&t.readUByte();t.readUEG();const z=t.readUEG();z==3&&t.skipBits(1);const ie=t.readUEG(),he=t.readUEG(),P=t.readBoolean();let U=0,ce=0,de=0,_e=0;P&&(U+=t.readUEG(),ce+=t.readUEG(),de+=t.readUEG(),_e+=t.readUEG());const je=t.readUEG(),Se=t.readUEG(),ze=t.readUEG(),Le=t.readBoolean();for(let qe=Le?0:r;qe<=r;qe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Xe=0;Xe<4;Xe++)for(let $e=0;$e<(Xe===3?2:6);$e++)if(!t.readBoolean())t.readUEG();else{const Ve=Math.min(64,1<<4+(Xe<<1));Xe>1&&t.readEG();for(let Ze=0;Ze<Ve;Ze++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const Ue=t.readUEG();let Me=0;for(let qe=0;qe<Ue;qe++){let Xe=!1;if(qe!==0&&(Xe=t.readBoolean()),Xe){qe===Ue&&t.readUEG(),t.readBoolean(),t.readUEG();let $e=0;for(let et=0;et<=Me;et++){const Ve=t.readBoolean();let Ze=!1;Ve||(Ze=t.readBoolean()),(Ve||Ze)&&$e++}Me=$e}else{const $e=t.readUEG(),et=t.readUEG();Me=$e+et;for(let Ve=0;Ve<$e;Ve++)t.readUEG(),t.readBoolean();for(let Ve=0;Ve<et;Ve++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const qe=t.readUEG();for(let Xe=0;Xe<qe;Xe++){for(let $e=0;$e<ze+4;$e++)t.readBits(1);t.readBits(1)}}let Ke=0,nt=1,bt=1,Rt=!0,Pe=1,Ne=0;t.readBoolean(),t.readBoolean();let Qe=!1;if(t.readBoolean()){if(t.readBoolean()){const ct=t.readUByte(),Ht=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Pt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ct>0&&ct<16?(nt=Ht[ct-1],bt=Pt[ct-1]):ct===255&&(nt=t.readBits(16),bt=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),Qe=t.readBoolean(),Qe&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(Pe=t.readBits(32),Ne=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Pt=t.readBoolean(),Kt=t.readBoolean();let It=!1;(Pt||Kt)&&(It=t.readBoolean(),It&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),It&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let yn=0;yn<=r;yn++){Rt=t.readBoolean();const Vn=Rt||t.readBoolean();let ar=!1;Vn?t.readEG():ar=t.readBoolean();const xr=ar?1:t.readUEG()+1;if(Pt)for(let Or=0;Or<xr;Or++)t.readUEG(),t.readUEG(),It&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(Kt)for(let Or=0;Or<xr;Or++)t.readUEG(),t.readUEG(),It&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),Ke=t.readUEG())}let W=ie,C=he;if(P){let qe=1,Xe=1;z===1?qe=Xe=2:z==2&&(qe=2),W=ie-qe*ce-qe*U,C=he-Xe*_e-Xe*de}const O=i?["A","B","C"][i]:"",le=u<<24|c<<16|d<<8|m;let te=0;for(let qe=0;qe<32;qe++)te=(te|(le>>qe&1)<<31-qe)>>>0;let Be=te.toString(16);return l===1&&Be==="2"&&(Be="6"),{codecString:`hvc1.${O}${l}.${Be}.${o?"H":"L"}${x}.B0`,params:{general_tier_flag:o,general_profile_idc:l,general_profile_space:i,general_profile_compatibility_flags:[u,c,d,m],general_constraint_indicator_flags:[f,h,g,p,E,S],general_level_idc:x,bit_depth:je+8,bit_depth_luma_minus8:je,bit_depth_chroma_minus8:Se,min_spatial_segmentation_idc:Ke,chroma_format_idc:z,frame_rate:{fixed:Rt,fps:Ne/Pe}},width:W,height:C,pixelRatio:[nt,bt]}}readPPS(e){const t=new Id(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),o=t.readBoolean();let l=1;return o&&i?l=0:o?l=3:i&&(l=2),{parallelismType:l}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const ei=188;class So{constructor(e,t,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,t){const r=So.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const t=e.length;let r=Math.min(ei*5,t-ei)+1,i=0;for(;i<r;){let o=!1,l=-1,u=0;for(let c=i;c<t;c+=ei)if(e[c]===71&&(t-c===ei||e[c+ei]===71)){if(u++,l===-1&&(l=c,l!==0&&(r=Math.min(l+ei*99,e.length-ei)+1)),o||(o=rb(e,c)===0),o&&u>1&&(l===0&&u>2||c+ei>r))return l}else{if(u)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:_P[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=So.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=So.createTrack("audio",i),this._id3Track=So.createTrack("id3"),this._txtTrack=So.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,i=!1){r||(this.sampleAes=null);let o;const l=this._videoTrack,u=this._audioTrack,c=this._id3Track,d=this._txtTrack;let m=l.pid,f=l.pesData,h=u.pid,g=c.pid,p=u.pesData,E=c.pesData,S=null,x=this.pmtParsed,_=this._pmtId,A=e.length;if(this.remainderData&&(e=wa(this.remainderData,e),A=e.length,this.remainderData=null),A<ei&&!i)return this.remainderData=e,{audioTrack:u,videoTrack:l,id3Track:c,textTrack:d};const z=Math.max(0,So.syncOffset(e));A-=(A-z)%ei,A<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));let ie=0;for(let P=z;P<A;P+=ei)if(e[P]===71){const U=!!(e[P+1]&64),ce=rb(e,P),de=(e[P+3]&48)>>4;let _e;if(de>1){if(_e=P+5+e[P+4],_e===P+ei)continue}else _e=P+4;switch(ce){case m:U&&(f&&(o=Eu(f,this.logger))&&(this.readyVideoParser(l.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(l,d,o,!1)),f={data:[],size:0}),f&&(f.data.push(e.subarray(_e,P+ei)),f.size+=P+ei-_e);break;case h:if(U){if(p&&(o=Eu(p,this.logger)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,o);break;case"mp3":this.parseMPEGPES(u,o);break;case"ac3":this.parseAC3PES(u,o);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(_e,P+ei)),p.size+=P+ei-_e);break;case g:U&&(E&&(o=Eu(E,this.logger))&&this.parseID3PES(c,o),E={data:[],size:0}),E&&(E.data.push(e.subarray(_e,P+ei)),E.size+=P+ei-_e);break;case 0:U&&(_e+=e[_e]+1),_=this._pmtId=v9(e,_e);break;case _:{U&&(_e+=e[_e]+1);const je=E9(e,_e,this.typeSupported,r,this.observer,this.logger);m=je.videoPid,m>0&&(l.pid=m,l.segmentCodec=je.segmentVideoCodec),h=je.audioPid,h>0&&(u.pid=h,u.segmentCodec=je.segmentAudioCodec),g=je.id3Pid,g>0&&(c.pid=g),S!==null&&!x&&(this.logger.warn(`MPEG-TS PMT found at ${P} after unknown PID '${S}'. Backtracking to sync byte @${z} to parse all TS packets.`),S=null,P=z-188),x=this.pmtParsed=!0;break}case 17:case 8191:break;default:S=ce;break}}else ie++;ie>0&&ib(this.observer,new Error(`Found ${ie} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=f,u.pesData=p,c.pesData=E;const he={audioTrack:u,videoTrack:l,id3Track:c,textTrack:d};return i&&this.extractRemainingSamples(he),he}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:i,textTrack:o}=e,l=r.pesData,u=t.pesData,c=i.pesData;let d;if(l&&(d=Eu(l,this.logger))?(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(r,o,d,!0),r.pesData=null)):r.pesData=l,u&&(d=Eu(u,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else u!=null&&u.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=u;c&&(d=Eu(c,this.logger))?(this.parseID3PES(i,d),i.pesData=null):i.pesData=c}demuxSampleAes(e,t,r){const i=this.demux(e,r,!0,!this.config.progressive),o=this.sampleAes=new g9(this.observer,this.config,t);return this.decrypt(i,o)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new p9:e==="hevc"&&(this.videoParser=new y9))}decrypt(e,t){return new Promise(r=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{r(e)}):r(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const f=i.missing,h=i.sample.unit.byteLength;if(f===-1)o=wa(i.sample.unit,o);else{const g=h-f;i.sample.unit.set(o.subarray(0,f),g),e.samples.push(i.sample),r=i.missing}}let l,u;for(l=r,u=o.length;l<u-1&&!mg(o,l);l++);if(l!==r){let f;const h=l<u-1;if(h?f=`AAC PES did not start with ADTS header,offset:${l}`:f="No ADTS header found in AAC PES",ib(this.observer,new Error(f),h,this.logger),!h)return}lM(e,this.observer,o,l,this.audioCodec);let c;if(t.pts!==void 0)c=t.pts;else if(i){const f=uM(e.samplerate);c=i.sample.pts+f}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,m;for(;l<u;)if(m=cM(e,o,l,c,d),l+=m.length,m.missing){this.aacOverFlow=m;break}else for(d++;l<u-1&&!mg(o,l);l++);}parseMPEGPES(e,t){const r=t.data,i=r.length;let o=0,l=0;const u=t.pts;if(u===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<i;)if(gM(r,l)){const c=hM(e,r,l,u,o);if(c)l+=c.length,o++;else break}else l++}parseAC3PES(e,t){{const r=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=r.length;let l=0,u=0,c;for(;u<o&&(c=vM(e,r,u,i,l++))>0;)u+=c}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=br({},t,{type:this._videoTrack?ea.emsg:ea.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function rb(n,e){return((n[e+1]&31)<<8)+n[e+2]}function v9(n,e){return(n[e+10]&31)<<8|n[e+11]}function E9(n,e,t,r,i,o){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},u=(n[e+1]&15)<<8|n[e+2],c=e+3+u-4,d=(n[e+10]&15)<<8|n[e+11];for(e+=12+d;e<c;){const m=rb(n,e),f=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!r){Ky("ADTS AAC",o);break}case 15:l.audioPid===-1&&(l.audioPid=m);break;case 21:l.id3Pid===-1&&(l.id3Pid=m);break;case 219:if(!r){Ky("H.264",o);break}case 27:l.videoPid===-1&&(l.videoPid=m);break;case 3:case 4:!t.mpeg&&!t.mp3?o.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="mp3");break;case 193:if(!r){Ky("AC-3",o);break}case 129:t.ac3?l.audioPid===-1&&(l.audioPid=m,l.segmentAudioCodec="ac3"):o.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&f>0){let h=e+5,g=f;for(;g>2;){switch(n[h]){case 106:t.ac3!==!0?o.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=m,l.segmentAudioCodec="ac3");break}const E=n[h+1]+2;h+=E,g-=E}}break;case 194:case 135:return ib(i,new Error("Unsupported EC-3 in M2TS found"),void 0,o),l;case 36:l.videoPid===-1&&(l.videoPid=m,l.segmentVideoCodec="hevc",o.log("HEVC in M2TS found"));break}e+=f+5}return l}function ib(n,e,t,r){r.warn(`parsing error: ${e.message}`),n.emit(pe.ERROR,pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Ky(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function Eu(n,e){let t=0,r,i,o,l,u;const c=n.data;if(!n||n.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=wa(c[0],c[1]),c.splice(1,1);if(r=c[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>n.size-6)return null;const m=r[7];m&192&&(l=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,m&64?(u=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,l-u>60*9e4&&(e.warn(`${Math.round((l-u)/9e4)}s delta between PTS and DTS, align them`),l=u)):u=l),o=r[8];let f=o+9;if(n.size<=f)return null;n.size-=f;const h=new Uint8Array(n.size);for(let g=0,p=c.length;g<p;g++){r=c[g];let E=r.byteLength;if(f)if(f>E){f-=E;continue}else r=r.subarray(f),E-=f,f=0;h.set(r,t),t+=E}return i&&(i-=o+3),{data:h,pts:l,dts:u,len:i}}return null}class b9{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const go=Math.pow(2,32)-1;class ft{static init(){ft.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ft.types)ft.types.hasOwnProperty(e)&&(ft.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ft.HDLR_TYPES={video:t,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);ft.STTS=ft.STSC=ft.STCO=o,ft.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ft.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ft.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ft.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),u=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ft.FTYP=ft.box(ft.types.ftyp,l,c,l,u),ft.DINF=ft.box(ft.types.dinf,ft.box(ft.types.dref,i))}static box(e,...t){let r=8,i=t.length;const o=i;for(;i--;)r+=t[i].byteLength;const l=new Uint8Array(r);for(l[0]=r>>24&255,l[1]=r>>16&255,l[2]=r>>8&255,l[3]=r&255,l.set(e,4),i=0,r=8;i<o;i++)l.set(t[i],r),r+=t[i].byteLength;return l}static hdlr(e){return ft.box(ft.types.hdlr,ft.HDLR_TYPES[e])}static mdat(e){return ft.box(ft.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(go+1)),i=Math.floor(t%(go+1));return ft.box(ft.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return ft.box(ft.types.mdia,ft.mdhd(e.timescale||0,e.duration||0),ft.hdlr(e.type),ft.minf(e))}static mfhd(e){return ft.box(ft.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ft.box(ft.types.minf,ft.box(ft.types.smhd,ft.SMHD),ft.DINF,ft.stbl(e)):ft.box(ft.types.minf,ft.box(ft.types.vmhd,ft.VMHD),ft.DINF,ft.stbl(e))}static moof(e,t,r){return ft.box(ft.types.moof,ft.mfhd(e),ft.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=ft.trak(e[t]);return ft.box.apply(null,[ft.types.moov,ft.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ft.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=ft.trex(e[t]);return ft.box.apply(null,[ft.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(go+1)),i=Math.floor(t%(go+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ft.box(ft.types.mvhd,o)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,r[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return ft.box(ft.types.sdtp,r)}static stbl(e){return ft.box(ft.types.stbl,ft.stsd(e),ft.box(ft.types.stts,ft.STTS),ft.box(ft.types.stsc,ft.STSC),ft.box(ft.types.stsz,ft.STSZ),ft.box(ft.types.stco,ft.STCO))}static avc1(e){let t=[],r=[],i,o,l;for(i=0;i<e.sps.length;i++)o=e.sps[i],l=o.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],l=o.byteLength,r.push(l>>>8&255),r.push(l&255),r=r.concat(Array.prototype.slice.call(o));const u=ft.box(ft.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),c=e.width,d=e.height,m=e.pixelRatio[0],f=e.pixelRatio[1];return ft.box(ft.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,ft.box(ft.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ft.box(ft.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,m&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ft.box(ft.types.mp4a,ft.audioStsd(e),ft.box(ft.types.esds,ft.esds(e)))}static mp3(e){return ft.box(ft.types[".mp3"],ft.audioStsd(e))}static ac3(e){return ft.box(ft.types["ac-3"],ft.audioStsd(e),ft.box(ft.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return ft.box(ft.types.stsd,ft.STSD,ft.mp4a(e));if(t==="ac3"&&e.config)return ft.box(ft.types.stsd,ft.STSD,ft.ac3(e));if(t==="mp3"&&e.codec==="mp3")return ft.box(ft.types.stsd,ft.STSD,ft.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return ft.box(ft.types.stsd,ft.STSD,ft.avc1(e));if(t==="hevc"&&e.vps)return ft.box(ft.types.stsd,ft.STSD,ft.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,o=e.height||0,l=Math.floor(r/(go+1)),u=Math.floor(r%(go+1));return ft.box(ft.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,u>>24,u>>16&255,u>>8&255,u&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const r=ft.sdtp(e),i=e.id,o=Math.floor(t/(go+1)),l=Math.floor(t%(go+1));return ft.box(ft.types.traf,ft.box(ft.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),ft.box(ft.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255])),ft.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ft.box(ft.types.trak,ft.tkhd(e),ft.mdia(e))}static trex(e){const t=e.id;return ft.box(ft.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],i=r.length,o=12+16*i,l=new Uint8Array(o);let u,c,d,m,f,h;for(t+=8+o,l.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),u=0;u<i;u++)c=r[u],d=c.duration,m=c.size,f=c.flags,h=c.cts,l.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*u);return ft.box(ft.types.trun,l)}static initSegment(e){ft.types||ft.init();const t=ft.moov(e);return wa(ft.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],i=4,o=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let l=o.length;for(let p=0;p<r.length;p+=1){l+=3;for(let E=0;E<r[p].length;E+=1)l+=2+r[p][E].length}const u=new Uint8Array(l);u.set(o,0),l=o.length;const c=r.length-1;for(let p=0;p<r.length;p+=1){u.set(new Uint8Array([32+p|(p===c?128:0),0,r[p].length]),l),l+=3;for(let E=0;E<r[p].length;E+=1)u.set(new Uint8Array([r[p][E].length>>8,r[p][E].length&255]),l),l+=2,u.set(r[p][E],l),l+=r[p][E].length}const d=ft.box(ft.types.hvcC,u),m=e.width,f=e.height,h=e.pixelRatio[0],g=e.pixelRatio[1];return ft.box(ft.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,ft.box(ft.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ft.box(ft.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,g>>24,g>>16&255,g>>8&255,g&255])))}}ft.types=void 0;ft.HDLR_TYPES=void 0;ft.STTS=void 0;ft.STSC=void 0;ft.STCO=void 0;ft.STSZ=void 0;ft.VMHD=void 0;ft.SMHD=void 0;ft.STSD=void 0;ft.FTYP=void 0;ft.DINF=void 0;const bM=9e4;function _T(n,e,t=1,r=!1){const i=n*e*t;return r?Math.round(i):i}function T9(n,e,t=1,r=!1){return _T(n,e,1/t,r)}function id(n,e=!1){return _T(n,1e3,1/bM,e)}function S9(n,e=1){return _T(n,bM,1/e)}function xA(n){const{baseTime:e,timescale:t,trackId:r}=n;return`${e/t} (${e}/${t}) trackId: ${r}`}const x9=10*1e3,w9=1024,_9=1152,I9=1536;let bu=null,Yy=null;function wA(n,e,t,r){return{duration:e,size:t,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class gm extends Aa{constructor(e,t,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,bu===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bu=l?parseInt(l[1]):0}if(Yy===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);Yy=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&xA(t)} > ${e&&xA(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,i=e.reduce((o,l)=>{let u=l.pts,c=u-o;return c<-4294967296&&(t=!0,u=Qi(u,r),c=u-o),c>0?o:u},r);return t&&this.debug("PTS rollover detected"),i}remux(e,t,r,i,o,l,u,c){let d,m,f,h,g,p,E=o,S=o;const x=e.pid>-1,_=t.pid>-1,A=t.samples.length,z=e.samples.length>0,ie=u&&A>0||A>1;if((!x||z)&&(!_||ie)||this.ISGenerated||u){if(this.ISGenerated){var P,U,ce,de;const ze=this.videoTrackConfig;(ze&&(t.width!==ze.width||t.height!==ze.height||((P=t.pixelRatio)==null?void 0:P[0])!==((U=ze.pixelRatio)==null?void 0:U[0])||((ce=t.pixelRatio)==null?void 0:ce[1])!==((de=ze.pixelRatio)==null?void 0:de[1]))||!ze&&ie||this.nextAudioTs===null&&z)&&this.resetInitSegment()}this.ISGenerated||(f=this.generateIS(e,t,o,l));const _e=this.isVideoContiguous;let je=-1,Se;if(ie&&(je=A9(t.samples),!_e&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,je>0){this.warn(`Dropped ${je} out of ${A} video samples due to a missing keyframe`);const ze=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(je),t.dropped+=je,S+=(t.samples[0].pts-ze)/t.inputTimeScale,Se=S}else je===-1&&(this.warn(`No keyframe found out of ${A} video samples`),p=!1);if(this.ISGenerated){if(z&&ie){const ze=this.getVideoStartPts(t.samples),Re=(Qi(e.samples[0].pts,ze)-ze)/t.inputTimeScale;E+=Math.max(0,Re),S+=Math.max(0,-Re)}if(z){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),f=this.generateIS(e,t,o,l)),m=this.remuxAudio(e,E,this.isAudioContiguous,l,_||ie||c===Sn.AUDIO?S:void 0),ie){const ze=m?m.endPTS-m.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),f=this.generateIS(e,t,o,l)),d=this.remuxVideo(t,S,_e,ze)}}else ie&&(d=this.remuxVideo(t,S,_e,0));d&&(d.firstKeyFrame=je,d.independent=je!==-1,d.firstKeyFramePTS=Se)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(g=TM(r,o,this._initPTS,this._initDTS)),i.samples.length&&(h=SM(i,o,this._initPTS))),{audio:m,video:d,initSegment:f,independent:p,text:h,id3:g}}computeInitPts(e,t,r,i){const o=Math.round(r*t);let l=Qi(e,o);if(l<o+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(o-l)/t} ${i}`);l<o+t;)l+=8589934592;return l-o}generateIS(e,t,r,i){const o=e.samples,l=t.samples,u=this.typeSupported,c={},d=this._initPTS;let m=!d||i,f="audio/mp4",h,g,p,E=-1;if(m&&(h=g=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&u.mpeg?new Uint8Array(0):ft.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(E=e.id,p=e.inputTimeScale,!d||p!==d.timescale?h=g=this.computeInitPts(o[0].pts,p,r,"audio"):m=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ft.initSegment([t]),metadata:{width:t.width,height:t.height}},m)if(E=t.id,p=t.inputTimeScale,!d||p!==d.timescale){const S=this.getVideoStartPts(l),x=Qi(l[0].dts,S),_=this.computeInitPts(x,p,r,"video"),A=this.computeInitPts(S,p,r,"video");g=Math.min(g,_),h=Math.min(h,A)}else m=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,m?(d&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${r} ${h/p} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${h/p} (${h}/${p}) trackId: ${E}`),this._initPTS={baseTime:h,timescale:p,trackId:E},this._initDTS={baseTime:g,timescale:p,trackId:E}):h=p=void 0,{tracks:c,initPTS:h,timescale:p,trackId:E}}remuxVideo(e,t,r,i){const o=e.inputTimeScale,l=e.samples,u=[],c=l.length,d=this._initPTS,m=d.baseTime*o/d.timescale;let f=this.nextVideoTs,h=8,g=this.videoSampleDuration,p,E,S=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,_=!1;if(!r||f===null){const Ke=m+t*o,nt=l[0].pts-Qi(l[0].dts,l[0].pts);bu&&f!==null&&Math.abs(Ke-nt-(f+m))<15e3?r=!0:f=Ke-nt-m}const A=f+m;for(let Ke=0;Ke<c;Ke++){const nt=l[Ke];nt.pts=Qi(nt.pts,A),nt.dts=Qi(nt.dts,A),nt.dts<l[Ke>0?Ke-1:Ke].dts&&(_=!0)}_&&l.sort(function(Ke,nt){const bt=Ke.dts-nt.dts,Rt=Ke.pts-nt.pts;return bt||Rt}),p=l[0].dts,E=l[l.length-1].dts;const z=E-p,ie=z?Math.round(z/(c-1)):g||e.inputTimeScale/30;if(r){const Ke=p-A,nt=Ke>ie,bt=Ke<-1;if((nt||bt)&&(nt?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${id(Ke,!0)} ms (${Ke}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${id(-Ke,!0)} ms (${Ke}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!bt||A>=l[0].pts||bu)){p=A;const Rt=l[0].pts-Ke;if(nt)l[0].dts=p,l[0].pts=Rt;else{let Pe=!0;for(let Ne=0;Ne<l.length&&!(l[Ne].dts>Rt&&Pe);Ne++){const Qe=l[Ne].pts;if(l[Ne].dts-=Ke,l[Ne].pts-=Ke,Ne<l.length-1){const X=l[Ne+1].pts,W=l[Ne].pts,C=X<=W,O=X<=Qe;Pe=C==O}}}this.log(`Video: Initial PTS/DTS adjusted: ${id(Rt,!0)}/${id(p,!0)}, delta: ${id(Ke,!0)} ms`)}}p=Math.max(0,p);let he=0,P=0,U=p;for(let Ke=0;Ke<c;Ke++){const nt=l[Ke],bt=nt.units,Rt=bt.length;let Pe=0;for(let Ne=0;Ne<Rt;Ne++)Pe+=bt[Ne].data.length;P+=Pe,he+=Rt,nt.length=Pe,nt.dts<U?(nt.dts=U,U+=ie/4|0||1):U=nt.dts,S=Math.min(nt.pts,S),x=Math.max(nt.pts,x)}E=l[c-1].dts;const ce=P+4*he+8;let de;try{de=new Uint8Array(ce)}catch(Ke){this.observer.emit(pe.ERROR,pe.ERROR,{type:Nn.MUX_ERROR,details:pt.REMUX_ALLOC_ERROR,fatal:!1,error:Ke,bytes:ce,reason:`fail allocating video mdat ${ce}`});return}const _e=new DataView(de.buffer);_e.setUint32(0,ce),de.set(ft.types.mdat,4);let je=!1,Se=Number.POSITIVE_INFINITY,ze=Number.POSITIVE_INFINITY,Le=Number.NEGATIVE_INFINITY,Re=Number.NEGATIVE_INFINITY;for(let Ke=0;Ke<c;Ke++){const nt=l[Ke],bt=nt.units;let Rt=0;for(let Qe=0,X=bt.length;Qe<X;Qe++){const W=bt[Qe],C=W.data,O=W.data.byteLength;_e.setUint32(h,O),h+=4,de.set(C,h),h+=O,Rt+=4+O}let Pe;if(Ke<c-1)g=l[Ke+1].dts-nt.dts,Pe=l[Ke+1].pts-nt.pts;else{const Qe=this.config,X=Ke>0?nt.dts-l[Ke-1].dts:ie;if(Pe=Ke>0?nt.pts-l[Ke-1].pts:ie,Qe.stretchShortVideoTrack&&this.nextAudioTs!==null){const W=Math.floor(Qe.maxBufferHole*o),C=(i?S+i*o:this.nextAudioTs+m)-nt.pts;C>W?(g=C-X,g<0?g=X:je=!0,this.log(`It is approximately ${C/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=X}else g=X}const Ne=Math.round(nt.pts-nt.dts);Se=Math.min(Se,g),Le=Math.max(Le,g),ze=Math.min(ze,Pe),Re=Math.max(Re,Pe),u.push(wA(nt.key,g,Rt,Ne))}if(u.length){if(bu){if(bu<70){const Ke=u[0].flags;Ke.dependsOn=2,Ke.isNonSync=0}}else if(Yy&&Re-ze<Le-Se&&ie/Le<.025&&u[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Ke=p;for(let nt=0,bt=u.length;nt<bt;nt++){const Rt=Ke+u[nt].duration,Pe=Ke+u[nt].cts;if(nt<bt-1){const Ne=Rt+u[nt+1].cts;u[nt].duration=Ne-Pe}else u[nt].duration=nt?u[nt-1].duration:ie;u[nt].cts=0,Ke=Rt}}}g=je||!g?ie:g;const Ye=E+g;this.nextVideoTs=f=Ye-m,this.videoSampleDuration=g,this.isVideoContiguous=!0;const We={data1:ft.moof(e.sequenceNumber++,p,br(e,{samples:u})),data2:de,startPTS:(S-m)/o,endPTS:(x+g-m)/o,startDTS:(p-m)/o,endDTS:f/o,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,We}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return _9;case"ac3":return I9;default:return w9}}remuxAudio(e,t,r,i,o){const l=e.inputTimeScale,u=e.samplerate?e.samplerate:l,c=l/u,d=this.getSamplesPerFrame(e),m=d*c,f=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,g=[],p=o!==void 0;let E=e.samples,S=h?0:8,x=this.nextAudioTs||-1;const _=f.baseTime*l/f.timescale,A=_+t*l;if(this.isAudioContiguous=r=r||E.length&&x>0&&(i&&Math.abs(A-(x+_))<9e3||Math.abs(Qi(E[0].pts,A)-(x+_))<20*m),E.forEach(function(Re){Re.pts=Qi(Re.pts,A)}),!r||x<0){const Re=E.length;if(E=E.filter(Ye=>Ye.pts>=0),Re!==E.length&&this.warn(`Removed ${E.length-Re} of ${Re} samples (initPTS ${_} / ${l})`),!E.length)return;o===0?x=0:i&&!p?x=Math.max(0,A-_):x=E[0].pts-_}if(e.segmentCodec==="aac"){const Re=this.config.maxAudioFramesDrift;for(let Ye=0,Ue=x+_;Ye<E.length;Ye++){const Me=E[Ye],We=Me.pts,Ke=We-Ue,nt=Math.abs(1e3*Ke/l);if(Ke<=-Re*m&&p)Ye===0&&(this.warn(`Audio frame @ ${(We/l).toFixed(3)}s overlaps marker by ${Math.round(1e3*Ke/l)} ms.`),this.nextAudioTs=x=We-_,Ue=We);else if(Ke>=Re*m&&nt<x9&&p){let bt=Math.round(Ke/m);for(Ue=We-bt*m;Ue<0&&bt&&m;)bt--,Ue+=m;Ye===0&&(this.nextAudioTs=x=Ue-_),this.warn(`Injecting ${bt} audio frames @ ${((Ue-_)/l).toFixed(3)}s due to ${Math.round(1e3*Ke/l)} ms gap.`);for(let Rt=0;Rt<bt;Rt++){let Pe=b9.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Pe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Pe=Me.unit.subarray()),E.splice(Ye,0,{unit:Pe,pts:Ue}),Ue+=m,Ye++}}Me.pts=Ue,Ue+=m}}let z=null,ie=null,he,P=0,U=E.length;for(;U--;)P+=E[U].unit.byteLength;for(let Re=0,Ye=E.length;Re<Ye;Re++){const Ue=E[Re],Me=Ue.unit;let We=Ue.pts;if(ie!==null){const nt=g[Re-1];nt.duration=Math.round((We-ie)/c)}else if(r&&e.segmentCodec==="aac"&&(We=x+_),z=We,P>0){P+=S;try{he=new Uint8Array(P)}catch(nt){this.observer.emit(pe.ERROR,pe.ERROR,{type:Nn.MUX_ERROR,details:pt.REMUX_ALLOC_ERROR,fatal:!1,error:nt,bytes:P,reason:`fail allocating audio mdat ${P}`});return}h||(new DataView(he.buffer).setUint32(0,P),he.set(ft.types.mdat,4))}else return;he.set(Me,S);const Ke=Me.byteLength;S+=Ke,g.push(wA(!0,d,Ke,0)),ie=We}const ce=g.length;if(!ce)return;const de=g[g.length-1];x=ie-_,this.nextAudioTs=x+c*de.duration;const _e=h?new Uint8Array(0):ft.moof(e.sequenceNumber++,z/c,br({},e,{samples:g}));e.samples=[];const je=(z-_)/l,Se=this.nextAudioTs/l,Le={data1:_e,data2:he,startPTS:je,endPTS:Se,startDTS:je,endDTS:Se,type:"audio",hasAudio:!0,hasVideo:!1,nb:ce};return this.isAudioContiguous=!0,Le}}function Qi(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function A9(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function TM(n,e,t,r){const i=n.samples.length;if(!i)return;const o=n.inputTimeScale;for(let u=0;u<i;u++){const c=n.samples[u];c.pts=Qi(c.pts-t.baseTime*o/t.timescale,e*o)/o,c.dts=Qi(c.dts-r.baseTime*o/r.timescale,e*o)/o}const l=n.samples;return n.samples=[],{samples:l}}function SM(n,e,t){const r=n.samples.length;if(!r)return;const i=n.inputTimeScale;for(let l=0;l<r;l++){const u=n.samples[l];u.pts=Qi(u.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((l,u)=>l.pts-u.pts);const o=n.samples;return n.samples=[],{samples:o}}class R9 extends Aa{constructor(e,t,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:r,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:o,video:l}=this.initData=RP(e);if(t)gK(e,t);else{const c=o||l;c!=null&&c.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${c.codec}")!`)}o&&(r=_A(o,Tr.AUDIO,this)),l&&(i=_A(l,Tr.VIDEO,this));const u={};o&&l?u.audiovideo={container:"video/mp4",codec:r+","+i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:o?u.audio={container:"audio/mp4",codec:r,encrypted:o.encrypted,initSegment:e,id:"audio"}:l?u.video={container:"video/mp4",codec:i,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=u}remux(e,t,r,i,o,l){var u,c;let{initPTS:d,lastEndTime:m}=this;const f={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};gn(m)||(m=this.lastEndTime=o||0);const h=t.samples;if(!h.length)return f;const g={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((u=p)!=null&&u.length||(this.generateInitSegment(h),p=this.initData),!((c=p)!=null&&c.length))return this.warn("Failed to generate initSegment."),f;this.emitInitSegment&&(g.tracks=this.initTracks,this.emitInitSegment=!1);const E=yK(h,p,this),S=p.audio?E[p.audio.id]:null,x=p.video?E[p.video.id]:null,_=Fh(x,1/0),A=Fh(S,1/0),z=Fh(x,0,!0),ie=Fh(S,0,!0);let he=o,P=0;const U=S&&(!x||!d&&A<_||d&&d.trackId===p.audio.id),ce=U?S:x;if(ce){const Ue=ce.timescale,Me=ce.start-o*Ue,We=U?p.audio.id:p.video.id;he=ce.start/Ue,P=U?ie-A:z-_,(l||!d)&&(k9(d,he,o,P)||Ue!==d.timescale)&&(d&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${o} ${Me/Ue} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${he-o} (${Me}/${Ue}) trackId: ${We}`),d=null,g.initPTS=Me,g.timescale=Ue,g.trackId=We)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${o}`);d?(g.initPTS=d.baseTime,g.timescale=d.timescale,g.trackId=d.trackId):((!g.timescale||g.trackId===void 0||g.initPTS===void 0)&&(this.warn("Could not set initPTS"),g.initPTS=he,g.timescale=1,g.trackId=-1),this.initPTS=d={baseTime:g.initPTS,timescale:g.timescale,trackId:g.trackId});const de=he-d.baseTime/d.timescale,_e=de+P;P>0?this.lastEndTime=_e:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const je=!!p.audio,Se=!!p.video;let ze="";je&&(ze+="audio"),Se&&(ze+="video");const Le=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),Re={data1:h,startPTS:de,startDTS:de,endPTS:_e,endDTS:_e,type:ze,hasAudio:je,hasVideo:Se,nb:1,dropped:0,encrypted:Le};f.audio=je&&!Se?Re:void 0,f.video=Se?Re:void 0;const Ye=x==null?void 0:x.sampleCount;if(Ye){const Ue=x.keyFrameIndex,Me=Ue!==-1;Re.nb=Ye,Re.dropped=Ue===0||this.isVideoContiguous?0:Me?Ue:Ye,Re.independent=Me,Re.firstKeyFrame=Ue,Me&&x.keyFrameStart&&(Re.firstKeyFramePTS=(x.keyFrameStart-d.baseTime)/d.timescale),this.isVideoContiguous||(f.independent=Me),this.isVideoContiguous||(this.isVideoContiguous=Me),Re.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Ue}/${Ye} dropped: ${Re.dropped} start: ${Re.firstKeyFramePTS||"NA"}`)}return f.initSegment=g,f.id3=TM(r,o,d,d),i.samples.length&&(f.text=SM(i,o,d)),f}}function Fh(n,e,t=!1){return(n==null?void 0:n.start)!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function k9(n,e,t,r){if(n===null)return!0;const i=Math.max(r,1),o=e-n.baseTime/n.timescale;return Math.abs(o-t)>i}function _A(n,e,t){const r=n.codec;return r&&r.length>4?r:e===Tr.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?sg(r,!1):(t.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(t.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Bs;try{Bs=self.performance.now.bind(self.performance)}catch{Bs=Date.now}const pm=[{demux:m9,remux:R9},{demux:So,remux:gm},{demux:c9,remux:gm},{demux:f9,remux:gm}];pm.splice(2,0,{demux:d9,remux:gm});class IA{constructor(e,t,r,i,o,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=o,this.logger=l}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,i){const o=r.transmuxing;o.executeStart=Bs();let l=new Uint8Array(e);const{currentTransmuxState:u,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:d,discontinuity:m,trackSwitch:f,accurateTimeOffset:h,timeOffset:g,initSegmentChange:p}=i||u,{audioCodec:E,videoCodec:S,defaultInitPts:x,duration:_,initSegmentData:A}=c,z=C9(l,t);if(z&&Qu(z.method)){const U=this.getDecrypter(),ce=pT(z.method);if(U.isSync()){let de=U.softwareDecrypt(l,z.key.buffer,z.iv.buffer,ce);if(r.part>-1){const je=U.flush();de=je&&je.buffer}if(!de)return o.executeEnd=Bs(),Wy(r);l=new Uint8Array(de)}else return this.asyncResult=!0,this.decryptionPromise=U.webCryptoDecrypt(l,z.key.buffer,z.iv.buffer,ce).then(de=>{const _e=this.push(de,null,r);return this.decryptionPromise=null,_e}),this.decryptionPromise}const ie=this.needsProbing(m,f);if(ie){const U=this.configureTransmuxer(l);if(U)return this.logger.warn(`[transmuxer] ${U.message}`),this.observer.emit(pe.ERROR,pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_PARSING_ERROR,fatal:!1,error:U,reason:U.message}),o.executeEnd=Bs(),Wy(r)}(m||f||p||ie)&&this.resetInitSegment(A,E,S,_,t),(m||p||ie)&&this.resetInitialTimestamp(x),d||this.resetContiguity();const he=this.transmux(l,z,g,h,r);this.asyncResult=uf(he);const P=this.currentTransmuxState;return P.contiguous=!0,P.discontinuity=!1,P.trackSwitch=!1,o.executeEnd=Bs(),he}flush(e){const t=e.transmuxing;t.executeStart=Bs();const{decrypter:r,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return this.asyncResult=!0,o.then(()=>this.flush(e));const l=[],{timeOffset:u}=i;if(r){const f=r.flush();f&&l.push(this.push(f.buffer,null,e))}const{demuxer:c,remuxer:d}=this;if(!c||!d){t.executeEnd=Bs();const f=[Wy(e)];return this.asyncResult?Promise.resolve(f):f}const m=c.flush(u);return uf(m)?(this.asyncResult=!0,m.then(f=>(this.flushRemux(l,f,e),l))):(this.flushRemux(l,m,e),this.asyncResult?Promise.resolve(l):l)}flushRemux(e,t,r){const{audioTrack:i,videoTrack:o,id3Track:l,textTrack:u}=t,{accurateTimeOffset:c,timeOffset:d}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Sn.MAIN?"level":"track"} ${r.level}`);const m=this.remuxer.remux(i,o,l,u,d,c,!0,this.id);e.push({remuxResult:m,chunkMeta:r}),r.transmuxing.executeEnd=Bs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,i,o){const{demuxer:l,remuxer:u}=this;!l||!u||(l.resetInitSegment(e,t,r,i),u.resetInitSegment(e,t,r,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,i,o){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,r,i,o):l=this.transmuxUnencrypted(e,r,i,o),l}transmuxUnencrypted(e,t,r,i){const{audioTrack:o,videoTrack:l,id3Track:u,textTrack:c}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,l,u,c,t,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,r,i,o){return this.demuxer.demuxSampleAes(e,t,r).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,r,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:i}=this;let o;for(let f=0,h=pm.length;f<h;f++){var l;if((l=pm[f].demux)!=null&&l.probe(e,this.logger)){o=pm[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const u=this.demuxer,c=this.remuxer,d=o.remux,m=o.demux;(!c||!(c instanceof d))&&(this.remuxer=new d(r,t,i,this.logger)),(!u||!(u instanceof m))&&(this.demuxer=new m(r,t,i,this.logger),this.probe=m.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new mT(this.config)),e}}function C9(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Wy=n=>({remuxResult:{},chunkMeta:n});function uf(n){return"then"in n&&n.then instanceof Function}class N9{constructor(e,t,r,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=o||null}}class D9{constructor(e,t,r,i,o,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=l}}let AA=0;class xM{constructor(e,t,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=AA++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const d=c.data,m=this.hls;if(!(!m||!(d!=null&&d.event)||d.instanceNo!==this.instanceNo))switch(d.event){case"init":{var f;const h=(f=this.workerContext)==null?void 0:f.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":{m.logger[d.data.logType]&&m.logger[d.data.logType](d.data.message);break}default:{d.data=d.data||{},d.data.frag=this.frag,d.data.part=this.part,d.data.id=this.id,m.trigger(d.event,d.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const d=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})};const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const l=(c,d)=>{d=d||{},d.frag=this.frag||void 0,c===pe.ERROR&&(d=d,d.parent=this.id,d.part=this.part,this.error=d.error),this.hls.trigger(c,d)};this.observer=new ET,this.observer.on(pe.FRAG_DECRYPTED,l),this.observer.on(pe.ERROR,l);const u=$I(o.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(o.workerPath||OY()){try{o.workerPath?(c.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=zY(o.workerPath)):(c.log(`injecting Web Worker for "${t}"`),this.workerContext=FY());const{worker:m}=this.workerContext;m.addEventListener("message",this.onWorkerMessage),m.addEventListener("error",this.onWorkerError),m.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:u,id:t,config:Sr(o)})}catch(m){c.warn(`Error setting up "${t}" Web Worker, fallback to inline`,m),this.terminateWorker(),this.error=null,this.transmuxer=new IA(this.observer,u,o,"",t,e.logger)}return}}this.transmuxer=new IA(this.observer,u,o,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=AA++;const t=this.hls.config,r=$I(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Sr(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),UY(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,i,o,l,u,c,d,m){var f,h;d.transmuxing.start=self.performance.now();const{instanceNo:g,transmuxer:p}=this,E=l?l.start:o.start,S=o.decryptdata,x=this.frag,_=!(x&&o.cc===x.cc),A=!(x&&d.level===x.level),z=x?d.sn-x.sn:-1,ie=this.part?d.part-this.part.index:-1,he=z===0&&d.id>1&&d.id===(x==null?void 0:x.stats.chunkCount),P=!A&&(z===1||z===0&&(ie===1||he&&ie<=0)),U=self.performance.now();(A||z||o.stats.parsing.start===0)&&(o.stats.parsing.start=U),l&&(ie||!P)&&(l.stats.parsing.start=U);const ce=!(x&&((f=o.initSegment)==null?void 0:f.url)===((h=x.initSegment)==null?void 0:h.url)),de=new D9(_,P,c,A,E,ce);if(!P||_||ce){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${o.type} sn: ${d.sn}${d.part>-1?" part: "+d.part:""} ${this.id===Sn.MAIN?"level":"track"}: ${d.level} id: ${d.id}
        discontinuity: ${_}
        trackSwitch: ${A}
        contiguous: ${P}
        accurateTimeOffset: ${c}
        timeOffset: ${E}
        initSegmentChange: ${ce}`);const _e=new N9(r,i,t,u,m);this.configureTransmuxer(_e)}if(this.frag=o,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:g,cmd:"demux",data:e,decryptdata:S,chunkMeta:d,state:de},e instanceof ArrayBuffer?[e]:[]);else if(p){const _e=p.push(e,S,d,de);uf(_e)?_e.then(je=>{this.handleTransmuxComplete(je)}).catch(je=>{this.transmuxerError(je,d,"transmuxer-interface push error")}):this.handleTransmuxComplete(_e)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);uf(i)?i.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const RA=100;class L9 extends vT{constructor(e,t,r){super(e,t,r,"audio-stream-controller",Sn.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:l}){if(r===Sn.MAIN){const u=t.cc,c=this.fragCurrent;if(this.initPTS[u]={baseTime:i,timescale:o,trackId:l},this.log(`InitPTS for cc: ${u} found from main: ${i/o} (${i}/${o}) trackId: ${l}`),this.mainAnchor=t,this.state===Bt.WAITING_INIT_PTS){const d=this.waitingData;(!d&&!this.loadingParts||d&&d.frag.cc!==u)&&this.syncWithAnchor(t,d==null?void 0:d.frag)}else!this.hls.hasEnoughToStart&&c&&c.cc!==u?(c.abortRequests(),this.syncWithAnchor(t,c)):this.state===Bt.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(t&&(i==null?void 0:i.cc)===t.cc)return;const o=(i||e).cc,l=this.getLevelDetails(),u=this.getLoadPosition(),c=UP(l,o,u);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===Bt.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Bt.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(RA),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=Bt.IDLE):this.state=Bt.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Bt.IDLE:this.doTickIdle();break;case Bt.WAITING_TRACK:{const{levels:e,trackId:t}=this,r=e==null?void 0:e[t],i=r==null?void 0:r.details;if(i&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(i))break;this.state=Bt.WAITING_INIT_PTS}break}case Bt.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Bt.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:r,cache:i,complete:o}=e,l=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Bt.FRAG_LOADING;const u=i.flush().buffer,c={frag:t,part:r,payload:u,networkDetails:null};this._handleFragmentLoadProgress(c),o&&super._handleFragmentLoadComplete(c)}else l&&l.cc!==e.frag.cc&&this.syncWithAnchor(l,e.frag)}else this.state=Bt.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:i,trackId:o}=this,l=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(r!=null&&r[o]))return;const u=r[o],c=u.details;if(!c||this.waitForLive(u)||this.waitForCdnTuneIn(c)){this.state=Bt.WAITING_TRACK,this.startFragRequested=!1;return}const d=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&d&&(this.bufferFlushed=!1,this.afterBufferFlushed(d,Tr.AUDIO,Sn.AUDIO));const m=this.getFwdBufferInfo(d,Sn.AUDIO);if(m===null)return;if(!this.switchingTrack&&this._streamEnded(m,c)){t.trigger(pe.BUFFER_EOS,{type:"audio"}),this.state=Bt.ENDED;return}const f=m.len,h=t.maxBufferLength,g=c.fragments,p=g[0].start,E=this.getLoadPosition(),S=this.flushing?E:m.end;if(this.switchingTrack&&i){const A=E;c.PTSKnown&&A<p&&(m.end>p||m.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=p+.05)}if(f>=h&&!this.switchingTrack&&S<g[g.length-1].start)return;let x=this.getNextFragment(S,c);if(x&&this.isLoopLoading(x,S)&&(x=this.getNextFragmentLoopLoading(x,c,m,Sn.MAIN,h)),!x){this.bufferFlushed=!0;return}let _=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&_&&qr(x)&&!x.endList&&(!c.live||!this.loadingParts&&S<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(_)===Xr.OK&&(this.mainFragLoading=_=null),_&&qr(_))){if(x.start>_.end){const z=this.fragmentTracker.getFragAtPos(S,Sn.MAIN);z&&z.end>_.end&&(_=z,this.mainFragLoading={frag:z,targetBufferTime:null})}if(x.start>_.end)return}this.loadFragment(x,u,S)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new sf(r))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Bt.STOPPED&&(this.setInterval(RA),this.state=Bt.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(pe.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:i}=this,{details:o,id:l,groupId:u,track:c}=t;if(!i){this.warn(`Audio tracks reset while loading track ${l} "${c.name}" of "${u}"`);return}const d=this.mainDetails;if(!d||o.endCC>d.endCC||d.expired){this.cachedTrackLoadedData=t,this.state!==Bt.STOPPED&&(this.state=Bt.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${c.name}" of "${u}" loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const m=i[l];let f=0;if(o.live||(r=m.details)!=null&&r.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;if(m.details){var h;f=this.alignPlaylists(o,m.details,(h=this.levelLastLoaded)==null?void 0:h.details)}o.alignedSliding||(rM(o,d),o.alignedSliding||hg(o,d),f=o.fragmentStart)}m.details=o,this.levelLastLoaded=m,this.startFragRequested||this.setStartPosition(d,f),this.hls.trigger(pe.AUDIO_TRACK_UPDATED,{details:o,id:l,groupId:t.groupId}),this.state===Bt.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=Bt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{config:l,trackId:u,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const d=c[u];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const m=d.details;if(!m){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const f=l.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new xM(this.hls,Sn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const g=this.initPTS[r.cc],p=(t=r.initSegment)==null?void 0:t.data;if(g!==void 0){const S=i?i.index:-1,x=S!==-1,_=new gT(r.level,r.sn,r.stats.chunkCount,o.byteLength,S,x);h.push(o,p,f,"",r,i,m.totalduration,!1,_,g)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${m.startSN} ,${m.endSN}],track ${u}`);const{cache:E}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new iM,complete:!1};E.push(new Uint8Array(o)),this.state!==Bt.STOPPED&&(this.state=Bt.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Sn.MAIN&&qr(t.frag)&&(this.mainFragLoading=t,this.state===Bt.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:r,part:i}=t;if(r.type!==Sn.AUDIO){!this.audioOnly&&r.type===Sn.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(qr(r)){this.fragPrevious=r;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(pe.AUDIO_TRACK_SWITCHED,gr({},o)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,t){var r;if(t.fatal){this.state=Bt.ERROR;return}switch(t.details){case pt.FRAG_GAP:case pt.FRAG_PARSING_ERROR:case pt.FRAG_DECRYPT_ERROR:case pt.FRAG_LOAD_ERROR:case pt.FRAG_LOAD_TIMEOUT:case pt.KEY_LOAD_ERROR:case pt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Sn.AUDIO,t);break;case pt.AUDIO_TRACK_LOAD_ERROR:case pt.AUDIO_TRACK_LOAD_TIMEOUT:case pt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Bt.WAITING_TRACK&&((r=t.context)==null?void 0:r.type)===Zn.AUDIO_TRACK&&(this.state=Bt.IDLE);break;case pt.BUFFER_ADD_CODEC_ERROR:case pt.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case pt.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case pt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Tr.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Tr.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Bt.ENDED&&(this.state=Bt.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,t,Sn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:i}=this,{remuxResult:o,chunkMeta:l}=e,u=this.getCurrentContext(l);if(!u){this.resetWhenMissingContext(l);return}const{frag:c,part:d,level:m}=u,{details:f}=m,{audio:h,text:g,id3:p,initSegment:E}=o;if(this.fragContextChanged(c)||!f){this.fragmentTracker.removeFragment(c);return}if(this.state=Bt.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),E!=null&&E.tracks){const S=c.initSegment||c;if(this.unhandledEncryptionError(E,c))return;this._bufferInitSegment(m,E.tracks,S,l),i.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:r,tracks:E.tracks})}if(h){const{startPTS:S,endPTS:x,startDTS:_,endDTS:A}=h;d&&(d.elementaryStreams[Tr.AUDIO]={startPTS:S,endPTS:x,startDTS:_,endDTS:A}),c.setElementaryStreamInfo(Tr.AUDIO,S,x,_,A),this.bufferFragmentData(h,c,d,l)}if(p!=null&&(t=p.samples)!=null&&t.length){const S=br({id:r,frag:c,details:f},p);i.trigger(pe.FRAG_PARSING_METADATA,S)}if(g){const S=br({id:r,frag:c,details:f},g);i.trigger(pe.FRAG_PARSING_USERDATA,S)}}_bufferInitSegment(e,t,r,i){if(this.state!==Bt.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const o=t.audio;o.id=Sn.AUDIO;const l=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${l}/${o.codec}]`),l&&l.split(",").length===1&&(o.levelCodec=l),this.hls.trigger(pe.BUFFER_CODECS,t);const u=o.initSegment;if(u!=null&&u.byteLength){const c={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:u};this.hls.trigger(pe.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===Xr.NOT_LOADED||i===Xr.PARTIAL){var o;if(!qr(e))this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Bt.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==t.details.fragmentStart&&hg(t.details,l)}else super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:i,characteristics:o,audioCodec:l,channels:u}=this.bufferedTrack;Ol({name:t,lang:r,assocLang:i,characteristics:o,audioCodec:l,channels:u},e,bl)||(lg(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(pe.AUDIO_TRACK_SWITCHED,gr({},e))}}class IT extends Aa{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const i=t==null?void 0:t.renditionReports;if(i){let o=-1;for(let l=0;l<i.length;l++){const u=i[l];let c;try{c=new self.URL(u.URI,t.url).href}catch(d){this.warn(`Could not construct new URL for Rendition Report: ${d}`),c=u.URI||""}if(c===e){o=l;break}else c===e.substring(0,c.length)&&(o=l)}if(o!==-1){const l=i[o],u=parseInt(l["LAST-MSN"])||t.lastPartSn;let c=parseInt(l["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const m=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&m>t.partTarget&&(c+=1)}const d=r&&qI(r);return new GI(u,c>=0?c:void 0,d)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,t,r){const{details:i,stats:o}=t,l=self.performance.now(),u=o.loading.first?Math.max(0,l-o.loading.first):0;i.advancedDateTime=Date.now()-u;const c=this.hls.config.timelineOffset;if(c!==i.appliedTimelineOffset){const m=Math.max(c||0,0);i.appliedTimelineOffset=m,i.fragments.forEach(f=>{f.setStart(f.playlistOffset+m)})}if(i.live||r!=null&&r.live){const m="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(r),r&&i.fragments.length>0){_Y(r,i,this);const _=i.playlistParsingError;if(_){this.warn(_);const A=this.hls;if(!A.config.ignorePlaylistParsingErrors){var d;const{networkDetails:z}=t;A.trigger(pe.ERROR,{type:Nn.NETWORK_ERROR,details:pt.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:_,reason:_.message,level:t.level||void 0,parent:(d=i.fragments[0])==null?void 0:d.type,networkDetails:z,stats:o});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=o.loading.start);const f=this.hls.mainForwardBufferInfo,h=f?f.end-f.len:0,g=(i.edge-h)*1e3,p=ZP(i,g);if(i.requestScheduled+p<l?i.requestScheduled=l:i.requestScheduled+=p,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let E,S,x;if(i.canBlockReload&&i.endSN&&i.advanced){const _=this.hls.config.lowLatencyMode,A=i.lastPartSn,z=i.endSN,ie=i.lastPartIndex,he=ie!==-1,P=A===z;he?P?(S=z+1,x=_?0:ie):(S=A,x=_?ie+1:i.maxPartIndex):S=z+1;const U=i.age,ce=U+i.ageHeader;let de=Math.min(ce-i.partTarget,i.targetduration*1.5);if(de>0){if(ce>i.targetduration*3)this.log(`Playlist last advanced ${U.toFixed(2)}s ago. Omitting segment and part directives.`),S=void 0,x=void 0;else if(r!=null&&r.tuneInGoal&&ce-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${de} with playlist age: ${i.age}`),de=0;else{const _e=Math.floor(de/i.targetduration);if(S+=_e,x!==void 0){const je=Math.round(de%i.targetduration/i.partTarget);x+=je}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${U.toFixed(2)}s goal: ${de} skip sn ${_e} to part ${x}`)}i.tuneInGoal=de}if(E=this.getDeliveryDirectives(i,t.deliveryDirectives,S,x),_||!P){i.requestScheduled=l,this.loadingPlaylist(m,E);return}}else(i.canBlockReload||i.canSkipUntil)&&(E=this.getDeliveryDirectives(i,t.deliveryDirectives,S,x));E&&S!==void 0&&i.canBlockReload&&(i.requestScheduled=o.loading.first+Math.max(p-u*2,p/2)),this.scheduleLoading(m,E,i)}else this.clearTimer()}scheduleLoading(e,t,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,t);return}const o=self.performance.now(),l=i.requestScheduled;if(o>=l){this.loadingPlaylist(e,t);return}const u=l-o;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(u)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),u)}getDeliveryDirectives(e,t,r,i){let o=qI(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,o=hm.No),new GI(r,i,o)}checkRetry(e){const t=e.details,r=ug(e),i=e.errorAction,{action:o,retryCount:l=0,retryConfig:u}=i||{},c=!!i&&!!u&&(o===oi.RetryRequest||!i.resolved&&o===oi.SendAlternateToPenaltyBox);if(c){var d;if(l>=u.maxNumRetry)return!1;if(r&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${u.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const m=hT(u,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),m),this.warn(`Retrying playlist loading ${l+1}/${u.maxNumRetry} after "${t}" in ${m}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}function wM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!cf(n[t].attrs,e[t].attrs))return!1;return!0}function cf(n,e,t){const r=n["STABLE-RENDITION-ID"];return r&&!t?r===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>n[i]!==e[i])}function ab(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class P9 extends IT{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,l=this.tracksInGroup[r];if(!l||l.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${l==null?void 0:l.groupId}`);return}const u=l.details;l.details=t.details,this.log(`Audio track ${r} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(u=>(i==null?void 0:i.indexOf(u))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const u=this.tracks.filter(h=>!r||r.indexOf(h.groupId)!==-1);if(u.length)this.selectDefaultTrack&&!u.some(h=>h.default)&&(this.selectDefaultTrack=!1),u.forEach((h,g)=>{h.id=g});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=u;const c=this.hls.config.audioPreference;if(!o&&c){const h=bs(c,u,bl);if(h>-1)o=u[h];else{const g=bs(c,this.tracks);o=this.tracks[g]}}let d=this.findTrackId(o);d===-1&&o&&(d=this.findTrackId(null));const m={audioTracks:u};this.log(`Updating audio tracks, ${u.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(pe.AUDIO_TRACKS_UPDATED,m);const f=this.trackId;if(d!==-1&&f===-1)this.setAudioTrack(d);else if(u.length&&f===-1){var l;const h=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${u.length}`);this.warn(h.message),this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===Zn.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Ol(e,i,bl))return i;const o=bs(e,this.tracksInGroup,bl);if(o>-1){const l=this.tracksInGroup[o];return this.setAudioTrack(o),l}else if(i){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const u=VK(e,t.levels,r,l,bl);if(u===-1)return null;t.nextLoadLevel=u}if(e.channels||e.audioCodec){const l=bs(e,r);if(l>-1)return r[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===r&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(pe.AUDIO_TRACK_SWITCHING,gr({},i)),o))return;const l=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ol(e,i,bl)))return r}if(e){const{name:r,lang:i,assocLang:o,characteristics:l,audioCodec:u,channels:c}=e;for(let d=0;d<t.length;d++){const m=t[d];if(Ol({name:r,lang:i,assocLang:o,characteristics:l,audioCodec:u,channels:c},m,bl))return d}for(let d=0;d<t.length;d++){const m=t[d];if(cf(e.attrs,m.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const m=t[d];if(cf(e.attrs,m.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&lg(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,u=l==null?void 0:l.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(pe.AUDIO_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}}class M9{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!r&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const r=(t=e[0])==null?void 0:t.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(o){var r;if(i.onError(o),this.queues===null||this.tracks===null)return;const l=(r=this.tracks[e])==null?void 0:r.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,r;return(t=this.queues)!=null&&t[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=(t=this.tracks)==null?void 0:t[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(r=>r.label).join(", "))||""}}const kA=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,_M="HlsJsTrackRemovedError";class O9 extends Error{constructor(e){super(e),this.name=_M}}class F9 extends Aa{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:o}=this;r&&this.log("Media source opened"),!(!i||!o)&&(o.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(pe.MEDIA_ATTACHED,{media:i,mediaSource:o}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=aK(Zo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.BUFFER_EOS,this.onBufferEos,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.FRAG_PARSED,this.onFragParsed,this),e.on(pe.FRAG_CHANGED,this.onFragChanged,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.BUFFER_EOS,this.onBufferEos,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.FRAG_PARSED,this.onFragParsed,this),e.off(pe.FRAG_CHANGED,this.onFragChanged,this),e.off(pe.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const o=this.isUpdating();o||this.operationQueue.removeBlockers();const l=this.isQueued();(o||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${o?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?br(r,i.tracks):this.sourceBuffers.forEach(o=>{const[l]=o;l&&(r[l]=br({},this.tracks[l]),this.removeBuffer(l)),o[0]=o[1]=null}),{media:e,mediaSource:t,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media;this.transferData=this.overrides=void 0;const i=Zo(this.appendSource);if(i){const o=!!t.mediaSource;(o||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const l=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(l),o)this._objectUrl=r.src,this.attachTransferred();else{const u=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{r.removeAttribute("src");const c=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||c&&l instanceof c,CA(r),z9(r,u),r.load()}catch{r.src=u}else r.src=u}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,i=t.tracks,o=i?Object.keys(i):null,l=o?o.length:0,u=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&o&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Sr(r,(c,d)=>c==="initSegment"?void 0:d)};
transfer tracks: ${Sr(i,(c,d)=>c==="initSegment"?void 0:d)}}`),!TP(i,r)){t.mediaSource=null,t.tracks=void 0;const c=e.currentTime,d=this.details,m=Math.max(c,(d==null?void 0:d.fragments[0].start)||0);if(m-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${m}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${m} currentTime: ${c}`),this.onMediaDetaching(pe.MEDIA_DETACHING,{}),this.onMediaAttaching(pe.MEDIA_ATTACHING,t),e.currentTime=m;return}this.transferData=void 0,o.forEach(c=>{const d=c,m=i[d];if(m){const f=m.buffer;if(f){const h=this.fragmentTracker,g=m.id;if(h.hasFragments(g)||h.hasParts(g)){const S=qn.getBuffered(f);h.detectEvictedFragments(d,S,g,null,!0)}const p=Qy(d),E=[d,f];this.sourceBuffers[p]=E,f.updating&&this.operationQueue&&this.operationQueue.prependBlocker(d),this.trackSourceBuffer(d,m)}}}),u(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),u()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:o,_objectUrl:l}=this;if(o){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([u])=>{u&&this.removeBuffer(u)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const u=o.readyState==="open";try{const c=o.sourceBuffers;for(let d=c.length;d--;)u&&c[d].abort(),o.removeSourceBuffer(c[d]);u&&o.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(i.removeAttribute("src"),this.appendSource&&CA(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(pe.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const r=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(o){this.warn(`onBufferReset ${e}`,o)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Qy(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new M9(this.tracks)}onBufferCodecs(e,t){var r;const i=this.tracks,o=Object.keys(t);this.log(`BUFFER_CODECS: "${o}" (current SB count ${this.sourceBufferCount})`);const l="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),u=!l&&this.sourceBufferCount&&this.media&&o.some(c=>!i[c]);if(l||u){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${o}" SourceBuffers`);return}o.forEach(c=>{var d,m;const f=t[c],{id:h,codec:g,levelCodec:p,container:E,metadata:S,supplemental:x}=f;let _=i[c];const A=(d=this.transferData)==null||(d=d.tracks)==null?void 0:d[c],z=A!=null&&A.buffer?A:_,ie=(z==null?void 0:z.pendingCodec)||(z==null?void 0:z.codec),he=z==null?void 0:z.levelCodec;_||(_=i[c]={buffer:void 0,listeners:[],codec:g,supplemental:x,container:E,levelCodec:p,metadata:S,id:h});const P=fm(ie,he),U=P==null?void 0:P.replace(kA,"$1");let ce=fm(g,p);const de=(m=ce)==null?void 0:m.replace(kA,"$1");ce&&P&&U!==de&&(c.slice(0,5)==="audio"&&(ce=sg(ce,this.appendSource)),this.log(`switching codec ${ie} to ${ce}`),ce!==(_.pendingCodec||_.codec)&&(_.pendingCodec=ce),_.container=E,this.appendChangeType(c,E,ce))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((r=t.audio)==null?void 0:r.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,t,r){const i=`${t};codecs=${r}`,o={label:`change-type=${i}`,execute:()=>{const l=this.tracks[e];if(l){const u=l.buffer;u!=null&&u.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),u.changeType(i),l.codec=r,l.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${e} SourceBuffer type`,l)}};this.append(o,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,i=r+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(r,Sn.MAIN))==null?void 0:t.gap)===!0)return;const l={label:"block-audio",execute:()=>{var u;const c=this.tracks.video;(this.lastVideoAppendEnd>i||c!=null&&c.buffer&&qn.isBuffered(c.buffer,i)||((u=this.fragmentTracker.getAppendedFrag(i,Sn.MAIN))==null?void 0:u.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:u=>{this.warn("Error executing block-audio operation",u)}};this.blockedAudioAppend={op:l,frag:e},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:i,type:o,parent:l,frag:u,part:c,chunkMeta:d,offset:m}=t,f=d.buffering[o],{sn:h,cc:g}=u,p=self.performance.now();f.start=p;const E=u.stats.buffering,S=c?c.stats.buffering:null;E.start===0&&(E.start=p),S&&S.start===0&&(S.start=p);const x=r.audio;let _=!1;o==="audio"&&(x==null?void 0:x.container)==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const A=r.video,z=A==null?void 0:A.buffer;if(z&&h!=="initSegment"){const P=c||u,U=this.blockedAudioAppend;if(o==="audio"&&l!=="main"&&!this.blockedAudioAppend&&!(A.ending||A.ended)){const de=P.start+P.duration*.05,_e=z.buffered,je=this.currentOp("video");!_e.length&&!je?this.blockAudio(P):!je&&!qn.isBuffered(z,de)&&this.lastVideoAppendEnd<de&&this.blockAudio(P)}else if(o==="video"){const ce=P.end;if(U){const de=U.frag.start;(ce>de||ce<this.lastVideoAppendEnd||qn.isBuffered(z,de))&&this.unblockAudio()}this.lastVideoAppendEnd=ce}}const ie=(c||u).start,he={label:`append-${o}`,execute:()=>{var P;f.executeStart=self.performance.now();const U=(P=this.tracks[o])==null?void 0:P.buffer;U&&(_?this.updateTimestampOffset(U,ie,.1,o,h,g):m!==void 0&&gn(m)&&this.updateTimestampOffset(U,m,1e-6,o,h,g)),this.appendExecutor(i,o)},onStart:()=>{},onComplete:()=>{const P=self.performance.now();f.executeEnd=f.end=P,E.first===0&&(E.first=P),S&&S.first===0&&(S.first=P);const U={};this.sourceBuffers.forEach(([ce,de])=>{ce&&(U[ce]=qn.getBuffered(de))}),this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(pe.BUFFER_APPENDED,{type:o,frag:u,part:c,chunkMeta:d,parent:u.type,timeRanges:U})},onError:P=>{var U;const ce={type:Nn.MEDIA_ERROR,parent:u.type,details:pt.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:u,part:c,chunkMeta:d,error:P,err:P,fatal:!1},de=(U=this.media)==null?void 0:U.error;if(P.code===DOMException.QUOTA_EXCEEDED_ERR||P.name=="QuotaExceededError"||"quota"in P)ce.details=pt.BUFFER_FULL_ERROR;else if(P.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!de)ce.errorAction=Wu(!0);else if(P.name===_M&&this.sourceBufferCount===0)ce.errorAction=Wu(!0);else{const _e=++this.appendErrors[o];this.warn(`Failed ${_e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer (${de||"no media error"})`),(_e>=this.hls.config.appendErrorMaxRetry||de)&&(ce.fatal=!0)}this.hls.trigger(pe.ERROR,ce)}};this.log(`queuing "${o}" append sn: ${h}${c?" p: "+c.index:""} of ${u.type===Sn.MAIN?"level":"track"} ${u.level} cc: ${g}`),this.append(he,o,this.isPending(this.tracks[o]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(pe.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:r,startOffset:i,endOffset:o}=t;r?this.append(this.getFlushOp(r,i,o),r):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,i,o),l)})}onFragParsed(e,t){const{frag:r,part:i}=t,o=[],l=i?i.elementaryStreams:r.elementaryStreams;l[Tr.AUDIOVIDEO]?o.push("audiovideo"):(l[Tr.AUDIO]&&o.push("audio"),l[Tr.VIDEO]&&o.push("video"));const u=()=>{const c=self.performance.now();r.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const d=i?i.stats:r.stats;this.hls.trigger(pe.FRAG_BUFFERED,{frag:r,part:i,stats:d,id:r.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(u,o).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var r;this.sourceBuffers.forEach(([l])=>{if(l){const u=this.tracks[l];(!t.type||t.type===l)&&(u.ending=!0,u.ended||(u.ended=!0,this.log(`${l} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var u;return l&&!((u=this.tracks[l])!=null&&u.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(pe.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(pe.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===pt.BUFFER_APPEND_ERROR&&t.frag){var r;const i=(r=t.errorAction)==null?void 0:r.nextAutoLevel;gn(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||t===null||!this.sourceBufferCount)return;const i=e.config,o=r.currentTime,l=t.levelTargetDuration,u=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(gn(u)&&u>=0){const d=Math.max(u,l),m=Math.floor(o/l)*l-d;this.flushBackBuffer(o,l,m)}const c=i.frontBufferFlushThreshold;if(gn(c)&&c>0){const d=Math.max(i.maxBufferLength,c),m=Math.max(d,l),f=Math.floor(o/l)*l+m;this.flushFrontBuffer(o,l,f)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const u=qn.getBuffered(o);if(u.length>0&&r>u.start(0)){var l;this.hls.trigger(pe.BACK_BUFFER_REACHED,{bufferEnd:r});const c=this.tracks[i];if((l=this.details)!=null&&l.live)this.hls.trigger(pe.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(c!=null&&c.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const l=qn.getBuffered(o),u=l.length;if(u<2)return;const c=l.start(u-1),d=l.end(u-1);if(r>c||e>=c&&e<=d)return;this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const d=Math.max(0,t.fragmentStart),m=Math.max(d,i);return{duration:1/0,start:d,end:m}}return{duration:1/0}}const o=(e=this.overrides)==null?void 0:e.duration;if(o)return gn(o)?{duration:o}:null;const l=this.media.duration,u=gn(r.duration)?r.duration:0;return i>u&&i>l||!gn(l)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(gn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${r}.`),i.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Sr(r)}`),this.tracksReady){var i;const o=(i=this.transferData)==null?void 0:i.tracks;o&&Object.keys(o).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,r])=>{if(t){const i=this.tracks[t];e[t]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(pe.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const o in e){const l=o,u=e[l];if(this.isPending(u)){const c=this.getTrackCodec(u,l),d=`${u.container};codecs=${c}`;u.codec=c,this.log(`creating sourceBuffer(${d})${this.currentOp(l)?" Queued":""} ${Sr(u)}`);try{const m=r.addSourceBuffer(d),f=Qy(l),h=[l,m];t[f]=h,u.buffer=m}catch(m){var i;this.error(`error while trying to add sourceBuffer: ${m.message}`),this.shiftAndExecuteNext(l),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[l],this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:m,sourceBufferName:l,mimeType:d,parent:u.id});return}this.trackSourceBuffer(l,u)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let i=e.codec;r&&(t==="video"||t==="audiovideo")&&rf(r,"video")&&(i=AK(i,r));const o=fm(i,e.levelCodec);return o?t.slice(0,5)==="audio"?sg(o,this.appendSource):o:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(o,l)=>{const u=l.removedRanges;u!=null&&u.length&&this.hls.trigger(pe.BUFFER_FLUSHED,{type:o})})}get mediaSrc(){var e,t;const r=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,t),this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.currentOp(e);o&&o.onError(i)}updateTimestampOffset(e,t,r,i,o,l){const u=t-e.timestampOffset;Math.abs(u)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${o} cc: ${l})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:i,mediaSource:o}=this,l=this.tracks[e],u=l==null?void 0:l.buffer;if(!i||!o||!u){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=gn(i.duration)?i.duration:1/0,d=gn(o.duration)?o.duration:1/0,m=Math.max(0,t),f=Math.min(r,c,d);f>m&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${m},${f}] from the ${e} SourceBuffer`),u.remove(m,f)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],i=r==null?void 0:r.buffer;if(!i)throw new O9(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=t.map(l=>this.appendBlocker(l));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(l=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var r;const i=(r=this.tracks[t])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,r){const i=this.tracks[e];if(!i)return;const o=i.buffer;if(!o)return;const l=r.bind(this,e);i.listeners.push({event:t,listener:l}),o.addEventListener(t,l)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function CA(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function z9(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function Qy(n){return n==="audio"?1:0}class AT{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&gn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,AT.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,t,r){if(!(e!=null&&e.length))return-1;const i=(u,c)=>c?u.width!==c.width||u.height!==c.height:!0;let o=e.length-1;const l=Math.max(t,r);for(let u=0;u<e.length;u+=1){const c=e[u];if((c.width>=l||c.height>=l)&&i(c,e[u+1])){o=u;break}}return o}}const U9={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Mi=U9,j9={HLS:"h"},B9=j9;class Is{constructor(e,t){Array.isArray(e)&&(e=e.map(r=>r instanceof Is?r:new Is(r))),this.value=e,this.params=t}}const $9="Dict";function q9(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function G9(n,e,t,r){return new Error(`failed to ${n} "${q9(e)}" as ${t}`,{cause:r})}function As(n,e,t){return G9("serialize",n,e,t)}class IM{constructor(e){this.description=e}}const NA="Bare Item",H9="Boolean";function V9(n){if(typeof n!="boolean")throw As(n,H9);return n?"?1":"?0"}function K9(n){return btoa(String.fromCharCode(...n))}const Y9="Byte Sequence";function W9(n){if(ArrayBuffer.isView(n)===!1)throw As(n,Y9);return`:${K9(n)}:`}const Q9="Integer";function X9(n){return n<-999999999999999||999999999999999<n}function AM(n){if(X9(n))throw As(n,Q9);return n.toString()}function Z9(n){return`@${AM(n.getTime()/1e3)}`}function RM(n,e){if(n<0)return-RM(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const i=Math.floor(n*t);return(i%2===0?i:i+1)/t}else return Math.round(n*t)/t}const J9="Decimal";function eW(n){const e=RM(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw As(n,J9);const t=e.toString();return t.includes(".")?t:`${t}.0`}const tW="String",nW=/[\x00-\x1f\x7f]+/;function rW(n){if(nW.test(n))throw As(n,tW);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function iW(n){return n.description||n.toString().slice(7,-1)}const aW="Token";function DA(n){const e=iW(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw As(e,aW);return e}function sb(n){switch(typeof n){case"number":if(!gn(n))throw As(n,NA);return Number.isInteger(n)?AM(n):eW(n);case"string":return rW(n);case"symbol":return DA(n);case"boolean":return V9(n);case"object":if(n instanceof Date)return Z9(n);if(n instanceof Uint8Array)return W9(n);if(n instanceof IM)return DA(n);default:throw As(n,NA)}}const sW="Key";function ob(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw As(n,sW);return n}function RT(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${ob(e)}`:`;${ob(e)}=${sb(t)}`).join("")}function kM(n){return n instanceof Is?`${sb(n.value)}${RT(n.params)}`:sb(n)}function oW(n){return`(${n.value.map(kM).join(" ")})${RT(n.params)}`}function lW(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw As(n,$9);const t=n instanceof Map?n.entries():Object.entries(n),r=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof Is||(o=new Is(o));let l=ob(i);return o.value===!0?l+=RT(o.params):(l+="=",Array.isArray(o.value)?l+=oW(o):l+=kM(o)),l}).join(`,${r}`)}function CM(n,e){return lW(n,e)}const ls="CMCD-Object",Ur="CMCD-Request",pl="CMCD-Session",po="CMCD-Status",uW={br:ls,ab:ls,d:ls,ot:ls,tb:ls,tpb:ls,lb:ls,tab:ls,lab:ls,url:ls,pb:Ur,bl:Ur,tbl:Ur,dl:Ur,ltc:Ur,mtp:Ur,nor:Ur,nrr:Ur,rc:Ur,sn:Ur,sta:Ur,su:Ur,ttfb:Ur,ttfbb:Ur,ttlb:Ur,cmsdd:Ur,cmsds:Ur,smrt:Ur,df:Ur,cs:Ur,ts:Ur,cid:pl,pr:pl,sf:pl,sid:pl,st:pl,v:pl,msd:pl,bs:po,bsd:po,cdn:po,rtp:po,bg:po,pt:po,ec:po,e:po},cW={REQUEST:Ur};function dW(n){return Object.keys(n).reduce((e,t)=>{var r;return(r=n[t])===null||r===void 0||r.forEach(i=>e[i]=t),e},{})}function fW(n,e){const t={};if(!n)return t;const r=Object.keys(n),i=e?dW(e):{};return r.reduce((o,l)=>{var u;const c=uW[l]||i[l]||cW.REQUEST,d=(u=o[c])!==null&&u!==void 0?u:o[c]={};return d[l]=n[l],o},t)}function hW(n){return["ot","sf","st","e","sta"].includes(n)}function mW(n){return typeof n=="number"?gn(n):n!=null&&n!==""&&n!==!1}const NM="event";function gW(n,e){const t=new URL(n),r=new URL(e);if(t.origin!==r.origin)return n;const i=t.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const ym=n=>Math.round(n),lb=(n,e)=>Array.isArray(n)?n.map(t=>lb(t,e)):n instanceof Is&&typeof n.value=="string"?new Is(lb(n.value,e),n.params):(e.baseUrl&&(n=gW(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),zh=n=>ym(n/100)*100,pW=(n,e)=>{let t=n;return e.version>=2&&(n instanceof Is&&typeof n.value=="string"?t=new Is([n]):typeof n=="string"&&(t=[n])),lb(t,e)},yW={br:ym,d:ym,bl:zh,dl:zh,mtp:zh,nor:pW,rtp:zh,tb:ym},DM="request",LM="response",kT=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],vW=["e"],EW=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function dp(n){return EW.test(n)}function bW(n){return kT.includes(n)||vW.includes(n)||dp(n)}const PM=["d","dl","nor","ot","rtp","su"];function TW(n){return kT.includes(n)||PM.includes(n)||dp(n)}const SW=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function xW(n){return kT.includes(n)||PM.includes(n)||SW.includes(n)||dp(n)}const wW=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function _W(n){return wW.includes(n)||dp(n)}const IW={[LM]:xW,[NM]:bW,[DM]:TW};function MM(n,e={}){const t={};if(n==null||typeof n!="object")return t;const r=e.version||n.v||1,i=e.reportingMode||DM,o=r===1?_W:IW[i];let l=Object.keys(n).filter(o);const u=e.filter;typeof u=="function"&&(l=l.filter(u));const c=i===LM||i===NM;c&&!l.includes("ts")&&l.push("ts"),r>1&&!l.includes("v")&&l.push("v");const d=br({},yW,e.formatters),m={version:r,reportingMode:i,baseUrl:e.baseUrl};return l.sort().forEach(f=>{let h=n[f];const g=d[f];if(typeof g=="function"&&(h=g(h,m)),f==="v"){if(r===1)return;h=r}f=="pr"&&h===1||(c&&f==="ts"&&!gn(h)&&(h=Date.now()),mW(h)&&(hW(f)&&typeof h=="string"&&(h=new IM(h)),t[f]=h))}),t}function AW(n,e={}){const t={};if(!n)return t;const r=MM(n,e),i=fW(r,e==null?void 0:e.customHeaderMap);return Object.entries(i).reduce((o,[l,u])=>{const c=CM(u,{whitespace:!1});return c&&(o[l]=c),o},t)}function RW(n,e,t){return br(n,AW(e,t))}const kW="CMCD";function CW(n,e={}){return n?CM(MM(n,e),{whitespace:!1}):""}function NW(n,e={}){if(!n)return"";const t=CW(n,e);return encodeURIComponent(t)}function DW(n,e={}){if(!n)return"";const t=NW(n,e);return`${kW}=${t}`}const LA=/CMCD=[^&#]+/;function LW(n,e,t){const r=DW(e,t);if(!r)return n;if(LA.test(n))return n.replace(LA,r);const i=n.includes("?")?"&":"?";return`${n}${i}${r}`}class PW{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Mi.MANIFEST,su:!this.initialized})}catch(o){this.hls.logger.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const{frag:o,part:l}=i,u=this.hls.levels[o.level],c=this.getObjectType(o),d={d:(l||o).duration*1e3,ot:c};(c===Mi.VIDEO||c===Mi.AUDIO||c==Mi.MUXED)&&(d.br=u.bitrate/1e3,d.tb=this.getTopBandwidth(c)/1e3,d.bl=this.getBufferLength(c));const m=l?this.getNextPart(l):this.getNextFrag(o);m!=null&&m.url&&m.url!==o.url&&(d.nor=m.url),this.apply(i,d)}catch(o){this.hls.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;r!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,i;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:B9.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){br(t,this.createData());const r=t.ot===Mi.INIT||t.ot===Mi.VIDEO||t.ot===Mi.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((l,u)=>(i.includes(u)&&(l[u]=t[u]),l),{}));const o={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),RW(e.headers,t,o)):e.url=LW(e.url,t,o)}getNextFrag(e){var t;const r=(t=this.hls.levels[e.level])==null?void 0:t.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var t;const{index:r,fragment:i}=e,o=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(o){const{sn:l}=i;for(let u=o.length-1;u>=0;u--){const c=o[u];if(c.index===r&&c.fragment.sn===l)return o[u+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Mi.TIMED_TEXT;if(e.sn==="initSegment")return Mi.INIT;if(t==="audio")return Mi.AUDIO;if(t==="main")return this.hls.audioTracks.length?Mi.VIDEO:Mi.MUXED}getTopBandwidth(e){let t=0,r;const i=this.hls;if(e===Mi.AUDIO)r=i.audioTracks;else{const o=i.maxAutoLevel,l=o>-1?o+1:i.levels.length;r=i.levels.slice(0,l)}return r.forEach(o=>{o.bitrate>t&&(t=o.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,r=e===Mi.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!t?NaN:qn.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,u){t(o),this.loader.load(o,l,u)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,u){t(o),this.loader.load(o,l,u)}}}}const MW=3e5;class OW extends Aa{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((r==null?void 0:r.action)===oi.SendAlternateToPenaltyBox&&r.flags===Wi.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this._pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:u,pathwayId:c,type:d}=t.context;u&&i?l=this.getPathwayForGroupId(u,d,l):c&&(l=c)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!o&&i&&(o=this.pathways()),o&&o.length>1&&(this.updatePathwayPriority(o),r.resolved=this.pathwayId!==l),t.details===pt.BUFFER_APPEND_ERROR&&!t.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${i&&i.length} priorities: ${Sr(o)} penalized: ${Sr(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(o=>{i-r[o]>MW&&delete r[o]});for(let o=0;o<e.length;o++){const l=e[o];if(l in r)continue;if(l===this.pathwayId)return;const u=this.hls.nextLoadLevel,c=this.hls.levels[u];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,tM(t),this.hls.trigger(pe.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[u];c&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=u);break}}}getPathwayForGroupId(e,t,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===Zn.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===Zn.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},i={};e.forEach(o=>{const{ID:l,"BASE-ID":u,"URI-REPLACEMENT":c}=o;if(t.some(m=>m.pathwayId===l))return;const d=this.getLevelsForPathway(u).map(m=>{const f=new Nr(m.attrs);f["PATHWAY-ID"]=l;const h=f.AUDIO&&`${f.AUDIO}_clone_${l}`,g=f.SUBTITLES&&`${f.SUBTITLES}_clone_${l}`;h&&(r[f.AUDIO]=h,f.AUDIO=h),g&&(i[f.SUBTITLES]=g,f.SUBTITLES=g);const p=OM(m.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),E=new sf({attrs:f,audioCodec:m.audioCodec,bitrate:m.bitrate,height:m.height,name:m.name,url:p,videoCodec:m.videoCodec,width:m.width});if(m.audioGroups)for(let S=1;S<m.audioGroups.length;S++)E.addGroupId("audio",`${m.audioGroups[S]}_clone_${l}`);if(m.subtitleGroups)for(let S=1;S<m.subtitleGroups.length;S++)E.addGroupId("text",`${m.subtitleGroups[S]}_clone_${l}`);return E});t.push(...d),PA(this.audioTracks,r,c,l),PA(this.subtitleTracks,i,c,l)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;this.loader&&this.loader.destroy(),this.loader=new r(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const m=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+m)}const o={responseType:"json",url:i.href},l=t.steeringManifestLoadPolicy.default,u=l.errorRetry||l.timeoutRetry||{},c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},d={onSuccess:(m,f,h,g)=>{this.log(`Loaded steering manifest: "${i}"`);const p=m.data;if((p==null?void 0:p.VERSION)!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":E,"PATHWAY-CLONES":S,"PATHWAY-PRIORITY":x}=p;if(E)try{this.uri=new self.URL(E,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${E}`);return}this.scheduleRefresh(this.uri||h.url),S&&this.clonePathways(S);const _={steeringManifest:p,url:i.toString()};this.hls.trigger(pe.STEERING_MANIFEST_LOADED,_),x&&this.updatePathwayPriority(x)},onError:(m,f,h,g)=>{if(this.log(`Error loading steering manifest: ${m.code} ${m.text} (${f.url})`),this.stopLoad(),m.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let p=this.timeToLoad*1e3;if(m.code===429){const E=this.loader;if(typeof(E==null?void 0:E.getResponseHeader)=="function"){const S=E.getResponseHeader("Retry-After");S&&(p=parseFloat(S)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,p)},onTimeout:(m,f,h)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,c,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function PA(n,e,t,r){n&&Object.keys(e).forEach(i=>{const o=n.filter(l=>l.groupId===i).map(l=>{const u=br({},l);return u.details=void 0,u.attrs=new Nr(u.attrs),u.url=u.attrs.URI=OM(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),u.groupId=u.attrs["GROUP-ID"]=e[i],u.attrs["PATHWAY-ID"]=r,u});n.push(...o)})}function OM(n,e,t,r){const{HOST:i,PARAMS:o,[t]:l}=r;let u;e&&(u=l==null?void 0:l[e],u&&(n=u));const c=new self.URL(n);return i&&!u&&(c.host=i),o&&Object.keys(o).sort().forEach(d=>{d&&c.searchParams.set(d,o[d])}),c.href}class Xu extends Aa{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Xu.CDMCleanupPromise?[Xu.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:r,initData:i}=t,o=`"${t.type}" event: init data type: "${r}"`;if(this.debug(o),i!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=hd(this.config));const u=l.map($y).filter(c=>!!c);this.keyFormatPromise=this.getKeyFormatPromise(u)}this.keyFormatPromise.then(l=>{const u=mm(l);if(r!=="sinf"||u!==Lr.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${r}" for selected key-system ${u}`);return}let c;try{const g=Wr(new Uint8Array(i)),p=yT(JSON.parse(g).sinf),E=CP(p);if(!E)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");c=new Uint8Array(E.subarray(8,24))}catch(g){this.warn(`${o} Failed to parse sinf: ${g}`);return}const d=li(c),{keyIdToKeySessionPromise:m,mediaKeySessions:f}=this;let h=m[d];for(let g=0;g<f.length;g++){const p=f[g],E=p.decryptdata;if(!E.keyId)continue;const S=li(E.keyId);if(dg(c,E.keyId)||E.uri.replace(/-/g,"").indexOf(d)!==-1){if(h=m[S],!h)continue;if(E.pssh)break;delete m[S],E.pssh=new Uint8Array(i),E.keyId=c,h=m[d]=h.then(()=>this.generateRequestWithPreferredKeySession(p,r,i,"encrypted-event-key-match")),h.catch(x=>this.handleError(x));break}}h||this.handleError(new Error(`Key ID ${d} not encountered in playlist. Key-system sessions ${f.length}.`))}).catch(l=>this.handleError(l))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(pe.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(pe.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,i=t==null?void 0:t[e];if(i)return i.licenseUrl;if(e===Lr.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t==null?void 0:t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(l,u,c)=>!!l&&c.indexOf(l)===u,i=t.map(l=>l.audioCodec).filter(r),o=t.map(l=>l.videoCodec).filter(r);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((l,u)=>{const c=d=>{const m=d.shift();this.getMediaKeysPromise(m,i,o).then(f=>l({keySystem:m,mediaKeys:f})).catch(f=>{d.length?c(d):f instanceof Yi?u(f):u(new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};c(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return KP===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,t)}getMediaKeysPromise(e,t,r){var i;const o=pY(e,t,r,this.config.drmSystemOptions||{});let l=this.keySystemAccessPromises[e],u=(i=l)==null?void 0:i.keySystemAccess;if(!u){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Sr(o)}`),u=this.requestMediaKeySystemAccess(e,o);const c=l=this.keySystemAccessPromises[e]={keySystemAccess:u};return u.catch(d=>{this.log(`Failed to obtain access to key-system "${e}": ${d}`)}),u.then(d=>{this.log(`Access for key-system "${d.keySystem}" obtained`);const m=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const f=c.mediaKeys=d.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),c.hasMediaKeys=!0,m.then(g=>g?this.setMediaKeysServerCertificate(h,e,g):h)));return f.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),f})}return u.then(()=>l.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${li(e.keyId||[])} keyUri: ${e.uri}`);const i=r.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),i=Uh(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,o,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyId ${li(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>$y(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:r})=>this.attemptSetMediaKeys(t,r))}selectKeySystem(e){return new Promise((t,r)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const o=$y(i);o?t(o):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=hd(this.config),r=e.map(mm).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(r)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let r=0;r<t.length;r++){const i=FW(e,t[r]);if(i)return i}}loadKey(e){const t=e.keyInfo.decryptdata,r=Uh(t),i=this.bannedKeyIds[r];if(i||this.getKeyStatus(t)==="internal-error"){const u=MA(i||"internal-error",t);return this.handleError(u,e.frag),Promise.reject(u)}const o=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${o}`);const l=this.keyIdToKeySessionPromise[r];if(!l){const u=this.getKeySystemForKeyPromise(t).then(({keySystem:c,mediaKeys:d})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${o}`),this.attemptSetMediaKeys(c,d).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:c,mediaKeys:d,decryptdata:t}))))).then(c=>{const d="cenc",m=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(c,d,m,"playlist-key")});return u.catch(c=>this.handleError(c,e.frag)),this.keyIdToKeySessionPromise[r]=u,u}return l.catch(u=>{if(u instanceof Yi){const c=gr({},u.data);this.getKeyStatus(t)==="internal-error"&&(c.decryptdata=t);const d=new Yi(c,u.message);this.handleError(d,e.frag)}}),l}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Yi){t&&(e.data.frag=t);const r=e.data.decryptdata;this.error(`${e.message}${r?` (${li(r.keyId||[])})`:""}`),this.hls.trigger(pe.ERROR,e.data)}else this.error(e.message),this.hls.trigger(pe.ERROR,{type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Uh(e),r=this.keyIdToKeySessionPromise[t];if(!r){const i=mm(e.keyFormat),o=i?[i]:hd(this.config);return this.attemptKeySystemAccess(o)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=hd(this.config)),e.length===0)throw new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Sr({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>this.media?this.media.setMediaKeys(t):new Promise((o,l)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return l(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(o).catch(l)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>r.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,r,i){var o;const l=(o=this.config.drmSystems)==null||(o=o[e.keySystem])==null?void 0:o.generateRequest;if(l)try{const p=l.call(this.hls,t,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,r=p.initData?p.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=Uh(e.decryptdata),c=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${u} URI: ${c} (init data type: ${t} length: ${r.byteLength})`);const d=new ET,m=e._onmessage=p=>{const E=e.mediaKeysSession;if(!E){d.emit("error",new Error("invalid state"));return}const{messageType:S,message:x}=p;this.log(`"${S}" message event for session "${E.sessionId}" message size: ${x.byteLength}`),S==="license-request"||S==="license-renewal"?this.renewLicense(e,x).catch(_=>{d.eventNames().length?d.emit("error",_):this.handleError(_)}):S==="license-release"?e.keySystem===Lr.FAIRPLAY&&this.updateKeySession(e,eb("acknowledged")).then(()=>this.removeSession(e)).catch(_=>this.handleError(_)):this.warn(`unhandled media key message type "${S}"`)},f=(p,E)=>{E.keyStatus=p;let S;p.startsWith("usable")?d.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?S=MA(p,E.decryptdata):p==="expired"?S=new Error(`key expired (keyId: ${u})`):p==="released"?S=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${u})`),S&&(d.eventNames().length?d.emit("error",S):this.handleError(S))},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}const S=this.getKeyStatuses(e);if(!Object.keys(S).some(z=>S[z]!=="status-pending"))return;if(S[u]==="expired"){this.log(`Expired key ${Sr(S)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let _=S[u];if(_)f(_,e);else{var A;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(A=e.keyStatusTimeouts)[u]||(A[u]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const ie=this.getKeyStatus(e.decryptdata);if(ie&&ie!=="status-pending")return this.log(`No status for keyId ${u} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${ie} from other session.`),f(ie,e);this.log(`key status for ${u} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),_="internal-error",f(_,e)},1e3)),this.log(`No status for keyId ${u} (${Sr(S)}).`)}};Ii(e.mediaKeysSession,"message",m),Ii(e.mediaKeysSession,"keystatuseschange",h);const g=new Promise((p,E)=>{d.on("error",E),d.on("resolved",p)});return e.mediaKeysSession.generateRequest(t,r).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${u} URI: ${c}`)}).catch(p=>{throw new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>g).catch(p=>(d.removeAllListeners(),this.removeSession(e).then(()=>{throw p}))).then(()=>(d.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((r,i)=>{if(typeof i=="string"&&typeof r=="object"){const u=i;i=r,r=u}const o="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===Lr.PLAYREADY&&o.length===16){const u=li(o);t[u]=r,HP(o)}const l=li(o);r==="internal-error"&&(this.bannedKeyIds[l]=r),this.log(`key status change "${r}" for keyStatuses keyId: ${l} key-session "${e.mediaKeysSession.sessionId}"`),t[l]=r}),t}fetchServerCertificate(e){const t=this.config,r=t.loader,i=new r(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,u)=>{const c={responseType:"arraybuffer",url:o},d=t.certLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{l(h.data)},onError:(h,g,p,E)=>{u(new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:gr({url:c.url,data:void 0},h)},`"${e}" certificate request failed (${o}). Status: ${h.code} (${h.text})`))},onTimeout:(h,g,p)=>{u(new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(h,g,p)=>{u(new Error("aborted"))}};i.load(c,m,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((i,o)=>{e.setServerCertificate(r).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${r.byteLength}) on "${t}"`),i(e)}).catch(l=>{o(new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(r,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let m;for(let f=0,h=o.length;f<h;f++){var l,u;m=o[f];const g=(l=m.querySelector("name"))==null?void 0:l.textContent,p=(u=m.querySelector("value"))==null?void 0:u.textContent;g&&p&&e.setRequestHeader(g,p)}}const c=i.querySelector("Challenge"),d=c==null?void 0:c.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return eb(atob(d))}setupLicenseXHR(e,t,r,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,r,i)}).catch(l=>{if(!r.decryptdata)throw l;return e.open("POST",t,!0),o.call(this.hls,e,t,r,i)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const u=new XMLHttpRequest;u.responseType="arraybuffer",u.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(u.readyState===4)if(u.status===200){this._requestLicenseFailureCount=0;let c=u.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const d=this.config.licenseResponseCallback;if(d)try{c=d.call(this.hls,u,l,e)}catch(m){this.error(m)}i(c)}else{const c=r.errorRetry,d=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||u.status>=400&&u.status<500)o(new Yi({type:Nn.KEY_SYSTEM_ERROR,details:pt.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:u,response:{url:l,data:void 0,code:u.status,text:u.statusText}},`License Request XHR failed (${l}). Status: ${u.status} (${u.statusText})`));else{const m=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${m} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=u,this.setupLicenseXHR(u,l,e,t).then(({xhr:c,licenseChallenge:d})=>{e.keySystem==Lr.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(c,d)),c.send(d)}).catch(o)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,Ii(r,"encrypted",this.onMediaEncrypted),Ii(r,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=r.mediaKeys}onMediaDetached(){const e=this.media;e&&($i(e,"encrypted",this.onMediaEncrypted),$i(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const r=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Vo.clearKeyUriToKeyIdMap();const o=i.length;Xu.CDMCleanupPromise=Promise.all(i.map(l=>this.removeSession(l)).concat((r==null||(e=r.setMediaKeys(null))==null?void 0:e.catch(l=>{this.log(`Could not clear media keys: ${l}`),this.hls&&this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${l}`)})}))||Promise.resolve())).catch(l=>{this.log(`Could not close sessions and clear media keys: ${l}`),this.hls&&this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${l}`)})}).then(()=>{o&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r,decryptdata:i}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${li((i==null?void 0:i.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const o=this.mediaKeySessions.indexOf(e);o>-1&&this.mediaKeySessions.splice(o,1);const{keyStatusTimeouts:l}=e;l&&Object.keys(l).forEach(d=>self.clearTimeout(l[d]));const{drmSystemOptions:u}=this.config;return(vY(u)?new Promise((d,m)=>{self.setTimeout(()=>m(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(d).catch(m)}):Promise.resolve()).catch(d=>{this.log(`Could not remove session: ${d}`),this.hls&&this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${d}`)})}).then(()=>t.close()).catch(d=>{this.log(`Could not close session: ${d}`),this.hls&&this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${d}`)})})}return Promise.resolve()}}Xu.CDMCleanupPromise=void 0;function Uh(n){if(!n)throw new Error("Could not read keyId of undefined decryptdata");if(n.keyId===null)throw new Error("keyId is null");return li(n.keyId)}function FW(n,e){if(n.keyId&&e.mediaKeysSession.keyStatuses.has(n.keyId))return e.mediaKeysSession.keyStatuses.get(n.keyId);if(n.matches(e.decryptdata))return e.keyStatus}class Yi extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function MA(n,e){const t=n==="output-restricted",r=t?pt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:pt.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Yi({type:Nn.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${n}"`)}class zW{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,l=r-this.lastDroppedFrames,u=t-this.lastDecodedFrames,c=1e3*l/o,d=this.hls;if(d.trigger(pe.FPS_DROP,{currentDropped:l,currentDecoded:u,totalDroppedFrames:r}),c>0&&l>d.config.fpsDroppedMonitoringThreshold*u){let m=d.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+m),m>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=m)&&(m=m-1,d.trigger(pe.FPS_DROP_LEVEL_CAPPING,{level:m,droppedLevel:d.currentLevel}),d.autoLevelCapping=m,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function FM(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function zM(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){pr.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){pr.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function zu(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let r=n.cues.length;r--;)e&&n.cues[r].removeEventListener("enter",e),n.removeCue(n.cues[r]);t==="disabled"&&(n.mode=t)}function ub(n,e,t,r){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const o=jW(n.cues,e,t);for(let l=0;l<o.length;l++)(!r||r(o[l]))&&n.removeCue(o[l])}i==="disabled"&&(n.mode=i)}function UW(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let r=0,i=t,o;for(;r<=i;)if(o=Math.floor((i+r)/2),e<n[o].startTime)i=o-1;else if(e>n[o].startTime&&r<t)r=o+1;else return o;return n[r].startTime-e<e-n[i].startTime?r:i}function jW(n,e,t){const r=[],i=UW(n,e);if(i>-1)for(let o=i,l=n.length;o<l;o++){const u=n[o];if(u.startTime>=e&&u.endTime<=t)r.push(u);else if(u.startTime>t)return r}return r}function vm(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(n[t])}return e}class BW extends IT{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const r=vm(this.media.textTracks);for(let o=0;o<r.length;o++)if(r[o].mode==="hidden")t=r[o];else if(r[o].mode==="showing"){t=r[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;vm(r.textTracks).forEach(l=>{zu(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,l=this.tracksInGroup[r];if(!l||l.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${l==null?void 0:l.groupId}`);return}const u=l.details;l.details=t.details,this.log(`Subtitle track ${r} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(l=>(i==null?void 0:i.indexOf(l))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(m=>!r||r.indexOf(m.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(m=>m.default)&&(this.selectDefaultTrack=!1),l.forEach((m,f)=>{m.id=f});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const u=this.hls.config.subtitlePreference;if(!o&&u){this.selectDefaultTrack=!1;const m=bs(u,l);if(m>-1)o=l[m];else{const f=bs(u,this.tracks);o=this.tracks[f]}}let c=this.findTrackId(o);c===-1&&o&&(c=this.findTrackId(null));const d={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(pe.SUBTITLE_TRACKS_UPDATED,d),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(r&&!o.default||!r&&!e)&&(!e||Ol(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(cf(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(cf(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(ab(i,e))return r}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Zn.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&Ol(e,r))return r;const i=bs(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(r)return null;{const o=bs(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),l=e.details,u=l==null?void 0:l.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${o}`),this.hls.trigger(pe.SUBTITLE_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=vm(e.textTracks),r=this.currentTrack;let i;if(r&&(i=t.filter(o=>ab(r,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!gn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:l,groupId:u="",name:c,type:d,url:m}=i;this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:l,groupId:u,name:c,type:d,url:m});const f=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(f)}}function $W(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}function Ad(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const Zu=.025;let gg=function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n}({});function qW(n,e,t){return`${n.identifier}-${t+1}-${Ad(e)}`}class GW{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Xy(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,r=Xy(t,e);return t-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=gn(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Xy(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Zu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?gg.Range:gg.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return HW(this)}}function Xy(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<Zu)?e.start:e.start+e.duration}function UM(n,e,t){const r=new self.URL(n,t);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function Zy(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function HW(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function wu(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class VW{constructor(e,t,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(pe.PLAYOUT_LIMIT_REACHED,{})};const o=this.hls=new e(t);this.interstitial=r,this.assetItem=i;const l=()=>{this.hasDetails=!0};o.once(pe.LEVEL_LOADED,l),o.once(pe.AUDIO_TRACK_LOADED,l),o.once(pe.SUBTITLE_TRACK_LOADED,l),o.on(pe.MEDIA_ATTACHING,(u,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&(c.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&o.on(pe.BUFFER_APPENDED,()=>{const m=this.bufferedEnd;this.reachedPlayout(m)&&(this._bufferedEosTime=m,o.trigger(pe.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=UM(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const r=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,o=qn.bufferInfo(e,i,0);return this.getAssetTime(o.end)>=r-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=qn.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const r=t-this.startOffset;if(r>0&&r<e)return r}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=r=>delete r.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,r){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,r){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${wu(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const OA=.033;class KW extends Aa{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(t===void 0&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&(o=i[r])!=null&&o.event;){var o;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let i=0;i<r.length;i++){let o=r[i];if(t&&t!=="primary"&&(o=o[t]),e===o.start||e>o.start&&e<o.end)return i}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let i=e;i<=t&&r[i];i++){const o=r[i].event;if(o!=null&&o.restrictions.jump&&!o.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var r;if(((r=t[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,t){const r=e.assetList,i=r.length;if(i>1)for(let o=0;o<i;o++){const l=r[o];if(!l.error){const u=l.timelineStart;if(t===u||t>u&&(t<u+(l.duration||0)||o===i-1))return o}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const r=t.assetList,i=r[r.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:i}=r,o=this.events,l=this.parseDateRanges(i,{url:r.url},t),u=Object.keys(i),c=o?o.filter(d=>!u.includes(d.identifier)):[];l.length&&l.sort((d,m)=>{const f=d.cue.pre,h=d.cue.post,g=m.cue.pre,p=m.cue.post;if(f&&!g)return-1;if(g&&!f||h&&!p)return 1;if(p&&!h)return-1;if(!f&&!g&&!h&&!p){const E=d.startTime,S=m.startTime;if(E!==S)return E-S}return d.dateRange.tagOrder-m.dateRange.tagOrder}),this.events=l,c.forEach(d=>{this.removeEvent(d)}),this.updateSchedule(e,c)}updateSchedule(e,t=[],r=!1){const i=this.events||[];if(i.length||t.length||this.length<2){const o=this.items,l=this.parseSchedule(i,e);(r||t.length||(o==null?void 0:o.length)!==l.length||l.some((c,d)=>Math.abs(c.playout.start-o[d].playout.start)>.005||Math.abs(c.playout.end-o[d].playout.end)>.005))&&(this.items=l,this.onScheduleUpdate(t,o))}}parseDateRanges(e,t,r){const i=[],o=Object.keys(e);for(let l=0;l<o.length;l++){const u=o[l],c=e[u];if(c.isInterstitial){let d=this.eventMap[u];d?d.setDateRange(c):(d=new GW(c,t),this.eventMap[u]=d,r===!1&&(d.appendInPlace=r)),i.push(d)}}return i}parseSchedule(e,t){const r=[],i=t.main.details,o=i.live?1/0:i.edge;let l=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,t);let c=0,d=0;if(e.forEach((m,f)=>{const h=m.cue.pre,g=m.cue.post,p=e[f-1]||null,E=m.appendInPlace,S=g?o:m.startOffset,x=m.duration,_=m.timelineOccupancy===gg.Range?x:0,A=m.resumptionOffset,z=(p==null?void 0:p.startTime)===S,ie=S+m.cumulativeDuration;let he=E?ie+x:S+A;if(h||!g&&S<=0){const U=d;d+=_,m.timelineStart=ie;const ce=l;l+=x,r.push({event:m,start:ie,end:he,playout:{start:ce,end:l},integrated:{start:U,end:d}})}else if(S<=o){if(!z){const de=S-c;if(de>OA){const _e=c,je=d;d+=de;const Se=l;l+=de;const ze={previousEvent:e[f-1]||null,nextEvent:m,start:_e,end:_e+de,playout:{start:Se,end:l},integrated:{start:je,end:d}};r.push(ze)}else de>0&&p&&(p.cumulativeDuration+=de,r[r.length-1].end=S)}g&&(he=ie),m.timelineStart=ie;const U=d;d+=_;const ce=l;l+=x,r.push({event:m,start:ie,end:he,playout:{start:ce,end:l},integrated:{start:U,end:d}})}else return;const P=m.resumeTime;g||P>o?c=o:c=P}),c<o){var u;const m=c,f=d,h=o-c;d+=h;const g=l;l+=h,r.push({previousEvent:((u=r[r.length-1])==null?void 0:u.event)||null,nextEvent:null,start:c,end:m+h,playout:{start:g,end:l},integrated:{start:f,end:d}})}this.setDurations(o,l,d)}else r.push({previousEvent:null,nextEvent:null,start:0,end:o,playout:{start:0,end:o},integrated:{start:0,end:o}}),this.setDurations(o,o,o);return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,i=r.live?1/0:r.edge;let o=0,l=-1;e.forEach((u,c)=>{const d=u.cue.pre,m=u.cue.post,f=d?0:m?i:u.startTime;this.updateAssetDurations(u),l===f?u.cumulativeDuration=o:(o=0,l=f),!m&&u.snapOptions.in&&(u.resumeAnchor=Wl(null,r.fragments,u.startOffset+u.resumptionOffset,0,0)||void 0),u.appendInPlace&&!u.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(u,t)||(u.appendInPlace=!1)),!u.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<OA&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${u}`));const g=gn(u.resumeOffset)?u.resumeOffset:u.duration;o+=g})}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>Zu?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):!Object.keys(t).some(l=>{const u=t[l].details,c=u.edge;if(r>=c)return this.log(`"${e.identifier}" resumption ${r} past ${l} playlist end ${c}`),!1;const d=Wl(null,u.fragments,r);if(!d)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${l} playlist (${u.fragStart}-${u.fragmentEnd})`),!0;const m=l==="audio"?.175:0;return Math.abs(d.start-r)<Zu+m||Math.abs(d.end-r)<Zu+m?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${l} fragment bounds (${d.start}-${d.end} sn: ${d.sn} cc: ${d.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,i=!1,o=!1;for(let l=0;l<e.assetList.length;l++){const u=e.assetList[l],c=t+r;u.startOffset=r,u.timelineStart=c,i||(i=u.duration===null),o||(o=!!u.error);const d=u.error?0:u.duration||0;r+=d}i&&!o?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ua(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class YW{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let i;try{i=UM(r,this.hls.sessionId,e.baseUrl)}catch(h){const g=this.assignAssetListError(e,pt.ASSET_LIST_LOAD_ERROR,h,r);this.hls.trigger(pe.ERROR,g);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const o=this.hls.config,l=o.loader,u=new l(o),c={responseType:"json",url:i.href},d=o.interstitialAssetListLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{const S=h.data,x=S==null?void 0:S.ASSETS;if(!Array.isArray(x)){const _=this.assignAssetListError(e,pt.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,g,E);this.hls.trigger(pe.ERROR,_);return}e.assetListResponse=S,this.hls.trigger(pe.ASSET_LIST_LOADED,{event:e,assetListResponse:S,networkDetails:E})},onError:(h,g,p,E)=>{const S=this.assignAssetListError(e,pt.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${g.url})`),g.url,E,p);this.hls.trigger(pe.ERROR,S)},onTimeout:(h,g,p)=>{const E=this.assignAssetListError(e,pt.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${g.url})`),g.url,h,p);this.hls.trigger(pe.ERROR,E)}};return u.load(c,m,f),this.hls.trigger(pe.ASSET_LIST_LOADING,{event:e}),u}assignAssetListError(e,t,r,i,o,l){return e.error=r,{type:Nn.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:r,networkDetails:l,stats:o}}}function FA(n){var e;n==null||(e=n.play())==null||e.catch(()=>{})}function jh(n,e){return`[${n}] Advancing timeline position to ${e}`}class WW extends Aa{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled||!this.schedule)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const l=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const u=this.playingItem;if(!u){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(!0),this.checkBuffer(),l&&r<u.start||r>=u.end){var c;const g=this.findItemIndex(u);let p=this.schedule.findItemIndexAtTime(r);if(p===-1&&(p=g+(l?-1:1),this.log(`seeked ${l?"back ":""}to position not covered by schedule ${r} (resolving from ${g} to ${p})`)),!this.isInterstitial(u)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!l&&p>g){const E=this.schedule.findJumpRestrictedIndex(g+1,p);if(E>g){this.setSchedulePosition(E);return}}this.setSchedulePosition(p);return}const d=this.playingAsset;if(!d){if(this.playingLastItem&&this.isInterstitial(u)){const g=u.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,g))}return}const m=d.timelineStart,f=d.duration||0;if(l&&r<m||r>=m+f){var h;(h=u.event)!=null&&h.appendInPlace&&(this.clearAssetPlayers(u.event,u),this.flushFrontBuffer(r)),this.setScheduleToAssetAtTime(r,d)}},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const u=this.findItemIndex(i);this.setSchedulePosition(u+1)}const o=this.playingAsset;if(!o)return;const l=o.timelineStart+(o.duration||0);r>=l&&this.setScheduleToAssetAtTime(r,o)},this.onScheduleUpdate=(r,i)=>{const o=this.schedule;if(!o)return;const l=this.playingItem,u=o.events||[],c=o.items||[],d=o.durations,m=r.map(E=>E.identifier),f=!!(u.length||m.length);(f||i)&&this.log(`INTERSTITIALS_UPDATED (${u.length}): ${u}
Schedule: ${c.map(E=>Ua(E))} pos: ${this.timelinePos}`),m.length&&this.log(`Removed events ${m}`);let h=null,g=null;l&&(h=this.updateItem(l,this.timelinePos),this.itemsMatch(l,h)?this.playingItem=h:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p&&(g=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,g)?this.bufferingItem=g:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),r.forEach(E=>{E.assetList.forEach(S=>{this.clearAssetPlayer(S.identifier,null)})}),this.playerQueue.forEach(E=>{if(E.interstitial.appendInPlace){const S=E.assetItem.timelineStart,x=E.timelineOffset-S;if(x)try{E.timelineOffset=S}catch(_){Math.abs(x)>Zu&&this.warn(`${_} ("${E.assetId}" ${E.timelineOffset}->${S})`)}}}),f||i){if(this.hls.trigger(pe.INTERSTITIALS_UPDATED,{events:u.slice(0),schedule:c.slice(0),durations:d,removedIds:m}),this.isInterstitial(l)&&m.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}l&&this.trimInPlace(h,l),p&&g!==h&&this.trimInPlace(g,p),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new YW(e),this.schedule=new KW(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(pe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(pe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(pe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(pe.MEDIA_ENDED,this.onMediaEnded,this),e.on(pe.ERROR,this.onError,this),e.on(pe.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(pe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(pe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(pe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(pe.MEDIA_ENDED,this.onMediaEnded,this),e.off(pe.ERROR,this.onError,this),e.off(pe.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){$i(e,"play",this.onPlay),$i(e,"pause",this.onPause),$i(e,"seeking",this.onSeeking),$i(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;Ii(r,"seeking",this.onSeeking),Ii(r,"timeupdate",this.onTimeupdate),Ii(r,"play",this.onPlay),Ii(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const o=this.findItemIndex(r);this.setSchedulePosition(o)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const o=this.getBufferingPlayer();o&&(this.log(`Removing schedule state for detachedData and ${o}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,o.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=f=>f&&e.getAssetPlayer(f.identifier),i=(f,h,g,p,E)=>{if(f){let S=f[h].start;const x=f.event;if(x){if(h==="playout"||x.timelineOccupancy!==gg.Point){const _=r(g);(_==null?void 0:_.interstitial)===x&&(S+=_.assetItem.startOffset+_[E])}}else{const _=p==="bufferedPos"?l():e[p];S+=_-f.start}return S}return 0},o=(f,h)=>{var g;if(f!==0&&h!=="primary"&&(g=e.schedule)!=null&&g.length){var p;const E=e.schedule.findItemIndexAtTime(f),S=(p=e.schedule.items)==null?void 0:p[E];if(S){const x=S[h].start-S.start;return f+x}}return f},l=()=>{const f=e.bufferedPos;return f===Number.MAX_VALUE?u("primary"):Math.max(f,0)},u=f=>{var h,g;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:((g=e.schedule)==null?void 0:g.durations[f])||0},c=(f,h)=>{var g,p;const E=e.effectivePlayingItem;if(E!=null&&(g=E.event)!=null&&g.restrictions.skip||!e.schedule)return;e.log(`seek to ${f} "${h}"`);const S=e.effectivePlayingItem,x=e.schedule.findItemIndexAtTime(f,h),_=(p=e.schedule.items)==null?void 0:p[x],A=e.getBufferingPlayer(),z=A==null?void 0:A.interstitial,ie=z==null?void 0:z.appendInPlace,he=S&&e.itemsMatch(S,_);if(S&&(ie||he)){const P=r(e.playingAsset),U=(P==null?void 0:P.media)||e.primaryMedia;if(U){const ce=h==="primary"?U.currentTime:i(S,h,e.playingAsset,"timelinePos","currentTime"),de=f-ce,_e=(ie?ce:U.currentTime)+de;if(_e>=0&&(!P||ie||_e<=P.duration)){U.currentTime=_e;return}}}if(_){let P=f;if(h!=="primary"){const ce=_[h].start,de=f-ce;P=_.start+de}const U=!e.isInterstitial(_);if((!e.isInterstitial(S)||S.event.appendInPlace)&&(U||_.event.appendInPlace)){const ce=e.media||(ie?A==null?void 0:A.media:null);ce&&(ce.currentTime=P)}else if(S){const ce=e.findItemIndex(S);if(x>ce){const _e=e.schedule.findJumpRestrictedIndex(ce+1,x);if(_e>ce){e.setSchedulePosition(_e);return}}let de=0;if(U)e.timelinePos=P,e.checkBuffer();else{const _e=_.event.assetList,je=f-(_[h]||_).start;for(let Se=_e.length;Se--;){const ze=_e[Se];if(ze.duration&&je>=ze.startOffset&&je<ze.startOffset+ze.duration){de=Se;break}}}e.setSchedulePosition(x,de)}}},d=()=>{const f=e.effectivePlayingItem;if(e.isInterstitial(f))return f;const h=t();return e.isInterstitial(h)?h:null},m={get bufferedEnd(){const f=t(),h=e.bufferingItem;if(h&&h===f){var g;return i(h,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-h.playout.start||((g=e.bufferingAsset)==null?void 0:g.startOffset)||0}return 0},get currentTime(){const f=d(),h=e.effectivePlayingItem;return h&&h===f?i(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(f){const h=d(),g=e.effectivePlayingItem;g&&g===h&&c(f+g.playout.start,"playout")},get duration(){const f=d();return f?f.playout.end-f.playout.start:0},get assetPlayers(){var f;const h=(f=d())==null?void 0:f.event.assetList;return h?h.map(g=>e.getAssetPlayer(g.identifier)):[]},get playingIndex(){var f;const h=(f=d())==null?void 0:f.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return d()}};return this.manager={get events(){var f;return((f=e.schedule)==null||(f=f.events)==null?void 0:f.slice(0))||[]},get schedule(){var f;return((f=e.schedule)==null||(f=f.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return d()?m:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const f=t();return e.findItemIndex(f)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const f=e.effectivePlayingItem;return e.findItemIndex(f)},primary:{get bufferedEnd(){return l()},get currentTime(){const f=e.timelinePos;return f>0?f:0},set currentTime(f){c(f,"primary")},get duration(){return u("primary")},get seekableStart(){var f;return((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(f){c(f,"integrated")},get duration(){return u("integrated")},get seekableStart(){var f;return o(((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0,"integrated")}},skip:()=>{const f=e.effectivePlayingItem,h=f==null?void 0:f.event;if(h&&!h.restrictions.skip){const g=e.findItemIndex(f);if(h.appendInPlace){const p=f.playout.start+f.event.duration;c(p+.001,"playout")}else e.advanceAfterAssetEnded(h,g,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!r?!1:this.findItemIndex(t)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const o=(t=i)==null?void 0:t.currentTime;if(!(o===void 0||!gn(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const o=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Sr(o)}`),this.detachedData=o}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var r,i;if(e.media===t)return;let o=null;const l=this.hls,u=e!==l,c=u&&e.interstitial.appendInPlace,d=(r=this.detachedData)==null?void 0:r.mediaSource;let m;if(l.media)c&&(o=l.transferMedia(),this.detachedData=o),m="Primary";else if(d){const p=this.getBufferingPlayer();p?(o=p.transferMedia(),m=`${p}`):m="detached MediaSource"}else m="detached media";if(!o){if(d)o=this.detachedData,this.log(`using detachedData: MediaSource ${Sr(o)}`);else if(!this.detachedData||l.media===t){const p=this.playerQueue;p.length>1&&p.forEach(E=>{if(u&&E.interstitial.appendInPlace!==c){const S=E.interstitial;this.clearInterstitial(E.interstitial,null),S.appendInPlace=!1,S.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${S}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const f=o&&"mediaSource"in o&&((i=o.mediaSource)==null?void 0:i.readyState)!=="closed",h=f&&o?o:t;this.log(`${f?"transfering MediaSource":"attaching media"} to ${u?e:"Primary"} from ${m} (media.currentTime: ${t.currentTime})`);const g=this.schedule;if(h===o&&g){const p=u&&e.assetId===g.assetIdAtEnd;h.overrides={duration:g.duration,endOfStream:!u||p,cueRemoval:!u}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const o=this.hls.startPosition;if(this.log(jh("checkStart",o)),this.timelinePos=o,t.length&&t[0].cue.pre){const l=e.findEventIndex(t[0].identifier);this.setSchedulePosition(l)}else if(o>=0||!this.primaryLive){const l=this.timelinePos=o>0?o:0,u=e.findItemIndexAtTime(l);this.setSchedulePosition(u)}}else if(i&&!this.playingItem){const o=e.findItemIndex(i);this.setSchedulePosition(o)}}advanceAssetBuffering(e,t){const r=e.event,i=r.findAssetIndex(t),o=Zy(r,i);if(!r.isAssetPastPlayoutLimit(o))this.bufferedToEvent(e,o);else if(this.schedule){var l;const u=(l=this.schedule.items)==null?void 0:l[this.findItemIndex(e)+1];u&&this.bufferedToItem(u)}}advanceAfterAssetEnded(e,t,r){const i=Zy(e,r);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const o=this.schedule.items;if(o){const l=t+1,u=o.length;if(l>=u){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.log(jh("advanceAfterAssetEnded",c)),this.timelinePos=c,e.appendInPlace&&this.advanceInPlace(c),this.checkBuffer(this.bufferedPos<c)),this.setSchedulePosition(l)}}}else{if(e.appendInPlace){const o=e.assetList[i];o&&this.advanceInPlace(o.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const r=this.schedule;if(!r)return;const i=t.parentIdentifier,o=r.getEvent(i);if(o){const l=r.findEventIndex(i),u=r.findAssetIndex(o,e);this.advanceAfterAssetEnded(o,l,u-1)}}setSchedulePosition(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(!i||this.playbackDisabled)return;const o=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${o&&Ua(o)}) pos: ${this.timelinePos}`);const l=this.waitingItem||this.playingItem,u=this.playingLastItem;if(this.isInterstitial(l)){const m=l.event,f=this.playingAsset,h=f==null?void 0:f.identifier,g=h?this.getAssetPlayer(h):null;if(g&&h&&(!this.eventItemsMatch(l,o)||t!==void 0&&h!==m.assetList[t].identifier)){var c;const p=m.findAssetIndex(f);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${m.assetList.length} ${wu(f)}`),this.endedAsset=f,this.playingAsset=null,this.hls.trigger(pe.INTERSTITIAL_ASSET_ENDED,{asset:f,assetListIndex:p,event:m,schedule:i.slice(0),scheduleIndex:e,player:g}),l!==this.playingItem){this.itemsMatch(l,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(m,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(h,o),g.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(l,o)&&(this.endedItem=l,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${m} ${Ua(l)}`),m.hasPlayed=!0,this.hls.trigger(pe.INTERSTITIAL_ENDED,{event:m,schedule:i.slice(0),scheduleIndex:e}),m.cue.once)){var d;this.updateSchedule();const p=(d=this.schedule)==null?void 0:d.items;if(o&&p){const E=this.findItemIndex(o);this.advanceSchedule(E,p,t,l,u)}return}}this.advanceSchedule(e,i,t,l,u)}advanceSchedule(e,t,r,i,o){const l=this.schedule;if(!l)return;const u=t[e]||null,c=this.primaryMedia,d=this.playerQueue;if(d.length&&d.forEach(m=>{const f=m.interstitial,h=l.findEventIndex(f.identifier);(h<e||h>e+1)&&this.clearInterstitial(f,u)}),this.isInterstitial(u)){this.timelinePos=Math.min(Math.max(this.timelinePos,u.start),u.end);const m=u.event;if(r===void 0){r=l.findAssetIndex(m,this.timelinePos);const p=Zy(m,r-1);if(m.isAssetPastPlayoutLimit(p)||m.appendInPlace&&this.timelinePos===u.end){this.advanceAfterAssetEnded(m,e,r);return}r=p}const f=this.waitingItem;this.assetsBuffered(u,c)||this.setBufferingItem(u);let h=this.preloadAssets(m,r);if(this.eventItemsMatch(u,f||i)||(this.waitingItem=u,this.log(`INTERSTITIAL_STARTED ${Ua(u)} ${m.appendInPlace?"append in place":""}`),this.hls.trigger(pe.INTERSTITIAL_STARTED,{event:m,schedule:t.slice(0),scheduleIndex:e})),!m.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${m}`);return}if(m.assetListLoader&&(m.assetListLoader.destroy(),m.assetListLoader=void 0),!c){this.log(`Waiting for attachMedia to start Interstitial ${m}`);return}this.waitingItem=this.endedItem=null,this.playingItem=u;const g=m.assetList[r];if(!g){this.advanceAfterAssetEnded(m,e,r||0);return}if(h||(h=this.getAssetPlayer(g.identifier)),h===null||h.destroyed){const p=m.assetList.length;this.warn(`asset ${r+1}/${p} player destroyed ${m}`),h=this.createAssetPlayer(m,g,r),h.loadSource()}if(!this.eventItemsMatch(u,this.bufferingItem)&&m.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(h,r,t,e,c),this.shouldPlay&&FA(h.media)}else u?(this.resumePrimary(u,e,i),this.shouldPlay&&FA(this.hls.media)):o&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(l.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,r){var i,o;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ua(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let u=this.timelinePos;(u<e.start||u>=e.end)&&(u=this.getPrimaryResumption(e,t),this.log(jh("resumePrimary",u)),this.timelinePos=u),this.attachPrimary(u,e)}if(!r)return;const l=(o=this.schedule)==null?void 0:o.items;l&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ua(e)}`),this.hls.trigger(pe.INTERSTITIALS_PRIMARY_RESUMED,{schedule:l.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:qn.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const o=this.hls;o.media?this.checkBuffer():(this.transferMediaTo(o,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.log(jh("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(pe.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const r=this.hls.levels[t.level];if(!r.details)return;const i=gr(gr({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=gr(gr({},this.altSelection),{},{audio:r});return}const o=gr(gr({},i),{},{audio:r});this.mediaSelection=o}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=gr(gr({},this.altSelection),{},{subtitles:r});return}const o=gr(gr({},i),{},{subtitles:r});this.mediaSelection=o}onAudioTrackSwitching(e,t){const r=VI(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(r)))}onSubtitleTrackSwitch(e,t){const r=VI(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(r)))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const o=t[i];if(o.cue.post){var r;const l=this.schedule.findEventIndex(o.identifier),u=(r=this.schedule.items)==null?void 0:r[l];this.isInterstitial(u)&&this.eventItemsMatch(u,this.bufferingItem)&&this.bufferedToItem(u,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const r=this.findItemIndex(t);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(e&&i){const o=this.findItemIndex(e,t);return i[o]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((o,l)=>{e.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(o.identifier,null)});const r=e.end+.25,i=qn.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.log(`trim buffered interstitial ${Ua(e)} (was ${Ua(t)})`),this.attachPrimary(r,null,!0),this.flushFrontBuffer(r))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===((r=t.event)==null?void 0:r.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const r=this.mediaSelection;r&&((t=this.schedule)==null||t.updateSchedule(r,[],e))}checkBuffer(e){var t;const r=(t=this.schedule)==null?void 0:t.items;if(!r)return;const i=qn.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,r,e)}updateBufferedPos(e,t,r){const i=this.schedule,o=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],o)){this.bufferedPos=e;return}const l=this.playingItem,u=this.findItemIndex(l);let c=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var d;const m=this.findItemIndex(o),f=Math.min(m+1,t.length-1),h=t[f];if((c===-1&&o&&e>=o.end||(d=h.event)!=null&&d.appendInPlace&&e+.01>=h.start)&&(c=f),this.isInterstitial(o)){const g=o.event;if(f-u>1&&g.appendInPlace===!1||g.assetList.length===0&&g.assetListLoader)return}if(this.bufferedPos=e,c>m&&c>u)this.bufferedToItem(h);else{const g=this.primaryDetails;this.primaryLive&&g&&e>g.edge-g.targetduration&&h.start<g.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else r&&l&&!this.itemsMatch(l,o)&&(c===u?this.bufferedToItem(l):c===u+1&&this.bufferedToItem(t[c]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const o=this.getAssetPlayer(i.identifier);return!(o!=null&&o.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,t)&&r){const{items:i,events:o}=r;if(!i||!o)return t;const l=this.isInterstitial(e),u=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=u?u.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ua(e)}`+(t?` (${c.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(l){const d=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((m,f)=>{const h=this.getAssetPlayer(m.identifier);h&&(f===d&&h.loadSource(),h.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(d=>d.pauseBuffering());this.hls.trigger(pe.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:o.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,o=r.cue.once;if(i||!o){const l=this.preloadAssets(r,t);if(l!=null&&l.interstitial.appendInPlace){const u=this.primaryMedia;u&&this.bufferAssetPlayer(l,u)}}}preloadAssets(e,t){const r=e.assetUrl,i=e.assetList.length,o=i===0&&!e.assetListLoader,l=e.cue.once;if(o){const c=e.timelineStart;if(e.appendInPlace){var u;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(u=h.nextEvent)==null?void 0:u.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let d,m=0;if(!this.playingItem&&this.primaryLive&&(m=this.hls.startPosition,m===-1&&(m=this.hls.liveSyncPosition||0)),m&&!(e.cue.pre||e.cue.post)){const h=m-c;h>0&&(d=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:i} ${e}${d?` live-start: ${m} start-offset: ${d}`:""}`),r)return this.createAsset(e,0,0,c,e.duration,r);const f=this.assetListLoader.loadAssetList(e,d);f&&(e.assetListLoader=f)}else if(!l&&i){for(let d=t;d<i;d++){const m=e.assetList[d],f=this.getAssetPlayerQueueIndex(m.identifier);(f===-1||this.playerQueue[f].destroyed)&&!m.error&&this.createAssetPlayer(e,m,d)}const c=e.assetList[t];if(c){const d=this.getAssetPlayer(c.identifier);return d&&d.loadSource(),d}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r]}return null}createAsset(e,t,r,i,o,l){const u={parentIdentifier:e.identifier,identifier:qW(e,l,t),duration:o,startOffset:r,timelineStart:i,uri:l};return this.createAssetPlayer(e,u,t)}createAssetPlayer(e,t,r){const i=this.hls,o=i.userConfig;let l=o.videoPreference;const u=i.loadLevelObj||i.levels[i.currentLevel];(l||u)&&(l=br({},l),u.videoCodec&&(l.videoCodec=u.videoCodec),u.videoRange&&(l.allowedVideoRanges=[u.videoRange]));const c=i.audioTracks[i.audioTrack],d=i.subtitleTracks[i.subtitleTrack];let m=0;if(this.primaryLive||e.appendInPlace){const z=this.timelinePos-t.timelineStart;if(z>1){const ie=t.duration;ie&&z<ie&&(m=z)}}const f=t.identifier,h=gr(gr({},o),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:m,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:c||o.audioPreference,subtitlePreference:d||o.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const g=h.cmcd;g!=null&&g.sessionId&&g.contentId&&(h.cmcd=br({},g,{contentId:Ad(t.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const p=new VW(this.HlsPlayerClass,h,e,t);this.playerQueue.push(p),e.assetList[r]=t;let E=!0;const S=z=>{if(z.live){var ie;const U=new Error(`Interstitials MUST be VOD assets ${e}`),ce={fatal:!0,type:Nn.OTHER_ERROR,details:pt.INTERSTITIAL_ASSET_ITEM_ERROR,error:U},de=((ie=this.schedule)==null?void 0:ie.findEventIndex(e.identifier))||-1;this.handleAssetItemError(ce,e,de,r,U.message);return}const he=z.edge-z.fragmentStart,P=t.duration;(E||P===null||he>P)&&(E=!1,this.log(`Interstitial asset "${f}" duration change ${P} > ${he}`),t.duration=he,this.updateSchedule())};p.on(pe.LEVEL_UPDATED,(z,{details:ie})=>S(ie)),p.on(pe.LEVEL_PTS_UPDATED,(z,{details:ie})=>S(ie)),p.on(pe.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const x=(z,ie)=>{const he=this.getAssetPlayer(f);if(he&&ie.tracks){he.off(pe.BUFFER_CODECS,x),he.tracks=ie.tracks;const P=this.primaryMedia;this.bufferingAsset===he.assetItem&&P&&!he.media&&this.bufferAssetPlayer(he,P)}};p.on(pe.BUFFER_CODECS,x);const _=()=>{var z;const ie=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${ie}`),!ie||!this.schedule)return;const he=this.schedule.findEventIndex(e.identifier),P=(z=this.schedule.items)==null?void 0:z[he];this.isInterstitial(P)&&this.advanceAssetBuffering(P,t)};p.on(pe.BUFFERED_TO_END,_);const A=z=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const he=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,he,z)};return p.once(pe.MEDIA_ENDED,A(r)),p.once(pe.PLAYOUT_LIMIT_REACHED,A(1/0)),p.on(pe.ERROR,(z,ie)=>{if(!this.schedule)return;const he=this.getAssetPlayer(f);if(ie.details===pt.BUFFER_STALLED_ERROR){if(he!=null&&he.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(ie,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${ie.error} ${e}`)}),p.on(pe.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const ie=new Error(`Asset player destroyed unexpectedly ${f}`),he={fatal:!0,type:Nn.OTHER_ERROR,details:pt.INTERSTITIAL_ASSET_ITEM_ERROR,error:ie};this.handleAssetItemError(he,e,this.schedule.findEventIndex(e.identifier),r,ie.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${wu(t)}`),this.hls.trigger(pe.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:p}),p}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){const i=this.playerQueue[r];this.log(`clear ${i} toSegment: ${t&&Ua(t)}`),this.transferMediaFromPlayer(i,t),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,i,o){const{interstitial:l,assetItem:u,assetId:c}=e,d=l.assetList.length,m=this.playingAsset;this.endedAsset=null,this.playingAsset=u,(!m||m.identifier!==c)&&(m&&(this.clearAssetPlayer(m.identifier,r[i]),delete m.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${d} ${wu(u)}`),this.hls.trigger(pe.INTERSTITIAL_ASSET_STARTED,{asset:u,assetListIndex:t,event:l,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,o)}bufferAssetPlayer(e,t){var r,i;if(!this.schedule)return;const{interstitial:o,assetItem:l}=e,u=this.schedule.findEventIndex(o.identifier),c=(r=this.schedule.items)==null?void 0:r[u];if(!c)return;e.loadSource(),this.setBufferingItem(c),this.bufferingAsset=l;const d=this.getBufferingPlayer();if(d===e)return;const m=o.appendInPlace;if(m&&(d==null?void 0:d.interstitial.appendInPlace)===!1)return;const f=(d==null?void 0:d.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(m&&l!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(f&&!TP(f,e.tracks)){const h=new Error(`Asset ${wu(l)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(f)}')`),g={fatal:!0,type:Nn.OTHER_ERROR,details:pt.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},p=o.findAssetIndex(l);this.handleAssetItemError(g,o,u,p,h.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,r=this.primaryMedia;if(!t||!r)return;const i=r.currentTime,o=t.findAssetIndex(e,i),l=e.assetList[o];if(l){const u=this.getAssetPlayer(l.identifier);if(u){const c=u.currentTime||i-l.timelineStart,d=u.duration-c;if(this.warn(`Stalled at ${c} of ${c+d} in ${u} ${e} (media.currentTime: ${i})`),c&&(d/r.playbackRate<.5||u.bufferedInPlaceToEnd(r))&&u.hls){const m=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,m,o)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,r,i,o){if(e.details===pt.BUFFER_STALLED_ERROR)return;const l=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&wu(l)} ${e.error}`),!this.schedule)return;const u=(l==null?void 0:l.identifier)||"",c=this.getAssetPlayerQueueIndex(u),d=this.playerQueue[c]||null,m=this.schedule.items,f=br({},e,{fatal:!1,errorAction:Wu(!0),asset:l,assetListIndex:i,event:t,schedule:m,scheduleIndex:r,player:d});if(this.hls.trigger(pe.INTERSTITIAL_ASSET_ERROR,f),!e.fatal)return;const h=this.playingAsset,g=this.bufferingAsset,p=new Error(o);if(l&&(this.clearAssetPlayer(u,null),l.error=p),!t.assetList.some(E=>!E.error))t.error=p;else for(let E=i;E<t.assetList.length;E++)this.resetAssetPlayer(t.assetList[E].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):h&&h.identifier===u?this.advanceAfterAssetEnded(t,r,i):g&&g.identifier===u&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;let i=this.timelinePos;if(r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${i} playing: ${Ua(r)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const l=this.updateItem(r,i);this.itemsMatch(r,l)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const o=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(o)}onAssetListLoaded(e,t){var r,i;const o=t.event,l=o.identifier,u=t.assetListResponse.ASSETS;if(!((r=this.schedule)!=null&&r.hasEvent(l)))return;const c=o.timelineStart,d=o.duration;let m=0;u.forEach((E,S)=>{const x=parseFloat(E.DURATION);this.createAsset(o,S,m,c+m,x,E.URI),m+=x}),o.duration=m,this.log(`Loaded asset-list with duration: ${m} (was: ${d}) ${o}`);const f=this.waitingItem,h=(f==null?void 0:f.event.identifier)===l;this.updateSchedule();const g=(i=this.bufferingItem)==null?void 0:i.event;if(h){var p;const E=this.schedule.findEventIndex(l),S=(p=this.schedule.items)==null?void 0:p[E];if(S){if(!this.playingItem&&this.timelinePos>S.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==E){o.error=new Error(`Interstitial ${u.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${o}`),this.log(o.error.message),this.updateSchedule(!0),this.primaryFallback(o);return}this.setBufferingItem(S)}this.setSchedulePosition(E)}else if((g==null?void 0:g.identifier)===l){const E=o.assetList[0];if(E){const S=this.getAssetPlayer(E.identifier);if(g.appendInPlace){const x=this.primaryMedia;S&&x&&this.bufferAssetPlayer(S,x)}else S&&S.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case pt.ASSET_LIST_PARSING_ERROR:case pt.ASSET_LIST_LOAD_ERROR:case pt.ASSET_LIST_LOAD_TIMEOUT:{const r=t.interstitial;r&&(this.updateSchedule(!0),this.primaryFallback(r));break}case pt.BUFFER_STALLED_ERROR:{const r=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&r.event.appendInPlace){this.handleInPlaceStall(r.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const zA=500;class QW extends vT{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",Sn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Bt.IDLE,this.setInterval(zA),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:i}=t;if(this.fragContextChanged(r)||(qr(r)&&(this.fragPrevious=r),this.state=Bt.IDLE),!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let l;const u=r.start;for(let d=0;d<o.length;d++)if(u>=o[d].start&&u<=o[d].end){l=o[d];break}const c=r.start+r.duration;l?l.end=c:(l={start:u,end:c},o.push(l)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:i}=t;if(r===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(l=>{for(let u=0;u<l.length;){if(l[u].end<=o){l.shift();continue}else if(l[u].start<o)l[u].start=o;else break;u++}}),this.fragmentTracker.removeFragmentsInRange(r,o,Sn.SUBTITLE)}}onError(e,t){const r=t.frag;(r==null?void 0:r.type)===Sn.SUBTITLE&&(t.details===pt.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Bt.STOPPED&&(this.state=Bt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&wM(this.levels,t)){this.levels=t.map(r=>new sf(r));return}this.tracksBuffered=[],this.levels=t.map(r=>{const i=new sf(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Sn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Bt.STOPPED&&this.setInterval(zA)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:i,levels:o}=this,{details:l,id:u}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${u}`);return}const c=o[u];if(u>=o.length||!c)return;this.log(`Subtitle track ${u} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(l.live||(r=c.details)!=null&&r.live){if(l.deltaUpdateFailed)return;const f=this.mainDetails;if(!f){this.startFragRequested=!1;return}const h=f.fragments[0];if(!c.details)l.hasProgramDateTime&&f.hasProgramDateTime?(hg(l,f),d=l.fragmentStart):h&&(d=h.start,nb(l,d));else{var m;d=this.alignPlaylists(l,c.details,(m=this.levelLastLoaded)==null?void 0:m.details),d===0&&h&&(d=h.start,nb(l,d))}f&&!this.startFragRequested&&this.setStartPosition(f,d)}c.details=l,this.levelLastLoaded=c,u===i&&(this.hls.trigger(pe.SUBTITLE_TRACK_UPDATED,{details:l,id:u,groupId:t.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===Bt.IDLE&&(Wl(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&Qu(i.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,pT(i.method)).catch(u=>{throw o.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:t}),u}).then(u=>{const c=performance.now();o.trigger(pe.FRAG_DECRYPTED,{frag:t,payload:u,stats:{tstart:l,tdecrypt:c}})}).catch(u=>{this.warn(`${u.name}: ${u.message}`),this.state=Bt.IDLE})}}doTick(){if(!this.media){this.state=Bt.IDLE;return}if(this.state===Bt.IDLE){const{currentTrackId:e,levels:t}=this,r=t==null?void 0:t[e];if(!r||!t.length||!r.details||this.waitForLive(r))return;const{config:i}=this,o=this.getLoadPosition(),l=qn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:u,len:c}=l,d=r.details,m=this.hls.maxBufferLength+d.levelTargetDuration;if(c>m)return;const f=d.fragments,h=f.length,g=d.edge;let p=null;const E=this.fragPrevious;if(u<g){const _=i.maxFragLookUpTolerance,A=u>g-_?0:_;p=Wl(E,f,Math.max(f[0].start,u),A),!p&&E&&E.start<f[0].start&&(p=f[0])}else p=f[h-1];if(p=this.filterReplacedPrimary(p,r.details),!p)return;const S=p.sn-d.startSN,x=f[S-1];if(x&&x.cc===p.cc&&this.fragmentTracker.getState(x)===Xr.NOT_LOADED&&(p=x),this.fragmentTracker.getState(p)===Xr.NOT_LOADED){const _=this.mapToInitFragWhenRequired(p);_&&this.loadFragment(_,r,u)}}}loadFragment(e,t,r){qr(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new XW(this.tracksBuffered[this.currentTrackId]||[])}}class XW{constructor(e){this.buffered=void 0;const t=(r,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return t("end",r,e.length)},start(r){return t("start",r,e.length)}}}}const ZW={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},jM=n=>String.fromCharCode(ZW[n]||n),Ba=15,Fs=100,JW={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},e7={17:2,18:4,21:6,22:8,23:10,19:13,20:15},t7={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},n7={25:2,26:4,29:6,30:8,31:10,27:13,28:15},r7=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class i7{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r=typeof t=="function"?t():t;pr.log(`${this.time} [${e}] ${r}`)}}}const yl=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class BM{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class a7{constructor(){this.uchar=" ",this.penState=new BM}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class s7{constructor(e){this.chars=[],this.pos=0,this.currPenState=new BM,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Fs;t++)this.chars.push(new a7);this.logger=e}equals(e){for(let t=0;t<Fs;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Fs;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Fs;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Fs&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Fs)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=jM(e);if(this.pos>=Fs){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Fs;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<Fs;r++){const i=this.chars[r].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Jy{constructor(e){this.rows=[],this.currRow=Ba-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Ba;t++)this.rows.push(new s7(e));this.logger=e}reset(){for(let e=0;e<Ba;e++)this.rows[e].clear();this.currRow=Ba-1}equals(e){let t=!0;for(let r=0;r<Ba;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<Ba;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Ba;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Sr(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let u=0;u<Ba;u++)this.rows[u].clear();const o=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const u=l.rows[o].cueStartTime,c=this.logger.time;if(u!==null&&c!==null&&u<c)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(l.rows[o+d])}}this.currRow=t;const r=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,l=Math.max(o-1,0);r.setCursor(e.indent),e.color=r.chars[l].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Sr(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",i=-1;for(let o=0;o<Ba;o++){const l=this.rows[o].getTextString();l&&(i=o+1,e?t.push("Row "+i+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?r="["+t.join(" | ")+"]":r=t.join(`
`)),r}getTextAndFormat(){return this.rows}}class UA{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Jy(r),this.nonDisplayedMemory=new Jy(r),this.lastOutputScreen=new Jy(r),this.currRollUpRow=this.displayedMemory.rows[Ba-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ba-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}this.logger.log(2,"MIDROW: "+Sr(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class jA{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=l7(),this.logger=void 0;const i=this.logger=new i7;this.channels=[null,new UA(e,t,i),new UA(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const i=t[r]&127,o=t[r+1]&127;let l=!1,u=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+yl([t[r],t[r+1]])+"] -> ("+yl([i,o])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(o7(i,o,c)){Bh(null,null,c),this.logger.log(3,()=>"Repeated command ("+yl([i,o])+") is dropped");continue}Bh(i,o,this.cmdHistory),l=this.parseCmd(i,o),l||(l=this.parseMidrow(i,o)),l||(l=this.parsePAC(i,o)),l||(l=this.parseBackgroundAttributes(i,o))}else Bh(null,null,c);if(!l&&(u=this.parseChars(i,o),u)){const m=this.currentChannel;m&&m>0?this.channels[m].insertChars(u):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!u&&this.logger.log(2,()=>"Couldn't parse cleaned data "+yl([i,o])+" orig: "+yl([t[r],t[r+1]]))}}parseCmd(e,t){const r=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(r||i))return!1;const o=e===20||e===21||e===23?1:2,l=this.channels[o];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let r=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+yl([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const l=e<=23?1:2;t>=64&&t<=95?r=l===1?JW[e]:t7[e]:r=l===1?e7[e]:n7[e];const u=this.channels[l];return u?(u.setPAC(this.interpretPAC(r,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?r=t-96:r=t-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,t){let r,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&o<=19){let l;o===17?l=t+80:o===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+jM(l)+"' in channel "+r),i=[l]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+yl(i).join(",")),i}parseBackgroundAttributes(e,t){const r=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(r||i))return!1;let o;const l={};e===16||e===24?(o=Math.floor((t-32)/2),l.background=r7[o],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const u=e<=23?1:2;return this.channels[u].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Bh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function Bh(n,e,t){t.a=n,t.b=e}function o7(n,e,t){return t.a===n&&t.b===e}function l7(){return{a:null,b:null}}var CT=function(){if(fg!=null&&fg.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(u,c){if(typeof c!="string"||!Array.isArray(u))return!1;const d=c.toLowerCase();return~u.indexOf(d)?d:!1}function r(u){return t(n,u)}function i(u){return t(e,u)}function o(u,...c){let d=1;for(;d<arguments.length;d++){const m=arguments[d];for(const f in m)u[f]=m[f]}return u}function l(u,c,d){const m=this,f={enumerable:!0};m.hasBeenReset=!1;let h="",g=!1,p=u,E=c,S=d,x=null,_="",A=!0,z="auto",ie="start",he=50,P="middle",U=50,ce="middle";Object.defineProperty(m,"id",o({},f,{get:function(){return h},set:function(de){h=""+de}})),Object.defineProperty(m,"pauseOnExit",o({},f,{get:function(){return g},set:function(de){g=!!de}})),Object.defineProperty(m,"startTime",o({},f,{get:function(){return p},set:function(de){if(typeof de!="number")throw new TypeError("Start time must be set to a number.");p=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"endTime",o({},f,{get:function(){return E},set:function(de){if(typeof de!="number")throw new TypeError("End time must be set to a number.");E=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"text",o({},f,{get:function(){return S},set:function(de){S=""+de,this.hasBeenReset=!0}})),Object.defineProperty(m,"region",o({},f,{get:function(){return x},set:function(de){x=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"vertical",o({},f,{get:function(){return _},set:function(de){const _e=r(de);if(_e===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=_e,this.hasBeenReset=!0}})),Object.defineProperty(m,"snapToLines",o({},f,{get:function(){return A},set:function(de){A=!!de,this.hasBeenReset=!0}})),Object.defineProperty(m,"line",o({},f,{get:function(){return z},set:function(de){if(typeof de!="number"&&de!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");z=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"lineAlign",o({},f,{get:function(){return ie},set:function(de){const _e=i(de);if(!_e)throw new SyntaxError("An invalid or illegal string was specified.");ie=_e,this.hasBeenReset=!0}})),Object.defineProperty(m,"position",o({},f,{get:function(){return he},set:function(de){if(de<0||de>100)throw new Error("Position must be between 0 and 100.");he=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"positionAlign",o({},f,{get:function(){return P},set:function(de){const _e=i(de);if(!_e)throw new SyntaxError("An invalid or illegal string was specified.");P=_e,this.hasBeenReset=!0}})),Object.defineProperty(m,"size",o({},f,{get:function(){return U},set:function(de){if(de<0||de>100)throw new Error("Size must be between 0 and 100.");U=de,this.hasBeenReset=!0}})),Object.defineProperty(m,"align",o({},f,{get:function(){return ce},set:function(de){const _e=i(de);if(!_e)throw new SyntaxError("An invalid or illegal string was specified.");ce=_e,this.hasBeenReset=!0}})),m.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l}();class u7{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function $M(n){function e(r,i,o,l){return(r|0)*3600+(i|0)*60+(o|0)+parseFloat(l||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class c7{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function qM(n,e,t,r){const i=r?n.split(r):[n];for(const o in i){if(typeof i[o]!="string")continue;const l=i[o].split(t);if(l.length!==2)continue;const u=l[0],c=l[1];e(u,c)}}const cb=new CT(0,0,""),$h=cb.align==="middle"?"middle":"center";function d7(n,e,t){const r=n;function i(){const u=$M(n);if(u===null)throw new Error("Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),u}function o(u,c){const d=new c7;qM(u,function(h,g){let p;switch(h){case"region":for(let E=t.length-1;E>=0;E--)if(t[E].id===g){d.set(h,t[E].region);break}break;case"vertical":d.alt(h,g,["rl","lr"]);break;case"line":p=g.split(","),d.integer(h,p[0]),d.percent(h,p[0])&&d.set("snapToLines",!1),d.alt(h,p[0],["auto"]),p.length===2&&d.alt("lineAlign",p[1],["start",$h,"end"]);break;case"position":p=g.split(","),d.percent(h,p[0]),p.length===2&&d.alt("positionAlign",p[1],["start",$h,"end","line-left","line-right","auto"]);break;case"size":d.percent(h,g);break;case"align":d.alt(h,g,["start",$h,"end","left","right"]);break}},/:/,/\s/),c.region=d.get("region",null),c.vertical=d.get("vertical","");let m=d.get("line","auto");m==="auto"&&cb.line===-1&&(m=-1),c.line=m,c.lineAlign=d.get("lineAlign","start"),c.snapToLines=d.get("snapToLines",!0),c.size=d.get("size",100),c.align=d.get("align",$h);let f=d.get("position","auto");f==="auto"&&cb.position===50&&(f=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=f}function l(){n=n.replace(/^\s+/,"")}if(l(),e.startTime=i(),l(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);n=n.slice(3),l(),e.endTime=i(),l(),o(n,e)}function GM(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class f7{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new u7,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function r(){let o=t.buffer,l=0;for(o=GM(o);l<o.length&&o[l]!=="\r"&&o[l]!==`
`;)++l;const u=o.slice(0,l);return o[l]==="\r"&&++l,o[l]===`
`&&++l,t.buffer=o.slice(l),u}function i(o){qM(o,function(l,u){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=r();const u=o.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(u!=null&&u[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:o=r(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new CT(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{d7(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const u=o.indexOf("-->")!==-1;if(!o||u&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const h7=/\r\n|\n\r|\n|\r/g,ev=function(e,t,r=0){return e.slice(r,r+t.length)===t},m7=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!gn(t)||!gn(r)||!gn(i)||!gn(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*i,t+=60*60*1e3*o,t};function NT(n,e,t){return Ad(n.toString())+Ad(e.toString())+Ad(t)}const g7=function(e,t,r){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(l=o)!=null&&l.new;){var l;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=r};function p7(n,e,t,r,i,o,l){const u=new f7,c=ia(new Uint8Array(n)).trim().replace(h7,`
`).split(`
`),d=[],m=e?S9(e.baseTime,e.timescale):0;let f="00:00.000",h=0,g=0,p,E=!0;u.oncue=function(S){const x=t[r];let _=t.ccOffset;const A=(h-m)/9e4;if(x!=null&&x.new&&(g!==void 0?_=t.ccOffset=x.start:g7(t,r,A)),A){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}_=A-t.presentationOffset}const z=S.endTime-S.startTime,ie=Qi((S.startTime+_-g)*9e4,i*9e4)/9e4;S.startTime=Math.max(ie,0),S.endTime=Math.max(ie+z,0);const he=S.text.trim();S.text=decodeURIComponent(encodeURIComponent(he)),S.id||(S.id=NT(S.startTime,S.endTime,he)),S.endTime>0&&d.push(S)},u.onparsingerror=function(S){p=S},u.onflush=function(){if(p){l(p);return}o(d)},c.forEach(S=>{if(E)if(ev(S,"X-TIMESTAMP-MAP=")){E=!1,S.slice(16).split(",").forEach(x=>{ev(x,"LOCAL:")?f=x.slice(6):ev(x,"MPEGTS:")&&(h=parseInt(x.slice(7)))});try{g=m7(f)/1e3}catch(x){p=x}return}else S===""&&(E=!1);u.parse(S+`
`)}),u.flush()}const tv="stpp.ttml.im1t",HM=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,VM=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,y7={left:"start",center:"center",right:"end",start:"start",end:"end"};function BA(n,e,t,r){const i=Qn(new Uint8Array(n),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(u=>ia(u)),l=T9(e.baseTime,1,e.timescale);try{o.forEach(u=>t(v7(u,l)))}catch(u){r(u)}}function v7(n,e){const i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(o).reduce((f,h)=>(f[h]=i.getAttribute(`ttp:${h}`)||o[h],f),{}),u=i.getAttribute("xml:space")!=="preserve",c=$A(nv(i,"styling","style")),d=$A(nv(i,"layout","region")),m=nv(i,"body","[begin]");return[].map.call(m,f=>{const h=KM(f,u);if(!h||!f.hasAttribute("begin"))return null;const g=iv(f.getAttribute("begin"),l),p=iv(f.getAttribute("dur"),l);let E=iv(f.getAttribute("end"),l);if(g===null)throw qA(f);if(E===null){if(p===null)throw qA(f);E=g+p}const S=new CT(g-e,E-e,h);S.id=NT(S.startTime,S.endTime,S.text);const x=d[f.getAttribute("region")],_=c[f.getAttribute("style")],A=E7(x,_,c),{textAlign:z}=A;if(z){const ie=y7[z];ie&&(S.lineAlign=ie),S.align=z}return br(S,A),S}).filter(f=>f!==null)}function nv(n,e,t){const r=n.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function $A(n){return n.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function KM(n,e){return[].slice.call(n.childNodes).reduce((t,r,i)=>{var o;return r.nodeName==="br"&&i?t+`
`:(o=r.childNodes)!=null&&o.length?KM(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function E7(n,e,t){const r="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(i=t[l]),o.reduce((u,c)=>{const d=rv(e,r,c)||rv(n,r,c)||rv(i,r,c);return d&&(u[c]=d),u},{})}function rv(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function qA(n){return new Error(`Could not parse ttml timestamp ${n}`)}function iv(n,e){if(!n)return null;let t=$M(n);return t===null&&(HM.test(n)?t=b7(n,e):VM.test(n)&&(t=T7(n,e))),t}function b7(n,e){const t=HM.exec(n),r=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+r/e.frameRate}function T7(n,e){const t=VM.exec(n),r=Number(t[1]);switch(t[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class qh{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class S7{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=HA(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new qh(this,"textTrack1"),t=new qh(this,"textTrack2"),r=new qh(this,"textTrack3"),i=new qh(this,"textTrack4");this.cea608Parser1=new jA(1,e,t),this.cea608Parser2=new jA(3,r,i)}addCues(e,t,r,i,o){let l=!1;for(let u=o.length;u--;){const c=o[u],d=x7(c[0],c[1],t,r);if(d>=0&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],r),l=!0,d/(r-t)>.5))return}if(l||o.push([t,r]),this.config.renderTextTracksNatively){const u=this.captionsTracks[e];this.Cues.newCue(u,t,r,i)}else{const u=this.Cues.newCue(null,t,r,i);this.hls.trigger(pe.CUES_PARSED,{type:"captions",cues:u,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:l}){const{unparsedVttFrags:u}=this;r===Sn.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:o,trackId:l}),u.length&&(this.unparsedVttFrags=[],u.forEach(c=>{this.initPTS[c.frag.cc]?this.onFragLoaded(pe.FRAG_LOADED,c):this.hls.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const o=r.textTracks[i];if(GA(o,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:i}=this,{label:o,languageCode:l}=t[e],u=this.getExistingTrack(o,l);if(u)r[e]=u,zu(r[e]),FM(r[e],i);else{const c=this.createTextTrack("captions",o,l);c&&(c[e]=!0,r[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r=t.label,i={_id:e,label:r,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,r){const i=this.media;if(i)return i.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(o=>{zu(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=HA(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)zu(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],i=r.some(o=>o.textCodec===tv);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(wM(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const l=this.media,u=l?vm(l.textTracks):null;if(this.tracks.forEach((c,d)=>{let m;if(u){let f=null;for(let h=0;h<u.length;h++)if(u[h]&&GA(u[h],c)){f=u[h],u[h]=null;break}f&&(m=f)}if(m)zu(m);else{const f=YM(c);m=this.createTextTrack(f,c.name,c.lang),m&&(m.mode="disabled")}m&&this.textTracks.push(m)}),u!=null&&u.length){const c=u.filter(d=>d!==null).map(d=>d.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(u=>({label:u.name,kind:u.type.toLowerCase(),default:u.default,subtitleTrack:u}));this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const o=`textTrack${i[1]}`,l=this.captionsProperties[o];l&&(l.label=r.name,r.lang&&(l.languageCode=r.lang),l.media=r)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Sn.MAIN){var r,i;const{cea608Parser1:o,cea608Parser2:l,lastSn:u}=this,{cc:c,sn:d}=t.frag,m=(r=(i=t.part)==null?void 0:i.index)!=null?r:-1;o&&l&&(d!==u+1||d===u&&m!==this.lastPartIndex+1||c!==this.lastCc)&&(o.reset(),l.reset()),this.lastCc=c,this.lastSn=d,this.lastPartIndex=m}}onFragLoaded(e,t){const{frag:r,payload:i}=t;if(r.type===Sn.SUBTITLE)if(i.byteLength){const o=r.decryptdata,l="stats"in t;if(o==null||!o.encrypted||l){const u=this.tracks[r.level],c=this.vttCCs;c[r.cc]||(c[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),u&&u.textCodec===tv?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;BA(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:r,payload:i}=e,{initPTS:o,unparsedVttFrags:l}=this,u=o.length-1;if(!o[r.cc]&&u===-1){l.push(e);return}const c=this.hls,d=(t=r.initSegment)!=null&&t.data?wa(r.initSegment.data,new Uint8Array(i)).buffer:i;p7(d,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,m=>{this._appendCues(m,r.level),c.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},m=>{const f=m.message==="Missing initPTS for VTT MPEGTS";f?l.push(e):this._fallbackToIMSC1(r,i),c.logger.log(`Failed to parse VTT cue: ${m}`),!(f&&u>r.cc)&&c.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:m})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||BA(t,this.initPTS[e.cc],()=>{r.textCodec=tv,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>zM(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;r.trigger(pe.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===Sn.SUBTITLE&&this.onFragLoaded(pe.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=t;if(!(r.type===Sn.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<i.length;o++){const l=i[o].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const u=this.extractCea608Data(l);this.cea608Parser1.addData(i[o].pts,u[0]),this.cea608Parser2.addData(i[o].pts,u[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:i,type:o}){const{media:l}=this;if(!(!l||l.currentTime<r)){if(!o||o==="video"){const{captionsTracks:u}=this;Object.keys(u).forEach(c=>ub(u[c],t,r))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:u}=this;Object.keys(u).forEach(c=>ub(u[c],t,i))}}}extractCea608Data(e){const t=[[],[]],r=e[0]&31;let i=2;for(let o=0;o<r;o++){const l=e[i++],u=127&e[i++],c=127&e[i++];if(u===0&&c===0)continue;if((4&l)!==0){const m=3&l;(m===0||m===1)&&(t[m].push(u),t[m].push(c))}}return t}}function YM(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function GA(n,e){return!!n&&n.kind===YM(e)&&ab(e,n)}function x7(n,e,t,r){return Math.min(e,r)-Math.max(n,t)}function HA(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const w7=/\s/,_7={newCue(n,e,t,r){const i=[];let o,l,u,c,d;const m=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(o=r.rows[h],u=!0,c=0,d="",!o.isEmpty()){var f;for(let E=0;E<o.chars.length;E++)w7.test(o.chars[E].uchar)&&u?c++:(d+=o.chars[E].uchar,u=!1);o.cueStartTime=e,e===t&&(t+=1e-4),c>=16?c--:c++;const g=GM(d.trim()),p=NT(e,t,g);n!=null&&(f=n.cues)!=null&&f.getCueById(p)||(l=new m(e,t,g),l.id=p,l.line=h+1,l.align="left",l.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(l))}return n&&i.length&&(i.sort((h,g)=>h.line==="auto"||g.line==="auto"?0:h.line>8&&g.line>8?g.line-h.line:h.line-g.line),i.forEach(h=>zM(n,h))),i}};function I7(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const A7=/(\d+)-(\d+)\/(\d+)/;class VA{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||N7,this.controller=new self.AbortController,this.stats=new uT}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=R7(e,this.controller.signal),l=e.responseType==="arraybuffer",u=l?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=c&&gn(c)?c:d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(uf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(f=>{var h;this.response=this.loader=f;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},d-(g-i.loading.start)),!f.ok){const{status:E,statusText:S}=f;throw new D7(S||"fetch, bad network response",E,f)}i.loading.first=g,i.total=C7(f.headers)||i.total;const p=(h=this.callbacks)==null?void 0:h.onProgress;return p&&gn(t.highWaterMark)?this.loadProgressively(f,i,e,t.highWaterMark,p):l?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{var h,g;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const E=f[u];E&&(i.loaded=i.total=E);const S={url:p.url,data:f,code:p.status},x=(h=this.callbacks)==null?void 0:h.onProgress;x&&!gn(t.highWaterMark)&&x(i,e,f,p),(g=this.callbacks)==null||g.onSuccess(S,i,e,p)}).catch(f=>{var h;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=f&&f.code||0,p=f?f.message:null;(h=this.callbacks)==null||h.onError({code:g,text:p},e,f?f.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,i=0,o){const l=new iM,u=e.body.getReader(),c=()=>u.read().then(d=>{if(d.done)return l.dataLength&&o(t,r,l.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const m=d.value,f=m.length;return t.loaded+=f,f<i||l.dataLength?(l.push(m),l.dataLength>=i&&o(t,r,l.flush().buffer,e)):o(t,r,m.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function R7(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(br({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function k7(n){const e=A7.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function C7(n){const e=n.get("Content-Range");if(e){const r=k7(e);if(gn(r))return r}const t=n.get("Content-Length");if(t)return parseInt(t)}function N7(n,e){return new self.Request(n.url,e)}class D7 extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const L7=/^age:\s*[\d.]+\s*$/im;class WM{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new uT,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return o(r,t.url)}).catch(l=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",t.url,!0),o(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(l=>{var u;(u=this.callbacks)==null||u.onError({code:r.status,text:l.message},t,r,i)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=r.loadPolicy;if(i)for(const u in i)e.setRequestHeader(u,i[u]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=o&&gn(o)?o:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const d=t.status,m=t.responseType==="text"?t.responseText:null;if(d>=200&&d<300){const p=m??t.response;if(p!=null){var l,u;r.loading.end=Math.max(self.performance.now(),r.loading.first);const E=t.responseType==="arraybuffer"?p.byteLength:p.length;r.loaded=r.total=E,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const S=(l=this.callbacks)==null?void 0:l.onProgress;S&&S(r,e,p,t);const x={url:t.responseURL,data:p,code:d};(u=this.callbacks)==null||u.onSuccess(x,r,e,t);return}}const f=o.loadPolicy.errorRetry,h=r.retry,g={url:e.url,data:void 0,code:d};if(cg(f,h,!1,g))this.retry(f);else{var c;pr.error(`${d} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:d,text:t.statusText},e,t,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(cg(e,t,!0))this.retry(e);else{var r;pr.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=hT(e,r.retry),r.retry++,pr.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&L7.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const P7={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},M7=gr(gr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:WM,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:KK,bufferController:F9,capLevelController:AT,errorController:ZK,fpsController:zW,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:KP,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:P7},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},O7()),{},{subtitleStreamController:QW,subtitleTrackController:BW,timelineController:S7,audioStreamController:L9,audioTrackController:P9,emeController:Xu,cmcdController:PW,contentSteeringController:OW,interstitialsController:WW});function O7(){return{cueHandler:_7,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function F7(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=db(n),i=["manifest","level","frag"],o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(l=>{const u=`${l==="level"?"playlist":l}LoadPolicy`,c=e[u]===void 0,d=[];o.forEach(m=>{const f=`${l}Loading${m}`,h=e[f];if(h!==void 0&&c){d.push(f);const g=r[u].default;switch(e[u]={default:g},m){case"TimeOut":g.maxLoadTimeMs=h,g.maxTimeToFirstByteMs=h;break;case"MaxRetry":g.errorRetry.maxNumRetry=h,g.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":g.errorRetry.retryDelayMs=h,g.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=h,g.timeoutRetry.maxRetryDelayMs=h;break}}}),d.length&&t.warn(`hls.js config: "${d.join('", "')}" setting(s) are deprecated, use "${u}": ${Sr(e[u])}`)}),gr(gr({},r),e)}function db(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(db):Object.keys(n).reduce((e,t)=>(e[t]=db(n[t]),e),{}):n}function z7(n,e){const t=n.loader;t!==VA&&t!==WM?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):I7()&&(n.loader=VA,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Em=2,U7=.1,j7=.05,B7=100;class $7 extends $P{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(B7),this.mediaSource=t.mediaSource;const r=this.media=t.media;Ii(r,"playing",this.onMediaPlaying),Ii(r,"waiting",this.onMediaWaiting),Ii(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&($i(r,"playing",this.onMediaPlaying),$i(r,"waiting",this.onMediaWaiting),$i(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,i;const o=(r=this.hls)==null?void 0:r.config;if(!o)return;const l=this.media;if(!l)return;const{seeking:u}=l,c=this.seeking&&!u,d=!this.seeking&&u,m=l.paused&&!u||l.ended||l.playbackRate===0;if(this.seeking=u,e!==t){t&&(this.ended=0),this.moved=!0,u||(this.nudgeRetry=0,o.nudgeOnVideoHole&&!m&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||c){c&&this.stallResolved(e);return}if(m){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&l.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!1}));return}if(!qn.getBuffered(l).length){this.nudgeRetry=0;return}const f=qn.bufferInfo(l,e,0),h=f.nextStart||0,g=this.fragmentTracker;if(u&&g&&this.hls){const he=KA(this.hls.inFlightFragments,e),P=f.len>Em,U=!h||he||h-e>Em&&!g.getPartialFragment(e);if(P||U)return;this.moved=!1}const p=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&g){if(!(f.len>0)&&!h)return;const P=Math.max(h,f.start||0)-e,ce=!!(p!=null&&p.live)?p.targetduration*2:Em,de=Gh(e,g);if(P>0&&(P<=ce||de)){l.paused||this._trySkipBufferHole(de);return}}const E=o.detectStallWithCurrentTimeMs,S=self.performance.now(),x=this.waiting;let _=this.stalled;if(_===null)if(x>0&&S-x<E)_=this.stalled=x;else{this.stalled=S;return}const A=S-_;if(!u&&(A>=E||x)&&this.hls){var z;if(((z=this.mediaSource)==null?void 0:z.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-((p==null?void 0:p.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(pe.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(f),!this.media||!this.hls)return}const ie=qn.bufferInfo(l,e,o.maxBufferHole);this._tryFixBufferStall(ie,A,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(pe.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const o=qn.bufferedInfo(qn.timeRangesToArray(this.buffered.audio),e,0);if(o.len>1&&t>=o.start){const l=qn.timeRangesToArray(i),u=qn.bufferedInfo(l,t,0).bufferedIndex;if(u>-1&&u<l.length-1){const c=qn.bufferedInfo(l,e,0).bufferedIndex,d=l[u].end,m=l[u+1].start;if((c===-1||c>u)&&m-d<1&&e-d<2){const f=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${d} -> ${m} buffered index: ${c}`);this.warn(f.message),this.media.currentTime+=1e-6;let h=Gh(e,this.fragmentTracker);h&&"fragment"in h?h=h.fragment:h||(h=void 0);const g=qn.bufferInfo(this.media,e,0);this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:h,buffer:g.len,bufferInfo:g})}}}}}_tryFixBufferStall(e,t,r){var i,o;const{fragmentTracker:l,media:u}=this,c=(i=this.hls)==null?void 0:i.config;if(!u||!l||!c)return;const d=(o=this.hls)==null?void 0:o.latestLevelDetails,m=Gh(r,l);if((m||d!=null&&d.live&&r<d.fragmentStart)&&(this._trySkipBufferHole(m)||!this.media))return;const f=e.buffered,h=this.adjacentTraversal(e,r);(f&&f.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-r<c.maxBufferHole||h))&&(t>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const o=r.getFragAtPos(t,Sn.MAIN),l=r.getFragAtPos(i,Sn.MAIN);if(o&&l)return l.sn-o.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:i,stalled:o}=this;if(!i&&o!==null&&r&&t){this.stallReported=!0;const l=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Sr(e)})`);this.warn(l.message),t.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:e.len,bufferInfo:e,stalled:{start:o}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:i}=this,o=(t=this.hls)==null?void 0:t.config;if(!i||!r||!o)return 0;const l=i.currentTime,u=qn.bufferInfo(i,l,0),c=l<u.start?u.start:u.nextStart;if(c&&this.hls){const m=u.len<=o.maxBufferHole,f=u.len>0&&u.len<1&&i.readyState<3,h=c-l;if(h>0&&(m||f)){if(h>o.maxBufferHole){let p=!1;if(l===0){const E=r.getAppendedFrag(0,Sn.MAIN);E&&c<E.end&&(p=!0)}if(!p&&e){var d;if(!((d=this.hls.loadLevelObj)!=null&&d.details)||KA(this.hls.inFlightFragments,c))return 0;let S=!1,x=e.end;for(;x<c;){const _=Gh(x,r);if(_)x+=_.duration;else{S=!0;break}}if(S)return 0}}const g=Math.max(c+j7,l+U7);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${g}`),this.moved=!0,i.currentTime=g,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${g}`),E={type:Nn.MEDIA_ERROR,details:pt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:u.len,bufferInfo:u};e&&("fragment"in e?E.part=e:E.frag=e),this.hls.trigger(pe.ERROR,E)}return g}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:i}=this,o=t==null?void 0:t.config;if(!r||!o)return 0;const l=r.currentTime;if(this.nudgeRetry++,i<o.nudgeMaxRetry){const u=l+(i+1)*o.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${l} to ${u}`);this.warn(c.message),r.currentTime=u,t.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const u=new Error(`Playhead still not moving while enough data buffered @${l} after ${o.nudgeMaxRetry} nudges`);this.error(u.message),t.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.BUFFER_STALLED_ERROR,error:u,fatal:!0,buffer:e.len,bufferInfo:e})}}}function KA(n,e){const t=YA(n.main);if(t&&t.start<=e)return t;const r=YA(n.audio);return r&&r.start<=e?r:null}function YA(n){if(!n)return null;switch(n.state){case Bt.IDLE:case Bt.STOPPED:case Bt.ENDED:case Bt.ERROR:return null}return n.frag}function Gh(n,e){return e.getAppendedFrag(n,Sn.MAIN)||e.getPartialFragment(n)}const q7=.25;function fb(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function av(n,e,t,r,i){let o=new n(e,t,"");try{o.value=r,i&&(o.type=i)}catch{o=new n(e,t,Sr(i?gr({type:i},r):r))}return o}const Hh=(()=>{const n=fb();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class G7{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(pe.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var r;this.media=t.media,((r=t.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&zu(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if(r.kind==="metadata"&&r.label==="id3")return FM(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:i}=this.hls.config;if(!r&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=fb();if(l)for(let u=0;u<o.length;u++){const c=o[u].type;if(c===ea.emsg&&!r||!i)continue;const d=dM(o[u].data),m=o[u].pts;let f=m+o[u].duration;f>Hh&&(f=Hh),f-m<=0&&(f=m+q7);for(let g=0;g<d.length;g++){const p=d[g];if(!fM(p)){this.updateId3CueEnds(m,c);const E=av(l,m,f,p,c);E&&this.id3Track.addCue(E)}}}}updateId3CueEnds(e,t){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let o=i.length;o--;){const l=i[o];l.type===t&&l.startTime<e&&l.endTime===Hh&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:i}){const{id3Track:o,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:u,enableID3MetadataCues:c}}=l;if(o&&(u||c)){let d;i==="audio"?d=m=>m.type===ea.audioId3&&c:i==="video"?d=m=>m.type===ea.emsg&&u:d=m=>m.type===ea.audioId3&&c||m.type===ea.emsg&&u,ub(o,t,r,d)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:i,enableDateRangeMetadataCues:o,interstitialsController:l}=this.hls.config;if(!o)return;const u=fb();if(r&&i&&!l){const{fragmentStart:E,fragmentEnd:S}=e;let x=this.assetCue;x?(x.startTime=E,x.endTime=S):u&&(x=this.assetCue=av(u,E,S,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),x&&(x.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(x),x.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:c}=this,{dateRanges:d}=e,m=Object.keys(d);let f=this.dateRangeCuesAppended;if(c&&t){var h;if((h=c.cues)!=null&&h.length){const E=Object.keys(f).filter(S=>!m.includes(S));for(let S=E.length;S--;){var g;const x=E[S],_=(g=f[x])==null?void 0:g.cues;delete f[x],_&&Object.keys(_).forEach(A=>{const z=_[A];if(z){z.removeEventListener("enter",this.onEventCueEnter);try{c.removeCue(z)}catch{}}})}}else f=this.dateRangeCuesAppended={}}const p=e.fragments[e.fragments.length-1];if(!(m.length===0||!gn(p==null?void 0:p.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let E=0;E<m.length;E++){const S=m[E],x=d[S],_=x.startTime,A=f[S],z=(A==null?void 0:A.cues)||{};let ie=(A==null?void 0:A.durationKnown)||!1,he=Hh;const{duration:P,endDate:U}=x;if(U&&P!==null)he=_+P,ie=!0;else if(x.endOnNext&&!ie){const de=m.reduce((_e,je)=>{if(je!==x.id){const Se=d[je];if(Se.class===x.class&&Se.startDate>x.startDate&&(!_e||x.startDate<_e.startDate))return Se}return _e},null);de&&(he=de.startTime,ie=!0)}const ce=Object.keys(x.attr);for(let de=0;de<ce.length;de++){const _e=ce[de];if(!dY(_e))continue;const je=z[_e];if(je)ie&&!(A!=null&&A.durationKnown)?je.endTime=he:Math.abs(je.startTime-_)>.01&&(je.startTime=_,je.endTime=he);else if(u){let Se=x.attr[_e];fY(_e)&&(Se=SP(Se));const Le=av(u,_,he,{key:_e,data:Se},ea.dateRange);Le&&(Le.id=S,this.id3Track.addCue(Le),z[_e]=Le,l&&(_e==="X-ASSET-LIST"||_e==="X-ASSET-URL")&&Le.addEventListener("enter",this.onEventCueEnter))}}f[S]={cues:z,dateRange:x,durationKnown:ie}}}}}class H7{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,r=this.levelDetails;if(!t||!r)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:o,maxLiveSyncPlaybackRate:l}=this.config;if(!o||l===1||!r.live)return;const u=this.targetLatency;if(u===null)return;const c=i-u,d=Math.min(this.maxLatency,u+r.targetduration);if(c<d&&c>.05&&this.forwardBufferLength>1){const f=Math.min(2,Math.max(1,l)),h=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,g=Math.min(f,Math.max(1,h));this.changeMediaPlaybackRate(t,g)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:l,lowLatencyMode:u}=this.config,c=this.hls.userConfig;let d=u&&r||t;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||d===0)&&(d=o!==void 0?o:l*i);const m=i;return d+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,m)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,o=e-t-this.edgeStalled,l=i-r.totalduration,u=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(l,o),u)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===pt.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,i;e.playbackRate!==t&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class V7 extends IT{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,i=[],o={},l={};let u=!1,c=!1,d=!1;t.levels.forEach(m=>{const f=m.attrs;let{audioCodec:h,videoCodec:g}=m;h&&(m.audioCodec=h=sg(h,r)||void 0),g&&(g=m.videoCodec=RK(g));const{width:p,height:E,unknownCodecs:S}=m,x=(S==null?void 0:S.length)||0;if(u||(u=!!(p&&E)),c||(c=!!g),d||(d=!!h),x||h&&!this.isAudioSupported(h)||g&&!this.isVideoSupported(g)){this.log(`Some or all CODECS not supported "${f.CODECS}"`);return}const{CODECS:_,"FRAME-RATE":A,"HDCP-LEVEL":z,"PATHWAY-ID":ie,RESOLUTION:he,"VIDEO-RANGE":P}=f,ce=`${`${ie||"."}-`}${m.bitrate}-${he}-${A}-${_}-${P}-${z}`;if(o[ce])if(o[ce].uri!==m.url&&!m.attrs["PATHWAY-ID"]){const de=l[ce]+=1;m.attrs["PATHWAY-ID"]=new Array(de+1).join(".");const _e=this.createLevel(m);o[ce]=_e,i.push(_e)}else o[ce].addGroupId("audio",f.AUDIO),o[ce].addGroupId("text",f.SUBTITLES);else{const de=this.createLevel(m);o[ce]=de,l[ce]=1,i.push(de)}}),this.filterAndSortMediaOptions(i,t,u,c,d)}createLevel(e){const t=new sf(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),t.supportedResult=PP(i,[])}return t}isAudioSupported(e){return rf(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return rf(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,i,o){var l;let u=[],c=[],d=e;const m=((l=t.stats)==null?void 0:l.parsing)||{};if((r||i)&&o&&(d=d.filter(({videoCodec:_,videoRange:A,width:z,height:ie})=>(!!_||!!(z&&ie))&&zK(A))),d.length===0){Promise.resolve().then(()=>{if(this.hls){let _="no level with compatible codecs found in manifest",A=_;t.levels.length&&(A=`one or more CODECS in variant not supported: ${Sr(t.levels.map(ie=>ie.attrs.CODECS).filter((ie,he,P)=>P.indexOf(ie)===he))}`,this.warn(A),_+=` (${A})`);const z=new Error(_);this.hls.trigger(pe.ERROR,{type:Nn.MEDIA_ERROR,details:pt.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:z,reason:A})}}),m.end=performance.now();return}t.audioTracks&&(u=t.audioTracks.filter(_=>!_.audioCodec||this.isAudioSupported(_.audioCodec)),WA(u)),t.subtitles&&(c=t.subtitles,WA(c));const f=d.slice(0);d.sort((_,A)=>{if(_.attrs["HDCP-LEVEL"]!==A.attrs["HDCP-LEVEL"])return(_.attrs["HDCP-LEVEL"]||"")>(A.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&_.height!==A.height)return _.height-A.height;if(_.frameRate!==A.frameRate)return _.frameRate-A.frameRate;if(_.videoRange!==A.videoRange)return og.indexOf(_.videoRange)-og.indexOf(A.videoRange);if(_.videoCodec!==A.videoCodec){const z=jI(_.videoCodec),ie=jI(A.videoCodec);if(z!==ie)return ie-z}if(_.uri===A.uri&&_.codecSet!==A.codecSet){const z=ag(_.codecSet),ie=ag(A.codecSet);if(z!==ie)return ie-z}return _.averageBitrate!==A.averageBitrate?_.averageBitrate-A.averageBitrate:0});let h=f[0];if(this.steering&&(d=this.steering.filterParsedLevels(d),d.length!==f.length)){for(let _=0;_<f.length;_++)if(f[_].pathwayId===d[0].pathwayId){h=f[_];break}}this._levels=d;for(let _=0;_<d.length;_++)if(d[_]===h){var g;this._firstLevel=_;const A=h.bitrate,z=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${d.length} level(s) found, first bitrate: ${A}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const ie=Math.min(A,this.hls.config.abrEwmaDefaultEstimateMax);ie>z&&z===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=ie)}break}const p=o&&!i,E=this.hls.config,S=!!(E.audioStreamController&&E.audioTrackController),x={levels:d,audioTracks:u,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:S&&!p&&u.some(_=>!!_.url)};m.end=performance.now(),this.hls.trigger(pe.MANIFEST_PARSED,x)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const m=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:m,reason:m.message}),f)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,l=t[e],u=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,r===e&&i&&o===u)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${u?" with Pathway "+u:""} from level ${r}${o?" with Pathway "+o:""}`);const c={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(pe.LEVEL_SWITCHING,c);const d=l.details;if(!d||d.live){const m=this.switchParams(l.uri,i==null?void 0:i.details,d);this.loadPlaylist(m)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=r}}onError(e,t){t.fatal||!t.context||t.context.type===Zn.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Sn.MAIN){const r=t.elementaryStreams;if(!Object.keys(r).some(o=>!!r[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var r;const{level:i,details:o}=t,l=t.levelInfo;if(!l){var u;this.warn(`Invalid level index ${i}`),(u=t.deliveryDirectives)!=null&&u.skip&&(o.deltaUpdateFailed=!0);return}if(l===this.currentLevel||t.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let c=l.details;c===t.details&&c.advanced&&(c=void 0),this.playlistLoaded(i,t,c)}else(r=t.deliveryDirectives)!=null&&r.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,o=e.attrs["PATHWAY-ID"],l=e.details,u=l==null?void 0:l.age;this.log(`Loading level index ${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o?" Pathway "+o:""}${u&&l.live?" age "+u.toFixed(1)+(l.type&&" "+l.type||""):""} ${r}`),this.hls.trigger(pe.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const r=this._levels.filter((o,l)=>l!==e?!0:(this.steering&&this.steering.removeLevel(o),o===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,o.details&&o.details.fragments.forEach(u=>u.level=-1)),!1));tM(r),this._levels=r,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(pe.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(pe.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function WA(n){const e={};n.forEach(t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++})}function QM(){return self.SourceBuffer||self.WebKitSourceBuffer}function XM(){if(!Zo())return!1;const e=QM();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function K7(){if(!XM())return!1;const n=Zo();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(af(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(af(e,"audio"))))}function Y7(){var n;const e=QM();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const W7=100;class Q7 extends vT{constructor(e,t,r){super(e,t,r,"stream-controller",Sn.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,o=i?i.currentTime:null;if(o===null||!gn(o)||(this.log(`Media seeked to ${o.toFixed(3)}`),!this.getBufferedFrag(o)))return;const l=this.getFwdBufferInfoAtPos(i,o,Sn.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${o} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(W7),this.level=-1,!this.startFragRequested){let o=i.startLevel;o===-1&&(i.config.testBandwidth&&this.levels.length>1?(o=0,this.bitrateTest=!0):o=i.firstAutoLevel),i.nextLoadLevel=o,this.level=i.loadLevel,this._hasEnoughToStart=!!t}r>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=Bt.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Bt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Bt.WAITING_LEVEL:{const{levels:e,level:t}=this,r=e==null?void 0:e[t],i=r==null?void 0:r.details;if(i&&(!i.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(i))break;this.state=Bt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Bt.IDLE;break}break}case Bt.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Bt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[o]))return;const l=r[o],u=this.getMainFwdBufferInfo();if(u===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(u,c)){const E={};this.altAudio===2&&(E.type="video"),this.hls.trigger(pe.BUFFER_EOS,E),this.state=Bt.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const d=l.details;if(!d||this.state===Bt.WAITING_LEVEL||this.waitForLive(l)){this.level=o,this.state=Bt.WAITING_LEVEL,this.startFragRequested=!1;return}const m=u.len,f=this.getMaxBufferLength(l.maxBitrate);if(m>=f)return;this.backtrackFragment&&this.backtrackFragment.start>u.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:u.end;let g=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&g&&qr(g)&&this.fragmentTracker.getState(g)!==Xr.OK){var p;const S=((p=this.backtrackFragment)!=null?p:g).sn-d.startSN,x=d.fragments[S-1];x&&g.cc===x.cc&&(g=x,this.fragmentTracker.removeFragment(x))}else this.backtrackFragment&&u.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,h)){if(!g.gap){const S=this.audioOnly&&!this.altAudio?Tr.AUDIO:Tr.VIDEO,x=(S===Tr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;x&&this.afterBufferFlushed(x,S,Sn.MAIN)}g=this.getNextFragmentLoopLoading(g,d,u,Sn.MAIN,f)}g&&(g.initSegment&&!g.initSegment.data&&!this.bitrateTest&&(g=g.initSegment),this.loadFragment(g,l,h))}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);i===Xr.NOT_LOADED||i===Xr.PARTIAL?qr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Sn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let r;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const u=this.getMainFwdBufferInfo();if(!u||u.len<o.targetduration*2)return}if(!t.paused&&e){const u=this.hls.nextLoadLevel,c=e[u],d=this.fragLastKbps;d&&this.fragCurrent?r=this.fragCurrent.duration*c.maxBitrate/(1e3*d)+1:r=0}else r=0;const l=this.getBufferedFrag(t.currentTime+r);if(l){const u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();const c=u.maxStartPTS?u.maxStartPTS:u.start,d=u.duration,m=Math.max(l.end,c+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(m,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Bt.KEY_LOADING:case Bt.FRAG_LOADING:case Bt.FRAG_LOADING_WAITING_RETRY:case Bt.PARSING:case Bt.PARSED:this.state=Bt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;Ii(r,"playing",this.onMediaPlaying),Ii(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&($i(r,"playing",this.onMediaPlaying),$i(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(pe.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,i=!1;for(let o=0;o<t.levels.length;o++){const l=t.levels[o].audioCodec;l&&(r=r||l.indexOf("mp4a.40.2")!==-1,i=i||l.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=r&&i&&!Y7(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==Bt.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Bt.WAITING_LEVEL)}onLevelLoaded(e,t){var r;const{levels:i,startFragRequested:o}=this,l=t.level,u=t.details,c=u.totalduration;if(!i){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${u.startSN},${u.endSN}]${u.lastPartSn?`[part-${u.lastPartSn}-${u.lastPartIndex}]`:""}, cc [${u.startCC}, ${u.endCC}] duration:${c}`);const d=t.levelInfo,m=this.fragCurrent;m&&(this.state===Bt.FRAG_LOADING||this.state===Bt.FRAG_LOADING_WAITING_RETRY)&&m.level!==t.level&&m.loader&&this.abortCurrentFrag();let f=0;if(u.live||(r=d.details)!=null&&r.live){var h;if(this.checkLiveUpdate(u),u.deltaUpdateFailed)return;f=this.alignPlaylists(u,d.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(d.details=u,this.levelLastLoaded=d,o||this.setStartPosition(u,f),this.hls.trigger(pe.LEVEL_UPDATED,{details:u,level:l}),this.state===Bt.WAITING_LEVEL){if(this.waitForCdnTuneIn(u))return;this.state=Bt.IDLE}o&&u.live&&this.synchronizeToLiveEdge(u),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,o=this.getLoadPosition(),l=e.fragmentStart,u=e.edge,c=o>=l-t.maxFragLookUpTolerance&&o<=u;if(i!==null&&r.duration>i&&(o<i||!c)){const m=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!c&&r.readyState<4||o<u-m)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${u}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var d;const f=qn.bufferInfo(r,i,0);if(!((d=f.buffered)!=null&&d.length)){r.currentTime=i;return}if(f.start<=o){r.currentTime=i;return}const{nextStart:g}=qn.bufferedInfo(f.buffered,o,0);g&&(r.currentTime=g)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=l[r.level];if(!u){this.warn(`Level ${r.level} not found on progress`);return}const c=u.details;if(!c){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const d=u.videoCodec,m=c.PTSKnown||!c.live,f=(t=r.initSegment)==null?void 0:t.data,h=this._getAudioCodec(u),g=this.transmuxer=this.transmuxer||new xM(this.hls,Sn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,E=p!==-1,S=new gT(r.level,r.sn,r.stats.chunkCount,o.byteLength,p,E),x=this.initPTS[r.cc];g.push(o,f,h,d,r,i,c.totalduration,m,S,x)}onAudioTrackSwitching(e,t){const r=this.hls,i=this.altAudio!==0;if(lg(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),r.once(pe.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(pe.AUDIO_TRACK_SWITCHED,t)}),r.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(pe.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=lg(t.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let i,o,l=!1;for(const u in r){const c=r[u];if(c.id==="main"){if(o=u,i=c,u==="video"){const d=r[u];d&&(this.videoBuffer=d.buffer)}}else l=!0}l&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:i}=t,o=r.type===Sn.MAIN;if(o){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Bt.PARSED&&(this.state=Bt.IDLE);return}const u=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*u.total/(u.buffering.end-u.loading.first)),qr(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const l=this.media;l&&(!this._hasEnoughToStart&&qn.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),o&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal){this.state=Bt.ERROR;return}switch(t.details){case pt.FRAG_GAP:case pt.FRAG_PARSING_ERROR:case pt.FRAG_DECRYPT_ERROR:case pt.FRAG_LOAD_ERROR:case pt.FRAG_LOAD_TIMEOUT:case pt.KEY_LOAD_ERROR:case pt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Sn.MAIN,t);break;case pt.LEVEL_LOAD_ERROR:case pt.LEVEL_LOAD_TIMEOUT:case pt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Bt.WAITING_LEVEL&&((r=t.context)==null?void 0:r.type)===Zn.LEVEL&&(this.state=Bt.IDLE);break;case pt.BUFFER_ADD_CODEC_ERROR:case pt.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case pt.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case pt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Bt.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Tr.AUDIO||!this.altAudio){const r=(t===Tr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,t,Sn.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const o=this.getLevelDetails(),l=qn.getBuffered(e),u=l.length?l.start(0):0,c=u-r,d=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<d||this.loadingParts&&c<2*((o==null?void 0:o.partTarget)||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),r+=c,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${u}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{const{hls:i}=this,o=r==null?void 0:r.frag;if(!o||this.fragContextChanged(o))return;t.fragmentError=0,this.state=Bt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=o.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),i.trigger(pe.FRAG_LOADED,r),o.bitrateTest=!1}).catch(r=>{this.state===Bt.STOPPED||this.state===Bt.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:r}=this,{remuxResult:i,chunkMeta:o}=e,l=this.getCurrentContext(o);if(!l){this.resetWhenMissingContext(o);return}const{frag:u,part:c,level:d}=l,{video:m,text:f,id3:h,initSegment:g}=i,{details:p}=d,E=this.altAudio?void 0:i.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=Bt.PARSING,g){const S=g.tracks;if(S){const z=u.initSegment||u;if(this.unhandledEncryptionError(g,u))return;this._bufferInitSegment(d,S,z,o),r.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:z,id:t,tracks:S})}const x=g.initPTS,_=g.timescale,A=this.initPTS[u.cc];if(gn(x)&&(!A||A.baseTime!==x||A.timescale!==_)){const z=g.trackId;this.initPTS[u.cc]={baseTime:x,timescale:_,trackId:z},r.trigger(pe.INIT_PTS_FOUND,{frag:u,id:t,initPTS:x,timescale:_,trackId:z})}}if(m&&p){E&&m.type==="audiovideo"&&this.logMuxedErr(u);const S=p.fragments[u.sn-1-p.startSN],x=u.sn===p.startSN,_=!S||u.cc>S.cc;if(i.independent!==!1){const{startPTS:A,endPTS:z,startDTS:ie,endDTS:he}=m;if(c)c.elementaryStreams[m.type]={startPTS:A,endPTS:z,startDTS:ie,endDTS:he};else if(m.firstKeyFrame&&m.independent&&o.id===1&&!_&&(this.couldBacktrack=!0),m.dropped&&m.independent){const P=this.getMainFwdBufferInfo(),U=(P?P.end:this.getLoadPosition())+this.config.maxBufferHole,ce=m.firstKeyFramePTS?m.firstKeyFramePTS:A;if(!x&&U<ce-this.config.maxBufferHole&&!_){this.backtrack(u);return}else _&&(u.gap=!0);u.setElementaryStreamInfo(m.type,u.start,z,u.start,he,!0)}else x&&A-(p.appliedTimelineOffset||0)>Em&&(u.gap=!0);u.setElementaryStreamInfo(m.type,A,z,ie,he),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(m,u,c,o,x||_)}else if(x||_)u.gap=!0;else{this.backtrack(u);return}}if(E){const{startPTS:S,endPTS:x,startDTS:_,endDTS:A}=E;c&&(c.elementaryStreams[Tr.AUDIO]={startPTS:S,endPTS:x,startDTS:_,endDTS:A}),u.setElementaryStreamInfo(Tr.AUDIO,S,x,_,A),this.bufferFragmentData(E,u,c,o)}if(p&&h!=null&&h.samples.length){const S={id:t,frag:u,details:p,samples:h.samples};r.trigger(pe.FRAG_PARSING_METADATA,S)}if(p&&f){const S={id:t,frag:u,details:p,samples:f.samples};r.trigger(pe.FRAG_PARSING_USERDATA,S)}}logMuxedErr(e){this.warn(`${qr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,i){if(this.state!==Bt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:o,video:l,audiovideo:u}=t;if(o){const d=e.audioCodec;let m=fm(o.codec,d);m==="mp4a"&&(m="mp4a.40.5");const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){m&&(m.indexOf("mp4a.40.5")!==-1?m="mp4a.40.2":m="mp4a.40.5");const h=o.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(m="mp4a.40.5")}m&&m.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(m="mp4a.40.2",this.log(`Android: force audio codec to ${m}`)),d&&d!==m&&this.log(`Swapping manifest audio codec "${d}" for "${m}"`),o.levelCodec=m,o.id=Sn.MAIN,this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${m||""}/${d||""}/${o.codec}]`),delete t.audiovideo}if(l){l.levelCodec=e.videoCodec,l.id=Sn.MAIN;const d=l.codec;if((d==null?void 0:d.length)===4)switch(d){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${d}]${l.codec!==d?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete t.audiovideo}u&&(this.log(`Init audiovideo buffer, container:${u.container}, codecs[level/parsed]=[${e.codecs}/${u.codec}]`),delete t.video,delete t.audio);const c=Object.keys(t);if(c.length){if(this.hls.trigger(pe.BUFFER_CODECS,t),!this.hls)return;c.forEach(d=>{const f=t[d].initSegment;f!=null&&f.byteLength&&this.hls.trigger(pe.BUFFER_APPENDING,{type:d,data:f,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Sn.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,r=e==null?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Bt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(qn.isBuffered(e,r)?t=this.getAppendedFrag(r):qn.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(pe.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(pe.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return gn(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(gn(t)){const r=this.getLevelDetails(),i=this.currentFrag||(r?Wl(null,r.fragments,t):null);if(i){const o=i.programDateTime;if(o!==null){const l=o+(t-i.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class X7 extends Aa{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[r].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=pt.KEY_LOAD_ERROR,r,i,o){return new js({type:Nn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:r,networkDetails:i})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,o=t.length;i<o;i++){const l=t[i];if(e.cc<=l.cc&&(!qr(e)||!qr(l)||e.sn<l.sn)||!r&&i==o-1)return this.emeController.selectKeySystemFormat(l).then(u=>{if(!this.emeController)return;l.setKeyFormat(u);const c=mm(u);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const i=hd(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,pt.KEY_LOAD_ERROR,d))}const l=o.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,pt.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));const u=sv(o);let c=this.keyIdToKeyInfo[u];if((r=c)!=null&&r.decryptdata.key)return o.key=c.decryptdata.key,Promise.resolve({frag:e,keyInfo:c});if(this.emeController&&(i=c)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(c.decryptdata)){case"usable":case"usable-in-future":return c.keyLoadPromise.then(m=>{const{keyInfo:f}=m;return o.key=f.decryptdata.key,{frag:e,keyInfo:f}})}switch(this.log(`${this.keyIdToKeyInfo[u]?"Rel":"L"}oading${o.keyId?" keyId: "+li(o.keyId):""} URI: ${o.uri} from ${e.type} ${e.level}`),c=this.keyIdToKeyInfo[u]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(c,e):this.loadKeyEME(c,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(c,e);default:return Promise.reject(this.createKeyLoadError(e,pt.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=t.initSegment)!=null&&i.data){const l=pK(t.initSegment.data);if(l.length){let u=l[0];u.some(c=>c!==0)?(this.log(`Using keyId found in init segment ${li(u)}`),Vo.setKeyIdForUri(e.decryptdata.uri,u)):(u=Vo.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${li(u)}`)),e.decryptdata.keyId=u}}if(!e.decryptdata.keyId&&!qr(t))return Promise.resolve(r);const o=this.emeController.loadKey(r);return(e.keyLoadPromise=o.then(l=>(e.mediaKeySessionContext=l,r))).catch(l=>{throw e.keyLoadPromise=null,"data"in l&&(l.data.frag=t),l})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,i=r.loader,o=new i(r);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((l,u)=>{const c={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=r.keyLoadPolicy.default,m={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,g,p,E)=>{const{frag:S,keyInfo:x}=p,_=sv(x.decryptdata);if(!S.decryptdata||x!==this.keyIdToKeyInfo[_])return u(this.createKeyLoadError(S,pt.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),E));x.decryptdata.key=S.decryptdata.key=new Uint8Array(h.data),S.keyLoader=null,x.loader=null,l({frag:S,keyInfo:x})},onError:(h,g,p,E)=>{this.resetLoader(g),u(this.createKeyLoadError(t,pt.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,gr({url:c.url,data:void 0},h)))},onTimeout:(h,g,p)=>{this.resetLoader(g),u(this.createKeyLoadError(t,pt.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,g,p)=>{this.resetLoader(g),u(this.createKeyLoadError(t,pt.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};o.load(c,m,f)})}resetLoader(e){const{frag:t,keyInfo:r,url:i}=e,o=r.loader;t.keyLoader===o&&(t.keyLoader=null,r.loader=null);const l=sv(r.decryptdata)||i;delete this.keyIdToKeyInfo[l],o&&o.destroy()}}function sv(n){if(n.keyFormat!==ci.FAIRPLAY){const e=n.keyId;if(e)return li(e)}return n.uri}function QA(n){const{type:e}=n;switch(e){case Zn.AUDIO_TRACK:return Sn.AUDIO;case Zn.SUBTITLE_TRACK:return Sn.SUBTITLE;default:return Sn.MAIN}}function ov(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Z7{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,i=t.loader,o=r||i,l=new o(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Zn.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:i,pathwayId:o,url:l,deliveryDirectives:u,levelInfo:c}=t;this.load({id:r,level:i,pathwayId:o,responseType:"text",type:Zn.LEVEL,url:l,deliveryDirectives:u,levelOrTrack:c})}onAudioTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:l,track:u}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Zn.AUDIO_TRACK,url:o,deliveryDirectives:l,levelOrTrack:u})}onSubtitleTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:l,track:u}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:Zn.SUBTITLE_TRACK,url:o,deliveryDirectives:l,levelOrTrack:u})}onLevelsUpdated(e,t){const r=this.loaders[Zn.LEVEL];if(r){const i=r.context;i&&!t.levels.some(o=>o===i.levelOrTrack)&&(r.abort(),delete this.loaders[Zn.LEVEL])}}load(e){var t;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const d=this.hls.logger,m=i.context;if(m&&m.levelOrTrack===e.levelOrTrack&&(m.url===e.url||m.deliveryDirectives&&!e.deliveryDirectives)){m.url===e.url?d.log(`[playlist-loader]: ignore ${e.url} ongoing request`):d.log(`[playlist-loader]: ignore ${e.url} in favor of ${m.url}`);return}d.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===Zn.MANIFEST?o=r.manifestLoadPolicy.default:o=br({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),gn((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===Zn.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===Zn.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===Zn.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const m=d.partTarget,f=d.targetduration;if(m&&f){const h=Math.max(m*3,f*.8)*1e3;o=br({},o,{maxTimeToFirstByteMs:Math.min(h,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,o.maxTimeToFirstByteMs)})}}}const l=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:(d,m,f,h)=>{const g=this.getInternalLoader(f);this.resetInternalLoader(f.type);const p=d.data;m.parsing.start=performance.now(),Ts.isMediaPlaylist(p)||f.type!==Zn.MANIFEST?this.handleTrackOrLevelPlaylist(d,m,f,h||null,g):this.handleMasterPlaylist(d,m,f,h)},onError:(d,m,f,h)=>{this.handleNetworkError(m,f,!1,d,h)},onTimeout:(d,m,f)=>{this.handleNetworkError(m,f,!0,void 0,d)}};i.load(e,u,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,i){const o=this.hls,l=e.data,u=ov(e,r),c=Ts.parseMasterPlaylist(l,u);if(c.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,r,c.playlistParsingError,i,t);return}const{contentSteering:d,levels:m,sessionData:f,sessionKeys:h,startTimeOffset:g,variableList:p}=c;this.variableList=p,m.forEach(_=>{const{unknownCodecs:A}=_;if(A){const{preferManagedMediaSource:z}=this.hls.config;let{audioCodec:ie,videoCodec:he}=_;for(let P=A.length;P--;){const U=A[P];rf(U,"audio",z)?(_.audioCodec=ie=ie?`${ie},${U}`:U,bc.audio[ie.substring(0,4)]=2,A.splice(P,1)):rf(U,"video",z)&&(_.videoCodec=he=he?`${he},${U}`:U,bc.video[he.substring(0,4)]=2,A.splice(P,1))}}});const{AUDIO:E=[],SUBTITLES:S,"CLOSED-CAPTIONS":x}=Ts.parseMasterPlaylistMedia(l,u,c);E.length&&!E.some(A=>!A.url)&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Nr({}),bitrate:0,url:""})),o.trigger(pe.MANIFEST_LOADED,{levels:m,audioTracks:E,subtitles:S,captions:x,contentSteering:d,url:u,stats:t,networkDetails:i,sessionData:f,sessionKeys:h,startTimeOffset:g,variableList:p})}handleTrackOrLevelPlaylist(e,t,r,i,o){const l=this.hls,{id:u,level:c,type:d}=r,m=ov(e,r),f=gn(c)?c:gn(u)?u:0,h=QA(r),g=Ts.parseLevelPlaylist(e.data,m,f,h,0,this.variableList);if(d===Zn.MANIFEST){const p={attrs:new Nr({}),bitrate:0,details:g,name:"",url:m};g.requestScheduled=t.loading.start+ZP(g,0),l.trigger(pe.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:m,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=g,this.handlePlaylistLoaded(g,e,t,r,i,o)}handleManifestParsingError(e,t,r,i,o){this.hls.trigger(pe.ERROR,{type:Nn.NETWORK_ERROR,details:pt.MANIFEST_PARSING_ERROR,fatal:t.type===Zn.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,r=!1,i,o){let l=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Zn.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===Zn.AUDIO_TRACK||e.type===Zn.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const u=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let c=pt.UNKNOWN,d=!1;const m=this.getInternalLoader(e);switch(e.type){case Zn.MANIFEST:c=r?pt.MANIFEST_LOAD_TIMEOUT:pt.MANIFEST_LOAD_ERROR,d=!0;break;case Zn.LEVEL:c=r?pt.LEVEL_LOAD_TIMEOUT:pt.LEVEL_LOAD_ERROR,d=!1;break;case Zn.AUDIO_TRACK:c=r?pt.AUDIO_TRACK_LOAD_TIMEOUT:pt.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case Zn.SUBTITLE_TRACK:c=r?pt.SUBTITLE_TRACK_LOAD_TIMEOUT:pt.SUBTITLE_LOAD_ERROR,d=!1;break}m&&this.resetInternalLoader(e.type);const f={type:Nn.NETWORK_ERROR,details:c,fatal:d,url:e.url,loader:m,context:e,error:u,networkDetails:t,stats:o};if(i){const h=(t==null?void 0:t.url)||e.url;f.response=gr({url:h,data:void 0},i)}this.hls.trigger(pe.ERROR,f)}handlePlaylistLoaded(e,t,r,i,o,l){const u=this.hls,{type:c,level:d,levelOrTrack:m,id:f,groupId:h,deliveryDirectives:g}=i,p=ov(t,i),E=QA(i);let S=typeof i.level=="number"&&E===Sn.MAIN?d:void 0;const x=e.playlistParsingError;if(x){if(this.hls.logger.warn(`${x} ${e.url}`),!u.config.ignorePlaylistParsingErrors){u.trigger(pe.ERROR,{type:Nn.NETWORK_ERROR,details:pt.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:x,reason:x.message,response:t,context:i,level:S,parent:E,networkDetails:o,stats:r});return}e.playlistParsingError=null}if(!e.fragments.length){const _=e.playlistParsingError=new Error("No Segments found in Playlist");u.trigger(pe.ERROR,{type:Nn.NETWORK_ERROR,details:pt.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:_,reason:_.message,response:t,context:i,level:S,parent:E,networkDetails:o,stats:r});return}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case Zn.MANIFEST:case Zn.LEVEL:if(S){if(!m)S=0;else if(m!==u.levels[S]){const _=u.levels.indexOf(m);_>-1&&(S=_)}}u.trigger(pe.LEVEL_LOADED,{details:e,levelInfo:m||u.levels[0],level:S||0,id:f||0,stats:r,networkDetails:o,deliveryDirectives:g,withoutMultiVariant:c===Zn.MANIFEST});break;case Zn.AUDIO_TRACK:u.trigger(pe.AUDIO_TRACK_LOADED,{details:e,track:m,id:f||0,groupId:h||"",stats:r,networkDetails:o,deliveryDirectives:g});break;case Zn.SUBTITLE_TRACK:u.trigger(pe.SUBTITLE_TRACK_LOADED,{details:e,track:m,id:f||0,groupId:h||"",stats:r,networkDetails:o,deliveryDirectives:g});break}}}class Ui{static get version(){return of}static isMSESupported(){return XM()}static isSupported(){return K7()}static getMediaSource(){return Zo()}static get Events(){return pe}static get MetadataSchema(){return ea}static get ErrorTypes(){return Nn}static get ErrorDetails(){return pt}static get DefaultConfig(){return Ui.defaultConfig?Ui.defaultConfig:M7}static set DefaultConfig(e){Ui.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ET,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=iK(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=F7(Ui.DefaultConfig,e,t);this.userConfig=e,r.progressive&&z7(r,t);const{abrController:i,bufferController:o,capLevelController:l,errorController:u,fpsController:c}=r,d=new u(this),m=this.abrController=new i(this),f=new JK(this),h=r.interstitialsController,g=h?this.interstitialsController=new h(this,Ui):null,p=this.bufferController=new o(this,f),E=this.capLevelController=new l(this),S=new c(this),x=new Z7(this),_=r.contentSteeringController,A=_?new _(this):null,z=this.levelController=new V7(this,A),ie=new G7(this),he=new X7(this.config,this.logger),P=this.streamController=new Q7(this,f,he),U=this.gapController=new $7(this,f);E.setStreamController(P),S.setStreamController(P);const ce=[x,z,P];g&&ce.splice(1,0,g),A&&ce.splice(1,0,A),this.networkControllers=ce;const de=[m,p,U,E,S,ie,f];this.audioTrackController=this.createController(r.audioTrackController,ce);const _e=r.audioStreamController;_e&&ce.push(this.audioStreamController=new _e(this,f,he)),this.subtitleTrackController=this.createController(r.subtitleTrackController,ce);const je=r.subtitleStreamController;je&&ce.push(this.subtititleStreamController=new je(this,f,he)),this.createController(r.timelineController,de),he.emeController=this.emeController=this.createController(r.emeController,de),this.cmcdController=this.createController(r.cmcdController,de),this.latencyController=this.createController(H7,de),this.coreComponents=de,ce.push(d);const Se=d.onErrorOut;typeof Se=="function"&&this.on(pe.ERROR,Se,d),this.on(pe.MANIFEST_LOADED,x.onManifestLoaded,x)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,i){this._emitter.off(e,t,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===pe.ERROR;this.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(pe.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const o=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(pe.ERROR,{type:Nn.OTHER_ERROR,details:pt.ATTACH_MEDIA_ERROR,fatal:!0,error:o});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,i=t?e:{media:r};this._media=r,this.trigger(pe.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(pe.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(pe.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,i=this._url=lT.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(pe.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Sn.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Sn.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Sn.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=$W()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){FK(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,r)for(let o=i;o--;){const l=e[o].attrs["HDCP-LEVEL"];if(l&&l<=r)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const r=FP(t);return MP(e,r,navigator.mediaCapabilities)}}Ui.defaultConfig=void 0;/*! For license information please see dash.all.min.js.LICENSE.txt */var J7={7267:function(n,e){e.byteLength=function(d){var m=u(d),f=m[0],h=m[1];return 3*(f+h)/4-h},e.toByteArray=function(d){var m,f,h=u(d),g=h[0],p=h[1],E=new i(function(_,A,z){return 3*(A+z)/4-z}(0,g,p)),S=0,x=p>0?g-4:g;for(f=0;f<x;f+=4)m=r[d.charCodeAt(f)]<<18|r[d.charCodeAt(f+1)]<<12|r[d.charCodeAt(f+2)]<<6|r[d.charCodeAt(f+3)],E[S++]=m>>16&255,E[S++]=m>>8&255,E[S++]=255&m;return p===2&&(m=r[d.charCodeAt(f)]<<2|r[d.charCodeAt(f+1)]>>4,E[S++]=255&m),p===1&&(m=r[d.charCodeAt(f)]<<10|r[d.charCodeAt(f+1)]<<4|r[d.charCodeAt(f+2)]>>2,E[S++]=m>>8&255,E[S++]=255&m),E},e.fromByteArray=function(d){for(var m,f=d.length,h=f%3,g=[],p=16383,E=0,S=f-h;E<S;E+=p)g.push(c(d,E,E+p>S?S:E+p));return h===1?(m=d[f-1],g.push(t[m>>2]+t[m<<4&63]+"==")):h===2&&(m=(d[f-2]<<8)+d[f-1],g.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),g.join("")};for(var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)t[l]=o[l],r[o.charCodeAt(l)]=l;function u(d){var m=d.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=d.indexOf("=");return f===-1&&(f=m),[f,f===m?0:4-f%4]}function c(d,m,f){for(var h,g,p=[],E=m;E<f;E+=3)h=(d[E]<<16&16711680)+(d[E+1]<<8&65280)+(255&d[E+2]),p.push(t[(g=h)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return p.join("")}r[45]=62,r[95]=63},44:function(n,e,t){var r=t(7267),i=t(7986),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(X){return+X!=X&&(X=0),c.alloc(+X)},e.INSPECT_MAX_BYTES=50;var l=2147483647;function u(X){if(X>l)throw new RangeError('The value "'+X+'" is invalid for option "size"');var W=new Uint8Array(X);return Object.setPrototypeOf(W,c.prototype),W}function c(X,W,C){if(typeof X=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(X)}return d(X,W,C)}function d(X,W,C){if(typeof X=="string")return function(te,Be){if(typeof Be=="string"&&Be!==""||(Be="utf8"),!c.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);var rt=0|E(te,Be),qe=u(rt),Xe=qe.write(te,Be);return Xe!==rt&&(qe=qe.slice(0,Xe)),qe}(X,W);if(ArrayBuffer.isView(X))return function(te){if(Pe(te,Uint8Array)){var Be=new Uint8Array(te);return g(Be.buffer,Be.byteOffset,Be.byteLength)}return h(te)}(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(Pe(X,ArrayBuffer)||X&&Pe(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pe(X,SharedArrayBuffer)||X&&Pe(X.buffer,SharedArrayBuffer)))return g(X,W,C);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var O=X.valueOf&&X.valueOf();if(O!=null&&O!==X)return c.from(O,W,C);var le=function(te){if(c.isBuffer(te)){var Be=0|p(te.length),rt=u(Be);return rt.length===0||te.copy(rt,0,0,Be),rt}return te.length!==void 0?typeof te.length!="number"||Ne(te.length)?u(0):h(te):te.type==="Buffer"&&Array.isArray(te.data)?h(te.data):void 0}(X);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return c.from(X[Symbol.toPrimitive]("string"),W,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}function m(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function f(X){return m(X),u(X<0?0:0|p(X))}function h(X){for(var W=X.length<0?0:0|p(X.length),C=u(W),O=0;O<W;O+=1)C[O]=255&X[O];return C}function g(X,W,C){if(W<0||X.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<W+(C||0))throw new RangeError('"length" is outside of buffer bounds');var O;return O=W===void 0&&C===void 0?new Uint8Array(X):C===void 0?new Uint8Array(X,W):new Uint8Array(X,W,C),Object.setPrototypeOf(O,c.prototype),O}function p(X){if(X>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|X}function E(X,W){if(c.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||Pe(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var C=X.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&C===0)return 0;for(var le=!1;;)switch(W){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return nt(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return bt(X).length;default:if(le)return O?-1:nt(X).length;W=(""+W).toLowerCase(),le=!0}}function S(X,W,C){var O=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0)<=(W>>>=0))return"";for(X||(X="utf8");;)switch(X){case"hex":return ze(this,W,C);case"utf8":case"utf-8":return de(this,W,C);case"ascii":return je(this,W,C);case"latin1":case"binary":return Se(this,W,C);case"base64":return ce(this,W,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,W,C);default:if(O)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),O=!0}}function x(X,W,C){var O=X[W];X[W]=X[C],X[C]=O}function _(X,W,C,O,le){if(X.length===0)return-1;if(typeof C=="string"?(O=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),Ne(C=+C)&&(C=le?0:X.length-1),C<0&&(C=X.length+C),C>=X.length){if(le)return-1;C=X.length-1}else if(C<0){if(!le)return-1;C=0}if(typeof W=="string"&&(W=c.from(W,O)),c.isBuffer(W))return W.length===0?-1:A(X,W,C,O,le);if(typeof W=="number")return W&=255,typeof Uint8Array.prototype.indexOf=="function"?le?Uint8Array.prototype.indexOf.call(X,W,C):Uint8Array.prototype.lastIndexOf.call(X,W,C):A(X,[W],C,O,le);throw new TypeError("val must be string, number or Buffer")}function A(X,W,C,O,le){var te,Be=1,rt=X.length,qe=W.length;if(O!==void 0&&((O=String(O).toLowerCase())==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(X.length<2||W.length<2)return-1;Be=2,rt/=2,qe/=2,C/=2}function Xe(Ze,ct){return Be===1?Ze[ct]:Ze.readUInt16BE(ct*Be)}if(le){var $e=-1;for(te=C;te<rt;te++)if(Xe(X,te)===Xe(W,$e===-1?0:te-$e)){if($e===-1&&($e=te),te-$e+1===qe)return $e*Be}else $e!==-1&&(te-=te-$e),$e=-1}else for(C+qe>rt&&(C=rt-qe),te=C;te>=0;te--){for(var et=!0,Ve=0;Ve<qe;Ve++)if(Xe(X,te+Ve)!==Xe(W,Ve)){et=!1;break}if(et)return te}return-1}function z(X,W,C,O){C=Number(C)||0;var le=X.length-C;O?(O=Number(O))>le&&(O=le):O=le;var te=W.length;O>te/2&&(O=te/2);for(var Be=0;Be<O;++Be){var rt=parseInt(W.substr(2*Be,2),16);if(Ne(rt))return Be;X[C+Be]=rt}return Be}function ie(X,W,C,O){return Rt(nt(W,X.length-C),X,C,O)}function he(X,W,C,O){return Rt(function(le){for(var te=[],Be=0;Be<le.length;++Be)te.push(255&le.charCodeAt(Be));return te}(W),X,C,O)}function P(X,W,C,O){return Rt(bt(W),X,C,O)}function U(X,W,C,O){return Rt(function(le,te){for(var Be,rt,qe,Xe=[],$e=0;$e<le.length&&!((te-=2)<0);++$e)rt=(Be=le.charCodeAt($e))>>8,qe=Be%256,Xe.push(qe),Xe.push(rt);return Xe}(W,X.length-C),X,C,O)}function ce(X,W,C){return W===0&&C===X.length?r.fromByteArray(X):r.fromByteArray(X.slice(W,C))}function de(X,W,C){C=Math.min(X.length,C);for(var O=[],le=W;le<C;){var te,Be,rt,qe,Xe=X[le],$e=null,et=Xe>239?4:Xe>223?3:Xe>191?2:1;if(le+et<=C)switch(et){case 1:Xe<128&&($e=Xe);break;case 2:(192&(te=X[le+1]))==128&&(qe=(31&Xe)<<6|63&te)>127&&($e=qe);break;case 3:te=X[le+1],Be=X[le+2],(192&te)==128&&(192&Be)==128&&(qe=(15&Xe)<<12|(63&te)<<6|63&Be)>2047&&(qe<55296||qe>57343)&&($e=qe);break;case 4:te=X[le+1],Be=X[le+2],rt=X[le+3],(192&te)==128&&(192&Be)==128&&(192&rt)==128&&(qe=(15&Xe)<<18|(63&te)<<12|(63&Be)<<6|63&rt)>65535&&qe<1114112&&($e=qe)}$e===null?($e=65533,et=1):$e>65535&&($e-=65536,O.push($e>>>10&1023|55296),$e=56320|1023&$e),O.push($e),le+=et}return function(Ve){var Ze=Ve.length;if(Ze<=_e)return String.fromCharCode.apply(String,Ve);for(var ct="",Ht=0;Ht<Ze;)ct+=String.fromCharCode.apply(String,Ve.slice(Ht,Ht+=_e));return ct}(O)}e.kMaxLength=l,c.TYPED_ARRAY_SUPPORT=function(){try{var X=new Uint8Array(1),W={foo:function(){return 42}};return Object.setPrototypeOf(W,Uint8Array.prototype),Object.setPrototypeOf(X,W),X.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(X,W,C){return d(X,W,C)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(X,W,C){return function(O,le,te){return m(O),O<=0?u(O):le!==void 0?typeof te=="string"?u(O).fill(le,te):u(O).fill(le):u(O)}(X,W,C)},c.allocUnsafe=function(X){return f(X)},c.allocUnsafeSlow=function(X){return f(X)},c.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==c.prototype},c.compare=function(X,W){if(Pe(X,Uint8Array)&&(X=c.from(X,X.offset,X.byteLength)),Pe(W,Uint8Array)&&(W=c.from(W,W.offset,W.byteLength)),!c.isBuffer(X)||!c.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===W)return 0;for(var C=X.length,O=W.length,le=0,te=Math.min(C,O);le<te;++le)if(X[le]!==W[le]){C=X[le],O=W[le];break}return C<O?-1:O<C?1:0},c.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(X,W){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return c.alloc(0);var C;if(W===void 0)for(W=0,C=0;C<X.length;++C)W+=X[C].length;var O=c.allocUnsafe(W),le=0;for(C=0;C<X.length;++C){var te=X[C];if(Pe(te,Uint8Array))le+te.length>O.length?c.from(te).copy(O,le):Uint8Array.prototype.set.call(O,te,le);else{if(!c.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(O,le)}le+=te.length}return O},c.byteLength=E,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<X;W+=2)x(this,W,W+1);return this},c.prototype.swap32=function(){var X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<X;W+=4)x(this,W,W+3),x(this,W+1,W+2);return this},c.prototype.swap64=function(){var X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<X;W+=8)x(this,W,W+7),x(this,W+1,W+6),x(this,W+2,W+5),x(this,W+3,W+4);return this},c.prototype.toString=function(){var X=this.length;return X===0?"":arguments.length===0?de(this,0,X):S.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(X){if(!c.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X||c.compare(this,X)===0},c.prototype.inspect=function(){var X="",W=e.INSPECT_MAX_BYTES;return X=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(X+=" ... "),"<Buffer "+X+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(X,W,C,O,le){if(Pe(X,Uint8Array)&&(X=c.from(X,X.offset,X.byteLength)),!c.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(W===void 0&&(W=0),C===void 0&&(C=X?X.length:0),O===void 0&&(O=0),le===void 0&&(le=this.length),W<0||C>X.length||O<0||le>this.length)throw new RangeError("out of range index");if(O>=le&&W>=C)return 0;if(O>=le)return-1;if(W>=C)return 1;if(this===X)return 0;for(var te=(le>>>=0)-(O>>>=0),Be=(C>>>=0)-(W>>>=0),rt=Math.min(te,Be),qe=this.slice(O,le),Xe=X.slice(W,C),$e=0;$e<rt;++$e)if(qe[$e]!==Xe[$e]){te=qe[$e],Be=Xe[$e];break}return te<Be?-1:Be<te?1:0},c.prototype.includes=function(X,W,C){return this.indexOf(X,W,C)!==-1},c.prototype.indexOf=function(X,W,C){return _(this,X,W,C,!0)},c.prototype.lastIndexOf=function(X,W,C){return _(this,X,W,C,!1)},c.prototype.write=function(X,W,C,O){if(W===void 0)O="utf8",C=this.length,W=0;else if(C===void 0&&typeof W=="string")O=W,C=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W>>>=0,isFinite(C)?(C>>>=0,O===void 0&&(O="utf8")):(O=C,C=void 0)}var le=this.length-W;if((C===void 0||C>le)&&(C=le),X.length>0&&(C<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");for(var te=!1;;)switch(O){case"hex":return z(this,X,W,C);case"utf8":case"utf-8":return ie(this,X,W,C);case"ascii":case"latin1":case"binary":return he(this,X,W,C);case"base64":return P(this,X,W,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,X,W,C);default:if(te)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),te=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _e=4096;function je(X,W,C){var O="";C=Math.min(X.length,C);for(var le=W;le<C;++le)O+=String.fromCharCode(127&X[le]);return O}function Se(X,W,C){var O="";C=Math.min(X.length,C);for(var le=W;le<C;++le)O+=String.fromCharCode(X[le]);return O}function ze(X,W,C){var O=X.length;(!W||W<0)&&(W=0),(!C||C<0||C>O)&&(C=O);for(var le="",te=W;te<C;++te)le+=Qe[X[te]];return le}function Le(X,W,C){for(var O=X.slice(W,C),le="",te=0;te<O.length-1;te+=2)le+=String.fromCharCode(O[te]+256*O[te+1]);return le}function Re(X,W,C){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(X+W>C)throw new RangeError("Trying to access beyond buffer length")}function Ye(X,W,C,O,le,te){if(!c.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>le||W<te)throw new RangeError('"value" argument is out of bounds');if(C+O>X.length)throw new RangeError("Index out of range")}function Ue(X,W,C,O,le,te){if(C+O>X.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function Me(X,W,C,O,le){return W=+W,C>>>=0,le||Ue(X,0,C,4),i.write(X,W,C,O,23,4),C+4}function We(X,W,C,O,le){return W=+W,C>>>=0,le||Ue(X,0,C,8),i.write(X,W,C,O,52,8),C+8}c.prototype.slice=function(X,W){var C=this.length;(X=~~X)<0?(X+=C)<0&&(X=0):X>C&&(X=C),(W=W===void 0?C:~~W)<0?(W+=C)<0&&(W=0):W>C&&(W=C),W<X&&(W=X);var O=this.subarray(X,W);return Object.setPrototypeOf(O,c.prototype),O},c.prototype.readUintLE=c.prototype.readUIntLE=function(X,W,C){X>>>=0,W>>>=0,C||Re(X,W,this.length);for(var O=this[X],le=1,te=0;++te<W&&(le*=256);)O+=this[X+te]*le;return O},c.prototype.readUintBE=c.prototype.readUIntBE=function(X,W,C){X>>>=0,W>>>=0,C||Re(X,W,this.length);for(var O=this[X+--W],le=1;W>0&&(le*=256);)O+=this[X+--W]*le;return O},c.prototype.readUint8=c.prototype.readUInt8=function(X,W){return X>>>=0,W||Re(X,1,this.length),this[X]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(X,W){return X>>>=0,W||Re(X,2,this.length),this[X]|this[X+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(X,W){return X>>>=0,W||Re(X,2,this.length),this[X]<<8|this[X+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(X,W){return X>>>=0,W||Re(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(X,W){return X>>>=0,W||Re(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},c.prototype.readIntLE=function(X,W,C){X>>>=0,W>>>=0,C||Re(X,W,this.length);for(var O=this[X],le=1,te=0;++te<W&&(le*=256);)O+=this[X+te]*le;return O>=(le*=128)&&(O-=Math.pow(2,8*W)),O},c.prototype.readIntBE=function(X,W,C){X>>>=0,W>>>=0,C||Re(X,W,this.length);for(var O=W,le=1,te=this[X+--O];O>0&&(le*=256);)te+=this[X+--O]*le;return te>=(le*=128)&&(te-=Math.pow(2,8*W)),te},c.prototype.readInt8=function(X,W){return X>>>=0,W||Re(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},c.prototype.readInt16LE=function(X,W){X>>>=0,W||Re(X,2,this.length);var C=this[X]|this[X+1]<<8;return 32768&C?4294901760|C:C},c.prototype.readInt16BE=function(X,W){X>>>=0,W||Re(X,2,this.length);var C=this[X+1]|this[X]<<8;return 32768&C?4294901760|C:C},c.prototype.readInt32LE=function(X,W){return X>>>=0,W||Re(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},c.prototype.readInt32BE=function(X,W){return X>>>=0,W||Re(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},c.prototype.readFloatLE=function(X,W){return X>>>=0,W||Re(X,4,this.length),i.read(this,X,!0,23,4)},c.prototype.readFloatBE=function(X,W){return X>>>=0,W||Re(X,4,this.length),i.read(this,X,!1,23,4)},c.prototype.readDoubleLE=function(X,W){return X>>>=0,W||Re(X,8,this.length),i.read(this,X,!0,52,8)},c.prototype.readDoubleBE=function(X,W){return X>>>=0,W||Re(X,8,this.length),i.read(this,X,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(X,W,C,O){X=+X,W>>>=0,C>>>=0,O||Ye(this,X,W,C,Math.pow(2,8*C)-1,0);var le=1,te=0;for(this[W]=255&X;++te<C&&(le*=256);)this[W+te]=X/le&255;return W+C},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(X,W,C,O){X=+X,W>>>=0,C>>>=0,O||Ye(this,X,W,C,Math.pow(2,8*C)-1,0);var le=C-1,te=1;for(this[W+le]=255&X;--le>=0&&(te*=256);)this[W+le]=X/te&255;return W+C},c.prototype.writeUint8=c.prototype.writeUInt8=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,1,255,0),this[W]=255&X,W+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,2,65535,0),this[W]=255&X,this[W+1]=X>>>8,W+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,2,65535,0),this[W]=X>>>8,this[W+1]=255&X,W+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,4,4294967295,0),this[W+3]=X>>>24,this[W+2]=X>>>16,this[W+1]=X>>>8,this[W]=255&X,W+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,4,4294967295,0),this[W]=X>>>24,this[W+1]=X>>>16,this[W+2]=X>>>8,this[W+3]=255&X,W+4},c.prototype.writeIntLE=function(X,W,C,O){if(X=+X,W>>>=0,!O){var le=Math.pow(2,8*C-1);Ye(this,X,W,C,le-1,-le)}var te=0,Be=1,rt=0;for(this[W]=255&X;++te<C&&(Be*=256);)X<0&&rt===0&&this[W+te-1]!==0&&(rt=1),this[W+te]=(X/Be|0)-rt&255;return W+C},c.prototype.writeIntBE=function(X,W,C,O){if(X=+X,W>>>=0,!O){var le=Math.pow(2,8*C-1);Ye(this,X,W,C,le-1,-le)}var te=C-1,Be=1,rt=0;for(this[W+te]=255&X;--te>=0&&(Be*=256);)X<0&&rt===0&&this[W+te+1]!==0&&(rt=1),this[W+te]=(X/Be|0)-rt&255;return W+C},c.prototype.writeInt8=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,1,127,-128),X<0&&(X=255+X+1),this[W]=255&X,W+1},c.prototype.writeInt16LE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,2,32767,-32768),this[W]=255&X,this[W+1]=X>>>8,W+2},c.prototype.writeInt16BE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,2,32767,-32768),this[W]=X>>>8,this[W+1]=255&X,W+2},c.prototype.writeInt32LE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,4,2147483647,-2147483648),this[W]=255&X,this[W+1]=X>>>8,this[W+2]=X>>>16,this[W+3]=X>>>24,W+4},c.prototype.writeInt32BE=function(X,W,C){return X=+X,W>>>=0,C||Ye(this,X,W,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[W]=X>>>24,this[W+1]=X>>>16,this[W+2]=X>>>8,this[W+3]=255&X,W+4},c.prototype.writeFloatLE=function(X,W,C){return Me(this,X,W,!0,C)},c.prototype.writeFloatBE=function(X,W,C){return Me(this,X,W,!1,C)},c.prototype.writeDoubleLE=function(X,W,C){return We(this,X,W,!0,C)},c.prototype.writeDoubleBE=function(X,W,C){return We(this,X,W,!1,C)},c.prototype.copy=function(X,W,C,O){if(!c.isBuffer(X))throw new TypeError("argument should be a Buffer");if(C||(C=0),O||O===0||(O=this.length),W>=X.length&&(W=X.length),W||(W=0),O>0&&O<C&&(O=C),O===C||X.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),X.length-W<O-C&&(O=X.length-W+C);var le=O-C;return this===X&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(W,C,O):Uint8Array.prototype.set.call(X,this.subarray(C,O),W),le},c.prototype.fill=function(X,W,C,O){if(typeof X=="string"){if(typeof W=="string"?(O=W,W=0,C=this.length):typeof C=="string"&&(O=C,C=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!c.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(X.length===1){var le=X.charCodeAt(0);(O==="utf8"&&le<128||O==="latin1")&&(X=le)}}else typeof X=="number"?X&=255:typeof X=="boolean"&&(X=Number(X));if(W<0||this.length<W||this.length<C)throw new RangeError("Out of range index");if(C<=W)return this;var te;if(W>>>=0,C=C===void 0?this.length:C>>>0,X||(X=0),typeof X=="number")for(te=W;te<C;++te)this[te]=X;else{var Be=c.isBuffer(X)?X:c.from(X,O),rt=Be.length;if(rt===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(te=0;te<C-W;++te)this[te+W]=Be[te%rt]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function nt(X,W){var C;W=W||1/0;for(var O=X.length,le=null,te=[],Be=0;Be<O;++Be){if((C=X.charCodeAt(Be))>55295&&C<57344){if(!le){if(C>56319){(W-=3)>-1&&te.push(239,191,189);continue}if(Be+1===O){(W-=3)>-1&&te.push(239,191,189);continue}le=C;continue}if(C<56320){(W-=3)>-1&&te.push(239,191,189),le=C;continue}C=65536+(le-55296<<10|C-56320)}else le&&(W-=3)>-1&&te.push(239,191,189);if(le=null,C<128){if((W-=1)<0)break;te.push(C)}else if(C<2048){if((W-=2)<0)break;te.push(C>>6|192,63&C|128)}else if(C<65536){if((W-=3)<0)break;te.push(C>>12|224,C>>6&63|128,63&C|128)}else{if(!(C<1114112))throw new Error("Invalid code point");if((W-=4)<0)break;te.push(C>>18|240,C>>12&63|128,C>>6&63|128,63&C|128)}}return te}function bt(X){return r.toByteArray(function(W){if((W=(W=W.split("=")[0]).trim().replace(Ke,"")).length<2)return"";for(;W.length%4!=0;)W+="=";return W}(X))}function Rt(X,W,C,O){for(var le=0;le<O&&!(le+C>=W.length||le>=X.length);++le)W[le+C]=X[le];return le}function Pe(X,W){return X instanceof W||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===W.name}function Ne(X){return X!=X}var Qe=function(){for(var X="0123456789abcdef",W=new Array(256),C=0;C<16;++C)for(var O=16*C,le=0;le<16;++le)W[O+le]=X[C]+X[le];return W}()},6877:function(n,e){var t={parseBuffer:function(o){return new r(o).parse()},addBoxProcessor:function(o,l){typeof o=="string"&&typeof l=="function"&&(i.prototype._boxProcessors[o]=l)},createFile:function(){return new r},createBox:function(o,l,u){var c=i.create(o);return l&&l.append(c,u),c},createFullBox:function(o,l,u){var c=t.createBox(o,l,u);return c.version=0,c.flags=0,c},Utils:{}};t.Utils.dataViewToString=function(o,l){var u=l||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(u).decode(o);var c=[],d=0;if(u==="utf-8")for(;d<o.byteLength;){var m=o.getUint8(d++);m<128||(m<224?(m=(31&m)<<6,m|=63&o.getUint8(d++)):m<240?(m=(15&m)<<12,m|=(63&o.getUint8(d++))<<6,m|=63&o.getUint8(d++)):(m=(7&m)<<18,m|=(63&o.getUint8(d++))<<12,m|=(63&o.getUint8(d++))<<6,m|=63&o.getUint8(d++))),c.push(String.fromCharCode(m))}else for(;d<o.byteLength;)c.push(String.fromCharCode(o.getUint8(d++)));return c.join("")},t.Utils.utf8ToByteArray=function(o){var l,u;if(typeof TextEncoder<"u")l=new TextEncoder().encode(o);else for(l=[],u=0;u<o.length;++u){var c=o.charCodeAt(u);c<128?l.push(c):c<2048?(l.push(192|c>>6),l.push(128|63&c)):c<65536?(l.push(224|c>>12),l.push(128|63&c>>6),l.push(128|63&c)):(l.push(240|c>>18),l.push(128|63&c>>12),l.push(128|63&c>>6),l.push(128|63&c))}return l},t.Utils.appendBox=function(o,l,u){if(l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,u!==-1)if(u!=null){var c,d=-1;if(typeof u=="number")d=u;else{if(typeof u=="string")c=u;else{if(typeof u!="object"||!u.type)return void o.boxes.push(l);c=u.type}for(var m=0;m<o.boxes.length;m++)if(c===o.boxes[m].type){d=m+1;break}}o.boxes.splice(d,0,l)}else o.boxes.push(l)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(o){this.offset=o===void 0?0:o};var r=function(o){this._cursor=new t.Cursor,this.boxes=[],o&&(this._raw=new DataView(o))};r.prototype.fetch=function(o){var l=this.fetchAll(o,!0);return l.length?l[0]:null},r.prototype.fetchAll=function(o,l){var u=[];return r._sweep.call(this,o,u,l),u},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var o=i.parse(this);if(o.type===void 0)break;this.boxes.push(o)}return this},r._sweep=function(o,l,u){for(var c in this.type&&this.type==o&&l.push(this),this.boxes){if(l.length&&u)return;r._sweep.call(this.boxes[c],o,l,u)}},r.prototype.write=function(){var o,l=0;for(o=0;o<this.boxes.length;o++)l+=this.boxes[o].getLength(!1);var u=new Uint8Array(l);for(this._rawo=new DataView(u.buffer),this.bytes=u,this._cursor.offset=0,o=0;o<this.boxes.length;o++)this.boxes[o].write();return u.buffer},r.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)};var i=function(){this._cursor=new t.Cursor};i.parse=function(o){var l=new i;return l._offset=o._cursor.offset,l._root=o._root?o._root:o,l._raw=o._raw,l._parent=o,l._parseBox(),o._cursor.offset=l._raw.byteOffset+l._raw.byteLength,l},i.create=function(o){var l=new i;return l.type=o,l.boxes=[],l},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],i.prototype._boxProcessors={},i.prototype._procField=function(o,l,u){this._parsing?this[o]=this._readField(l,u):this._writeField(l,u,this[o])},i.prototype._procFieldArray=function(o,l,u,c){var d;if(this._parsing)for(this[o]=[],d=0;d<l;d++)this[o][d]=this._readField(u,c);else for(d=0;d<this[o].length;d++)this._writeField(u,c,this[o][d])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(o,l,u){var c;if(this._parsing)for(this[o]=[],c=0;c<l;c++)this[o].push({}),u.call(this,this[o][c]);else for(c=0;c<l;c++)u.call(this,this[o][c])},i.prototype._procSubEntries=function(o,l,u,c){var d;if(this._parsing)for(o[l]=[],d=0;d<u;d++)o[l].push({}),c.call(this,o[l][d]);else for(d=0;d<u;d++)c.call(this,o[l][d])},i.prototype._procEntryField=function(o,l,u,c){this._parsing?o[l]=this._readField(u,c):this._writeField(u,c,o[l])},i.prototype._procSubBoxes=function(o,l){var u;if(this._parsing)for(this[o]=[],u=0;u<l;u++)this[o].push(i.parse(this));else for(u=0;u<l;u++)this._rawo?this[o][u].write():this.size+=this[o][u].getLength()},i.prototype._readField=function(o,l){switch(o){case"uint":return this._readUint(l);case"int":return this._readInt(l);case"template":return this._readTemplate(l);case"string":return l===-1?this._readTerminatedString():this._readString(l);case"data":return this._readData(l);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},i.prototype._readInt=function(o){var l=null,u=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:l=this._raw.getInt8(u);break;case 16:l=this._raw.getInt16(u);break;case 32:l=this._raw.getInt32(u);break;case 64:var c=this._raw.getInt32(u),d=this._raw.getInt32(u+4);l=c*Math.pow(2,32)+d}return this._cursor.offset+=o>>3,l},i.prototype._readUint=function(o){var l,u,c=null,d=this._cursor.offset-this._raw.byteOffset;switch(o){case 8:c=this._raw.getUint8(d);break;case 16:c=this._raw.getUint16(d);break;case 24:c=((l=this._raw.getUint16(d))<<8)+(u=this._raw.getUint8(d+2));break;case 32:c=this._raw.getUint32(d);break;case 64:l=this._raw.getUint32(d),u=this._raw.getUint32(d+4),c=l*Math.pow(2,32)+u}return this._cursor.offset+=o>>3,c},i.prototype._readString=function(o){for(var l="",u=0;u<o;u++){var c=this._readUint(8);l+=String.fromCharCode(c)}return l},i.prototype._readTemplate=function(o){return this._readUint(o/2)+this._readUint(o/2)/Math.pow(2,o/2)},i.prototype._readTerminatedString=function(){for(var o="";this._cursor.offset-this._offset<this._raw.byteLength;){var l=this._readUint(8);if(l===0)break;o+=String.fromCharCode(l)}return o},i.prototype._readData=function(o){var l=o>0?o:this._raw.byteLength-(this._cursor.offset-this._offset);if(l>0){var u=new Uint8Array(this._raw.buffer,this._cursor.offset,l);return this._cursor.offset+=l,u}return null},i.prototype._readUTF8String=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;return o>0&&(l=new DataView(this._raw.buffer,this._cursor.offset,o),this._cursor.offset+=o),l&&t.Utils.dataViewToString(l)},i.prototype._readUTF8TerminatedString=function(){var o=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;if(o>0){var u;for(l=new DataView(this._raw.buffer,this._cursor.offset,o),u=0;u<o&&l.getUint8(u)!==0;u++);l=new DataView(this._raw.buffer,this._cursor.offset,u),this._cursor.offset+=Math.min(u+1,o)}return l&&t.Utils.dataViewToString(l)},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(o,l){t.Utils.appendBox(this,o,l)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.size+=this.boxes[o].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var o=0;o<this.boxes.length;o++)this.boxes[o].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(o,l){if(this._rawo){var u=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setInt8(u,l);break;case 16:this._rawo.setInt16(u,l);break;case 32:this._rawo.setInt32(u,l);break;case 64:var c=Math.floor(l/Math.pow(2,32)),d=l-c*Math.pow(2,32);this._rawo.setUint32(u,c),this._rawo.setUint32(u+4,d)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeUint=function(o,l){if(this._rawo){var u,c,d=this._cursor.offset-this._rawo.byteOffset;switch(o){case 8:this._rawo.setUint8(d,l);break;case 16:this._rawo.setUint16(d,l);break;case 24:u=(16776960&l)>>8,c=255&l,this._rawo.setUint16(d,u),this._rawo.setUint8(d+2,c);break;case 32:this._rawo.setUint32(d,l);break;case 64:c=l-(u=Math.floor(l/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(d,u),this._rawo.setUint32(d+4,c)}this._cursor.offset+=o>>3}else this.size+=o>>3},i.prototype._writeString=function(o,l){for(var u=0;u<o;u++)this._writeUint(8,l.charCodeAt(u))},i.prototype._writeTerminatedString=function(o){if(o.length!==0){for(var l=0;l<o.length;l++)this._writeUint(8,o.charCodeAt(l));this._writeUint(8,0)}},i.prototype._writeTemplate=function(o,l){var u=Math.floor(l),c=(l-u)*Math.pow(2,o/2);this._writeUint(o/2,u),this._writeUint(o/2,c)},i.prototype._writeData=function(o){if(o)if(this._rawo){if(o instanceof Array){for(var l=this._cursor.offset-this._rawo.byteOffset,u=0;u<o.length;u++)this._rawo.setInt8(l+u,o[u]);this._cursor.offset+=o.length}o instanceof Uint8Array&&(this._root.bytes.set(o,this._cursor.offset),this._cursor.offset+=o.length)}else this.size+=o.length},i.prototype._writeUTF8String=function(o){var l=t.Utils.utf8ToByteArray(o);if(this._rawo)for(var u=new DataView(this._rawo.buffer,this._cursor.offset,l.length),c=0;c<l.length;c++)u.setUint8(c,l[c]);else this.size+=l.length},i.prototype._writeField=function(o,l,u){switch(o){case"uint":this._writeUint(l,u);break;case"int":this._writeInt(l,u);break;case"template":this._writeTemplate(l,u);break;case"string":l==-1?this._writeTerminatedString(u):this._writeString(l,u);break;case"data":this._writeData(u);break;case"utf8":this._writeUTF8String(u)}},i.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_offset",this.version===1?"int":"uint",32)})},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"segment_duration","uint",this.version===1?64:32),this._procEntryField(o,"media_time","int",this.version===1?64:32),this._procEntryField(o,"media_rate_integer","int",16),this._procEntryField(o,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var o=-1;this._parsing&&(o=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",o,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},i.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},i.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},i.prototype._boxProcessors.meta=function(){this._procFullBox()},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},i.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(o){this._procEntryField(o,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var o=-1;this._parsing&&(o=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",o,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(o){this._parsing||(o.reference=(1&o.reference_type)<<31,o.reference|=2147483647&o.referenced_size,o.sap=(1&o.starts_with_SAP)<<31,o.sap|=(3&o.SAP_type)<<28,o.sap|=268435455&o.SAP_delta_time),this._procEntryField(o,"reference","uint",32),this._procEntryField(o,"subsegment_duration","uint",32),this._procEntryField(o,"sap","uint",32),this._parsing&&(o.reference_type=o.reference>>31&1,o.referenced_size=2147483647&o.reference,o.starts_with_SAP=o.sap>>31&1,o.SAP_type=o.sap>>28&7,o.SAP_delta_time=268435455&o.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(o){this._procEntryField(o,"ranges_count","uint",32),this._procSubEntries(o,"ranges",o.ranges_count,function(l){this._procEntryField(l,"level","uint",8),this._procEntryField(l,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_count","uint",32),this._procEntryField(o,"sample_delta","uint",32)})},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(o){this._procEntryField(o,"sample_delta","uint",32),this._procEntryField(o,"subsample_count","uint",16),this._procSubEntries(o,"subsamples",o.subsample_count,function(l){this._procEntryField(l,"subsample_size","uint",this.version===1?32:16),this._procEntryField(l,"subsample_priority","uint",8),this._procEntryField(l,"discardable","uint",8),this._procEntryField(l,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(o){this._procEntryField(o,"time","uint",this.version===1?64:32),this._procEntryField(o,"moof_offset","uint",this.version===1?64:32),this._procEntryField(o,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(o,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(o,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(o){256&this.flags&&this._procEntryField(o,"sample_duration","uint",32),512&this.flags&&this._procEntryField(o,"sample_size","uint",32),1024&this.flags&&this._procEntryField(o,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(o,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},9826:function(n){var e,t=typeof Reflect=="object"?Reflect:null,r=t&&typeof t.apply=="function"?t.apply:function(S,x,_){return Function.prototype.apply.call(S,x,_)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var i=Number.isNaN||function(S){return S!=S};function o(){o.init.call(this)}n.exports=o,n.exports.once=function(S,x){return new Promise(function(_,A){function z(he){S.removeListener(x,ie),A(he)}function ie(){typeof S.removeListener=="function"&&S.removeListener("error",z),_([].slice.call(arguments))}E(S,x,ie,{once:!0}),x!=="error"&&function(he,P){typeof he.on=="function"&&E(he,"error",P,{once:!0})}(S,z)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function u(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function c(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}function d(S,x,_,A){var z,ie,he,P;if(u(_),(ie=S._events)===void 0?(ie=S._events=Object.create(null),S._eventsCount=0):(ie.newListener!==void 0&&(S.emit("newListener",x,_.listener?_.listener:_),ie=S._events),he=ie[x]),he===void 0)he=ie[x]=_,++S._eventsCount;else if(typeof he=="function"?he=ie[x]=A?[_,he]:[he,_]:A?he.unshift(_):he.push(_),(z=c(S))>0&&he.length>z&&!he.warned){he.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+he.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=S,U.type=x,U.count=he.length,P=U,console&&console.warn&&console.warn(P)}return S}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,x,_){var A={fired:!1,wrapFn:void 0,target:S,type:x,listener:_},z=m.bind(A);return z.listener=_,A.wrapFn=z,z}function h(S,x,_){var A=S._events;if(A===void 0)return[];var z=A[x];return z===void 0?[]:typeof z=="function"?_?[z.listener||z]:[z]:_?function(ie){for(var he=new Array(ie.length),P=0;P<he.length;++P)he[P]=ie[P].listener||ie[P];return he}(z):p(z,z.length)}function g(S){var x=this._events;if(x!==void 0){var _=x[S];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}function p(S,x){for(var _=new Array(x),A=0;A<x;++A)_[A]=S[A];return _}function E(S,x,_,A){if(typeof S.on=="function")A.once?S.once(x,_):S.on(x,_);else{if(typeof S.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(x,function z(ie){A.once&&S.removeEventListener(x,z),_(ie)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");l=S}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(S){for(var x=[],_=1;_<arguments.length;_++)x.push(arguments[_]);var A=S==="error",z=this._events;if(z!==void 0)A=A&&z.error===void 0;else if(!A)return!1;if(A){var ie;if(x.length>0&&(ie=x[0]),ie instanceof Error)throw ie;var he=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw he.context=ie,he}var P=z[S];if(P===void 0)return!1;if(typeof P=="function")r(P,this,x);else{var U=P.length,ce=p(P,U);for(_=0;_<U;++_)r(ce[_],this,x)}return!0},o.prototype.addListener=function(S,x){return d(this,S,x,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,x){return d(this,S,x,!0)},o.prototype.once=function(S,x){return u(x),this.on(S,f(this,S,x)),this},o.prototype.prependOnceListener=function(S,x){return u(x),this.prependListener(S,f(this,S,x)),this},o.prototype.removeListener=function(S,x){var _,A,z,ie,he;if(u(x),(A=this._events)===void 0)return this;if((_=A[S])===void 0)return this;if(_===x||_.listener===x)--this._eventsCount==0?this._events=Object.create(null):(delete A[S],A.removeListener&&this.emit("removeListener",S,_.listener||x));else if(typeof _!="function"){for(z=-1,ie=_.length-1;ie>=0;ie--)if(_[ie]===x||_[ie].listener===x){he=_[ie].listener,z=ie;break}if(z<0)return this;z===0?_.shift():function(P,U){for(;U+1<P.length;U++)P[U]=P[U+1];P.pop()}(_,z),_.length===1&&(A[S]=_[0]),A.removeListener!==void 0&&this.emit("removeListener",S,he||x)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var x,_,A;if((_=this._events)===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _[S]),this;if(arguments.length===0){var z,ie=Object.keys(_);for(A=0;A<ie.length;++A)(z=ie[A])!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(x=_[S])=="function")this.removeListener(S,x);else if(x!==void 0)for(A=x.length-1;A>=0;A--)this.removeListener(S,x[A]);return this},o.prototype.listeners=function(S){return h(this,S,!0)},o.prototype.rawListeners=function(S){return h(this,S,!1)},o.listenerCount=function(S,x){return typeof S.listenerCount=="function"?S.listenerCount(x):g.call(S,x)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(n){n.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,o,l;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(o=i;o--!=0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=i;o--!=0;)if(!Object.prototype.hasOwnProperty.call(r,l[o]))return!1;for(o=i;o--!=0;){var u=l[o];if(!e(t[u],r[u]))return!1}return!0}return t!=t&&r!=r}},7986:function(n,e){e.read=function(t,r,i,o,l){var u,c,d=8*l-o-1,m=(1<<d)-1,f=m>>1,h=-7,g=i?l-1:0,p=i?-1:1,E=t[r+g];for(g+=p,u=E&(1<<-h)-1,E>>=-h,h+=d;h>0;u=256*u+t[r+g],g+=p,h-=8);for(c=u&(1<<-h)-1,u>>=-h,h+=o;h>0;c=256*c+t[r+g],g+=p,h-=8);if(u===0)u=1-f;else{if(u===m)return c?NaN:1/0*(E?-1:1);c+=Math.pow(2,o),u-=f}return(E?-1:1)*c*Math.pow(2,u-o)},e.write=function(t,r,i,o,l,u){var c,d,m,f=8*u-l-1,h=(1<<f)-1,g=h>>1,p=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:u-1,S=o?1:-1,x=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,c=h):(c=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-c))<1&&(c--,m*=2),(r+=c+g>=1?p/m:p*Math.pow(2,1-g))*m>=2&&(c++,m/=2),c+g>=h?(d=0,c=h):c+g>=1?(d=(r*m-1)*Math.pow(2,l),c+=g):(d=r*Math.pow(2,g-1)*Math.pow(2,l),c=0));l>=8;t[i+E]=255&d,E+=S,d/=256,l-=8);for(c=c<<l|d,f+=l;f>0;t[i+E]=255&c,E+=S,c/=256,f-=8);t[i+E-S]|=128*x}},5474:function(n,e,t){(function(r){r.parser=function(C,O){return new l(C,O)},r.SAXParser=l,r.SAXStream=c,r.createStream=function(C,O){return new c(C,O)},r.MAX_BUFFER_LENGTH=65536;var i,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function l(C,O){if(!(this instanceof l))return new l(C,O);var le=this;(function(te){for(var Be=0,rt=o.length;Be<rt;Be++)te[o[Be]]=""})(le),le.q=le.c="",le.bufferCheckPosition=r.MAX_BUFFER_LENGTH,le.opt=O||{},le.opt.lowercase=le.opt.lowercase||le.opt.lowercasetags,le.looseCase=le.opt.lowercase?"toLowerCase":"toUpperCase",le.tags=[],le.closed=le.closedRoot=le.sawRoot=!1,le.tag=le.error=null,le.strict=!!C,le.noscript=!(!C&&!le.opt.noscript),le.state=Se.BEGIN,le.strictEntities=le.opt.strictEntities,le.ENTITIES=le.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),le.attribList=[],le.opt.xmlns&&(le.ns=Object.create(_)),le.trackPosition=le.opt.position!==!1,le.trackPosition&&(le.position=le.line=le.column=0),Le(le,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(C){function O(){}return O.prototype=C,new O}),Object.keys||(Object.keys=function(C){var O=[];for(var le in C)C.hasOwnProperty(le)&&O.push(le);return O}),l.prototype={end:function(){We(this)},write:function(C){var O=this;if(this.error)throw this.error;if(O.closed)return Me(O,"Cannot write after close. Assign an onready handler.");if(C===null)return We(O);typeof C=="object"&&(C=C.toString());for(var le=0,te="";te=W(C,le++),O.c=te,te;)switch(O.trackPosition&&(O.position++,te===`
`?(O.line++,O.column=0):O.column++),O.state){case Se.BEGIN:if(O.state=Se.BEGIN_WHITESPACE,te==="\uFEFF")continue;X(O,te);continue;case Se.BEGIN_WHITESPACE:X(O,te);continue;case Se.TEXT:if(O.sawRoot&&!O.closedRoot){for(var Be=le-1;te&&te!=="<"&&te!=="&";)(te=W(C,le++))&&O.trackPosition&&(O.position++,te===`
`?(O.line++,O.column=0):O.column++);O.textNode+=C.substring(Be,le-1)}te!=="<"||O.sawRoot&&O.closedRoot&&!O.strict?(!ce(d,te)||O.sawRoot&&!O.closedRoot||Ke(O,"Text data outside of root node."),te==="&"?O.state=Se.TEXT_ENTITY:O.textNode+=te):(O.state=Se.OPEN_WAKA,O.startTagPosition=O.position);continue;case Se.SCRIPT:te==="<"?O.state=Se.SCRIPT_ENDING:O.script+=te;continue;case Se.SCRIPT_ENDING:te==="/"?O.state=Se.CLOSE_TAG:(O.script+="<"+te,O.state=Se.SCRIPT);continue;case Se.OPEN_WAKA:if(te==="!")O.state=Se.SGML_DECL,O.sgmlDecl="";else if(!U(d,te))if(U(A,te))O.state=Se.OPEN_TAG,O.tagName=te;else if(te==="/")O.state=Se.CLOSE_TAG,O.tagName="";else if(te==="?")O.state=Se.PROC_INST,O.procInstName=O.procInstBody="";else{if(Ke(O,"Unencoded <"),O.startTagPosition+1<O.position){var rt=O.position-O.startTagPosition;te=new Array(rt).join(" ")+te}O.textNode+="<"+te,O.state=Se.TEXT}continue;case Se.SGML_DECL:(O.sgmlDecl+te).toUpperCase()===p?(Re(O,"onopencdata"),O.state=Se.CDATA,O.sgmlDecl="",O.cdata=""):O.sgmlDecl+te==="--"?(O.state=Se.COMMENT,O.comment="",O.sgmlDecl=""):(O.sgmlDecl+te).toUpperCase()===E?(O.state=Se.DOCTYPE,(O.doctype||O.sawRoot)&&Ke(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):te===">"?(Re(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=Se.TEXT):(U(h,te)&&(O.state=Se.SGML_DECL_QUOTED),O.sgmlDecl+=te);continue;case Se.SGML_DECL_QUOTED:te===O.q&&(O.state=Se.SGML_DECL,O.q=""),O.sgmlDecl+=te;continue;case Se.DOCTYPE:te===">"?(O.state=Se.TEXT,Re(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=te,te==="["?O.state=Se.DOCTYPE_DTD:U(h,te)&&(O.state=Se.DOCTYPE_QUOTED,O.q=te));continue;case Se.DOCTYPE_QUOTED:O.doctype+=te,te===O.q&&(O.q="",O.state=Se.DOCTYPE);continue;case Se.DOCTYPE_DTD:O.doctype+=te,te==="]"?O.state=Se.DOCTYPE:U(h,te)&&(O.state=Se.DOCTYPE_DTD_QUOTED,O.q=te);continue;case Se.DOCTYPE_DTD_QUOTED:O.doctype+=te,te===O.q&&(O.state=Se.DOCTYPE_DTD,O.q="");continue;case Se.COMMENT:te==="-"?O.state=Se.COMMENT_ENDING:O.comment+=te;continue;case Se.COMMENT_ENDING:te==="-"?(O.state=Se.COMMENT_ENDED,O.comment=Ue(O.opt,O.comment),O.comment&&Re(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+te,O.state=Se.COMMENT);continue;case Se.COMMENT_ENDED:te!==">"?(Ke(O,"Malformed comment"),O.comment+="--"+te,O.state=Se.COMMENT):O.state=Se.TEXT;continue;case Se.CDATA:te==="]"?O.state=Se.CDATA_ENDING:O.cdata+=te;continue;case Se.CDATA_ENDING:te==="]"?O.state=Se.CDATA_ENDING_2:(O.cdata+="]"+te,O.state=Se.CDATA);continue;case Se.CDATA_ENDING_2:te===">"?(O.cdata&&Re(O,"oncdata",O.cdata),Re(O,"onclosecdata"),O.cdata="",O.state=Se.TEXT):te==="]"?O.cdata+="]":(O.cdata+="]]"+te,O.state=Se.CDATA);continue;case Se.PROC_INST:te==="?"?O.state=Se.PROC_INST_ENDING:U(d,te)?O.state=Se.PROC_INST_BODY:O.procInstName+=te;continue;case Se.PROC_INST_BODY:if(!O.procInstBody&&U(d,te))continue;te==="?"?O.state=Se.PROC_INST_ENDING:O.procInstBody+=te;continue;case Se.PROC_INST_ENDING:te===">"?(Re(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=Se.TEXT):(O.procInstBody+="?"+te,O.state=Se.PROC_INST_BODY);continue;case Se.OPEN_TAG:U(z,te)?O.tagName+=te:(nt(O),te===">"?Pe(O):te==="/"?O.state=Se.OPEN_TAG_SLASH:(ce(d,te)&&Ke(O,"Invalid character in tag name"),O.state=Se.ATTRIB));continue;case Se.OPEN_TAG_SLASH:te===">"?(Pe(O,!0),Ne(O)):(Ke(O,"Forward-slash in opening tag not followed by >"),O.state=Se.ATTRIB);continue;case Se.ATTRIB:if(U(d,te))continue;te===">"?Pe(O):te==="/"?O.state=Se.OPEN_TAG_SLASH:U(A,te)?(O.attribName=te,O.attribValue="",O.state=Se.ATTRIB_NAME):Ke(O,"Invalid attribute name");continue;case Se.ATTRIB_NAME:te==="="?O.state=Se.ATTRIB_VALUE:te===">"?(Ke(O,"Attribute without value"),O.attribValue=O.attribName,Rt(O),Pe(O)):U(d,te)?O.state=Se.ATTRIB_NAME_SAW_WHITE:U(z,te)?O.attribName+=te:Ke(O,"Invalid attribute name");continue;case Se.ATTRIB_NAME_SAW_WHITE:if(te==="=")O.state=Se.ATTRIB_VALUE;else{if(U(d,te))continue;Ke(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",Re(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",te===">"?Pe(O):U(A,te)?(O.attribName=te,O.state=Se.ATTRIB_NAME):(Ke(O,"Invalid attribute name"),O.state=Se.ATTRIB)}continue;case Se.ATTRIB_VALUE:if(U(d,te))continue;U(h,te)?(O.q=te,O.state=Se.ATTRIB_VALUE_QUOTED):(Ke(O,"Unquoted attribute value"),O.state=Se.ATTRIB_VALUE_UNQUOTED,O.attribValue=te);continue;case Se.ATTRIB_VALUE_QUOTED:if(te!==O.q){te==="&"?O.state=Se.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=te;continue}Rt(O),O.q="",O.state=Se.ATTRIB_VALUE_CLOSED;continue;case Se.ATTRIB_VALUE_CLOSED:U(d,te)?O.state=Se.ATTRIB:te===">"?Pe(O):te==="/"?O.state=Se.OPEN_TAG_SLASH:U(A,te)?(Ke(O,"No whitespace between attributes"),O.attribName=te,O.attribValue="",O.state=Se.ATTRIB_NAME):Ke(O,"Invalid attribute name");continue;case Se.ATTRIB_VALUE_UNQUOTED:if(ce(g,te)){te==="&"?O.state=Se.ATTRIB_VALUE_ENTITY_U:O.attribValue+=te;continue}Rt(O),te===">"?Pe(O):O.state=Se.ATTRIB;continue;case Se.CLOSE_TAG:if(O.tagName)te===">"?Ne(O):U(z,te)?O.tagName+=te:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=Se.SCRIPT):(ce(d,te)&&Ke(O,"Invalid tagname in closing tag"),O.state=Se.CLOSE_TAG_SAW_WHITE);else{if(U(d,te))continue;ce(A,te)?O.script?(O.script+="</"+te,O.state=Se.SCRIPT):Ke(O,"Invalid tagname in closing tag."):O.tagName=te}continue;case Se.CLOSE_TAG_SAW_WHITE:if(U(d,te))continue;te===">"?Ne(O):Ke(O,"Invalid characters in closing tag");continue;case Se.TEXT_ENTITY:case Se.ATTRIB_VALUE_ENTITY_Q:case Se.ATTRIB_VALUE_ENTITY_U:var qe,Xe;switch(O.state){case Se.TEXT_ENTITY:qe=Se.TEXT,Xe="textNode";break;case Se.ATTRIB_VALUE_ENTITY_Q:qe=Se.ATTRIB_VALUE_QUOTED,Xe="attribValue";break;case Se.ATTRIB_VALUE_ENTITY_U:qe=Se.ATTRIB_VALUE_UNQUOTED,Xe="attribValue"}te===";"?(O[Xe]+=Qe(O),O.entity="",O.state=qe):U(O.entity.length?he:ie,te)?O.entity+=te:(Ke(O,"Invalid character in entity name"),O[Xe]+="&"+O.entity+te,O.entity="",O.state=qe);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&function($e){for(var et=Math.max(r.MAX_BUFFER_LENGTH,10),Ve=0,Ze=0,ct=o.length;Ze<ct;Ze++){var Ht=$e[o[Ze]].length;if(Ht>et)switch(o[Ze]){case"textNode":Ye($e);break;case"cdata":Re($e,"oncdata",$e.cdata),$e.cdata="";break;case"script":Re($e,"onscript",$e.script),$e.script="";break;default:Me($e,"Max buffer length exceeded: "+o[Ze])}Ve=Math.max(Ve,Ht)}var Pt=r.MAX_BUFFER_LENGTH-Ve;$e.bufferCheckPosition=Pt+$e.position}(O),O},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var C;Ye(C=this),C.cdata!==""&&(Re(C,"oncdata",C.cdata),C.cdata=""),C.script!==""&&(Re(C,"onscript",C.script),C.script="")}};try{i=t(3515).Stream}catch{i=function(){}}var u=r.EVENTS.filter(function(C){return C!=="error"&&C!=="end"});function c(C,O){if(!(this instanceof c))return new c(C,O);i.apply(this),this._parser=new l(C,O),this.writable=!0,this.readable=!0;var le=this;this._parser.onend=function(){le.emit("end")},this._parser.onerror=function(te){le.emit("error",te),le._parser.error=null},this._decoder=null,u.forEach(function(te){Object.defineProperty(le,"on"+te,{get:function(){return le._parser["on"+te]},set:function(Be){if(!Be)return le.removeAllListeners(te),le._parser["on"+te]=Be,Be;le.on(te,Be)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(i.prototype,{constructor:{value:c}}),c.prototype.write=function(C){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(C)){if(!this._decoder){var O=t(748).StringDecoder;this._decoder=new O("utf8")}C=this._decoder.write(C)}return this._parser.write(C.toString()),this.emit("data",C),!0},c.prototype.end=function(C){return C&&C.length&&this.write(C),this._parser.end(),!0},c.prototype.on=function(C,O){var le=this;return le._parser["on"+C]||u.indexOf(C)===-1||(le._parser["on"+C]=function(){var te=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);te.splice(0,0,C),le.emit.apply(le,te)}),i.prototype.on.call(le,C,O)};var d=`\r
	 `,m="0124356789",f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h=`'"`,g=d+">",p="[CDATA[",E="DOCTYPE",S="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",_={xml:S,xmlns:x};d=P(d),m=P(m),f=P(f);var A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ie=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,he=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function P(C){return C.split("").reduce(function(O,le){return O[le]=!0,O},{})}function U(C,O){return function(le){return Object.prototype.toString.call(le)==="[object RegExp]"}(C)?!!O.match(C):C[O]}function ce(C,O){return!U(C,O)}h=P(h),g=P(g);var de,_e,je,Se=0;for(var ze in r.STATE={BEGIN:Se++,BEGIN_WHITESPACE:Se++,TEXT:Se++,TEXT_ENTITY:Se++,OPEN_WAKA:Se++,SGML_DECL:Se++,SGML_DECL_QUOTED:Se++,DOCTYPE:Se++,DOCTYPE_QUOTED:Se++,DOCTYPE_DTD:Se++,DOCTYPE_DTD_QUOTED:Se++,COMMENT_STARTING:Se++,COMMENT:Se++,COMMENT_ENDING:Se++,COMMENT_ENDED:Se++,CDATA:Se++,CDATA_ENDING:Se++,CDATA_ENDING_2:Se++,PROC_INST:Se++,PROC_INST_BODY:Se++,PROC_INST_ENDING:Se++,OPEN_TAG:Se++,OPEN_TAG_SLASH:Se++,ATTRIB:Se++,ATTRIB_NAME:Se++,ATTRIB_NAME_SAW_WHITE:Se++,ATTRIB_VALUE:Se++,ATTRIB_VALUE_QUOTED:Se++,ATTRIB_VALUE_CLOSED:Se++,ATTRIB_VALUE_UNQUOTED:Se++,ATTRIB_VALUE_ENTITY_Q:Se++,ATTRIB_VALUE_ENTITY_U:Se++,CLOSE_TAG:Se++,CLOSE_TAG_SAW_WHITE:Se++,SCRIPT:Se++,SCRIPT_ENDING:Se++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(C){var O=r.ENTITIES[C],le=typeof O=="number"?String.fromCharCode(O):O;r.ENTITIES[C]=le}),r.STATE)r.STATE[r.STATE[ze]]=ze;function Le(C,O,le){C[O]&&C[O](le)}function Re(C,O,le){C.textNode&&Ye(C),Le(C,O,le)}function Ye(C){C.textNode=Ue(C.opt,C.textNode),C.textNode&&Le(C,"ontext",C.textNode),C.textNode=""}function Ue(C,O){return C.trim&&(O=O.trim()),C.normalize&&(O=O.replace(/\s+/g," ")),O}function Me(C,O){return Ye(C),C.trackPosition&&(O+=`
Line: `+C.line+`
Column: `+C.column+`
Char: `+C.c),O=new Error(O),C.error=O,Le(C,"onerror",O),C}function We(C){return C.sawRoot&&!C.closedRoot&&Ke(C,"Unclosed root tag"),C.state!==Se.BEGIN&&C.state!==Se.BEGIN_WHITESPACE&&C.state!==Se.TEXT&&Me(C,"Unexpected end"),Ye(C),C.c="",C.closed=!0,Le(C,"onend"),l.call(C,C.strict,C.opt),C}function Ke(C,O){if(typeof C!="object"||!(C instanceof l))throw new Error("bad call to strictFail");C.strict&&Me(C,O)}function nt(C){C.strict||(C.tagName=C.tagName[C.looseCase]());var O=C.tags[C.tags.length-1]||C,le=C.tag={name:C.tagName,attributes:{}};C.opt.xmlns&&(le.ns=O.ns),C.attribList.length=0,Re(C,"onopentagstart",le)}function bt(C,O){var le=C.indexOf(":")<0?["",C]:C.split(":"),te=le[0],Be=le[1];return O&&C==="xmlns"&&(te="xmlns",Be=""),{prefix:te,local:Be}}function Rt(C){if(C.strict||(C.attribName=C.attribName[C.looseCase]()),C.attribList.indexOf(C.attribName)!==-1||C.tag.attributes.hasOwnProperty(C.attribName))C.attribName=C.attribValue="";else{if(C.opt.xmlns){var O=bt(C.attribName,!0),le=O.prefix,te=O.local;if(le==="xmlns")if(te==="xml"&&C.attribValue!==S)Ke(C,"xml: prefix must be bound to "+S+`
Actual: `+C.attribValue);else if(te==="xmlns"&&C.attribValue!==x)Ke(C,"xmlns: prefix must be bound to "+x+`
Actual: `+C.attribValue);else{var Be=C.tag,rt=C.tags[C.tags.length-1]||C;Be.ns===rt.ns&&(Be.ns=Object.create(rt.ns)),Be.ns[te]=C.attribValue}C.attribList.push([C.attribName,C.attribValue])}else C.tag.attributes[C.attribName]=C.attribValue,Re(C,"onattribute",{name:C.attribName,value:C.attribValue});C.attribName=C.attribValue=""}}function Pe(C,O){if(C.opt.xmlns){var le=C.tag,te=bt(C.tagName);le.prefix=te.prefix,le.local=te.local,le.uri=le.ns[te.prefix]||"",le.prefix&&!le.uri&&(Ke(C,"Unbound namespace prefix: "+JSON.stringify(C.tagName)),le.uri=te.prefix);var Be=C.tags[C.tags.length-1]||C;le.ns&&Be.ns!==le.ns&&Object.keys(le.ns).forEach(function(Kt){Re(C,"onopennamespace",{prefix:Kt,uri:le.ns[Kt]})});for(var rt=0,qe=C.attribList.length;rt<qe;rt++){var Xe=C.attribList[rt],$e=Xe[0],et=Xe[1],Ve=bt($e,!0),Ze=Ve.prefix,ct=Ve.local,Ht=Ze===""?"":le.ns[Ze]||"",Pt={name:$e,value:et,prefix:Ze,local:ct,uri:Ht};Ze&&Ze!=="xmlns"&&!Ht&&(Ke(C,"Unbound namespace prefix: "+JSON.stringify(Ze)),Pt.uri=Ze),C.tag.attributes[$e]=Pt,Re(C,"onattribute",Pt)}C.attribList.length=0}C.tag.isSelfClosing=!!O,C.sawRoot=!0,C.tags.push(C.tag),Re(C,"onopentag",C.tag),O||(C.noscript||C.tagName.toLowerCase()!=="script"?C.state=Se.TEXT:C.state=Se.SCRIPT,C.tag=null,C.tagName=""),C.attribName=C.attribValue="",C.attribList.length=0}function Ne(C){if(!C.tagName)return Ke(C,"Weird empty close tag."),C.textNode+="</>",void(C.state=Se.TEXT);if(C.script){if(C.tagName!=="script")return C.script+="</"+C.tagName+">",C.tagName="",void(C.state=Se.SCRIPT);Re(C,"onscript",C.script),C.script=""}var O=C.tags.length,le=C.tagName;C.strict||(le=le[C.looseCase]());for(var te=le;O--&&C.tags[O].name!==te;)Ke(C,"Unexpected close tag");if(O<0)return Ke(C,"Unmatched closing tag: "+C.tagName),C.textNode+="</"+C.tagName+">",void(C.state=Se.TEXT);C.tagName=le;for(var Be=C.tags.length;Be-- >O;){var rt=C.tag=C.tags.pop();C.tagName=C.tag.name,Re(C,"onclosetag",C.tagName);var qe={};for(var Xe in rt.ns)qe[Xe]=rt.ns[Xe];var $e=C.tags[C.tags.length-1]||C;C.opt.xmlns&&rt.ns!==$e.ns&&Object.keys(rt.ns).forEach(function(et){var Ve=rt.ns[et];Re(C,"onclosenamespace",{prefix:et,uri:Ve})})}O===0&&(C.closedRoot=!0),C.tagName=C.attribValue=C.attribName="",C.attribList.length=0,C.state=Se.TEXT}function Qe(C){var O,le=C.entity,te=le.toLowerCase(),Be="";return C.ENTITIES[le]?C.ENTITIES[le]:C.ENTITIES[te]?C.ENTITIES[te]:((le=te).charAt(0)==="#"&&(le.charAt(1)==="x"?(le=le.slice(2),Be=(O=parseInt(le,16)).toString(16)):(le=le.slice(1),Be=(O=parseInt(le,10)).toString(10))),le=le.replace(/^0+/,""),Be.toLowerCase()!==le?(Ke(C,"Invalid character entity"),"&"+C.entity+";"):String.fromCodePoint(O))}function X(C,O){O==="<"?(C.state=Se.OPEN_WAKA,C.startTagPosition=C.position):ce(d,O)&&(Ke(C,"Non-whitespace before first tag."),C.textNode=O,C.state=Se.TEXT)}function W(C,O){var le="";return O<C.length&&(le=C.charAt(O)),le}Se=r.STATE,String.fromCodePoint||(de=String.fromCharCode,_e=Math.floor,je=function(){var C,O,le=[],te=-1,Be=arguments.length;if(!Be)return"";for(var rt="";++te<Be;){var qe=Number(arguments[te]);if(!isFinite(qe)||qe<0||qe>1114111||_e(qe)!==qe)throw RangeError("Invalid code point: "+qe);qe<=65535?le.push(qe):(C=55296+((qe-=65536)>>10),O=qe%1024+56320,le.push(C,O)),(te+1===Be||le.length>16384)&&(rt+=de.apply(null,le),le.length=0)}return rt},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:je,configurable:!0,writable:!0}):String.fromCodePoint=je)})(e)},6739:function(n,e,t){(function(r,i,o,l,u){function c(W){if("contents"in W)for(var C=("styleAttrs"in W)?W.styleAttrs[l.byName.ruby.qname]:null,O=W.kind==="span"&&(C==="container"||C==="textContainer"||C==="baseContainer"),le=W.contents.length-1;le>=0;le--)!O||"styleAttrs"in W.contents[le]&&l.byName.ruby.qname in W.contents[le].styleAttrs?c(W.contents[le]):delete W.contents[le]}function d(W,C,O,le){var te=le&&le.timeContainer==="seq",Be=0;le&&(Be=te&&O?O.end:le.begin),C.begin=C.explicit_begin?C.explicit_begin+Be:Be;var rt=C.begin,qe=null;if("sets"in C)for(var Xe=0;Xe<C.sets.length;Xe++)d(W,C.sets[Xe],qe,C),rt=C.timeContainer==="seq"?C.sets[Xe].end:Math.max(rt,C.sets[Xe].end),qe=C.sets[Xe];if("contents"in C){if("contents"in C)for(var $e=0;$e<C.contents.length;$e++)d(W,C.contents[$e],qe,C),rt=C.timeContainer==="seq"?C.contents[$e].end:Math.max(rt,C.contents[$e].end),qe=C.contents[$e]}else rt=te?C.begin:Number.POSITIVE_INFINITY;C.explicit_end!==null&&C.explicit_dur!==null?C.end=Math.min(C.begin+C.explicit_dur,Be+C.explicit_end):C.explicit_end===null&&C.explicit_dur!==null?C.end=C.begin+C.explicit_dur:C.explicit_end!==null&&C.explicit_dur===null?C.end=Be+C.explicit_end:C.end=rt,delete C.explicit_begin,delete C.explicit_dur,delete C.explicit_end,W._registerEvent(C)}function m(W){this.node=W}function f(){this.events=[],this.head=new h,this.body=null}function h(){this.styling=new g,this.layout=new S}function g(){this.styles={},this.initials={}}function p(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function E(){this.styleAttrs=null}function S(){this.regions={}}function x(W,C){_.call(this,"image"),this.src=W,this.type=C}function _(W){this.kind=W}function A(W){this.id=W}function z(W){this.regionID=W}function ie(W){this.styleAttrs=W}function he(W){this.sets=W}function P(W){this.contents=W}function U(W,C,O){this.explicit_begin=W,this.explicit_end=C,this.explicit_dur=O}function ce(){_.call(this,"body")}function de(){_.call(this,"div")}function _e(){_.call(this,"p")}function je(){_.call(this,"span")}function Se(){_.call(this,"span")}function ze(){_.call(this,"br")}function Le(){}function Re(){}function Ye(W){return W&&"xml:id"in W.attributes&&W.attributes["xml:id"].value||null}function Ue(W){return W&&"style"in W.attributes?W.attributes.style.value.split(" "):[]}function Me(W,C){var O={};if(W!==null)for(var le in W.attributes){var te=W.attributes[le].uri+" "+W.attributes[le].local,Be=l.byQName[te];if(Be!==void 0){var rt=Be.parse(W.attributes[le].value);rt!==null?(O[te]=rt,Be===l.byName.zIndex&&Pe(C,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Ne(C,"Cannot parse styling attribute "+te+" --> "+W.attributes[le].value)}}return O}function We(W,C,O){for(var le in W.attributes)if(W.attributes[le].uri===C&&W.attributes[le].local===O)return W.attributes[le].value;return null}function Ke(W,C,O){var le,te=null;return(le=/^(\d+(?:\.\d+)?)f$/.exec(O))!==null?C!==null&&(te=parseFloat(le[1])/C):(le=/^(\d+(?:\.\d+)?)t$/.exec(O))!==null?W!==null&&(te=parseFloat(le[1])/W):(le=/^(\d+(?:\.\d+)?)ms$/.exec(O))!==null?te=parseFloat(le[1])/1e3:(le=/^(\d+(?:\.\d+)?)s$/.exec(O))!==null?te=parseFloat(le[1]):(le=/^(\d+(?:\.\d+)?)h$/.exec(O))!==null?te=3600*parseFloat(le[1]):(le=/^(\d+(?:\.\d+)?)m$/.exec(O))!==null?te=60*parseFloat(le[1]):(le=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(O))!==null?te=3600*parseInt(le[1])+60*parseInt(le[2])+parseFloat(le[3]):(le=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(O))!==null&&C!==null&&(te=3600*parseInt(le[1])+60*parseInt(le[2])+parseInt(le[3])+(le[4]===null?0:parseInt(le[4])/C)),te}function nt(W,C,O){for(;C.styleRefs.length>0;){var le=C.styleRefs.pop();le in W.styles?(nt(W,W.styles[le],O),Rt(W.styles[le].styleAttrs,C.styleAttrs)):Ne(O,"Non-existant style id referenced")}}function bt(W,C,O,le){for(var te=C.length-1;te>=0;te--){var Be=C[te];Be in W.styles?Rt(W.styles[Be].styleAttrs,O):Ne(le,"Non-existant style id referenced")}}function Rt(W,C){for(var O in W)W.hasOwnProperty(O)&&(O in C||(C[O]=W[O]))}function Pe(W,C){if(W&&W.warn&&W.warn(C))throw C}function Ne(W,C){if(W&&W.error&&W.error(C))throw C}function Qe(W,C){throw W&&W.fatal&&W.fatal(C),C}function X(W,C){for(var O,le=0,te=W.length-1;le<=te;){var Be=W[O=Math.floor((le+te)/2)];if(Be<C)le=O+1;else{if(!(Be>C))return{found:!0,index:O};te=O-1}}return{found:!1,index:le}}r.fromXML=function(W,C,O){var le=i.parser(!0,{xmlns:!0}),te=[],Be=[],rt=[],qe=0,Xe=null;le.onclosetag=function(ct){if(te[0]instanceof Le)Xe.head!==null&&Xe.head.styling!==null&&bt(Xe.head.styling,te[0].styleRefs,te[0].styleAttrs,C),delete te[0].styleRefs;else if(te[0]instanceof g)for(var Ht in te[0].styles)te[0].styles.hasOwnProperty(Ht)&&nt(te[0],te[0].styles[Ht],C);else if(te[0]instanceof _e||te[0]instanceof je){if(te[0].contents.length>1){var Pt,Kt=[te[0].contents[0]];for(Pt=1;Pt<te[0].contents.length;Pt++)te[0].contents[Pt]instanceof Se&&Kt[Kt.length-1]instanceof Se?Kt[Kt.length-1].text+=te[0].contents[Pt].text:Kt.push(te[0].contents[Pt]);te[0].contents=Kt}te[0]instanceof je&&te[0].contents.length===1&&te[0].contents[0]instanceof Se&&(te[0].text=te[0].contents[0].text,delete te[0].contents)}else te[0]instanceof m&&(te[0].node.uri===o.ns_tt&&te[0].node.local==="metadata"?qe--:qe>0&&O&&"onCloseTag"in O&&O.onCloseTag());rt.shift(),Be.shift(),te.shift()},le.ontext=function(ct){if(te[0]!==void 0)if(te[0]instanceof je||te[0]instanceof _e){if(te[0]instanceof je){var Ht=te[0].styleAttrs[l.byName.ruby.qname];if(Ht==="container"||Ht==="textContainer"||Ht==="baseContainer")return}var Pt=new Se;Pt.initFromText(Xe,te[0],ct,Be[0],rt[0],C),te[0].contents.push(Pt)}else te[0]instanceof m&&qe>0&&O&&"onText"in O&&O.onText(ct)},le.onopentag=function(ct){var Ht=ct.attributes["xml:space"];Ht?rt.unshift(Ht.value):rt.length===0?rt.unshift("default"):rt.unshift(rt[0]);var Pt=ct.attributes["xml:lang"];if(Pt?Be.unshift(Pt.value):Be.length===0?Be.unshift(""):Be.unshift(Be[0]),ct.uri===o.ns_tt)if(ct.local==="tt")Xe!==null&&Qe(C,"Two <tt> elements at ("+this.line+","+this.column+")"),(Xe=new f).initFromNode(ct,Be[0],C),te.unshift(Xe);else if(ct.local==="head")te[0]instanceof f||Qe(C,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),te.unshift(Xe.head);else if(ct.local==="styling")te[0]instanceof h||Qe(C,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),te.unshift(Xe.head.styling);else if(ct.local==="style"){var Kt;te[0]instanceof g?((Kt=new p).initFromNode(ct,C),Kt.id?Xe.head.styling.styles[Kt.id]=Kt:Ne(C,"<style> element missing @id attribute"),te.unshift(Kt)):te[0]instanceof Le?((Kt=new p).initFromNode(ct,C),Rt(Kt.styleAttrs,te[0].styleAttrs),te.unshift(Kt)):Qe(C,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(ct.local==="initial"){var It;if(te[0]instanceof g){for(var yn in(It=new E).initFromNode(ct,C),It.styleAttrs)It.styleAttrs.hasOwnProperty(yn)&&(Xe.head.styling.initials[yn]=It.styleAttrs[yn]);te.unshift(It)}else Qe(C,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(ct.local==="layout")te[0]instanceof h||Qe(C,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),te.unshift(Xe.head.layout);else if(ct.local==="region"){te[0]instanceof S||Qe(C,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Vn=new Le;Vn.initFromNode(Xe,ct,Be[0],C),!Vn.id||Vn.id in Xe.head.layout.regions?Ne(C,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Xe.head.layout.regions[Vn.id]=Vn,te.unshift(Vn)}else if(ct.local==="body"){te[0]instanceof f||Qe(C,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Xe.body!==null&&Qe(C,"Second <body> element at "+this.line+","+this.column+")");var ar=new ce;ar.initFromNode(Xe,ct,Be[0],C),Xe.body=ar,te.unshift(ar)}else if(ct.local==="div"){te[0]instanceof de||te[0]instanceof ce||Qe(C,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var xr=new de;xr.initFromNode(Xe,te[0],ct,Be[0],C);var Or=xr.styleAttrs[l.byName.backgroundImage.qname];Or&&(xr.contents.push(new x(Or)),delete xr.styleAttrs[l.byName.backgroundImage.qname]),te[0].contents.push(xr),te.unshift(xr)}else if(ct.local==="image"){te[0]instanceof de||Qe(C,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Fr=new x;Fr.initFromNode(Xe,te[0],ct,Be[0],C),te[0].contents.push(Fr),te.unshift(Fr)}else if(ct.local==="p"){te[0]instanceof de||Qe(C,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Gt=new _e;Gt.initFromNode(Xe,te[0],ct,Be[0],C),te[0].contents.push(Gt),te.unshift(Gt)}else if(ct.local==="span"){te[0]instanceof je||te[0]instanceof _e||Qe(C,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Ft=new je;Ft.initFromNode(Xe,te[0],ct,Be[0],rt[0],C),te[0].contents.push(Ft),te.unshift(Ft)}else if(ct.local==="br"){te[0]instanceof je||te[0]instanceof _e||Qe(C,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _t=new ze;_t.initFromNode(Xe,te[0],ct,Be[0],C),te[0].contents.push(_t),te.unshift(_t)}else if(ct.local==="set"){te[0]instanceof je||te[0]instanceof _e||te[0]instanceof de||te[0]instanceof ce||te[0]instanceof Le||te[0]instanceof ze||Qe(C,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var yt=new Re;yt.initFromNode(Xe,te[0],ct,C),te[0].sets.push(yt),te.unshift(yt)}else te.unshift(new m(ct));else te.unshift(new m(ct));if(te[0]instanceof m){if(ct.uri===o.ns_tt&&ct.local==="metadata")qe++;else if(qe>0&&O&&"onOpenTag"in O){var Vt=[];for(var $t in ct.attributes)Vt[ct.attributes[$t].uri+" "+ct.attributes[$t].local]={uri:ct.attributes[$t].uri,local:ct.attributes[$t].local,value:ct.attributes[$t].value};O.onOpenTag(ct.uri,ct.local,Vt)}}},le.write(W).close(),delete Xe.head.styling.styles;var $e=!1;for(var et in Xe.head.layout.regions)if(Xe.head.layout.regions.hasOwnProperty(et)){$e=!0;break}if(!$e){var Ve=Le.prototype.createDefaultRegion(Xe.lang);Xe.head.layout.regions[Ve.id]=Ve}for(var Ze in Xe.head.layout.regions)Xe.head.layout.regions.hasOwnProperty(Ze)&&d(Xe,Xe.head.layout.regions[Ze],null,null);return Xe.body&&d(Xe,Xe.body,null,null),Xe.body&&c(Xe.body),Xe},f.prototype.initFromNode=function(W,C,O){var le=function(qe,Xe){var $e=We(qe,o.ns_ttp,"cellResolution"),et=15,Ve=32;if($e!==null){var Ze=/(\d+) (\d+)/.exec($e);Ze!==null?(Ve=parseInt(Ze[1]),et=parseInt(Ze[2])):Pe(Xe,"Malformed cellResolution value (using initial value instead)")}return{w:Ve,h:et}}(W,O);this.cellLength={h:new u.ComputedLength(0,1/le.h),w:new u.ComputedLength(1/le.w,0)};var te=function(qe,Xe){var $e,et=We(qe,o.ns_ttp,"frameRate"),Ve=30;et!==null&&(($e=/(\d+)/.exec(et))!==null?Ve=parseInt($e[1]):Pe(Xe,"Malformed frame rate attribute (using initial value instead)"));var Ze=We(qe,o.ns_ttp,"frameRateMultiplier"),ct=1;Ze!==null&&(($e=/(\d+) (\d+)/.exec(Ze))!==null?ct=parseInt($e[1])/parseInt($e[2]):Pe(Xe,"Malformed frame rate multiplier attribute (using initial value instead)"));var Ht=ct*Ve,Pt=1,Kt=We(qe,o.ns_ttp,"tickRate");return Kt===null?et!==null&&(Pt=Ht):($e=/(\d+)/.exec(Kt))!==null?Pt=parseInt($e[1]):Pe(Xe,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Ht,tickRate:Pt}}(W,O);this.effectiveFrameRate=te.effectiveFrameRate,this.tickRate=te.tickRate,this.aspectRatio=function(qe,Xe){var $e=We(qe,o.ns_ittp,"aspectRatio");$e===null&&($e=We(qe,o.ns_ttp,"displayAspectRatio"));var et=null;if($e!==null){var Ve=/(\d+)\s+(\d+)/.exec($e);if(Ve!==null){var Ze=parseInt(Ve[1]),ct=parseInt(Ve[2]);Ze!==0&&ct!==0?et=Ze/ct:Ne(Xe,"Illegal aspectRatio values (ignoring)")}else Ne(Xe,"Malformed aspectRatio attribute (ignoring)")}return et}(W,O);var Be=We(W,o.ns_ttp,"timeBase");Be!==null&&Be!=="media"&&Qe(O,"Unsupported time base");var rt=function(qe,Xe){var $e=We(qe,o.ns_tts,"extent");if($e===null)return null;var et=$e.split(" ");if(et.length!==2)return Pe(Xe,"Malformed extent (ignoring)"),null;var Ve=u.parseLength(et[0]),Ze=u.parseLength(et[1]);return Ze&&Ve?{h:Ze,w:Ve}:(Pe(Xe,"Malformed extent values (ignoring)"),null)}(W,O);rt===null?this.pxLength={h:null,w:null}:(rt.h.unit==="px"&&rt.w.unit==="px"||Qe(O,"Extent on TT must be in px or absent"),this.pxLength={h:new u.ComputedLength(0,1/rt.h.value),w:new u.ComputedLength(1/rt.w.value,0)}),this.dimensions={h:new u.ComputedLength(0,1),w:new u.ComputedLength(1,0)},this.lang=C},f.prototype._registerEvent=function(W){if(!(W.end<=W.begin)){var C=X(this.events,W.begin);if(C.found||this.events.splice(C.index,0,W.begin),W.end!==Number.POSITIVE_INFINITY){var O=X(this.events,W.end);O.found||this.events.splice(O.index,0,W.end)}}},f.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},f.prototype.getMediaTimeEvents=function(){return this.events},p.prototype.initFromNode=function(W,C){this.id=Ye(W),this.styleAttrs=Me(W,C),this.styleRefs=Ue(W)},E.prototype.initFromNode=function(W,C){for(var O in this.styleAttrs={},W.attributes)if(W.attributes[O].uri===o.ns_itts||W.attributes[O].uri===o.ns_ebutts||W.attributes[O].uri===o.ns_tts){var le=W.attributes[O].uri+" "+W.attributes[O].local;this.styleAttrs[le]=W.attributes[O].value}},x.prototype.initFromNode=function(W,C,O,le,te){this.src="src"in O.attributes?O.attributes.src.value:null,this.src||Ne(te,"Invalid image@src attribute"),this.type="type"in O.attributes?O.attributes.type.value:null,this.type||Ne(te,"Invalid image@type attribute"),ie.prototype.initFromNode.call(this,W,C,O,te),U.prototype.initFromNode.call(this,W,C,O,te),he.prototype.initFromNode.call(this,W,C,O,te),z.prototype.initFromNode.call(this,W,C,O,te),this.lang=le},A.prototype.initFromNode=function(W,C,O,le){this.id=Ye(O)},z.prototype.initFromNode=function(W,C,O,le){this.regionID=function(te){return te&&"region"in te.attributes?te.attributes.region.value:""}(O)},ie.prototype.initFromNode=function(W,C,O,le){this.styleAttrs=Me(O,le),W.head!==null&&W.head.styling!==null&&bt(W.head.styling,Ue(O),this.styleAttrs,le)},he.prototype.initFromNode=function(W,C,O,le){this.sets=[]},P.prototype.initFromNode=function(W,C,O,le){this.contents=[]},U.prototype.initFromNode=function(W,C,O,le){var te=function(Be,rt,qe,Xe){var $e=null;qe&&"begin"in qe.attributes&&($e=Ke(Be.tickRate,Be.effectiveFrameRate,qe.attributes.begin.value))===null&&Pe(Xe,"Malformed begin value "+qe.attributes.begin.value+" (using 0)");var et=null;qe&&"dur"in qe.attributes&&(et=Ke(Be.tickRate,Be.effectiveFrameRate,qe.attributes.dur.value))===null&&Pe(Xe,"Malformed dur value "+qe.attributes.dur.value+" (ignoring)");var Ve=null;return qe&&"end"in qe.attributes&&(Ve=Ke(Be.tickRate,Be.effectiveFrameRate,qe.attributes.end.value))===null&&Pe(Xe,"Malformed end value (ignoring)"),{explicit_begin:$e,explicit_end:Ve,explicit_dur:et}}(W,0,O,le);this.explicit_begin=te.explicit_begin,this.explicit_end=te.explicit_end,this.explicit_dur=te.explicit_dur,this.timeContainer=function(Be,rt){var qe=Be&&"timeContainer"in Be.attributes?Be.attributes.timeContainer.value:null;return qe&&qe!=="par"?qe==="seq"?"seq":(Ne(rt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(O,le)},ce.prototype.initFromNode=function(W,C,O,le){ie.prototype.initFromNode.call(this,W,null,C,le),U.prototype.initFromNode.call(this,W,null,C,le),he.prototype.initFromNode.call(this,W,null,C,le),z.prototype.initFromNode.call(this,W,null,C,le),P.prototype.initFromNode.call(this,W,null,C,le),this.lang=O},de.prototype.initFromNode=function(W,C,O,le,te){ie.prototype.initFromNode.call(this,W,C,O,te),U.prototype.initFromNode.call(this,W,C,O,te),he.prototype.initFromNode.call(this,W,C,O,te),z.prototype.initFromNode.call(this,W,C,O,te),P.prototype.initFromNode.call(this,W,C,O,te),this.lang=le},_e.prototype.initFromNode=function(W,C,O,le,te){ie.prototype.initFromNode.call(this,W,C,O,te),U.prototype.initFromNode.call(this,W,C,O,te),he.prototype.initFromNode.call(this,W,C,O,te),z.prototype.initFromNode.call(this,W,C,O,te),P.prototype.initFromNode.call(this,W,C,O,te),this.lang=le},je.prototype.initFromNode=function(W,C,O,le,te,Be){ie.prototype.initFromNode.call(this,W,C,O,Be),U.prototype.initFromNode.call(this,W,C,O,Be),he.prototype.initFromNode.call(this,W,C,O,Be),z.prototype.initFromNode.call(this,W,C,O,Be),P.prototype.initFromNode.call(this,W,C,O,Be),this.space=te,this.lang=le},Se.prototype.initFromText=function(W,C,O,le,te,Be){U.prototype.initFromNode.call(this,W,C,null,Be),this.text=O,this.space=te,this.lang=le},ze.prototype.initFromNode=function(W,C,O,le,te){z.prototype.initFromNode.call(this,W,C,O,te),U.prototype.initFromNode.call(this,W,C,O,te),this.lang=le},Le.prototype.createDefaultRegion=function(W){var C=new Le;return A.call(C,""),ie.call(C,{}),he.call(C,[]),U.call(C,0,Number.POSITIVE_INFINITY,null),this.lang=W,C},Le.prototype.initFromNode=function(W,C,O,le){A.prototype.initFromNode.call(this,W,null,C,le),U.prototype.initFromNode.call(this,W,null,C,le),he.prototype.initFromNode.call(this,W,null,C,le),this.styleAttrs=Me(C,le),this.styleRefs=Ue(C),this.lang=O},Re.prototype.initFromNode=function(W,C,O,le){U.prototype.initFromNode.call(this,W,C,O,le);var te=Me(O,le);for(var Be in this.qname=null,this.value=null,te)if(te.hasOwnProperty(Be)){if(this.qname){Ne(le,"More than one style specified on set");break}this.qname=Be,this.value=te[Be]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(n,e,t){var r=/firefox/i.test(navigator.userAgent);(function(i,o,l){function u(P,U,ce,de){var _e;if(ce.kind==="region")(_e=document.createElement("div")).style.position="absolute";else if(ce.kind==="body")_e=document.createElement("div");else if(ce.kind==="div")_e=document.createElement("div");else if(ce.kind==="image"){if(_e=document.createElement("img"),P.imgResolver!==null&&ce.src!==null){var je=P.imgResolver(ce.src,_e);je&&(_e.src=je),_e.height=P.regionH,_e.width=P.regionW}}else if(ce.kind==="p")_e=document.createElement("p");else if(ce.kind==="span")if(ce.styleAttrs[l.byName.ruby.qname]==="container")_e=document.createElement("ruby"),P.ruby=!0;else if(ce.styleAttrs[l.byName.ruby.qname]==="base")_e=document.createElement("span");else if(ce.styleAttrs[l.byName.ruby.qname]==="text")_e=document.createElement("rt");else if(ce.styleAttrs[l.byName.ruby.qname]==="baseContainer")_e=document.createElement("rbc");else if(ce.styleAttrs[l.byName.ruby.qname]==="textContainer")_e=document.createElement("rtc");else{if(ce.styleAttrs[l.byName.ruby.qname]==="delimiter")return;_e=document.createElement("span")}else ce.kind==="br"&&(_e=document.createElement("br"));if(_e){if(ce.lang&&(ce.kind!=="region"&&ce.lang===de.lang||(_e.lang=ce.lang)),U.appendChild(_e),_e.style.margin="0",ce.kind==="region"){var Se=ce.styleAttrs[l.byName.writingMode.qname];Se==="lrtb"||Se==="lr"?(P.ipd="lr",P.bpd="tb"):Se==="rltb"||Se==="rl"?(P.ipd="rl",P.bpd="tb"):Se==="tblr"?(P.ipd="tb",P.bpd="lr"):Se!=="tbrl"&&Se!=="tb"||(P.ipd="tb",P.bpd="rl")}else if(ce.kind==="p"&&P.bpd==="tb"){var ze=ce.styleAttrs[l.byName.direction.qname];P.ipd=ze==="ltr"?"lr":"rl"}for(var Le=0;Le<E.length;Le++){var Re=E[Le],Ye=ce.styleAttrs[Re.qname];Ye!==void 0&&Re.map!==null&&Re.map(P,_e,ce,Ye)}var Ue=_e,Me=ce.styleAttrs[l.byName.linePadding.qname];if(Me&&!Me.isZero()){var We=Me.toUsedLength(P.w,P.h);if(We>0){var Ke=Math.ceil(We)+"px";P.bpd==="tb"?(Ue.style.paddingLeft=Ke,Ue.style.paddingRight=Ke):(Ue.style.paddingTop=Ke,Ue.style.paddingBottom=Ke),P.lp=Me}}var nt=ce.styleAttrs[l.byName.multiRowAlign.qname];if(nt&&nt!=="auto"){var bt=document.createElement("span");bt.style.display="inline-block",bt.style.textAlign=nt,_e.appendChild(bt),Ue=bt,P.mra=nt}var Rt=ce.styleAttrs[l.byName.rubyReserve.qname];if(Rt&&Rt[0]!=="none"&&(P.rubyReserve=Rt),ce.styleAttrs[l.byName.fillLineGap.qname]&&(P.flg=!0),ce.kind==="span"&&ce.text){var Pe=ce.styleAttrs[l.byName.textEmphasis.qname];if(Pe&&Pe.style!=="none"&&(P.textEmphasis=!0),l.byName.textCombine.qname in ce.styleAttrs&&ce.styleAttrs[l.byName.textCombine.qname]==="all")_e.textContent=ce.text,_e._isd_element=ce,Pe&&g(P,_e,0,Pe);else for(var Ne="",Qe=0;Qe<ce.text.length;Qe++){Ne+=ce.text.charAt(Qe);var X=ce.text.charCodeAt(Qe);if(X<55296||X>56319||Qe===ce.text.length-1){var W=document.createElement("span");W.textContent=Ne,Pe&&g(P,W,0,Pe),_e.appendChild(W),Ne="",W._isd_element=ce}}}if("contents"in ce)for(var C=0;C<ce.contents.length;C++)u(P,Ue,ce.contents[C],ce);var O=[];if(ce.kind==="p"&&(h(P,Ue,O,null),P.rubyReserve&&(function(qe,Xe){for(var $e=0;$e<qe.length;$e++){var et,Ve,Ze=document.createElement("ruby"),ct=document.createElement("span");ct.textContent="​",Ze.appendChild(ct);var Ht,Pt=Xe.rubyReserve[1].toUsedLength(Xe.w,Xe.h)+"px";Xe.rubyReserve[0]==="both"||Xe.rubyReserve[0]==="outside"&&qe.length==1?((et=document.createElement("rtc")).style[A]=_?"after":"under",et.textContent="​",et.style.fontSize=Pt,(Ve=document.createElement("rtc")).style[A]=_?"before":"over",Ve.textContent="​",Ve.style.fontSize=Pt,Ze.appendChild(et),Ze.appendChild(Ve)):((et=document.createElement("rtc")).textContent="​",et.style.fontSize=Pt,Ht=Xe.rubyReserve[0]==="after"||Xe.rubyReserve[0]==="outside"&&$e>0?_?"after":Xe.bpd==="tb"||Xe.bpd==="rl"?"under":"over":_?"before":Xe.bpd==="tb"||Xe.bpd==="rl"?"over":"under",et.style[A]=Ht,Ze.appendChild(et));for(var Kt=null,It=0;It<qe[$e].rbc.length;It++)if(qe[$e].rbc[It].localName==="ruby"){Kt=qe[$e].rbc[It];for(var yn=0;yn<Kt.style.length;yn++)Ze.style.setProperty(Kt.style.item(yn),Kt.style.getPropertyValue(Kt.style.item(yn)));break}(Kt=Kt||qe[$e].elements[0].node).parentElement.insertBefore(Ze,Kt)}}(O,P),P.rubyReserve=null),(P.ruby||P.rubyReserve)&&(function(qe,Xe){for(var $e=0;$e<qe.length;$e++)for(var et=0;et<qe[$e].rbc.length;et++){var Ve;qe[$e].rbc[et].style[A]||(Ve=_?$e===0?"before":"after":Xe.bpd==="tb"||Xe.bpd==="rl"?$e===0?"over":"under":$e===0?"under":"over",qe[$e].rbc[et].style[A]=Ve)}}(O,P),P.ruby=null),P.textEmphasis&&(function(qe,Xe){for(var $e=0;$e<qe.length;$e++)for(var et=0;et<qe[$e].te.length;et++){var Ve;qe[$e].te[et].style[ie]&&qe[$e].te[et].style[ie]!=="none"||(Ve=Xe.bpd==="tb"?$e===0?"left over":"left under":Xe.bpd==="rl"?$e===0?"right under":"left under":$e===0?"left under":"right under",qe[$e].te[et].style[ie]=Ve)}}(O,P),P.textEmphasis=null),P.mra&&(function(qe){for(var Xe=0;Xe<qe.length-1;Xe++){var $e=qe[Xe].elements.length;if($e!==0&&qe[Xe].br===!1){var et=document.createElement("br"),Ve=qe[Xe].elements[$e-1].node;Ve.parentElement.insertBefore(et,Ve.nextSibling)}}}(O),P.mra=null),P.lp&&(function(qe,Xe,$e){if(qe!==null)for(var et=0;et<qe.length;et++){var Ve=qe[et].elements.length,Ze=Math.ceil(Xe)+"px",ct="-"+Math.ceil(Xe)+"px";if(Ve!==0){var Ht=qe[et].elements[qe[et].start_elem],Pt=qe[et].elements[qe[et].end_elem];if(Ht===Pt){var Kt=Ht.node.getBoundingClientRect();if(Kt.width==0||Kt.height==0)continue}$e.ipd==="lr"?(Ht.node.style.marginLeft=ct,Ht.node.style.paddingLeft=Ze):$e.ipd==="rl"?(Ht.node.style.paddingRight=Ze,Ht.node.style.marginRight=ct):$e.ipd==="tb"&&(Ht.node.style.paddingTop=Ze,Ht.node.style.marginTop=ct),$e.ipd==="lr"?(r||(Pt.node.style.marginRight=ct),Pt.node.style.paddingRight=Ze):$e.ipd==="rl"?(Pt.node.style.paddingLeft=Ze,r||(Pt.node.style.marginLeft=ct)):$e.ipd==="tb"&&(Pt.node.style.paddingBottom=Ze,Pt.node.style.marginBottom=ct)}}}(O,P.lp.toUsedLength(P.w,P.h),P),P.lp=null),function(qe,Xe){for(var $e=0;$e<qe.length;$e++)for(var et=qe[$e],Ve=1;Ve<et.elements.length;){var Ze=et.elements[Ve-1],ct=et.elements[Ve];d(Ze.node,ct.node,Xe)?et.elements.splice(Ve,1):Ve++}for(var Ht,Pt,Kt=[],It=0;It<qe.length;It++)for(var yn=0;yn<qe[It].elements.length;yn++)(Pt=c(Ht=qe[It].elements[yn].node,Kt,!1))&&(Ht.style.backgroundColor=Pt);for(var Vn=0;Vn<Kt.length;Vn++)Kt[Vn].style.backgroundColor=""}(O,P),P.flg)){var le=f(Ue.getBoundingClientRect(),P);(function(qe,Xe,$e,et){for(var Ve=Math.sign($e-Xe),Ze=0;Ze<=qe.length;Ze++){var ct,Ht,Pt,Kt;if(ct=Ze===0?Math.round(Xe):Ze===qe.length?Math.round($e):Math.round((qe[Ze-1].after+qe[Ze].before)/2),Ze>0&&qe[Ze-1])for(Pt=0;Pt<qe[Ze-1].elements.length;Pt++)Ht=Ve*(ct-(Kt=qe[Ze-1].elements[Pt]).after)+"px",et.bpd==="lr"?Kt.node.style.paddingRight=Ht:et.bpd==="rl"?Kt.node.style.paddingLeft=Ht:et.bpd==="tb"&&(Kt.node.style.paddingBottom=Ht);if(Ze<qe.length)for(Pt=0;Pt<qe[Ze].elements.length;Pt++)Ht=Ve*((Kt=qe[Ze].elements[Pt]).before-ct)+"px",et.bpd==="lr"?Kt.node.style.paddingLeft=Ht:et.bpd==="rl"?Kt.node.style.paddingRight=Ht:et.bpd==="tb"&&(Kt.node.style.paddingTop=Ht)}})(O,le.before,le.after,P),P.flg=null}if(ce.kind==="region"&&P.bpd==="tb"&&P.enableRollUp&&ce.contents.length>0&&ce.styleAttrs[l.byName.displayAlign.qname]==="after"){h(P,Ue,O,null);var te=new m(ce.id===""?"_":ce.id,O);if(P.currentISDState[te.id]=te,P.previousISDState&&te.id in P.previousISDState&&P.previousISDState[te.id].plist.length>0&&te.plist.length>1&&te.plist[te.plist.length-2].text===P.previousISDState[te.id].plist[P.previousISDState[te.id].plist.length-1].text){var Be=_e.firstElementChild,rt=te.plist[te.plist.length-1].after-te.plist[te.plist.length-1].before;Be.style.bottom="-"+rt+"px",Be.style.transition="transform 0.4s",Be.style.position="relative",Be.style.transform="translateY(-"+rt+"px)"}}}else he(P.errorHandler,"Error processing ISD element kind: "+ce.kind)}function c(P,U,ce){return P.style.backgroundColor?(ce&&!U.includes(P)&&U.push(P),P.style.backgroundColor):P.parentElement.nodeName==="SPAN"||P.parentElement.nodeName==="RUBY"||P.parentElement.nodeName==="RBC"||P.parentElement.nodeName==="RTC"||P.parentElement.nodeName==="RT"?c(P.parentElement,U,!0):void 0}function d(P,U,ce){if(P.tagName==="SPAN"&&U.tagName==="SPAN"&&P._isd_element===U._isd_element){if(!P._isd_element)return he(ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;P.textContent+=U.textContent;for(var de=0;de<U.style.length;de++){var _e=U.style[de];(_e.indexOf("border")>=0||_e.indexOf("padding")>=0||_e.indexOf("margin")>=0)&&(P.style[_e]=U.style[_e])}return U.parentElement.removeChild(U),!0}return!1}function m(P,U){this.id=P,this.plist=U}function f(P,U){var ce={before:null,after:null,start:null,end:null};return U.bpd==="tb"?(ce.before=P.top,ce.after=P.bottom,U.ipd==="lr"?(ce.start=P.left,ce.end=P.right):(ce.start=P.right,ce.end=P.left)):U.bpd==="lr"?(ce.before=P.left,ce.after=P.right,ce.start=P.top,ce.end=P.bottom):U.bpd==="rl"&&(ce.before=P.right,ce.after=P.left,ce.start=P.top,ce.end=P.bottom),ce}function h(P,U,ce,de){if(U.localName!=="rt"&&U.localName!=="rtc"){var _e,je,Se,ze,Le=U.style.backgroundColor||de;if(U.childElementCount===0)if(U.localName==="span"||U.localName==="rb"){var Re=f(U.getBoundingClientRect(),P);if(ce.length!==0&&(_e=Re.before,je=Re.after,Se=ce[ce.length-1].before,je<(ze=ce[ce.length-1].after)&&_e>Se||ze<=je&&Se>=_e)){var Ye=Math.sign(Re.after-Re.before),Ue=Math.sign(Re.end-Re.start);Ye*(Re.before-ce[ce.length-1].before)<0&&(ce[ce.length-1].before=Re.before),Ye*(Re.after-ce[ce.length-1].after)>0&&(ce[ce.length-1].after=Re.after),Ue*(Re.start-ce[ce.length-1].start)<0&&(ce[ce.length-1].start=Re.start,ce[ce.length-1].start_elem=ce[ce.length-1].elements.length),Ue*(Re.end-ce[ce.length-1].end)>0&&(ce[ce.length-1].end=Re.end,ce[ce.length-1].end_elem=ce[ce.length-1].elements.length)}else ce.push({before:Re.before,after:Re.after,start:Re.start,end:Re.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});ce[ce.length-1].text+=U.textContent,ce[ce.length-1].elements.push({node:U,bgcolor:Le,before:Re.before,after:Re.after})}else U.localName==="br"&&ce.length!==0&&(ce[ce.length-1].br=!0);else for(var Me=U.firstChild;Me;)Me.nodeType===Node.ELEMENT_NODE&&(h(P,Me,ce,Le),Me.localName==="ruby"||Me.localName==="rtc"?ce.length>0&&ce[ce.length-1].rbc.push(Me):Me.localName==="span"&&Me.style[z]&&Me.style[z]!=="none"&&ce.length>0&&ce[ce.length-1].te.push(Me)),Me=Me.nextSibling}}function g(P,U,ce,de){var _e;de.style!=="none"&&(de.style==="auto"?U.style[z]="filled":U.style[z]=de.style+" "+de.symbol,(de.position==="before"||de.position==="after")&&(_e=P.bpd==="tb"?de.position==="before"?"left over":"left under":P.bpd==="rl"?de.position==="before"?"right under":"left under":de.position==="before"?"left under":"right under",U.style[ie]=_e))}function p(P,U){this.qname=P,this.map=U}i.render=function(P,U,ce,de,_e,je,Se,ze,Le){var Re=de||U.clientHeight,Ye=_e||U.clientWidth;if(P.aspectRatio!==null){var Ue=Re*P.aspectRatio;Ue>Ye?Re=Math.round(Ye/P.aspectRatio):Ye=Ue}var Me=document.createElement("div");Me.style.position="relative",Me.style.width=Ye+"px",Me.style.height=Re+"px",Me.style.margin="auto",Me.style.top=0,Me.style.bottom=0,Me.style.left=0,Me.style.right=0,Me.style.zIndex=0;var We={h:Re,w:Ye,regionH:null,regionW:null,imgResolver:ce,displayForcedOnlyMode:je||!1,isd:P,errorHandler:Se,previousISDState:ze,enableRollUp:Le||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(U.appendChild(Me),"contents"in P)for(var Ke=0;Ke<P.contents.length;Ke++)u(We,Me,P.contents[Ke],P);return We.currentISDState};for(var E=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",function(P,U,ce,de){de[3]!==0&&(U.style.backgroundColor="rgba("+de[0].toString()+","+de[1].toString()+","+de[2].toString()+","+(de[3]/255).toString()+")")}),new p("http://www.w3.org/ns/ttml#styling color",function(P,U,ce,de){U.style.color="rgba("+de[0].toString()+","+de[1].toString()+","+de[2].toString()+","+(de[3]/255).toString()+")"}),new p("http://www.w3.org/ns/ttml#styling direction",function(P,U,ce,de){U.style.direction=de}),new p("http://www.w3.org/ns/ttml#styling display",function(P,U,ce,de){}),new p("http://www.w3.org/ns/ttml#styling displayAlign",function(P,U,ce,de){U.style.display="flex",U.style.flexDirection="column",de==="before"?U.style.justifyContent="flex-start":de==="center"?U.style.justifyContent="center":de==="after"&&(U.style.justifyContent="flex-end")}),new p("http://www.w3.org/ns/ttml#styling extent",function(P,U,ce,de){P.regionH=de.h.toUsedLength(P.w,P.h),P.regionW=de.w.toUsedLength(P.w,P.h);var _e=0,je=0,Se=ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Se&&(_e=Se[0].toUsedLength(P.w,P.h)+Se[2].toUsedLength(P.w,P.h),je=Se[1].toUsedLength(P.w,P.h)+Se[3].toUsedLength(P.w,P.h)),U.style.height=P.regionH-_e+"px",U.style.width=P.regionW-je+"px"}),new p("http://www.w3.org/ns/ttml#styling fontFamily",function(P,U,ce,de){for(var _e=[],je=0;je<de.length;je++)de[je]=de[je].trim(),de[je]==="monospaceSerif"?(_e.push("Courier New"),_e.push('"Liberation Mono"'),_e.push("Courier"),_e.push("monospace")):de[je]==="proportionalSansSerif"?(_e.push("Arial"),_e.push("Helvetica"),_e.push('"Liberation Sans"'),_e.push("sans-serif")):de[je]==="monospace"?_e.push("monospace"):de[je]==="sansSerif"?_e.push("sans-serif"):de[je]==="serif"?_e.push("serif"):de[je]==="monospaceSansSerif"?(_e.push("Consolas"),_e.push("monospace")):de[je]==="proportionalSerif"?_e.push("serif"):_e.push(de[je]);if(_e.length>0){for(var Se=[_e[0]],ze=1;ze<_e.length;ze++)Se.indexOf(_e[ze])==-1&&Se.push(_e[ze]);_e=Se}U.style.fontFamily=_e.join(",")}),new p("http://www.w3.org/ns/ttml#styling shear",function(P,U,ce,de){if(de!==0){var _e=-.9*de;P.bpd==="tb"?U.style.transform="skewX("+_e+"deg)":U.style.transform="skewY("+_e+"deg)"}}),new p("http://www.w3.org/ns/ttml#styling fontSize",function(P,U,ce,de){U.style.fontSize=de.toUsedLength(P.w,P.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling fontStyle",function(P,U,ce,de){U.style.fontStyle=de}),new p("http://www.w3.org/ns/ttml#styling fontWeight",function(P,U,ce,de){U.style.fontWeight=de}),new p("http://www.w3.org/ns/ttml#styling lineHeight",function(P,U,ce,de){U.style.lineHeight=de==="normal"?"normal":de.toUsedLength(P.w,P.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling opacity",function(P,U,ce,de){U.style.opacity=de}),new p("http://www.w3.org/ns/ttml#styling origin",function(P,U,ce,de){U.style.top=de.h.toUsedLength(P.w,P.h)+"px",U.style.left=de.w.toUsedLength(P.w,P.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling overflow",function(P,U,ce,de){U.style.overflow=de}),new p("http://www.w3.org/ns/ttml#styling padding",function(P,U,ce,de){var _e=[];_e[0]=de[0].toUsedLength(P.w,P.h)+"px",_e[1]=de[3].toUsedLength(P.w,P.h)+"px",_e[2]=de[2].toUsedLength(P.w,P.h)+"px",_e[3]=de[1].toUsedLength(P.w,P.h)+"px",U.style.padding=_e.join(" ")}),new p("http://www.w3.org/ns/ttml#styling position",function(P,U,ce,de){U.style.top=de.h.toUsedLength(P.w,P.h)+"px",U.style.left=de.w.toUsedLength(P.w,P.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling rubyAlign",function(P,U,ce,de){U.style.rubyAlign=de==="spaceAround"?"space-around":"center"}),new p("http://www.w3.org/ns/ttml#styling rubyPosition",function(P,U,ce,de){var _e;de!=="before"&&de!=="after"||(_e=_?de:P.bpd==="tb"||P.bpd==="rl"?de==="before"?"over":"under":de==="before"?"under":"over",U.parentElement.style[A]=_e)}),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",function(P,U,ce,de){var _e;_e=de==="start"?P.ipd==="rl"?"right":"left":de==="end"?P.ipd==="rl"?"left":"right":de,U.style.textAlign=_e}),new p("http://www.w3.org/ns/ttml#styling textDecoration",function(P,U,ce,de){U.style.textDecoration=de.join(" ").replace("lineThrough","line-through")}),new p("http://www.w3.org/ns/ttml#styling textOutline",function(P,U,ce,de){}),new p("http://www.w3.org/ns/ttml#styling textShadow",function(P,U,ce,de){var _e=ce.styleAttrs[l.byName.textOutline.qname];if(de==="none"&&_e==="none")U.style.textShadow="";else{var je=[];if(_e!=="none"){var Se="rgba("+_e.color[0].toString()+","+_e.color[1].toString()+","+_e.color[2].toString()+","+(_e.color[3]/255).toString()+")";je.push("1px 1px 1px "+Se),je.push("-1px 1px 1px "+Se),je.push("1px -1px 1px "+Se),je.push("-1px -1px 1px "+Se)}if(de!=="none")for(var ze=0;ze<de.length;ze++)je.push(de[ze].x_off.toUsedLength(P.w,P.h)+"px "+de[ze].y_off.toUsedLength(P.w,P.h)+"px "+de[ze].b_radius.toUsedLength(P.w,P.h)+"px rgba("+de[ze].color[0].toString()+","+de[ze].color[1].toString()+","+de[ze].color[2].toString()+","+(de[ze].color[3]/255).toString()+")");U.style.textShadow=je.join(",")}}),new p("http://www.w3.org/ns/ttml#styling textCombine",function(P,U,ce,de){U.style.textCombineUpright=de}),new p("http://www.w3.org/ns/ttml#styling textEmphasis",function(P,U,ce,de){}),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",function(P,U,ce,de){var _e;_e=de==="bidiOverride"?"bidi-override":de,U.style.unicodeBidi=_e}),new p("http://www.w3.org/ns/ttml#styling visibility",function(P,U,ce,de){U.style.visibility=de}),new p("http://www.w3.org/ns/ttml#styling wrapOption",function(P,U,ce,de){de==="wrap"?ce.space==="preserve"?U.style.whiteSpace="pre-wrap":U.style.whiteSpace="normal":ce.space==="preserve"?U.style.whiteSpace="pre":U.style.whiteSpace="noWrap"}),new p("http://www.w3.org/ns/ttml#styling writingMode",function(P,U,ce,de){de==="lrtb"||de==="lr"||de==="rltb"||de==="rl"?U.style.writingMode="horizontal-tb":de==="tblr"?U.style.writingMode="vertical-lr":de!=="tbrl"&&de!=="tb"||(U.style.writingMode="vertical-rl")}),new p("http://www.w3.org/ns/ttml#styling zIndex",function(P,U,ce,de){U.style.zIndex=de}),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(P,U,ce,de){P.displayForcedOnlyMode&&de===!1&&(U.style.visibility="hidden")})],S={},x=0;x<E.length;x++)S[E[x].qname]=E[x];var _="webkitRubyPosition"in window.getComputedStyle(document.documentElement),A=_?"webkitRubyPosition":"rubyPosition",z="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",ie="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function he(P,U){if(P&&P.error&&P.error(U))throw U}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(n,e,t){(function(r,i,o,l){r.generateISD=function(p,E,S){var x,_=new f(p),A={},z={},ie=p.head.styling.initials[o.byName.showBackground.qname],he=p.head.styling.initials[o.byName.backgroundColor.qname];for(var P in p.head.layout.regions)if(p.head.layout.regions.hasOwnProperty(P)){var U=p.head.layout.regions[P],ce=U.styleAttrs[o.byName.showBackground.qname]||ie,de=U.styleAttrs[o.byName.backgroundColor.qname]||he;z[U.id]=(ce==="always"||ce===void 0)&&de!==void 0&&!(E<U.begin||E>=U.end)}for(var _e in p.body&&p.body.regionID&&(z[p.body.regionID]=!0),x=p.body!==null?function Se(ze,Le){if(Le.contents){var Re={};for(var Ye in Le)Le.hasOwnProperty(Ye)&&(Re[Ye]=Le[Ye]);return Re.contents=[],Le.contents.filter(function(Ue){return!(ze<Ue.begin||ze>=Ue.end)}).forEach(function(Ue){var Me=Se(ze,Ue);Me.regionID&&(z[Me.regionID]=!0),Me!==null&&Re.contents.push(Me)}),Re}return Le}(E,p.body):null,z[""]!==void 0&&(z[""]=!0),z)if(z[_e]){var je=c(p,E,p.head.layout.regions[_e],x,null,"",p.head.layout.regions[_e],S,A);je!==null&&_.contents.push(je.element)}return _};var u=[o.byName.color.qname,o.byName.textCombine.qname,o.byName.textDecoration.qname,o.byName.textEmphasis.qname,o.byName.textOutline.qname,o.byName.textShadow.qname];function c(p,E,S,x,_,A,z,ie,he){if(E<z.begin||E>=z.end)return null;var P="regionID"in z&&z.regionID!==""?z.regionID:A;if(_!==null&&P!==S.id&&(!("contents"in z)||"contents"in z&&z.contents.length===0||P!==""))return null;var U=new h(z);if("sets"in z)for(var ce=0;ce<z.sets.length;ce++)E<z.sets[ce].begin||E>=z.sets[ce].end||(U.styleAttrs[z.sets[ce].qname]=z.sets[ce].value);var de={};for(var _e in U.styleAttrs)if(U.styleAttrs.hasOwnProperty(_e)&&(de[_e]=!0,U.kind==="region"&&_e===o.byName.writingMode.qname&&!(o.byName.direction.qname in U.styleAttrs))){var je=U.styleAttrs[_e];je==="lrtb"||je==="lr"?U.styleAttrs[o.byName.direction.qname]="ltr":je!=="rltb"&&je!=="rl"||(U.styleAttrs[o.byName.direction.qname]="rtl")}if(_!==null)for(var Se=0;Se<o.all.length;Se++){var ze=o.all[Se];if(ze.qname===o.byName.textDecoration.qname){var Le=_.styleAttrs[ze.qname],Re=U.styleAttrs[ze.qname],Ye=[];Re===void 0?Ye=Le:Re.indexOf("none")===-1?((Re.indexOf("noUnderline")===-1&&Le.indexOf("underline")!==-1||Re.indexOf("underline")!==-1)&&Ye.push("underline"),(Re.indexOf("noLineThrough")===-1&&Le.indexOf("lineThrough")!==-1||Re.indexOf("lineThrough")!==-1)&&Ye.push("lineThrough"),(Re.indexOf("noOverline")===-1&&Le.indexOf("overline")!==-1||Re.indexOf("overline")!==-1)&&Ye.push("overline")):Ye.push("none"),U.styleAttrs[ze.qname]=Ye}else if(ze.qname!==o.byName.fontSize.qname||ze.qname in U.styleAttrs||U.kind!=="span"||U.styleAttrs[o.byName.ruby.qname]!=="textContainer")if(ze.qname!==o.byName.fontSize.qname||ze.qname in U.styleAttrs||U.kind!=="span"||U.styleAttrs[o.byName.ruby.qname]!=="text")ze.inherit&&ze.qname in _.styleAttrs&&!(ze.qname in U.styleAttrs)&&(U.styleAttrs[ze.qname]=_.styleAttrs[ze.qname]);else{var Ue=_.styleAttrs[o.byName.fontSize.qname];_.styleAttrs[o.byName.ruby.qname]==="textContainer"?U.styleAttrs[ze.qname]=Ue:U.styleAttrs[ze.qname]=new l.ComputedLength(.5*Ue.rw,.5*Ue.rh)}else{var Me=_.styleAttrs[o.byName.fontSize.qname];U.styleAttrs[ze.qname]=new l.ComputedLength(.5*Me.rw,.5*Me.rh)}}for(var We=0;We<o.all.length;We++){var Ke=o.all[We];if(!(Ke.qname in U.styleAttrs)&&!(Ke.qname===o.byName.position.qname&&o.byName.origin.qname in U.styleAttrs||Ke.qname===o.byName.origin.qname&&o.byName.position.qname in U.styleAttrs)){var nt=p.head.styling.initials[Ke.qname]||Ke.initial;if(nt!==null&&(U.kind==="region"||Ke.inherit===!1&&nt!==null)){var bt=Ke.parse(nt);bt!==null?(U.styleAttrs[Ke.qname]=bt,de[Ke.qname]=!0):g(ie,"Invalid initial value for '"+Ke.qname+"' on element '"+U.kind)}}}for(var Rt=0;Rt<o.all.length;Rt++){var Pe=o.all[Rt];if(Pe.qname in de&&Pe.compute!==null){var Ne=Pe.compute(p,_,U,U.styleAttrs[Pe.qname],he);Ne!==null?U.styleAttrs[Pe.qname]=Ne:(U.styleAttrs[Pe.qname]=Pe.compute(p,_,U,Pe.parse(Pe.initial),he),g(ie,"Style '"+Pe.qname+"' on element '"+U.kind+"' cannot be computed"))}}if(U.styleAttrs[o.byName.display.qname]==="none")return null;var Qe=null;_===null?Qe=x===null?[]:[x]:"contents"in z&&(Qe=z.contents);for(var X=0;Qe!==null&&X<Qe.length;X++){var W=c(p,E,S,x,U,P,Qe[X],ie,he);W!==null&&U.contents.push(W.element)}for(var C in U.styleAttrs)if(U.styleAttrs.hasOwnProperty(C)){var O=!1;if(U.kind==="span"){var le=U.styleAttrs[o.byName.ruby.qname];(O=(le==="container"||le==="textContainer"||le==="baseContainer")&&u.indexOf(C)!==-1)||(O=le!=="container"&&C===o.byName.rubyAlign.qname),O||(O=!(le==="textContainer"||le==="text")&&C===o.byName.rubyPosition.qname)}if(!O){var te=o.byQName[C];"applies"in te&&(O=te.applies.indexOf(U.kind)===-1)}O&&delete U.styleAttrs[C]}var Be=U.styleAttrs[o.byName.ruby.qname];if(U.kind==="p"||U.kind==="span"&&(Be==="textContainer"||Be==="text")){var rt=[];d(U,rt),function(qe){for(var Xe,$e=0;$e<qe.length;)if((Xe=qe[$e]).kind!=="br"&&Xe.space!=="preserve"){var et=Xe.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(et)&&($e===0||(Ve=qe[$e-1]).kind==="br"||/[\r\n\t ]$/.test(Ve.text))&&(et=et.substring(1)),Xe.text=et,et.length===0?qe.splice($e,1):$e++}else $e++;var Ve,Ze;for($e=0;$e<qe.length;$e++)(Xe=qe[$e]).kind!=="br"&&Xe.space!=="preserve"?/[ ]$/.test(Xe.text)&&($e===qe.length-1||(Ze=qe[$e+1]).kind==="br"||Ze.space==="preserve"&&/^[\r\n]/.test(Ze.text))&&(Xe.text=Xe.text.slice(0,-1)):$e++}(rt),m(U)}return U.kind==="div"&&o.byName.backgroundImage.qname in U.styleAttrs||U.kind==="br"||U.kind==="image"||"contents"in U&&U.contents.length>0||U.kind==="span"&&U.text!==null||U.kind==="region"&&U.styleAttrs[o.byName.showBackground.qname]==="always"?{region_id:P,element:U}:null}function d(p,E){if("contents"in p)for(var S=0;S<p.contents.length;S++){var x=p.contents[S],_=x.styleAttrs[o.byName.ruby.qname];(x.kind!=="span"||_!=="textContainer"&&_!=="text")&&("contents"in x?d(x,E):(x.kind==="span"&&x.text.length!==0||x.kind==="br")&&E.push(x))}}function m(p){if(p.kind==="br")return!1;if("text"in p)return p.text.length===0;if("contents"in p){for(var E=p.contents.length;E--;)m(p.contents[E])&&p.contents.splice(E,1);return p.contents.length===0}}function f(p){this.contents=[],this.aspectRatio=p.aspectRatio,this.lang=p.lang}function h(p){for(var E in this.kind=p.kind||"region",this.lang=p.lang,p.id&&(this.id=p.id),this.styleAttrs={},p.styleAttrs)p.styleAttrs.hasOwnProperty(E)&&(this.styleAttrs[E]=p.styleAttrs[E]);"src"in p&&(this.src=p.src),"type"in p&&(this.type=p.type),"text"in p?this.text=p.text:(this.kind==="region"||"contents"in p)&&(this.contents=[]),"space"in p&&(this.space=p.space)}function g(p,E){if(p&&p.error&&p.error(E))throw E}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(n,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(n,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(n,e,t){(function(r,i,o){function l(d,m,f,h,g,p,E,S){this.name=m,this.ns=d,this.qname=d+" "+m,this.inherit=g,this.animatable=p,this.initial=f,this.applies=h,this.parse=E,this.compute=S}for(var u in r.all=[new l(i.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,o.parseColor,null),new l(i.ns_tts,"color","white",["span"],!0,!0,o.parseColor,null),new l(i.ns_tts,"direction","ltr",["p","span"],!0,!0,function(d){return d},null),new l(i.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(d){return d},null),new l(i.ns_tts,"displayAlign","before",["region"],!1,!0,function(d){return d},null),new l(i.ns_tts,"extent","auto",["tt","region"],!1,!0,function(d){if(d==="auto")return d;var m=d.split(" ");if(m.length!==2)return null;var f=o.parseLength(m[0]),h=o.parseLength(m[1]);return h&&f?{h,w:f}:null},function(d,m,f,h,g){var p,E;if(h==="auto")p=new o.ComputedLength(0,1);else if((p=o.toComputedLength(h.h.value,h.h.unit,null,d.dimensions.h,null,d.pxLength.h))===null)return null;if(h==="auto")E=new o.ComputedLength(1,0);else if((E=o.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w))===null)return null;return{h:p,w:E}}),new l(i.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(d){for(var m=d.split(","),f=[],h=0;h<m.length;h++)m[h]=m[h].trim(),m[h].charAt(0)!=="'"&&m[h].charAt(0)!=='"'&&m[h]==="default"?f.push("monospaceSerif"):f.push(m[h]);return f},null),new l(i.ns_tts,"shear","0%",["p"],!0,!0,o.parseLength,function(d,m,f,h){return h.unit!=="%"?null:Math.abs(h.value)>100?100*Math.sign(h.value):h.value}),new l(i.ns_tts,"fontSize","1c",["span","p"],!0,!0,o.parseLength,function(d,m,f,h,g){return o.toComputedLength(h.value,h.unit,m!==null?m.styleAttrs[r.byName.fontSize.qname]:d.cellLength.h,m!==null?m.styleAttrs[r.byName.fontSize.qname]:d.cellLength.h,d.cellLength.h,d.pxLength.h)}),new l(i.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(d){return d},null),new l(i.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(d){return d},null),new l(i.ns_tts,"lineHeight","normal",["p"],!0,!0,function(d){return d==="normal"?d:o.parseLength(d)},function(d,m,f,h,g){var p;if(h==="normal")p=h;else if((p=o.toComputedLength(h.value,h.unit,f.styleAttrs[r.byName.fontSize.qname],f.styleAttrs[r.byName.fontSize.qname],d.cellLength.h,d.pxLength.h))===null)return null;return p}),new l(i.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(i.ns_tts,"origin","auto",["region"],!1,!0,function(d){if(d==="auto")return d;var m=d.split(" ");if(m.length!==2)return null;var f=o.parseLength(m[0]),h=o.parseLength(m[1]);return h&&f?{h,w:f}:null},function(d,m,f,h,g){var p,E;if(h==="auto")p=new o.ComputedLength(0,0);else if((p=o.toComputedLength(h.h.value,h.h.unit,null,d.dimensions.h,null,d.pxLength.h))===null)return null;if(h==="auto")E=new o.ComputedLength(0,0);else if((E=o.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w))===null)return null;return{h:p,w:E}}),new l(i.ns_tts,"overflow","hidden",["region"],!1,!0,function(d){return d},null),new l(i.ns_tts,"padding","0px",["region"],!1,!0,function(d){var m=d.split(" ");if(m.length>4)return null;for(var f=[],h=0;h<m.length;h++){var g=o.parseLength(m[h]);if(!g)return null;f.push(g)}return f},function(d,m,f,h,g){var p;if(h.length===1)p=[h[0],h[0],h[0],h[0]];else if(h.length===2)p=[h[0],h[1],h[0],h[1]];else if(h.length===3)p=[h[0],h[1],h[2],h[1]];else{if(h.length!==4)return null;p=[h[0],h[1],h[2],h[3]]}var E=f.styleAttrs[r.byName.writingMode.qname];if(E==="lrtb"||E==="lr")p=[p[0],p[3],p[2],p[1]];else if(E==="rltb"||E==="rl")p=[p[0],p[1],p[2],p[3]];else if(E==="tblr")p=[p[3],p[0],p[1],p[2]];else{if(E!=="tbrl"&&E!=="tb")return null;p=[p[3],p[2],p[1],p[0]]}for(var S=[],x=0;x<p.length;x++)if(p[x].value===0)S[x]=new o.ComputedLength(0,0);else if(S[x]=o.toComputedLength(p[x].value,p[x].unit,f.styleAttrs[r.byName.fontSize.qname],x===0||x===2?f.styleAttrs[r.byName.extent.qname].h:f.styleAttrs[r.byName.extent.qname].w,x===0||x===2?d.cellLength.h:d.cellLength.w,x===0||x===2?d.pxLength.h:d.pxLength.w),S[x]===null)return null;return S}),new l(i.ns_tts,"position","top left",["region"],!1,!0,function(d){return o.parsePosition(d)},function(d,m,f,h){var g,p;return(g=o.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new o.ComputedLength(-f.styleAttrs[r.byName.extent.qname].h.rw,d.dimensions.h.rh-f.styleAttrs[r.byName.extent.qname].h.rh),null,d.pxLength.h))===null?null:(h.v.edge==="bottom"&&(g=new o.ComputedLength(-g.rw-f.styleAttrs[r.byName.extent.qname].h.rw,d.dimensions.h.rh-g.rh-f.styleAttrs[r.byName.extent.qname].h.rh)),p=o.toComputedLength(h.h.offset.value,h.h.offset.unit,null,new o.ComputedLength(d.dimensions.w.rw-f.styleAttrs[r.byName.extent.qname].w.rw,-f.styleAttrs[r.byName.extent.qname].w.rh),null,d.pxLength.w),g===null?null:(h.h.edge==="right"&&(p=new o.ComputedLength(d.dimensions.w.rw-p.rw-f.styleAttrs[r.byName.extent.qname].w.rw,-p.rh-f.styleAttrs[r.byName.extent.qname].w.rh)),{h:g,w:p}))}),new l(i.ns_tts,"ruby","none",["span"],!1,!0,function(d){return d},null),new l(i.ns_tts,"rubyAlign","center",["span"],!0,!0,function(d){return d!=="center"&&d!=="spaceAround"?null:d},null),new l(i.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(d){return d},null),new l(i.ns_tts,"rubyReserve","none",["p"],!0,!0,function(d){var m=d.split(" "),f=[null,null];if(m.length===0||m.length>2||m[0]!=="none"&&m[0]!=="both"&&m[0]!=="after"&&m[0]!=="before"&&m[0]!=="outside")return null;if(f[0]=m[0],m.length===2&&m[0]!=="none"){var h=o.parseLength(m[1]);if(!h)return null;f[1]=h}return f},function(d,m,f,h,g){if(h[0]==="none")return h;var p;return(p=h[1]===null?new o.ComputedLength(.5*f.styleAttrs[r.byName.fontSize.qname].rw,.5*f.styleAttrs[r.byName.fontSize.qname].rh):o.toComputedLength(h[1].value,h[1].unit,f.styleAttrs[r.byName.fontSize.qname],f.styleAttrs[r.byName.fontSize.qname],d.cellLength.h,d.pxLength.h))===null?null:[h[0],p]}),new l(i.ns_tts,"showBackground","always",["region"],!1,!0,function(d){return d},null),new l(i.ns_tts,"textAlign","start",["p"],!0,!0,function(d){return d},function(d,m,f,h,g){return h==="left"?"start":h==="right"?"end":h}),new l(i.ns_tts,"textCombine","none",["span"],!0,!0,function(d){return d==="none"||d==="all"?d:null},null),new l(i.ns_tts,"textDecoration","none",["span"],!0,!0,function(d){return d.split(" ")},null),new l(i.ns_tts,"textEmphasis","none",["span"],!0,!0,function(d){for(var m=d.split(" "),f={style:null,symbol:null,color:null,position:null},h=0;h<m.length;h++)if(m[h]==="none"||m[h]==="auto")f.style=m[h];else if(m[h]==="filled"||m[h]==="open")f.style=m[h];else if(m[h]==="circle"||m[h]==="dot"||m[h]==="sesame")f.symbol=m[h];else if(m[h]==="current")f.color=m[h];else if(m[h]==="outside"||m[h]==="before"||m[h]==="after")f.position=m[h];else if(f.color=o.parseColor(m[h]),f.color===null)return null;return f.style==null&&f.symbol==null?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled"),f.position=f.position||"outside",f.color=f.color||"current",f},null),new l(i.ns_tts,"textOutline","none",["span"],!0,!0,function(d){if(d==="none")return d;var m={},f=d.split(" ");if(f.length===0||f.length>2)return null;var h=o.parseColor(f[0]);if(m.color=h,h!==null&&f.shift(),f.length!==1)return null;var g=o.parseLength(f[0]);return g?(m.thickness=g,m):null},function(d,m,f,h,g){if(h==="none")return h;var p={};return h.color===null?p.color=f.styleAttrs[r.byName.color.qname]:p.color=h.color,p.thickness=o.toComputedLength(h.thickness.value,h.thickness.unit,f.styleAttrs[r.byName.fontSize.qname],f.styleAttrs[r.byName.fontSize.qname],d.cellLength.h,d.pxLength.h),p.thickness===null?null:p}),new l(i.ns_tts,"textShadow","none",["span"],!0,!0,o.parseTextShadow,function(d,m,f,h){if(h==="none")return h;for(var g=[],p=0;p<h.length;p++){var E={};if(E.x_off=o.toComputedLength(h[p][0].value,h[p][0].unit,null,f.styleAttrs[r.byName.fontSize.qname],null,d.pxLength.w),E.x_off===null||(E.y_off=o.toComputedLength(h[p][1].value,h[p][1].unit,null,f.styleAttrs[r.byName.fontSize.qname],null,d.pxLength.h),E.y_off===null))return null;if(h[p][2]===null)E.b_radius=0;else if(E.b_radius=o.toComputedLength(h[p][2].value,h[p][2].unit,null,f.styleAttrs[r.byName.fontSize.qname],null,d.pxLength.h),E.b_radius===null)return null;h[p][3]===null?E.color=f.styleAttrs[r.byName.color.qname]:E.color=h[p][3],g.push(E)}return g}),new l(i.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(d){return d},null),new l(i.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(d){return d},null),new l(i.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(d){return d},null),new l(i.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(d){return d},null),new l(i.ns_tts,"zIndex","auto",["region"],!1,!0,function(d){var m;return d==="auto"?m=d:(m=parseInt(d),isNaN(m)&&(m=null)),m},null),new l(i.ns_ebutts,"linePadding","0c",["p"],!0,!1,o.parseLength,function(d,m,f,h,g){return o.toComputedLength(h.value,h.unit,null,null,d.cellLength.w,null)}),new l(i.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(d){return d},null),new l(i.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(d){return d},null),new l(i.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(d){return d==="true"},null),new l(i.ns_itts,"fillLineGap","false",["p"],!0,!0,function(d){return d==="true"},null)],r.byQName={},r.all)r.byQName[r.all[u].qname]=r.all[u];for(var c in r.byName={},r.all)r.byName[r.all[c].name]=r.all[c]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(n,e){(function(t){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(c){var d,m=null,f=l[c.toLowerCase()];return f!==void 0?m=f:(d=r.exec(c))!==null?m=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]!==void 0?parseInt(d[4],16):255]:(d=i.exec(c))!==null?m=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:(d=o.exec(c))!==null&&(m=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseInt(d[4])]),m};var u=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(c){var d,m=null;return(d=u.exec(c))!==null&&(m={value:parseFloat(d[1]),unit:d[2]}),m},t.parseTextShadow=function(c){for(var d=c.match(/([^\(,\)]|\([^\)]+\))+/g),m=[],f=0;f<d.length;f++){var h=d[f].split(" ");if(h.length===1&&h[0]==="none")return"none";if(h.length>1&&h.length<5){var g=[null,null,null,null],p=t.parseLength(h.shift());if(p===null||(g[0]=p,(p=t.parseLength(h.shift()))===null))return null;if(g[1]=p,h.length===0){m.push(g);continue}if((p=t.parseLength(h[0]))!==null&&(g[2]=p,h.shift()),h.length===0){m.push(g);continue}var E=t.parseColor(h[0]);if(E===null)return null;g[3]=E,m.push(g)}}return m},t.parsePosition=function(c){var d=c.split(" "),m=function(x){return x==="center"||x==="left"||x==="top"||x==="bottom"||x==="right"};if(d.length>4)return null;for(var f=0;f<d.length;f++)if(!m(d[f])){var h=t.parseLength(d[f]);if(h===null)return null;d[f]=h}for(var g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},p=0;p<d.length;){var E=d[p++];if(m(E)){var S={value:0,unit:"%"};d.length!==2&&p<d.length&&!m(d[p])&&(S=d[p++]),E==="right"?(g.h.edge=E,g.h.offset=S):E==="bottom"?(g.v.edge=E,g.v.offset=S):E==="left"?g.h.offset=S:E==="top"&&(g.v.offset=S)}else{if(d.length!==1&&d.length!==2)return null;p===1?g.h.offset=E:g.v.offset=E}}return g},t.ComputedLength=function(c,d){this.rw=c,this.rh=d},t.ComputedLength.prototype.toUsedLength=function(c,d){return c*this.rw+d*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(c,d,m,f,h,g){return d==="%"&&f?new t.ComputedLength(f.rw*c/100,f.rh*c/100):d==="em"&&m?new t.ComputedLength(m.rw*c,m.rh*c):d==="c"&&h?new t.ComputedLength(c*h.rw,c*h.rh):d==="px"&&g?new t.ComputedLength(c*g.rw,c*g.rh):d==="rh"?new t.ComputedLength(0,c/100):d==="rw"?new t.ComputedLength(c/100,0):null}})(e)},7523:function(n){typeof Object.create=="function"?n.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3282:function(n){function e(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function t(i,o){for(var l,u="",c=0,d=-1,m=0,f=0;f<=i.length;++f){if(f<i.length)l=i.charCodeAt(f);else{if(l===47)break;l=47}if(l===47){if(!(d===f-1||m===1))if(d!==f-1&&m===2){if(u.length<2||c!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var h=u.lastIndexOf("/");if(h!==u.length-1){h===-1?(u="",c=0):c=(u=u.slice(0,h)).length-1-u.lastIndexOf("/"),d=f,m=0;continue}}else if(u.length===2||u.length===1){u="",c=0,d=f,m=0;continue}}o&&(u.length>0?u+="/..":u="..",c=2)}else u.length>0?u+="/"+i.slice(d+1,f):u=i.slice(d+1,f),c=f-d-1;d=f,m=0}else l===46&&m!==-1?++m:m=-1}return u}var r={resolve:function(){for(var i,o="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var c;u>=0?c=arguments[u]:(i===void 0&&(i=process.cwd()),c=i),e(c),c.length!==0&&(o=c+"/"+o,l=c.charCodeAt(0)===47)}return o=t(o,!l),l?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,l=i.charCodeAt(i.length-1)===47;return(i=t(i,!o)).length!==0||o||(i="."),i.length>0&&l&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var l=arguments[o];e(l),l.length>0&&(i===void 0?i=l:i+="/"+l)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i))===(o=r.resolve(o)))return"";for(var l=1;l<i.length&&i.charCodeAt(l)===47;++l);for(var u=i.length,c=u-l,d=1;d<o.length&&o.charCodeAt(d)===47;++d);for(var m=o.length-d,f=c<m?c:m,h=-1,g=0;g<=f;++g){if(g===f){if(m>f){if(o.charCodeAt(d+g)===47)return o.slice(d+g+1);if(g===0)return o.slice(d+g)}else c>f&&(i.charCodeAt(l+g)===47?h=g:g===0&&(h=0));break}var p=i.charCodeAt(l+g);if(p!==o.charCodeAt(d+g))break;p===47&&(h=g)}var E="";for(g=l+h+1;g<=u;++g)g!==u&&i.charCodeAt(g)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+o.slice(d+h):(d+=h,o.charCodeAt(d)===47&&++d,o.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),l=o===47,u=-1,c=!0,d=i.length-1;d>=1;--d)if((o=i.charCodeAt(d))===47){if(!c){u=d;break}}else c=!1;return u===-1?l?"/":".":l&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var l,u=0,c=-1,d=!0;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var m=o.length-1,f=-1;for(l=i.length-1;l>=0;--l){var h=i.charCodeAt(l);if(h===47){if(!d){u=l+1;break}}else f===-1&&(d=!1,f=l+1),m>=0&&(h===o.charCodeAt(m)?--m==-1&&(c=l):(m=-1,c=f))}return u===c?c=f:c===-1&&(c=i.length),i.slice(u,c)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!d){u=l+1;break}}else c===-1&&(d=!1,c=l+1);return c===-1?"":i.slice(u,c)},extname:function(i){e(i);for(var o=-1,l=0,u=-1,c=!0,d=0,m=i.length-1;m>=0;--m){var f=i.charCodeAt(m);if(f!==47)u===-1&&(c=!1,u=m+1),f===46?o===-1?o=m:d!==1&&(d=1):o!==-1&&(d=-1);else if(!c){l=m+1;break}}return o===-1||u===-1||d===0||d===1&&o===u-1&&o===l+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return function(o,l){var u=l.dir||l.root,c=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+c:u+"/"+c:c}(0,i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var l,u=i.charCodeAt(0),c=u===47;c?(o.root="/",l=1):l=0;for(var d=-1,m=0,f=-1,h=!0,g=i.length-1,p=0;g>=l;--g)if((u=i.charCodeAt(g))!==47)f===-1&&(h=!1,f=g+1),u===46?d===-1?d=g:p!==1&&(p=1):d!==-1&&(p=-1);else if(!h){m=g+1;break}return d===-1||f===-1||p===0||p===1&&d===f-1&&d===m+1?f!==-1&&(o.base=o.name=m===0&&c?i.slice(1,f):i.slice(m,f)):(m===0&&c?(o.name=i.slice(1,d),o.base=i.slice(1,f)):(o.name=i.slice(m,d),o.base=i.slice(m,f)),o.ext=i.slice(d,f)),m>0?o.dir=i.slice(0,m-1):c&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,n.exports=r},3515:function(n,e,t){n.exports=i;var r=t(9826).EventEmitter;function i(){r.call(this)}t(7523)(i,r),i.Readable=t(2762),i.Writable=t(3726),i.Duplex=t(884),i.Transform=t(6756),i.PassThrough=t(1390),i.finished=t(2896),i.pipeline=t(8460),i.Stream=i,i.prototype.pipe=function(o,l){var u=this;function c(E){o.writable&&o.write(E)===!1&&u.pause&&u.pause()}function d(){u.readable&&u.resume&&u.resume()}u.on("data",c),o.on("drain",d),o._isStdio||l&&l.end===!1||(u.on("end",f),u.on("close",h));var m=!1;function f(){m||(m=!0,o.end())}function h(){m||(m=!0,typeof o.destroy=="function"&&o.destroy())}function g(E){if(p(),r.listenerCount(this,"error")===0)throw E}function p(){u.removeListener("data",c),o.removeListener("drain",d),u.removeListener("end",f),u.removeListener("close",h),u.removeListener("error",g),o.removeListener("error",g),u.removeListener("end",p),u.removeListener("close",p),o.removeListener("close",p)}return u.on("error",g),o.on("error",g),u.on("end",p),u.on("close",p),o.on("close",p),o.emit("pipe",u),o}},1602:function(n){var e={};function t(i,o,l){l||(l=Error);var u=function(c){var d,m;function f(h,g,p){return c.call(this,function(E,S,x){return typeof o=="string"?o:o(E,S,x)}(h,g,p))||this}return m=c,(d=f).prototype=Object.create(m.prototype),d.prototype.constructor=d,d.__proto__=m,f}(l);u.prototype.name=l.name,u.prototype.code=i,e[i]=u}function r(i,o){if(Array.isArray(i)){var l=i.length;return i=i.map(function(u){return String(u)}),l>2?"one of ".concat(o," ").concat(i.slice(0,l-1).join(", "),", or ")+i[l-1]:l===2?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}return"of ".concat(o," ").concat(String(i))}t("ERR_INVALID_OPT_VALUE",function(i,o){return'The value "'+o+'" is invalid for option "'+i+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(i,o,l){var u,c,d,m,f;if(typeof o=="string"&&(c="not ",o.substr(0,4)===c)?(u="must not be",o=o.replace(/^not /,"")):u="must be",function(g,p,E){return(E===void 0||E>g.length)&&(E=g.length),g.substring(E-9,E)===p}(i," argument"))d="The ".concat(i," ").concat(u," ").concat(r(o,"type"));else{var h=(typeof f!="number"&&(f=0),f+1>(m=i).length||m.indexOf(".",f)===-1?"argument":"property");d='The "'.concat(i,'" ').concat(h," ").concat(u," ").concat(r(o,"type"))}return d+". Received type ".concat(typeof l)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=e},884:function(n,e,t){var r=Object.keys||function(h){var g=[];for(var p in h)g.push(p);return g};n.exports=d;var i=t(2762),o=t(3726);t(7523)(d,i);for(var l=r(o.prototype),u=0;u<l.length;u++){var c=l[u];d.prototype[c]||(d.prototype[c]=o.prototype[c])}function d(h){if(!(this instanceof d))return new d(h);i.call(this,h),o.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||process.nextTick(f,this)}function f(h){h.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})},1390:function(n,e,t){n.exports=i;var r=t(6756);function i(o){if(!(this instanceof i))return new i(o);r.call(this,o)}t(7523)(i,r),i.prototype._transform=function(o,l,u){u(null,o)}},2762:function(n,e,t){var r;n.exports=U,U.ReadableState=P,t(9826).EventEmitter;var i,o=function(Pe,Ne){return Pe.listeners(Ne).length},l=t(2611),u=t(44).Buffer,c=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},d=t(7199);i=d&&d.debuglog?d.debuglog("stream"):function(){};var m,f,h,g=t(3791),p=t(2410),E=t(1749).getHighWaterMark,S=t(1602).codes,x=S.ERR_INVALID_ARG_TYPE,_=S.ERR_STREAM_PUSH_AFTER_EOF,A=S.ERR_METHOD_NOT_IMPLEMENTED,z=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(U,l);var ie=p.errorOrDestroy,he=["error","close","destroy","pause","resume"];function P(Pe,Ne,Qe){r=r||t(884),Pe=Pe||{},typeof Qe!="boolean"&&(Qe=Ne instanceof r),this.objectMode=!!Pe.objectMode,Qe&&(this.objectMode=this.objectMode||!!Pe.readableObjectMode),this.highWaterMark=E(this,Pe,"readableHighWaterMark",Qe),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Pe.emitClose!==!1,this.autoDestroy=!!Pe.autoDestroy,this.destroyed=!1,this.defaultEncoding=Pe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pe.encoding&&(m||(m=t(748).StringDecoder),this.decoder=new m(Pe.encoding),this.encoding=Pe.encoding)}function U(Pe){if(r=r||t(884),!(this instanceof U))return new U(Pe);var Ne=this instanceof r;this._readableState=new P(Pe,this,Ne),this.readable=!0,Pe&&(typeof Pe.read=="function"&&(this._read=Pe.read),typeof Pe.destroy=="function"&&(this._destroy=Pe.destroy)),l.call(this)}function ce(Pe,Ne,Qe,X,W){i("readableAddChunk",Ne);var C,O=Pe._readableState;if(Ne===null)O.reading=!1,function(le,te){if(i("onEofChunk"),!te.ended){if(te.decoder){var Be=te.decoder.end();Be&&Be.length&&(te.buffer.push(Be),te.length+=te.objectMode?1:Be.length)}te.ended=!0,te.sync?Se(le):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,ze(le)))}}(Pe,O);else if(W||(C=function(le,te){var Be,rt;return rt=te,u.isBuffer(rt)||rt instanceof c||typeof te=="string"||te===void 0||le.objectMode||(Be=new x("chunk",["string","Buffer","Uint8Array"],te)),Be}(O,Ne)),C)ie(Pe,C);else if(O.objectMode||Ne&&Ne.length>0)if(typeof Ne=="string"||O.objectMode||Object.getPrototypeOf(Ne)===u.prototype||(Ne=function(le){return u.from(le)}(Ne)),X)O.endEmitted?ie(Pe,new z):de(Pe,O,Ne,!0);else if(O.ended)ie(Pe,new _);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!Qe?(Ne=O.decoder.write(Ne),O.objectMode||Ne.length!==0?de(Pe,O,Ne,!1):Le(Pe,O)):de(Pe,O,Ne,!1)}else X||(O.reading=!1,Le(Pe,O));return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function de(Pe,Ne,Qe,X){Ne.flowing&&Ne.length===0&&!Ne.sync?(Ne.awaitDrain=0,Pe.emit("data",Qe)):(Ne.length+=Ne.objectMode?1:Qe.length,X?Ne.buffer.unshift(Qe):Ne.buffer.push(Qe),Ne.needReadable&&Se(Pe)),Le(Pe,Ne)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pe){this._readableState&&(this._readableState.destroyed=Pe)}}),U.prototype.destroy=p.destroy,U.prototype._undestroy=p.undestroy,U.prototype._destroy=function(Pe,Ne){Ne(Pe)},U.prototype.push=function(Pe,Ne){var Qe,X=this._readableState;return X.objectMode?Qe=!0:typeof Pe=="string"&&((Ne=Ne||X.defaultEncoding)!==X.encoding&&(Pe=u.from(Pe,Ne),Ne=""),Qe=!0),ce(this,Pe,Ne,!1,Qe)},U.prototype.unshift=function(Pe){return ce(this,Pe,null,!0,!1)},U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(Pe){m||(m=t(748).StringDecoder);var Ne=new m(Pe);this._readableState.decoder=Ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Qe=this._readableState.buffer.head,X="";Qe!==null;)X+=Ne.write(Qe.data),Qe=Qe.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var _e=1073741824;function je(Pe,Ne){return Pe<=0||Ne.length===0&&Ne.ended?0:Ne.objectMode?1:Pe!=Pe?Ne.flowing&&Ne.length?Ne.buffer.head.data.length:Ne.length:(Pe>Ne.highWaterMark&&(Ne.highWaterMark=function(Qe){return Qe>=_e?Qe=_e:(Qe--,Qe|=Qe>>>1,Qe|=Qe>>>2,Qe|=Qe>>>4,Qe|=Qe>>>8,Qe|=Qe>>>16,Qe++),Qe}(Pe)),Pe<=Ne.length?Pe:Ne.ended?Ne.length:(Ne.needReadable=!0,0))}function Se(Pe){var Ne=Pe._readableState;i("emitReadable",Ne.needReadable,Ne.emittedReadable),Ne.needReadable=!1,Ne.emittedReadable||(i("emitReadable",Ne.flowing),Ne.emittedReadable=!0,process.nextTick(ze,Pe))}function ze(Pe){var Ne=Pe._readableState;i("emitReadable_",Ne.destroyed,Ne.length,Ne.ended),Ne.destroyed||!Ne.length&&!Ne.ended||(Pe.emit("readable"),Ne.emittedReadable=!1),Ne.needReadable=!Ne.flowing&&!Ne.ended&&Ne.length<=Ne.highWaterMark,We(Pe)}function Le(Pe,Ne){Ne.readingMore||(Ne.readingMore=!0,process.nextTick(Re,Pe,Ne))}function Re(Pe,Ne){for(;!Ne.reading&&!Ne.ended&&(Ne.length<Ne.highWaterMark||Ne.flowing&&Ne.length===0);){var Qe=Ne.length;if(i("maybeReadMore read 0"),Pe.read(0),Qe===Ne.length)break}Ne.readingMore=!1}function Ye(Pe){var Ne=Pe._readableState;Ne.readableListening=Pe.listenerCount("readable")>0,Ne.resumeScheduled&&!Ne.paused?Ne.flowing=!0:Pe.listenerCount("data")>0&&Pe.resume()}function Ue(Pe){i("readable nexttick read 0"),Pe.read(0)}function Me(Pe,Ne){i("resume",Ne.reading),Ne.reading||Pe.read(0),Ne.resumeScheduled=!1,Pe.emit("resume"),We(Pe),Ne.flowing&&!Ne.reading&&Pe.read(0)}function We(Pe){var Ne=Pe._readableState;for(i("flow",Ne.flowing);Ne.flowing&&Pe.read()!==null;);}function Ke(Pe,Ne){return Ne.length===0?null:(Ne.objectMode?Qe=Ne.buffer.shift():!Pe||Pe>=Ne.length?(Qe=Ne.decoder?Ne.buffer.join(""):Ne.buffer.length===1?Ne.buffer.first():Ne.buffer.concat(Ne.length),Ne.buffer.clear()):Qe=Ne.buffer.consume(Pe,Ne.decoder),Qe);var Qe}function nt(Pe){var Ne=Pe._readableState;i("endReadable",Ne.endEmitted),Ne.endEmitted||(Ne.ended=!0,process.nextTick(bt,Ne,Pe))}function bt(Pe,Ne){if(i("endReadableNT",Pe.endEmitted,Pe.length),!Pe.endEmitted&&Pe.length===0&&(Pe.endEmitted=!0,Ne.readable=!1,Ne.emit("end"),Pe.autoDestroy)){var Qe=Ne._writableState;(!Qe||Qe.autoDestroy&&Qe.finished)&&Ne.destroy()}}function Rt(Pe,Ne){for(var Qe=0,X=Pe.length;Qe<X;Qe++)if(Pe[Qe]===Ne)return Qe;return-1}U.prototype.read=function(Pe){i("read",Pe),Pe=parseInt(Pe,10);var Ne=this._readableState,Qe=Pe;if(Pe!==0&&(Ne.emittedReadable=!1),Pe===0&&Ne.needReadable&&((Ne.highWaterMark!==0?Ne.length>=Ne.highWaterMark:Ne.length>0)||Ne.ended))return i("read: emitReadable",Ne.length,Ne.ended),Ne.length===0&&Ne.ended?nt(this):Se(this),null;if((Pe=je(Pe,Ne))===0&&Ne.ended)return Ne.length===0&&nt(this),null;var X,W=Ne.needReadable;return i("need readable",W),(Ne.length===0||Ne.length-Pe<Ne.highWaterMark)&&i("length less than watermark",W=!0),Ne.ended||Ne.reading?i("reading or ended",W=!1):W&&(i("do read"),Ne.reading=!0,Ne.sync=!0,Ne.length===0&&(Ne.needReadable=!0),this._read(Ne.highWaterMark),Ne.sync=!1,Ne.reading||(Pe=je(Qe,Ne))),(X=Pe>0?Ke(Pe,Ne):null)===null?(Ne.needReadable=Ne.length<=Ne.highWaterMark,Pe=0):(Ne.length-=Pe,Ne.awaitDrain=0),Ne.length===0&&(Ne.ended||(Ne.needReadable=!0),Qe!==Pe&&Ne.ended&&nt(this)),X!==null&&this.emit("data",X),X},U.prototype._read=function(Pe){ie(this,new A("_read()"))},U.prototype.pipe=function(Pe,Ne){var Qe=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=Pe;break;case 1:X.pipes=[X.pipes,Pe];break;default:X.pipes.push(Pe)}X.pipesCount+=1,i("pipe count=%d opts=%j",X.pipesCount,Ne);var W=Ne&&Ne.end===!1||Pe===process.stdout||Pe===process.stderr?Xe:C;function C(){i("onend"),Pe.end()}X.endEmitted?process.nextTick(W):Qe.once("end",W),Pe.on("unpipe",function $e(et,Ve){i("onunpipe"),et===Qe&&Ve&&Ve.hasUnpiped===!1&&(Ve.hasUnpiped=!0,i("cleanup"),Pe.removeListener("close",rt),Pe.removeListener("finish",qe),Pe.removeListener("drain",O),Pe.removeListener("error",Be),Pe.removeListener("unpipe",$e),Qe.removeListener("end",C),Qe.removeListener("end",Xe),Qe.removeListener("data",te),le=!0,!X.awaitDrain||Pe._writableState&&!Pe._writableState.needDrain||O())});var O=function($e){return function(){var et=$e._readableState;i("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,et.awaitDrain===0&&o($e,"data")&&(et.flowing=!0,We($e))}}(Qe);Pe.on("drain",O);var le=!1;function te($e){i("ondata");var et=Pe.write($e);i("dest.write",et),et===!1&&((X.pipesCount===1&&X.pipes===Pe||X.pipesCount>1&&Rt(X.pipes,Pe)!==-1)&&!le&&(i("false write response, pause",X.awaitDrain),X.awaitDrain++),Qe.pause())}function Be($e){i("onerror",$e),Xe(),Pe.removeListener("error",Be),o(Pe,"error")===0&&ie(Pe,$e)}function rt(){Pe.removeListener("finish",qe),Xe()}function qe(){i("onfinish"),Pe.removeListener("close",rt),Xe()}function Xe(){i("unpipe"),Qe.unpipe(Pe)}return Qe.on("data",te),function($e,et,Ve){if(typeof $e.prependListener=="function")return $e.prependListener(et,Ve);$e._events&&$e._events[et]?Array.isArray($e._events[et])?$e._events[et].unshift(Ve):$e._events[et]=[Ve,$e._events[et]]:$e.on(et,Ve)}(Pe,"error",Be),Pe.once("close",rt),Pe.once("finish",qe),Pe.emit("pipe",Qe),X.flowing||(i("pipe resume"),Qe.resume()),Pe},U.prototype.unpipe=function(Pe){var Ne=this._readableState,Qe={hasUnpiped:!1};if(Ne.pipesCount===0)return this;if(Ne.pipesCount===1)return Pe&&Pe!==Ne.pipes||(Pe||(Pe=Ne.pipes),Ne.pipes=null,Ne.pipesCount=0,Ne.flowing=!1,Pe&&Pe.emit("unpipe",this,Qe)),this;if(!Pe){var X=Ne.pipes,W=Ne.pipesCount;Ne.pipes=null,Ne.pipesCount=0,Ne.flowing=!1;for(var C=0;C<W;C++)X[C].emit("unpipe",this,{hasUnpiped:!1});return this}var O=Rt(Ne.pipes,Pe);return O===-1||(Ne.pipes.splice(O,1),Ne.pipesCount-=1,Ne.pipesCount===1&&(Ne.pipes=Ne.pipes[0]),Pe.emit("unpipe",this,Qe)),this},U.prototype.on=function(Pe,Ne){var Qe=l.prototype.on.call(this,Pe,Ne),X=this._readableState;return Pe==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):Pe==="readable"&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,i("on readable",X.length,X.reading),X.length?Se(this):X.reading||process.nextTick(Ue,this))),Qe},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(Pe,Ne){var Qe=l.prototype.removeListener.call(this,Pe,Ne);return Pe==="readable"&&process.nextTick(Ye,this),Qe},U.prototype.removeAllListeners=function(Pe){var Ne=l.prototype.removeAllListeners.apply(this,arguments);return Pe!=="readable"&&Pe!==void 0||process.nextTick(Ye,this),Ne},U.prototype.resume=function(){var Pe=this._readableState;return Pe.flowing||(i("resume"),Pe.flowing=!Pe.readableListening,function(Ne,Qe){Qe.resumeScheduled||(Qe.resumeScheduled=!0,process.nextTick(Me,Ne,Qe))}(this,Pe)),Pe.paused=!1,this},U.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},U.prototype.wrap=function(Pe){var Ne=this,Qe=this._readableState,X=!1;for(var W in Pe.on("end",function(){if(i("wrapped end"),Qe.decoder&&!Qe.ended){var O=Qe.decoder.end();O&&O.length&&Ne.push(O)}Ne.push(null)}),Pe.on("data",function(O){i("wrapped data"),Qe.decoder&&(O=Qe.decoder.write(O)),Qe.objectMode&&O==null||(Qe.objectMode||O&&O.length)&&(Ne.push(O)||(X=!0,Pe.pause()))}),Pe)this[W]===void 0&&typeof Pe[W]=="function"&&(this[W]=function(O){return function(){return Pe[O].apply(Pe,arguments)}}(W));for(var C=0;C<he.length;C++)Pe.on(he[C],this.emit.bind(this,he[C]));return this._read=function(O){i("wrapped _read",O),X&&(X=!1,Pe.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return f===void 0&&(f=t(5857)),f(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Pe){this._readableState&&(this._readableState.flowing=Pe)}}),U._fromList=Ke,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(U.from=function(Pe,Ne){return h===void 0&&(h=t(3411)),h(U,Pe,Ne)})},6756:function(n,e,t){n.exports=m;var r=t(1602).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,l=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=r.ERR_TRANSFORM_WITH_LENGTH_0,c=t(884);function d(g,p){var E=this._transformState;E.transforming=!1;var S=E.writecb;if(S===null)return this.emit("error",new o);E.writechunk=null,E.writecb=null,p!=null&&this.push(p),S(g);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function m(g){if(!(this instanceof m))return new m(g);c.call(this,g),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",f)}function f(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?h(this,null,null):this._flush(function(p,E){h(g,p,E)})}function h(g,p,E){if(p)return g.emit("error",p);if(E!=null&&g.push(E),g._writableState.length)throw new u;if(g._transformState.transforming)throw new l;return g.push(null)}t(7523)(m,c),m.prototype.push=function(g,p){return this._transformState.needTransform=!1,c.prototype.push.call(this,g,p)},m.prototype._transform=function(g,p,E){E(new i("_transform()"))},m.prototype._write=function(g,p,E){var S=this._transformState;if(S.writecb=E,S.writechunk=g,S.writeencoding=p,!S.transforming){var x=this._readableState;(S.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},m.prototype._read=function(g){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},m.prototype._destroy=function(g,p){c.prototype._destroy.call(this,g,function(E){p(E)})}},3726:function(n,e,t){function r(Le){var Re=this;this.next=null,this.entry=null,this.finish=function(){(function(Ye,Ue){var Me=Ye.entry;for(Ye.entry=null;Me;){var We=Me.callback;Ue.pendingcb--,We(void 0),Me=Me.next}Ue.corkedRequestsFree.next=Ye})(Re,Le)}}var i;n.exports=U,U.WritableState=P;var o,l={deprecate:t(9e3)},u=t(2611),c=t(44).Buffer,d=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m=t(2410),f=t(1749).getHighWaterMark,h=t(1602).codes,g=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,E=h.ERR_MULTIPLE_CALLBACK,S=h.ERR_STREAM_CANNOT_PIPE,x=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,A=h.ERR_STREAM_WRITE_AFTER_END,z=h.ERR_UNKNOWN_ENCODING,ie=m.errorOrDestroy;function he(){}function P(Le,Re,Ye){i=i||t(884),Le=Le||{},typeof Ye!="boolean"&&(Ye=Re instanceof i),this.objectMode=!!Le.objectMode,Ye&&(this.objectMode=this.objectMode||!!Le.writableObjectMode),this.highWaterMark=f(this,Le,"writableHighWaterMark",Ye),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ue=Le.decodeStrings===!1;this.decodeStrings=!Ue,this.defaultEncoding=Le.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Me){(function(We,Ke){var nt=We._writableState,bt=nt.sync,Rt=nt.writecb;if(typeof Rt!="function")throw new E;if(function(Ne){Ne.writing=!1,Ne.writecb=null,Ne.length-=Ne.writelen,Ne.writelen=0}(nt),Ke)(function(Ne,Qe,X,W,C){--Qe.pendingcb,X?(process.nextTick(C,W),process.nextTick(ze,Ne,Qe),Ne._writableState.errorEmitted=!0,ie(Ne,W)):(C(W),Ne._writableState.errorEmitted=!0,ie(Ne,W),ze(Ne,Qe))})(We,nt,bt,Ke,Rt);else{var Pe=je(nt)||We.destroyed;Pe||nt.corked||nt.bufferProcessing||!nt.bufferedRequest||_e(We,nt),bt?process.nextTick(de,We,nt,Pe,Rt):de(We,nt,Pe,Rt)}})(Re,Me)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Le.emitClose!==!1,this.autoDestroy=!!Le.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function U(Le){var Re=this instanceof(i=i||t(884));if(!Re&&!o.call(U,this))return new U(Le);this._writableState=new P(Le,this,Re),this.writable=!0,Le&&(typeof Le.write=="function"&&(this._write=Le.write),typeof Le.writev=="function"&&(this._writev=Le.writev),typeof Le.destroy=="function"&&(this._destroy=Le.destroy),typeof Le.final=="function"&&(this._final=Le.final)),u.call(this)}function ce(Le,Re,Ye,Ue,Me,We,Ke){Re.writelen=Ue,Re.writecb=Ke,Re.writing=!0,Re.sync=!0,Re.destroyed?Re.onwrite(new x("write")):Ye?Le._writev(Me,Re.onwrite):Le._write(Me,We,Re.onwrite),Re.sync=!1}function de(Le,Re,Ye,Ue){Ye||function(Me,We){We.length===0&&We.needDrain&&(We.needDrain=!1,Me.emit("drain"))}(Le,Re),Re.pendingcb--,Ue(),ze(Le,Re)}function _e(Le,Re){Re.bufferProcessing=!0;var Ye=Re.bufferedRequest;if(Le._writev&&Ye&&Ye.next){var Ue=Re.bufferedRequestCount,Me=new Array(Ue),We=Re.corkedRequestsFree;We.entry=Ye;for(var Ke=0,nt=!0;Ye;)Me[Ke]=Ye,Ye.isBuf||(nt=!1),Ye=Ye.next,Ke+=1;Me.allBuffers=nt,ce(Le,Re,!0,Re.length,Me,"",We.finish),Re.pendingcb++,Re.lastBufferedRequest=null,We.next?(Re.corkedRequestsFree=We.next,We.next=null):Re.corkedRequestsFree=new r(Re),Re.bufferedRequestCount=0}else{for(;Ye;){var bt=Ye.chunk,Rt=Ye.encoding,Pe=Ye.callback;if(ce(Le,Re,!1,Re.objectMode?1:bt.length,bt,Rt,Pe),Ye=Ye.next,Re.bufferedRequestCount--,Re.writing)break}Ye===null&&(Re.lastBufferedRequest=null)}Re.bufferedRequest=Ye,Re.bufferProcessing=!1}function je(Le){return Le.ending&&Le.length===0&&Le.bufferedRequest===null&&!Le.finished&&!Le.writing}function Se(Le,Re){Le._final(function(Ye){Re.pendingcb--,Ye&&ie(Le,Ye),Re.prefinished=!0,Le.emit("prefinish"),ze(Le,Re)})}function ze(Le,Re){var Ye=je(Re);if(Ye&&(function(Me,We){We.prefinished||We.finalCalled||(typeof Me._final!="function"||We.destroyed?(We.prefinished=!0,Me.emit("prefinish")):(We.pendingcb++,We.finalCalled=!0,process.nextTick(Se,Me,We)))}(Le,Re),Re.pendingcb===0&&(Re.finished=!0,Le.emit("finish"),Re.autoDestroy))){var Ue=Le._readableState;(!Ue||Ue.autoDestroy&&Ue.endEmitted)&&Le.destroy()}return Ye}t(7523)(U,u),P.prototype.getBuffer=function(){for(var Le=this.bufferedRequest,Re=[];Le;)Re.push(Le),Le=Le.next;return Re},function(){try{Object.defineProperty(P.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(Le){return!!o.call(this,Le)||this===U&&Le&&Le._writableState instanceof P}})):o=function(Le){return Le instanceof this},U.prototype.pipe=function(){ie(this,new S)},U.prototype.write=function(Le,Re,Ye){var Ue,Me=this._writableState,We=!1,Ke=!Me.objectMode&&(Ue=Le,c.isBuffer(Ue)||Ue instanceof d);return Ke&&!c.isBuffer(Le)&&(Le=function(nt){return c.from(nt)}(Le)),typeof Re=="function"&&(Ye=Re,Re=null),Ke?Re="buffer":Re||(Re=Me.defaultEncoding),typeof Ye!="function"&&(Ye=he),Me.ending?function(nt,bt){var Rt=new A;ie(nt,Rt),process.nextTick(bt,Rt)}(this,Ye):(Ke||function(nt,bt,Rt,Pe){var Ne;return Rt===null?Ne=new _:typeof Rt=="string"||bt.objectMode||(Ne=new g("chunk",["string","Buffer"],Rt)),!Ne||(ie(nt,Ne),process.nextTick(Pe,Ne),!1)}(this,Me,Le,Ye))&&(Me.pendingcb++,We=function(nt,bt,Rt,Pe,Ne,Qe){if(!Rt){var X=function(le,te,Be){return le.objectMode||le.decodeStrings===!1||typeof te!="string"||(te=c.from(te,Be)),te}(bt,Pe,Ne);Pe!==X&&(Rt=!0,Ne="buffer",Pe=X)}var W=bt.objectMode?1:Pe.length;bt.length+=W;var C=bt.length<bt.highWaterMark;if(C||(bt.needDrain=!0),bt.writing||bt.corked){var O=bt.lastBufferedRequest;bt.lastBufferedRequest={chunk:Pe,encoding:Ne,isBuf:Rt,callback:Qe,next:null},O?O.next=bt.lastBufferedRequest:bt.bufferedRequest=bt.lastBufferedRequest,bt.bufferedRequestCount+=1}else ce(nt,bt,!1,W,Pe,Ne,Qe);return C}(this,Me,Ke,Le,Re,Ye)),We},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){var Le=this._writableState;Le.corked&&(Le.corked--,Le.writing||Le.corked||Le.bufferProcessing||!Le.bufferedRequest||_e(this,Le))},U.prototype.setDefaultEncoding=function(Le){if(typeof Le=="string"&&(Le=Le.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Le+"").toLowerCase())>-1))throw new z(Le);return this._writableState.defaultEncoding=Le,this},Object.defineProperty(U.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(U.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),U.prototype._write=function(Le,Re,Ye){Ye(new p("_write()"))},U.prototype._writev=null,U.prototype.end=function(Le,Re,Ye){var Ue=this._writableState;return typeof Le=="function"?(Ye=Le,Le=null,Re=null):typeof Re=="function"&&(Ye=Re,Re=null),Le!=null&&this.write(Le,Re),Ue.corked&&(Ue.corked=1,this.uncork()),Ue.ending||function(Me,We,Ke){We.ending=!0,ze(Me,We),Ke&&(We.finished?process.nextTick(Ke):Me.once("finish",Ke)),We.ended=!0,Me.writable=!1}(this,Ue,Ye),this},Object.defineProperty(U.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Le){this._writableState&&(this._writableState.destroyed=Le)}}),U.prototype.destroy=m.destroy,U.prototype._undestroy=m.undestroy,U.prototype._destroy=function(Le,Re){Re(Le)}},5857:function(n,e,t){var r;function i(_,A,z){return(A=function(ie){var he=function(P){if(typeof P!="object"||P===null)return P;var U=P[Symbol.toPrimitive];if(U!==void 0){var ce=U.call(P,"string");if(typeof ce!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)}(ie);return typeof he=="symbol"?he:String(he)}(A))in _?Object.defineProperty(_,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):_[A]=z,_}var o=t(2896),l=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),m=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function g(_,A){return{value:_,done:A}}function p(_){var A=_[l];if(A!==null){var z=_[h].read();z!==null&&(_[m]=null,_[l]=null,_[u]=null,A(g(z,!1)))}}function E(_){process.nextTick(p,_)}var S=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var _=this,A=this[c];if(A!==null)return Promise.reject(A);if(this[d])return Promise.resolve(g(void 0,!0));if(this[h].destroyed)return new Promise(function(P,U){process.nextTick(function(){_[c]?U(_[c]):P(g(void 0,!0))})});var z,ie=this[m];if(ie)z=new Promise(function(P,U){return function(ce,de){P.then(function(){U[d]?ce(g(void 0,!0)):U[f](ce,de)},de)}}(ie,this));else{var he=this[h].read();if(he!==null)return Promise.resolve(g(he,!1));z=new Promise(this[f])}return this[m]=z,z}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var _=this;return new Promise(function(A,z){_[h].destroy(null,function(ie){ie?z(ie):A(g(void 0,!0))})})}),r),S);n.exports=function(_){var A,z=Object.create(x,(i(A={},h,{value:_,writable:!0}),i(A,l,{value:null,writable:!0}),i(A,u,{value:null,writable:!0}),i(A,c,{value:null,writable:!0}),i(A,d,{value:_._readableState.endEmitted,writable:!0}),i(A,f,{value:function(ie,he){var P=z[h].read();P?(z[m]=null,z[l]=null,z[u]=null,ie(g(P,!1))):(z[l]=ie,z[u]=he)},writable:!0}),A));return z[m]=null,o(_,function(ie){if(ie&&ie.code!=="ERR_STREAM_PREMATURE_CLOSE"){var he=z[u];return he!==null&&(z[m]=null,z[l]=null,z[u]=null,he(ie)),void(z[c]=ie)}var P=z[l];P!==null&&(z[m]=null,z[l]=null,z[u]=null,P(g(void 0,!0))),z[d]=!0}),_.on("readable",E.bind(null,z)),z}},3791:function(n,e,t){function r(f,h){var g=Object.keys(f);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(f);h&&(p=p.filter(function(E){return Object.getOwnPropertyDescriptor(f,E).enumerable})),g.push.apply(g,p)}return g}function i(f){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?r(Object(g),!0).forEach(function(p){o(f,p,g[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach(function(p){Object.defineProperty(f,p,Object.getOwnPropertyDescriptor(g,p))})}return f}function o(f,h,g){return(h=u(h))in f?Object.defineProperty(f,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[h]=g,f}function l(f,h){for(var g=0;g<h.length;g++){var p=h[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,u(p.key),p)}}function u(f){var h=function(g){if(typeof g!="object"||g===null)return g;var p=g[Symbol.toPrimitive];if(p!==void 0){var E=p.call(g,"string");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(f);return typeof h=="symbol"?h:String(h)}var c=t(44).Buffer,d=t(3779).inspect,m=d&&d.custom||"inspect";n.exports=function(){function f(){(function(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var h,g;return h=f,(g=[{key:"push",value:function(p){var E={data:p,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(p){var E={data:p,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var E=this.head,S=""+E.data;E=E.next;)S+=p+E.data;return S}},{key:"concat",value:function(p){if(this.length===0)return c.alloc(0);for(var E,S,x,_=c.allocUnsafe(p>>>0),A=this.head,z=0;A;)E=A.data,S=_,x=z,c.prototype.copy.call(E,S,x),z+=A.data.length,A=A.next;return _}},{key:"consume",value:function(p,E){var S;return p<this.head.data.length?(S=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):S=p===this.head.data.length?this.shift():E?this._getString(p):this._getBuffer(p),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var E=this.head,S=1,x=E.data;for(p-=x.length;E=E.next;){var _=E.data,A=p>_.length?_.length:p;if(A===_.length?x+=_:x+=_.slice(0,p),(p-=A)==0){A===_.length?(++S,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=_.slice(A));break}++S}return this.length-=S,x}},{key:"_getBuffer",value:function(p){var E=c.allocUnsafe(p),S=this.head,x=1;for(S.data.copy(E),p-=S.data.length;S=S.next;){var _=S.data,A=p>_.length?_.length:p;if(_.copy(E,E.length-p,0,A),(p-=A)==0){A===_.length?(++x,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=_.slice(A));break}++x}return this.length-=x,E}},{key:m,value:function(p,E){return d(this,i(i({},E),{},{depth:0,customInspect:!1}))}}])&&l(h.prototype,g),Object.defineProperty(h,"prototype",{writable:!1}),f}()},2410:function(n){function e(i,o){r(i,o),t(i)}function t(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function r(i,o){i.emit("error",o)}n.exports={destroy:function(i,o){var l=this,u=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return u||c?(o?o(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,i)):process.nextTick(r,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(d){!o&&d?l._writableState?l._writableState.errorEmitted?process.nextTick(t,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,d)):process.nextTick(e,l,d):o?(process.nextTick(t,l),o(d)):process.nextTick(t,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,o){var l=i._readableState,u=i._writableState;l&&l.autoDestroy||u&&u.autoDestroy?i.destroy(o):i.emit("error",o)}}},2896:function(n,e,t){var r=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}n.exports=function o(l,u,c){if(typeof u=="function")return o(l,null,u);u||(u={}),c=function(A){var z=!1;return function(){if(!z){z=!0;for(var ie=arguments.length,he=new Array(ie),P=0;P<ie;P++)he[P]=arguments[P];A.apply(this,he)}}}(c||i);var d=u.readable||u.readable!==!1&&l.readable,m=u.writable||u.writable!==!1&&l.writable,f=function(){l.writable||g()},h=l._writableState&&l._writableState.finished,g=function(){m=!1,h=!0,d||c.call(l)},p=l._readableState&&l._readableState.endEmitted,E=function(){d=!1,p=!0,m||c.call(l)},S=function(A){c.call(l,A)},x=function(){var A;return d&&!p?(l._readableState&&l._readableState.ended||(A=new r),c.call(l,A)):m&&!h?(l._writableState&&l._writableState.ended||(A=new r),c.call(l,A)):void 0},_=function(){l.req.on("finish",g)};return function(A){return A.setHeader&&typeof A.abort=="function"}(l)?(l.on("complete",g),l.on("abort",x),l.req?_():l.on("request",_)):m&&!l._writableState&&(l.on("end",f),l.on("close",f)),l.on("end",E),l.on("finish",g),u.error!==!1&&l.on("error",S),l.on("close",x),function(){l.removeListener("complete",g),l.removeListener("abort",x),l.removeListener("request",_),l.req&&l.req.removeListener("finish",g),l.removeListener("end",f),l.removeListener("close",f),l.removeListener("finish",g),l.removeListener("end",E),l.removeListener("error",S),l.removeListener("close",x)}}},3411:function(n){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(n,e,t){var r,i=t(1602).codes,o=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function u(m){if(m)throw m}function c(m){m()}function d(m,f){return m.pipe(f)}n.exports=function(){for(var m=arguments.length,f=new Array(m),h=0;h<m;h++)f[h]=arguments[h];var g,p=function(S){return S.length?typeof S[S.length-1]!="function"?u:S.pop():u}(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new o("streams");var E=f.map(function(S,x){var _=x<f.length-1;return function(A,z,ie,he){he=function(ce){var de=!1;return function(){de||(de=!0,ce.apply(void 0,arguments))}}(he);var P=!1;A.on("close",function(){P=!0}),r===void 0&&(r=t(2896)),r(A,{readable:z,writable:ie},function(ce){if(ce)return he(ce);P=!0,he()});var U=!1;return function(ce){if(!P&&!U)return U=!0,function(de){return de.setHeader&&typeof de.abort=="function"}(A)?A.abort():typeof A.destroy=="function"?A.destroy():void he(ce||new l("pipe"))}}(S,_,x>0,function(A){g||(g=A),A&&E.forEach(c),_||(E.forEach(c),p(g))})});return f.reduce(d)}},1749:function(n,e,t){var r=t(1602).codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(i,o,l,u){var c=function(d,m,f){return d.highWaterMark!=null?d.highWaterMark:m?d[f]:null}(o,u,l);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new r(u?l:"highWaterMark",c);return Math.floor(c)}return i.objectMode?16:16384}}},2611:function(n,e,t){n.exports=t(9826).EventEmitter},748:function(n,e,t){var r=t(4598).Buffer,i=r.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(p){var E;switch(this.encoding=function(S){var x=function(_){if(!_)return"utf8";for(var A;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(A)return;_=(""+_).toLowerCase(),A=!0}}(S);if(typeof x!="string"&&(r.isEncoding===i||!i(S)))throw new Error("Unknown encoding: "+S);return x||S}(p),this.encoding){case"utf16le":this.text=c,this.end=d,E=4;break;case"utf8":this.fillLast=u,E=4;break;case"base64":this.text=m,this.end=f,E=3;break;default:return this.write=h,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(E)}function l(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function u(p){var E=this.lastTotal-this.lastNeed,S=function(x,_){if((192&_[0])!=128)return x.lastNeed=0,"�";if(x.lastNeed>1&&_.length>1){if((192&_[1])!=128)return x.lastNeed=1,"�";if(x.lastNeed>2&&_.length>2&&(192&_[2])!=128)return x.lastNeed=2,"�"}}(this,p);return S!==void 0?S:this.lastNeed<=p.length?(p.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,E,0,p.length),void(this.lastNeed-=p.length))}function c(p,E){if((p.length-E)%2==0){var S=p.toString("utf16le",E);if(S){var x=S.charCodeAt(S.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",E,p.length-1)}function d(p){var E=p&&p.length?this.write(p):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,S)}return E}function m(p,E){var S=(p.length-E)%3;return S===0?p.toString("base64",E):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",E,p.length-S))}function f(p){var E=p&&p.length?this.write(p):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function h(p){return p.toString(this.encoding)}function g(p){return p&&p.length?this.write(p):""}e.StringDecoder=o,o.prototype.write=function(p){if(p.length===0)return"";var E,S;if(this.lastNeed){if((E=this.fillLast(p))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<p.length?E?E+this.text(p,S):this.text(p,S):E||""},o.prototype.end=function(p){var E=p&&p.length?this.write(p):"";return this.lastNeed?E+"�":E},o.prototype.text=function(p,E){var S=function(_,A,z){var ie=A.length-1;if(ie<z)return 0;var he=l(A[ie]);return he>=0?(he>0&&(_.lastNeed=he-1),he):--ie<z||he===-2?0:(he=l(A[ie]))>=0?(he>0&&(_.lastNeed=he-2),he):--ie<z||he===-2?0:(he=l(A[ie]))>=0?(he>0&&(he===2?he=0:_.lastNeed=he-3),he):0}(this,p,E);if(!this.lastNeed)return p.toString("utf8",E);this.lastTotal=S;var x=p.length-(S-this.lastNeed);return p.copy(this.lastChar,0,x),p.toString("utf8",E,x)},o.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},4598:function(n,e,t){var r=t(44),i=r.Buffer;function o(u,c){for(var d in u)c[d]=u[d]}function l(u,c,d){return i(u,c,d)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?n.exports=r:(o(r,e),e.Buffer=l),o(i,l),l.from=function(u,c,d){if(typeof u=="number")throw new TypeError("Argument must not be a number");return i(u,c,d)},l.alloc=function(u,c,d){if(typeof u!="number")throw new TypeError("Argument must be a number");var m=i(u);return c!==void 0?typeof d=="string"?m.fill(c,d):m.fill(c):m.fill(0),m},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return i(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}},8571:function(n,e,t){var r;(function(i,o){var l="function",u="undefined",c="object",d="string",m="major",f="model",h="name",g="type",p="vendor",E="version",S="architecture",x="console",_="mobile",A="tablet",z="smarttv",ie="wearable",he="embedded",P="Amazon",U="Apple",ce="ASUS",de="BlackBerry",_e="Browser",je="Chrome",Se="Firefox",ze="Google",Le="Huawei",Re="LG",Ye="Microsoft",Ue="Motorola",Me="Opera",We="Samsung",Ke="Sharp",nt="Sony",bt="Xiaomi",Rt="Zebra",Pe="Facebook",Ne="Chromium OS",Qe="Mac OS",X=function(et){for(var Ve={},Ze=0;Ze<et.length;Ze++)Ve[et[Ze].toUpperCase()]=et[Ze];return Ve},W=function(et,Ve){return typeof et===d&&C(Ve).indexOf(C(et))!==-1},C=function(et){return et.toLowerCase()},O=function(et,Ve){if(typeof et===d)return et=et.replace(/^\s\s*/,""),typeof Ve===u?et:et.substring(0,500)},le=function(et,Ve){for(var Ze,ct,Ht,Pt,Kt,It,yn=0;yn<Ve.length&&!Kt;){var Vn=Ve[yn],ar=Ve[yn+1];for(Ze=ct=0;Ze<Vn.length&&!Kt&&Vn[Ze];)if(Kt=Vn[Ze++].exec(et))for(Ht=0;Ht<ar.length;Ht++)It=Kt[++ct],typeof(Pt=ar[Ht])===c&&Pt.length>0?Pt.length===2?typeof Pt[1]==l?this[Pt[0]]=Pt[1].call(this,It):this[Pt[0]]=Pt[1]:Pt.length===3?typeof Pt[1]!==l||Pt[1].exec&&Pt[1].test?this[Pt[0]]=It?It.replace(Pt[1],Pt[2]):o:this[Pt[0]]=It?Pt[1].call(this,It,Pt[2]):o:Pt.length===4&&(this[Pt[0]]=It?Pt[3].call(this,It.replace(Pt[1],Pt[2])):o):this[Pt]=It||o;yn+=2}},te=function(et,Ve){for(var Ze in Ve)if(typeof Ve[Ze]===c&&Ve[Ze].length>0){for(var ct=0;ct<Ve[Ze].length;ct++)if(W(Ve[Ze][ct],et))return Ze==="?"?o:Ze}else if(W(Ve[Ze],et))return Ze==="?"?o:Ze;return et},Be={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,E],[/opios[\/ ]+([\w\.]+)/i],[E,[h,Me+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[E,[h,Me+" GX"]],[/\bopr\/([\w\.]+)/i],[E,[h,Me]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[E,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,E],[/\bddg\/([\w\.]+)/i],[E,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[h,"UC"+_e]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[E,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[E,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[E,[h,"Smart Lenovo "+_e]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+_e],E],[/\bfocus\/([\w\.]+)/i],[E,[h,Se+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[h,Me+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[h,Me+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[h,"MIUI "+_e]],[/fxios\/([-\w\.]+)/i],[E,[h,Se]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+_e]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+_e],E],[/samsungbrowser\/([\w\.]+)/i],[E,[h,We+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],E],[/metasr[\/ ]?([\d\.]+)/i],[E,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,E],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Pe],E],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[E,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[h,je+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,je+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[h,"Android "+_e]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,E],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[E,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[E,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[E,te,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[h,Se+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,E],[/(cobalt)\/([\w\.]+)/i],[h,[E,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,C]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,"",C]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,C]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[p,We],[g,A]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[p,We],[g,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[p,U],[g,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,U],[g,A]],[/(macintosh);/i],[f,[p,U]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[p,Ke],[g,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[p,Le],[g,A]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[p,Le],[g,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[p,bt],[g,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[p,bt],[g,A]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[p,"OPPO"],[g,_]],[/\b(opd2\d{3}a?) bui/i],[f,[p,"OPPO"],[g,A]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[p,"Vivo"],[g,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[p,"Realme"],[g,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[p,Ue],[g,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[p,Ue],[g,A]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[p,Re],[g,A]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[p,Re],[g,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[p,"Lenovo"],[g,A]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[p,"Nokia"],[g,_]],[/(pixel c)\b/i],[f,[p,ze],[g,A]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[p,ze],[g,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,nt],[g,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[p,nt],[g,A]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[p,"OnePlus"],[g,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[p,P],[g,A]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[p,P],[g,_]],[/(playbook);[-\w\),; ]+(rim)/i],[f,p,[g,A]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[p,de],[g,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[p,ce],[g,A]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[p,ce],[g,_]],[/(nexus 9)/i],[f,[p,"HTC"],[g,A]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[f,/_/g," "],[g,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[p,"Acer"],[g,A]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[p,"Meizu"],[g,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[p,"Ulefone"],[g,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,f,[g,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,f,[g,A]],[/(surface duo)/i],[f,[p,Ye],[g,A]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[p,"Fairphone"],[g,_]],[/(u304aa)/i],[f,[p,"AT&T"],[g,_]],[/\bsie-(\w*)/i],[f,[p,"Siemens"],[g,_]],[/\b(rct\w+) b/i],[f,[p,"RCA"],[g,A]],[/\b(venue[\d ]{2,7}) b/i],[f,[p,"Dell"],[g,A]],[/\b(q(?:mv|ta)\w+) b/i],[f,[p,"Verizon"],[g,A]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[p,"Barnes & Noble"],[g,A]],[/\b(tm\d{3}\w+) b/i],[f,[p,"NuVision"],[g,A]],[/\b(k88) b/i],[f,[p,"ZTE"],[g,A]],[/\b(nx\d{3}j) b/i],[f,[p,"ZTE"],[g,_]],[/\b(gen\d{3}) b.+49h/i],[f,[p,"Swiss"],[g,_]],[/\b(zur\d{3}) b/i],[f,[p,"Swiss"],[g,A]],[/\b((zeki)?tb.*\b) b/i],[f,[p,"Zeki"],[g,A]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],f,[g,A]],[/\b(ns-?\w{0,9}) b/i],[f,[p,"Insignia"],[g,A]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[p,"NextBook"],[g,A]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],f,[g,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],f,[g,_]],[/\b(ph-1) /i],[f,[p,"Essential"],[g,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[p,"Envizen"],[g,A]],[/\b(trio[-\w\. ]+) b/i],[f,[p,"MachSpeed"],[g,A]],[/\btu_(1491) b/i],[f,[p,"Rotor"],[g,A]],[/(shield[\w ]+) b/i],[f,[p,"Nvidia"],[g,A]],[/(sprint) (\w+)/i],[p,f,[g,_]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,Ye],[g,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,Rt],[g,A]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,Rt],[g,_]],[/smart-tv.+(samsung)/i],[p,[g,z]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,We],[g,z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,Re],[g,z]],[/(apple) ?tv/i],[p,[f,U+" TV"],[g,z]],[/crkey/i],[[f,je+"cast"],[p,ze],[g,z]],[/droid.+aft(\w+)( bui|\))/i],[f,[p,P],[g,z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[p,Ke],[g,z]],[/(bravia[\w ]+)( bui|\))/i],[f,[p,nt],[g,z]],[/(mitv-\w{5}) bui/i],[f,[p,bt],[g,z]],[/Hbbtv.*(technisat) (.*);/i],[p,f,[g,z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,O],[f,O],[g,z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,f,[g,x]],[/droid.+; (shield) bui/i],[f,[p,"Nvidia"],[g,x]],[/(playstation [345portablevi]+)/i],[f,[p,nt],[g,x]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[p,Ye],[g,x]],[/((pebble))app/i],[p,f,[g,ie]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[p,U],[g,ie]],[/droid.+; (glass) \d/i],[f,[p,ze],[g,ie]],[/droid.+; (wt63?0{2,3})\)/i],[f,[p,Rt],[g,ie]],[/(quest( \d| pro)?)/i],[f,[p,Pe],[g,ie]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[g,he]],[/(aeobc)\b/i],[f,[p,P],[g,he]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[g,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[g,A]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,A]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,_]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,E],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[E,te,Be]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,te,Be],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,Qe],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[E,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,E],[/\(bb(10);/i],[E,[h,de]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[h,Se+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[E,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[E,[h,je+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Ne],E],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,E],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,E]]},qe=function(et,Ve){if(typeof et===c&&(Ve=et,et=o),!(this instanceof qe))return new qe(et,Ve).getResult();var Ze=typeof i!==u&&i.navigator?i.navigator:o,ct=et||(Ze&&Ze.userAgent?Ze.userAgent:""),Ht=Ze&&Ze.userAgentData?Ze.userAgentData:o,Pt=Ve?function(It,yn){var Vn={};for(var ar in It)yn[ar]&&yn[ar].length%2==0?Vn[ar]=yn[ar].concat(It[ar]):Vn[ar]=It[ar];return Vn}(rt,Ve):rt,Kt=Ze&&Ze.userAgent==ct;return this.getBrowser=function(){var It,yn={};return yn[h]=o,yn[E]=o,le.call(yn,ct,Pt.browser),yn[m]=typeof(It=yn[E])===d?It.replace(/[^\d\.]/g,"").split(".")[0]:o,Kt&&Ze&&Ze.brave&&typeof Ze.brave.isBrave==l&&(yn[h]="Brave"),yn},this.getCPU=function(){var It={};return It[S]=o,le.call(It,ct,Pt.cpu),It},this.getDevice=function(){var It={};return It[p]=o,It[f]=o,It[g]=o,le.call(It,ct,Pt.device),Kt&&!It[g]&&Ht&&Ht.mobile&&(It[g]=_),Kt&&It[f]=="Macintosh"&&Ze&&typeof Ze.standalone!==u&&Ze.maxTouchPoints&&Ze.maxTouchPoints>2&&(It[f]="iPad",It[g]=A),It},this.getEngine=function(){var It={};return It[h]=o,It[E]=o,le.call(It,ct,Pt.engine),It},this.getOS=function(){var It={};return It[h]=o,It[E]=o,le.call(It,ct,Pt.os),Kt&&!It[h]&&Ht&&Ht.platform&&Ht.platform!="Unknown"&&(It[h]=Ht.platform.replace(/chrome os/i,Ne).replace(/macos/i,Qe)),It},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ct},this.setUA=function(It){return ct=typeof It===d&&It.length>500?O(It,500):It,this},this.setUA(ct),this};qe.VERSION="1.0.38",qe.BROWSER=X([h,E,m]),qe.CPU=X([S]),qe.DEVICE=X([f,p,g,x,_,z,A,ie,he]),qe.ENGINE=qe.OS=X([h,E]),typeof e!==u?(n.exports&&(e=n.exports=qe),e.UAParser=qe):t.amdO?(r=(function(){return qe}).call(e,t,e,n))===o||(n.exports=r):typeof i!==u&&(i.UAParser=qe);var Xe=typeof i!==u&&(i.jQuery||i.Zepto);if(Xe&&!Xe.ua){var $e=new qe;Xe.ua=$e.getResult(),Xe.ua.get=function(){return $e.getUA()},Xe.ua.set=function(et){$e.setUA(et);var Ve=$e.getResult();for(var Ze in Ve)Xe.ua[Ze]=Ve[Ze]}}})(typeof window=="object"?window:this)},9e3:function(n,e,t){function r(i){try{if(!t.g.localStorage)return!1}catch{return!1}var o=t.g.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}n.exports=function(i,o){if(r("noDeprecation"))return i;var l=!1;return function(){if(!l){if(r("throwDeprecation"))throw new Error(o);r("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return i.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(n,e,t){t.r(e),t.d(e,{Debug:function(){return o.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return r.default}});var r=t(8200),i=t(138),o=t(649),l=t(8986),u=typeof window<"u"&&window||global,c=u.dashjs;c||(c=u.dashjs={}),c.MediaPlayer=r.default,c.FactoryMaker=i.default,c.Debug=o.default,c.Version=(0,l.getVersionString)(),e.default=c},649:function(n,e,t){t.r(e);var r=t(8850),i=t(3621),o=t(138);function l(c){c=c||{};const d=this.context,m=(0,r.default)(d).getInstance(),f=c.settings,h=[];let g,p,E,S;function x(U){return U&&U.bind?U.bind(window.console):window.console.log.bind(window.console)}function _(...U){P(1,this,...U)}function A(...U){P(2,this,...U)}function z(...U){P(3,this,...U)}function ie(...U){P(4,this,...U)}function he(...U){P(5,this,...U)}function P(U,ce,...de){let _e="",je=null;p&&(je=new Date().getTime(),_e+="["+(je-S)+"]"),E&&ce&&ce.getClassName&&(_e+="["+ce.getClassName()+"]",ce.getType&&(_e+="["+ce.getType()+"]")),_e.length>0&&(_e+=" "),Array.apply(null,de).forEach(function(Se){_e+=Se+" "}),h[U]&&f&&f.get().debug.logLevel>=U&&h[U](_e),f&&f.get().debug.dispatchEvent&&m.trigger(i.default.LOG,{message:_e,level:U})}return g={getLogger:function(U){return{fatal:_.bind(U),error:A.bind(U),warn:z.bind(U),info:ie.bind(U),debug:he.bind(U)}},setLogTimestampVisible:function(U){p=U},setCalleeNameVisible:function(U){E=U}},p=!0,E=!0,S=new Date().getTime(),typeof window<"u"&&window.console&&(h[1]=x(window.console.error),h[2]=x(window.console.error),h[3]=x(window.console.warn),h[4]=x(window.console.info),h[5]=x(window.console.debug)),g}l.__dashjs_factory_name="Debug";const u=o.default.getSingletonFactory(l);u.LOG_LEVEL_NONE=0,u.LOG_LEVEL_FATAL=1,u.LOG_LEVEL_ERROR=2,u.LOG_LEVEL_WARNING=3,u.LOG_LEVEL_INFO=4,u.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(l.__dashjs_factory_name,u),e.default=u},8850:function(n,e,t){t.r(e);var r=t(138),i=t(1191);function o(){let u={};function c(f,h,g,p={},E=!1){if(!f)throw new Error("event type cannot be null or undefined");if(!h||typeof h!="function")throw new Error("listener must be a function: "+h);let S=p.priority||0;if(m(f,h,g)>=0)return;u[f]=u[f]||[];const x={callback:h,scope:g,priority:S,executeOnlyOnce:E};g&&g.getStreamId&&(x.streamId=g.getStreamId()),g&&g.getType&&(x.mediaType=g.getType()),p&&p.mode&&(x.mode=p.mode),u[f].some((_,A)=>{if(_&&S>_.priority)return u[f].splice(A,0,x),!0})||u[f].push(x)}function d(f,h,g){if(!f||!h||!u[f])return;const p=m(f,h,g);p<0||(u[f][p]=null)}function m(f,h,g){let p=-1;return u[f]&&u[f].some((E,S)=>{if(E&&E.callback===h&&(!g||g===E.scope))return p=S,!0}),p}return{on:function(f,h,g,p={}){c(f,h,g,p)},once:function(f,h,g,p={}){c(f,h,g,p,!0)},off:d,trigger:function(f,h={},g={}){if(!f||!u[f])return;if((h=h||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");h.type=f,g.streamId&&(h.streamId=g.streamId),g.mediaType&&(h.mediaType=g.mediaType);const p=[];u[f].filter(E=>!(!E||g.streamId&&E.streamId&&E.streamId!==g.streamId||g.mediaType&&E.mediaType&&E.mediaType!==g.mediaType||g.mode&&E.mode&&E.mode!==g.mode||!E.mode&&g.mode&&g.mode===i.default.EVENT_MODE_ON_RECEIVE)).forEach(E=>{E&&E.callback.call(E.scope,h),E.executeOnlyOnce&&p.push(E)}),p.forEach(E=>{d(f,E.callback,E.scope)})},reset:function(){u={}}}}o.__dashjs_factory_name="EventBus";const l=r.default.getSingletonFactory(o);l.EVENT_PRIORITY_LOW=0,l.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(o.__dashjs_factory_name,l),e.default=l},138:function(n,e,t){t.r(e);const r=function(){let i,o=[];const l={},u={};function c(h,g){for(const p in o){const E=o[p];if(E.context===h&&E.name===g)return E.instance}return null}function d(h,g){return g[h]}function m(h,g,p){h in p&&(p[h]=g)}function f(h,g,p){let E;const S=h.__dashjs_factory_name,x=g[S];if(x){let _=x.instance;if(!x.override)return _.apply({context:g,factory:i},p);E=h.apply({context:g},p),_=_.apply({context:g,factory:i,parent:E},p);for(const A in _)E.hasOwnProperty(A)&&(E[A]=_[A])}else E=h.apply({context:g},p);return E.getClassName=function(){return S},E}return i={deleteSingletonInstances:function(h){o=o.filter(g=>g.context!==h)},extend:function(h,g,p,E){!E[h]&&g&&(E[h]={instance:g,override:p})},getClassFactory:function(h){let g=d(h.__dashjs_factory_name,u);return g||(g=function(p){return p===void 0&&(p={}),{create:function(){return f(h,p,arguments)}}},u[h.__dashjs_factory_name]=g),g},getClassFactoryByName:function(h){return d(h,u)},getSingletonFactory:function(h){let g=d(h.__dashjs_factory_name,l);return g||(g=function(p){let E;return p===void 0&&(p={}),{getInstance:function(){return E||(E=c(p,h.__dashjs_factory_name)),E||(E=f(h,p,arguments),o.push({name:h.__dashjs_factory_name,context:p,instance:E})),E}}},l[h.__dashjs_factory_name]=g),g},getSingletonFactoryByName:function(h){return d(h,l)},getSingletonInstance:c,setSingletonInstance:function(h,g,p){for(const E in o){const S=o[E];if(S.context===h&&S.name===g)return void(o[E].instance=p)}o.push({name:g,context:h,instance:p})},updateClassFactory:function(h,g){m(h,g,u)},updateSingletonFactory:function(h,g){m(h,g,l)}},i}();e.default=r},8261:function(n,e,t){t.r(e);var r=t(138),i=t(7263),o=t(649),l=t(5212),u=t(7568),c=t(8850),d=t(3621),m=t(4246);function f(){let g;const p=this.context,E=(0,c.default)(p).getInstance(),S={"streaming.delay.liveDelay":d.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":d.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":d.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":d.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":d.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":d.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":d.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":d.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":d.default.SETTING_UPDATED_MIN_BITRATE},x={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:l.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:l.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:l.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:l.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},{schemeIdUri:l.default.SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI},...l.default.THUMBNAILS_SCHEME_ID_URIS.map(z=>({schemeIdUri:z}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1,filterAudioChannelConfiguration:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,keepProtectionMediaKeysMaximumOpenSessions:-1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1,seekOffset:0},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"},artificialTimeOffsetToApply:0},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:l.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.default.TRACK_SWITCH_MODE_NEVER_REPLACE},includePreselectionsInMediainfoArray:!0,includePreselectionsForInitialTrackSelection:!1,ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:l.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[u.HTTPRequest.MPD_TYPE]:500,[u.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[u.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[u.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[u.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[u.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[u.HTTPRequest.LICENSE]:1e3,[u.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[u.HTTPRequest.MPD_TYPE]:3,[u.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[u.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[u.HTTPRequest.INIT_SEGMENT_TYPE]:3,[u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[u.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[u.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[u.HTTPRequest.LICENSE]:3,[u.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0,priority:m.default.PRIORITY.DEFAULT},bolaRule:{active:!0,priority:m.default.PRIORITY.DEFAULT},insufficientBufferRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,priority:m.default.PRIORITY.DEFAULT,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,priority:m.default.PRIORITY.DEFAULT,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1,priority:m.default.PRIORITY.DEFAULT},loLPRule:{active:!1,priority:m.default.PRIORITY.DEFAULT}},throughput:{averageCalculationMode:l.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:l.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.default.CMCD_MODE_QUERY,enabledKeys:l.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},enhancement:{enabled:!1,codecs:["lvc1"]},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let _=i.default.clone(x);function A(z,ie,he){for(let P in z)z.hasOwnProperty(P)&&(ie.hasOwnProperty(P)?typeof z[P]!="object"||z[P]instanceof RegExp||z[P]instanceof Array||z[P]===null?(ie[P]=i.default.clone(z[P]),S[he+P]&&E.trigger(S[he+P])):A(z[P],ie[P],he.slice()+P+"."):console.error("Settings parameter "+he+P+" is not supported"))}return g={get:function(){return _},update:function(z){typeof z=="object"&&A(z,_,"")},reset:function(){_=i.default.clone(x)}},g}f.__dashjs_factory_name="Settings";let h=r.default.getSingletonFactory(f);e.default=h},7263:function(n,e,t){t.r(e);var r=t(3282),i=t(8571),o=t(5212);class l{static mixin(c,d,m){let f,h={};if(c)for(let g in d)d.hasOwnProperty(g)&&(f=d[g],g in c&&(c[g]===f||g in h&&h[g]===f)||(typeof c[g]=="object"&&c[g]!==null?c[g]=l.mixin(c[g],f,m):c[g]=m(f)));return c}static clone(c){if(!c||typeof c!="object")return c;if(c instanceof RegExp)return new RegExp(c);let d;if(c instanceof Array){d=[];for(let m=0,f=c.length;m<f;++m)m in c&&d.push(l.clone(c[m]))}else d={};return l.mixin(d,c,l.clone)}static addAdditionalQueryParameterToUrl(c,d){try{if(!d||d.length===0)return c;let m=c;return d.forEach(({key:f,value:h})=>{const g=m.includes("?")?"&":"?";m+=`${g}${encodeURIComponent(f)}=${encodeURIComponent(h)}`}),m}catch{return c}}static removeQueryParameterFromUrl(c,d){if(!c||!d)return c;const m=new URL(c),f=new URLSearchParams(m.search);if(!f||f.size===0||!f.has(d))return c;f.delete(d);const h=Array.from(f.entries()).map(([p,E])=>`${p}=${E}`).join("&"),g=`${m.origin}${m.pathname}`;return h?`${g}?${h}`:g}static parseHttpHeaders(c){let d={};if(!c)return d;let m=c.trim().split(`\r
`);for(let f=0,h=m.length;f<h;f++){let g=m[f],p=g.indexOf(": ");p>0&&(d[g.substring(0,p)]=g.substring(p+2))}return d}static parseQueryParams(c){const d=[],m=new URLSearchParams(c);for(const[f,h]of m.entries())d.push({key:decodeURIComponent(f),value:decodeURIComponent(h)});return d}static generateUuid(){let c=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){const m=(c+16*Math.random())%16|0;return c=Math.floor(c/16),(d=="x"?m:3&m|8).toString(16)})}static generateHashCode(c){let d=0;if(c.length===0)return d;for(let m=0;m<c.length;m++)d=(d<<5)-d+c.charCodeAt(m),d|=0;return d}static getRelativeUrl(c,d){try{const m=new URL(c),f=new URL(d);if(m.protocol=f.protocol,m.origin!==f.origin)return d;let h=r.relative(m.pathname.substr(0,m.pathname.lastIndexOf("/")),f.pathname.substr(0,f.pathname.lastIndexOf("/")));const g=h.length===0?1:0;return h+=f.pathname.substr(f.pathname.lastIndexOf("/")+g,f.pathname.length-1),f.pathname.length<h.length?f.pathname:h}catch{return d}}static getHostFromUrl(c){try{return new URL(c).host}catch{return null}}static parseUserAgent(c=null){try{const d=c===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(d)}catch{return{}}}static stringHasProtocol(c){return/(http(s?)):\/\//i.test(c)}static bufferSourceToDataView(c){return l.toDataView(c,DataView)}static bufferSourceToInt8(c){return l.toDataView(c,Uint8Array)}static uint8ArrayToString(c){return new TextDecoder("utf-8").decode(c)}static bufferSourceToHex(c){const d=l.bufferSourceToInt8(c);let m="";for(let f of d)f=f.toString(16),f.length===1&&(f="0"+f),m+=f;return m}static toDataView(c,d){const m=l.getArrayBuffer(c);let f=1;"BYTES_PER_ELEMENT"in DataView&&(f=DataView.BYTES_PER_ELEMENT);const h=((c.byteOffset||0)+c.byteLength)/f,g=(c.byteOffset||0)/f,p=Math.floor(Math.max(0,Math.min(g,h)));return new d(m,p,Math.floor(Math.min(p+Math.max(1/0,0),h))-p)}static getArrayBuffer(c){return c instanceof ArrayBuffer?c:c.buffer}static getCodecFamily(c){const{base:d,profile:m}=l._getCodecParts(c);switch(d){case"mp4a":switch(m){case"69":case"6b":case"40.34":return o.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return o.default.CODEC_FAMILIES.AAC;case"a5":return o.default.CODEC_FAMILIES.AC3;case"e6":return o.default.CODEC_FAMILIES.EC3;case"b2":return o.default.CODEC_FAMILIES.DTSX;case"a9":return o.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return o.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return o.default.CODEC_FAMILIES.HEVC;default:return d}return d}static _getCodecParts(c){const[d,...m]=c.split(".");return{base:d,profile:m.join(".")}}}e.default=l},8986:function(n,e,t){t.r(e),t.d(e,{getVersionString:function(){return i}});const r="5.1.1";function i(){return r}},8748:function(n,e,t){t.r(e),e.default=class{extend(r,i){if(!r)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const u in r)!r.hasOwnProperty(u)||this[u]&&!o||l&&r[u].indexOf("public_")===-1||(this[u]=r[u])}}},5734:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LOADING_ABANDONED="loadingAborted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.SEEK_TARGET="seekTarget",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.VIDEO_ELEMENT_RESIZED="videoElementResized",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}}e.default=i},3621:function(n,e,t){t.r(e);var r=t(5734);class i extends r.default{}let o=new i;e.default=o},7252:function(n,e,t){t.r(e),e.default=class{extend(r,i){if(!r)return;let o=!!i&&i.override,l=!!i&&i.publicOnly;for(const u in r)!r.hasOwnProperty(u)||this[u]&&!o||l&&r[u].indexOf("public_")===-1||(this[u]=r[u])}}},8854:function(n,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORDER:"order",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESELECTION:"Preselection",PRESELECTION_COMPONENTS:"preselectionComponents",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_SEQUENCE_PROPERTIES:"SegmentSequenceProperties",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TAG:"tag",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(n,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},8200:function(n,e,t){t.r(e),t.d(e,{default:function(){return yz}});var r=t(138),i=t(4246),o={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},l=t(649),u=t(8261);function c(v){v=v||{};const y=this.context,b=v.dashMetrics;let w,I,R;return w={getSwitchRequest:function(M){try{const D=(0,i.default)(y).create();D.rule=this.getClassName();const N=M.getMediaInfo(),$=M.getMediaType(),q=b.getCurrentBufferState($),k=M.getScheduleController(),L=M.getAbrController(),F=M.getStreamInfo(),K=F?F.id:null,Z=F&&F.manifestInfo?F.manifestInfo.isDynamic:null,ee=M.getThroughputController(),Y=ee.getSafeAverageThroughput($),se=ee.getAverageLatency($);return isNaN(Y)||!q||L.getAbandonmentStateFor(K,$)===o.ALLOW_LOAD&&(q.state===o.BUFFER_LOADED||Z)&&(D.representation=L.getOptimalRepresentationForBitrate(N,Y,!0),D.priority=I.get().streaming.abr.rules.throughputRule.priority,D.reason={throughput:Y,latency:se,message:`[ThroughputRule]: Switching to Representation with bitrate ${D.representation?D.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${Y}`},k.setTimeToLoadDelay(0)),D}catch(D){return R.error(D),(0,i.default)(y).create()}},reset:function(){}},R=(0,l.default)(y).getInstance().getLogger(w),I=(0,u.default)(y).getInstance(),w}c.__dashjs_factory_name="ThroughputRule";var d=r.default.getClassFactory(c),m=t(8850),f=t(3621),h=t(5212),g=t(1191);function p(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance(),w=v.dashMetrics,I=(0,u.default)(y).getInstance();let R,M,D;function N(){const k=I.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;D={},D[h.default.VIDEO]={ignoreCount:k},D[h.default.AUDIO]={ignoreCount:k},D[h.default.ENHANCEMENT]={ignoreCount:k}}function $(){N()}function q(k){isNaN(k.startTime)||k.mediaType!==h.default.AUDIO&&k.mediaType!==h.default.VIDEO||D[k.mediaType].ignoreCount>0&&D[k.mediaType].ignoreCount--}return R={getSwitchRequest:function(k){const L=(0,i.default)(y).create();if(L.rule=this.getClassName(),!k||!k.hasOwnProperty("getMediaType"))return L;const F=k.getMediaType(),K=w.getCurrentBufferState(F),Z=k.getRepresentation().fragmentDuration;if(!function(se,ue,me){return!se.getLowLatencyModeEnabled()&&D[ue].ignoreCount<=0&&me}(k.getScheduleController().getPlaybackController(),F,Z))return L;const ee=k.getMediaInfo(),Y=k.getAbrController();if(K&&K.state===o.BUFFER_EMPTY)M.debug("["+F+"] Switch to index 0; buffer is empty."),L.representation=Y.getOptimalRepresentationForBitrate(ee,0,!0),L.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const se=k.getThroughputController(),ue=w.getCurrentBufferLevel(F),me=se.getAverageThroughput(F,null,NaN)*I.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*ue/Z;if(isNaN(me)||me<=0)return L;L.representation=Y.getOptimalRepresentationForBitrate(ee,me,!0),L.priority=I.get().streaming.abr.rules.insufficientBufferRule.priority,L.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:me}}return L},reset:function(){N(),b.off(g.default.PLAYBACK_SEEKING,$,R),b.off(f.default.BYTES_APPENDED_END_FRAGMENT,q,R)}},M=(0,l.default)(y).getInstance().getLogger(R),N(),b.on(g.default.PLAYBACK_SEEKING,$,R),b.on(f.default.BYTES_APPENDED_END_FRAGMENT,q,R),R}p.__dashjs_factory_name="InsufficientBufferRule";var E=r.default.getClassFactory(p);function S(v){const y=(v=v||{}).mediaPlayerModel,b=v.dashMetrics,w=this.context,I=(0,u.default)(w).getInstance();let R,M,D;function N(){D={}}return R={shouldAbandon:function($){const q=(0,i.default)(w).create();q.rule=this.getClassName();try{if(!$)return q;const k=$.getCurrentRequest();if(!isNaN(k.index)){if(k.firstByteDate===null||D.hasOwnProperty(k.index))return q;const L=y.getBufferTimeDefault(),F=$.getMediaType();if(b.getCurrentBufferLevel(F)>L)return q;const K=Date.now()-k.firstByteDate.getTime();if(k.traces.length>=I.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&K>I.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&k.bytesLoaded<k.bytesTotal)return function(Z,ee,Y){const se=Z.getMediaInfo(),ue=Z.getMediaType(),me=ee.traces.reduce((be,re)=>be+re.b[0],0)-ee.traces[0].b[0],ve=Math.max(ee.traces.reduce((be,re)=>be+re.d,0)-ee.traces[0].d,1),J=Math.round(8*me/ve),H=Number(8*ee.bytesTotal/J/1e3).toFixed(2),B=Z.getRepresentation(),G=Z.getAbrController();if(H<ee.duration*I.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||G.isPlayingAtLowestQuality(B))return Y;if(!D.hasOwnProperty(ee.index)){const be=Z.getAbrController(),re=ee.bytesTotal-ee.bytesLoaded,we=be.getOptimalRepresentationForBitrate(se,J,!0),Ee=ee.representation;re>ee.bytesTotal*we.bitrateInKbit/Ee.bitrateInKbit&&(Y.representation=we,Y.priority=I.get().streaming.abr.rules.abandonRequestsRule.priority,Y.reason={throughputInKbit:J,message:`[AbandonRequestRule][${ue} is asking to abandon and switch to quality to ${we.absoluteIndex}. The measured bandwidth was ${J} kbit/s`},D[ee.index]=!0)}return Y}($,k,q)}return q}catch(k){return M.error(k),q}},reset:N},M=(0,l.default)(w).getInstance().getLogger(R),N(),R}S.__dashjs_factory_name="AbandonRequestsRule";var x=r.default.getClassFactory(S);function _(){const v=this.context,y=(0,u.default)(v).getInstance();let b;return b={getSwitchRequest:function(w){const I=(0,i.default)(v).create();if(I.rule=this.getClassName(),!w||!w.hasOwnProperty("getDroppedFramesHistory"))return I;const R=w.getDroppedFramesHistory();if(!R)return I;const M=w.getStreamInfo().id,D=w.getMediaInfo(),N=w.getAbrController(),$=R.getFrameHistory(M);if(!$||Object.keys($).length===0)return I;let q=0,k=0;const L=N.getPossibleVoRepresentationsFilteredBySettings(D,!0);let F=null;for(let K=1;K<L.length;K++){const Z=L[K];if(Z&&$[Z.id]&&(q=$[Z.id].droppedVideoFrames,k=$[Z.id].totalVideoFrames,k>y.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&q/k>y.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){F=L[K-1];break}}return F&&(I.representation=F,I.priority=y.get().streaming.abr.rules.droppedFramesRule.priority,I.reason={droppedFrames:q,message:`[DroppedFramesRule]: Switching to index ${F.absoluteIndex}. Dropped Frames: ${q}, Total Frames: ${k}`}),I}},b}_.__dashjs_factory_name="DroppedFramesRule";var A=r.default.getClassFactory(_);function z(){const v=this.context,y=(0,u.default)(v).getInstance();let b;return b={getSwitchRequest:function(w){const I=(0,i.default)(v).create();if(I.rule=this.getClassName(),!w)return I;const R=w.getStreamInfo().id,M=w.getMediaType(),D=w?w.getSwitchRequestHistory():null,N=D?D.getSwitchRequests(R,M):{},$=w.getAbrController(),q=w.getMediaInfo(),k=$.getPossibleVoRepresentationsFilteredBySettings(q,!0);let L=0,F=0;for(let K=0;K<k.length;K++){const Z=k[K];if(Z&&N[Z.id]&&(L+=N[Z.id].drops,F+=N[Z.id].noDrops,L+F>=y.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&L/F>y.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){I.representation=K>0&&N[Z.id].drops>0?k[K-1]:Z,I.priority=y.get().streaming.abr.rules.switchHistoryRule.priority,I.reason={drops:L,noDrops:F,message:`[SwitchHistoryRule]: Switch to index: ${I.representation.absoluteIndex} samples: ${L+F} drops:  ${L}`};break}}return I}},b}z.__dashjs_factory_name="SwitchHistoryRule";var ie=r.default.getClassFactory(z),he=t(7568);const P="BOLA_STATE_ONE_BITRATE",U="BOLA_STATE_STARTUP",ce="BOLA_STATE_STEADY",de=10;function _e(v){v=v||{};const y=this.context,b=v.dashMetrics,w=v.mediaPlayerModel,I=(0,m.default)(y).getInstance(),R=Fr(y).getInstance();let M,D,N,$;function q(G){const be=G.mediaType,re=G.streamId,we=be===h.default.AUDIO?[h.default.AUDIO]:$[re];for(const Ee in we)$[re]&&$[re].hasOwnProperty(Ee)&&$[re][Ee].state===ce&&($[re][Ee].placeholderBuffer=0)}function k(G){const be=G.streamId;for(const re in $[be])if($[be].hasOwnProperty(re)){const we=$[be][re];we.state!==P&&(we.state=U,L(we))}}function L(G){G.placeholderBuffer=0,G.mostAdvancedSegmentStart=NaN,G.lastSegmentWasReplacement=!1,G.lastSegmentStart=NaN,G.lastSegmentDurationS=NaN,G.lastSegmentRequestTimeMs=NaN,G.lastSegmentFinishTimeMs=NaN}function F(G){try{if(G&&G.metric===o.HTTP_REQUEST&&G.value&&G.value.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE&&G.value.trace&&G.value.trace.length){const be=$[G.value._streamId]&&$[G.value._streamId][G.mediaType]?$[G.value._streamId][G.mediaType]:null;be&&be.state!==P&&(be.lastSegmentRequestTimeMs=G.value.trequest.getTime(),be.lastSegmentFinishTimeMs=G.value._tfinish.getTime(),K(be,G.mediaType))}}catch(be){D.error(be)}}function K(G,be){if(!isNaN(G.lastSegmentStart)&&!isNaN(G.lastSegmentRequestTimeMs)&&!isNaN(G.placeholderBuffer)){if(G.placeholderBuffer*=.99,!isNaN(G.lastSegmentFinishTimeMs)){const re=b.getCurrentBufferLevel(be)+.001*(G.lastSegmentFinishTimeMs-G.lastSegmentRequestTimeMs),we=se(G,G.currentRepresentation),Ee=Math.max(0,we-re);G.placeholderBuffer=Math.min(Ee,G.placeholderBuffer)}G.lastSegmentWasReplacement&&!isNaN(G.lastSegmentDurationS)&&(G.placeholderBuffer+=G.lastSegmentDurationS),G.lastSegmentStart=NaN,G.lastSegmentRequestTimeMs=NaN}}function Z(G){if(G&&$[G.streamId]&&$[G.streamId][G.mediaType]){const be=$[G.streamId][G.mediaType];be&&be.state!==P&&(be.currentRepresentation=G.newRepresentation)}}function ee(G,be,re){const we=re.reduce((Fe,Ce,Q)=>Ce>re[Fe]?Q:Fe,0);if(we===0)return null;const Ee=Math.max(G,de+2*be.length),Ie=(re[we]-1)/(Ee/de-1);return{gp:Ie,Vp:de/Ie}}function Y(G,be){const re=w.getBufferTimeDefault();if(G.bufferTimeDefault!==re){const we=ee(re,G.representations,G.utilities);if(we.Vp!==G.Vp||we.gp!==G.gp){const Ee=b.getCurrentBufferLevel(be);let Ie=Ee+G.placeholderBuffer;Ie-=de,Ie*=we.Vp/G.Vp,Ie+=de,G.bufferTimeDefault=re,G.Vp=we.Vp,G.gp=we.gp,G.placeholderBuffer=Math.max(0,Ie-Ee)}}}function se(G,be){return G.Vp*(G.utilities[be.absoluteIndex]+G.gp)}function ue(G){if(G&&G.chunk&&G.chunk.representation.mediaInfo&&$[G.streamId]){const be=$[G.streamId][G.chunk.representation.mediaInfo.type];if(be&&be.state!==P){const re=G.chunk.start;isNaN(be.mostAdvancedSegmentStart)||re>be.mostAdvancedSegmentStart?(be.mostAdvancedSegmentStart=re,be.lastSegmentWasReplacement=!1):be.lastSegmentWasReplacement=!0,be.lastSegmentStart=re,be.lastSegmentDurationS=G.chunk.duration,be.currentRepresentation=G.chunk.representation,K(be,G.chunk.representation.mediaInfo.type)}}}function me(){B()}function ve(){N.get().streaming.abr.limitBitrateByPortal&&B()}function J(G,be){const re=be.absoluteIndex,we=be.bandwidth,Ee=G.utilities[re];let Ie=0;for(let Fe=re-1;Fe>=0;--Fe)if(G.utilities[Fe]<G.utilities[re]){const Ce=G.representations[Fe].bandwidth,Q=G.utilities[Fe],ne=G.Vp*(G.gp+(we*Q-Ce*Ee)/(we-Ce));Ie=Math.max(Ie,ne)}return Ie}function H(G){if(G&&$[G.streamId]){const be=$[G.streamId][G.mediaType];if(be&&be.state!==P){const re=b.getCurrentBufferLevel(G.mediaType);let we;we=be.currentRepresentation.absoluteIndex>0?J(be,be.currentRepresentation):de;const Ee=Math.max(0,we-re);be.placeholderBuffer=Math.min(be.placeholderBuffer,Ee)}}}function B(){$={}}return M={getSwitchRequest:function(G){try{const be=(0,i.default)(y).create();G.getScheduleController().setTimeToLoadDelay(0),be.rule=this.getClassName(),be.reason=be.reason||{};const re=function(we){const Ee=we.getMediaType(),Ie=we.getStreamInfo().id;$[Ie]||($={},$[Ie]={});let Fe=$[Ie][Ee];return Fe?Fe.state!==P&&Y(Fe,Ee):(Fe=function(Ce){const Q={},ne=Ce.getMediaInfo(),fe=R.getPossibleVoRepresentationsFilteredBySettings(ne,!0);let ae=fe.map(V=>V.bandwidth).map(V=>Math.log(V));ae=ae.map(V=>V-ae[0]+1);const oe=w.getBufferTimeDefault(),ge=ee(oe,fe,ae);return ge?(Q.state=U,Q.representations=fe,Q.utilities=ae,Q.bufferTimeDefault=oe,Q.Vp=ge.Vp,Q.gp=ge.gp,Q.currentRepresentation=null,L(Q)):Q.state=P,Q}(we),$[Ie][Ee]=Fe),Fe}(G);switch(be.reason.state=re.state,re.state){case P:break;case U:(function(we,Ee,Ie){const Fe=Ee.getMediaType(),Ce=Ee.getThroughputController().getSafeAverageThroughput(Fe);if(isNaN(Ce))return;const Q=Ee.getMediaInfo(),ne=R.getOptimalRepresentationForBitrate(Q,Ce,!0),fe=b.getCurrentBufferLevel(Fe);we.representation=ne,we.reason.throughput=Ce,Ie.placeholderBuffer=Math.max(0,J(Ie,ne)-fe),Ie.currentRepresentation=ne,!isNaN(Ie.lastSegmentDurationS)&&fe>=Ie.lastSegmentDurationS&&(Ie.state=ce)})(be,G,re);break;case ce:(function(we,Ee,Ie){const Fe=Ee.getMediaType(),Ce=Ee.getThroughputController(),Q=Ee.getMediaInfo(),ne=Ce.getSafeAverageThroughput(Fe),fe=Ee.getScheduleController();(function(ye,Te){const Ae=Date.now();if(isNaN(ye.lastSegmentFinishTimeMs)){if(!isNaN(ye.lastCallTimeMs)){const Oe=.001*(Ae-ye.lastCallTimeMs);ye.placeholderBuffer+=Math.max(0,Oe)}}else{const Oe=.001*(Ae-ye.lastSegmentFinishTimeMs);ye.placeholderBuffer+=Math.max(0,Oe)}ye.lastCallTimeMs=Ae,ye.lastSegmentStart=NaN,ye.lastSegmentRequestTimeMs=NaN,ye.lastSegmentFinishTimeMs=NaN,Y(ye,Te)})(Ie,Fe);const ae=b.getCurrentBufferLevel(Fe);let oe=function(ye,Te){const Ae=ye.representations.length;let Oe=NaN,De=NaN;for(let Ge=0;Ge<Ae;++Ge){let ot=(ye.Vp*(ye.utilities[Ge]-1+ye.gp)-Te)/ye.representations[Ge].bandwidth;(isNaN(De)||ot>=De)&&(De=ot,Oe=Ge)}return ye.representations[Oe]}(Ie,ae+Ie.placeholderBuffer);const ge=R.getOptimalRepresentationForBitrate(Q,ne,!0);oe.absoluteIndex>Ie.currentRepresentation.absoluteIndex&&oe.absoluteIndex>ge.absoluteIndex&&(oe=ge.absoluteIndex>Ie.currentRepresentation.absoluteIndex?ge:Ie.currentRepresentation);let V=Math.max(0,ae+Ie.placeholderBuffer-se(Ie,oe));V<=Ie.placeholderBuffer?(Ie.placeholderBuffer-=V,V=0):(V-=Ie.placeholderBuffer,Ie.placeholderBuffer=0,R.isPlayingAtTopQuality(oe)?V=0:fe.setTimeToLoadDelay(1e3*V)),we.representation=oe,we.reason.throughput=ne,we.reason.bufferLevel=ae,we.reason.placeholderBuffer=Ie.placeholderBuffer,we.reason.delay=V,Ie.currentRepresentation=oe})(be,G,re);break;default:(function(we,Ee,Ie){D.debug("BOLA ABR rule invoked in bad state.");const Fe=Ee.getMediaInfo(),Ce=Ee.getMediaType(),Q=Ee.getThroughputController().getSafeAverageThroughput(Ce);we.representation=R.getOptimalRepresentationForBitrate(Fe,Q,!0),we.reason.state=Ie.state,we.reason.throughput=Q,Ie.state=U,L(Ie)})(be,G,re)}return be.priority=N.get().streaming.abr.rules.bolaRule.priority,be}catch(be){return D.error(be),(0,i.default)(y).create()}},handleNewMediaInfo:function(G){G&&G.streamInfo&&G.type&&$[G.streamInfo.id]&&$[G.streamInfo.id][G.type]&&delete $[G.streamInfo.id][G.type]},reset:function(){B(),I.off(g.default.BUFFER_EMPTY,q,M),I.off(g.default.PLAYBACK_SEEKING,k,M),I.off(g.default.METRIC_ADDED,F,M),I.off(g.default.QUALITY_CHANGE_REQUESTED,Z,M),I.off(g.default.FRAGMENT_LOADING_ABANDONED,H,M),I.off(f.default.MEDIA_FRAGMENT_LOADED,ue,M),I.off(f.default.SETTING_UPDATED_MAX_BITRATE,me,M),I.off(f.default.SETTING_UPDATED_MIN_BITRATE,me,M),I.off(f.default.VIDEO_ELEMENT_RESIZED,ve,M)}},D=(0,l.default)(y).getInstance().getLogger(M),N=(0,u.default)(y).getInstance(),B(),I.on(g.default.BUFFER_EMPTY,q,M),I.on(g.default.PLAYBACK_SEEKING,k,M),I.on(g.default.METRIC_ADDED,F,M),I.on(g.default.QUALITY_CHANGE_REQUESTED,Z,M),I.on(g.default.FRAGMENT_LOADING_ABANDONED,H,M),I.on(f.default.MEDIA_FRAGMENT_LOADED,ue,M),I.on(f.default.SETTING_UPDATED_MAX_BITRATE,me,M),I.on(f.default.SETTING_UPDATED_MIN_BITRATE,me,M),I.on(f.default.VIDEO_ELEMENT_RESIZED,ve,M),M}_e.__dashjs_factory_name="BolaRule";var je=r.default.getClassFactory(_e);const Se="L2A_STATE_ONE_BITRATE",ze="L2A_STATE_STARTUP",Le="L2A_STATE_STEADY",Re=Math.pow(4,.99);function Ye(v){v=v||{};const y=this.context,b=v.dashMetrics,w=(0,m.default)(y).getInstance(),I=(0,u.default)(y).getInstance();let R,M,D,N;function $(ee){ee.placeholderBuffer=0,ee.mostAdvancedSegmentStart=NaN,ee.lastSegmentWasReplacement=!1,ee.lastSegmentStart=NaN,ee.lastSegmentDurationS=NaN,ee.lastSegmentRequestTimeMs=NaN,ee.lastSegmentFinishTimeMs=NaN,ee.lastSegmentUrl=""}function q(){for(const ee in M)if(M.hasOwnProperty(ee)){const Y=M[ee];Y.state!==Se&&(Y.state=ze,$(Y))}}function k(ee){if(ee&&ee.chunk&&ee.chunk.representation&&ee.chunk.representation.mediaInfo){const Y=M[ee.chunk.representation.mediaInfo.type],se=D[ee.chunk.representation.mediaInfo.type];if(Y&&Y.state!==Se){const ue=ee.chunk.start;isNaN(Y.mostAdvancedSegmentStart)||ue>Y.mostAdvancedSegmentStart?(Y.mostAdvancedSegmentStart=ue,Y.lastSegmentWasReplacement=!1):Y.lastSegmentWasReplacement=!0,Y.lastSegmentStart=ue,Y.lastSegmentDurationS=ee.chunk.duration,Y.currentRepresentation=ee.chunk.representation,F(Y,se)}}}function L(ee){if(ee&&ee.metric===o.HTTP_REQUEST&&ee.value&&ee.value.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE&&ee.value.trace&&ee.value.trace.length){const Y=M[ee.mediaType],se=D[ee.mediaType];Y&&Y.state!==Se&&(Y.lastSegmentRequestTimeMs=ee.value.trequest.getTime(),Y.lastSegmentFinishTimeMs=ee.value._tfinish.getTime(),F(Y,se))}}function F(ee,Y){isNaN(ee.lastSegmentStart)||isNaN(ee.lastSegmentRequestTimeMs)||(Y.segment_request_start_s=.001*ee.lastSegmentRequestTimeMs,Y.segment_download_finish_s=.001*ee.lastSegmentFinishTimeMs,ee.lastSegmentStart=NaN,ee.lastSegmentRequestTimeMs=NaN)}function K(ee,Y){if(ee.length!==Y.length)return-1;let se=0;for(let ue=0;ue<ee.length;ue++)se+=ee[ue]*Y[ue];return se}function Z(){M={},D={}}return R={getSwitchRequest:function(ee){try{const Y=(0,i.default)(y).create();Y.rule=this.getClassName();const se=ee.getMediaType(),ue=ee.getScheduleController();if(Y.reason=Y.reason||{},se===h.default.AUDIO)return Y;ue.setTimeToLoadDelay(0);const me=function(ve){const J=ve.getMediaType();let H=M[J];return H||(H=function(B){const G={},be=B.getMediaInfo();return G.state=ze,G.currentRepresentation=null,function(re){re&&re.type&&(D[re.type]={},D[re.type].w=[],D[re.type].prev_w=[],D[re.type].Q=0,D[re.type].segment_request_start_s=0,D[re.type].segment_download_finish_s=0,D[re.type].B_target=1.5)}(be),$(G),G}(ve),M[J]=H),H}(ee);if(!D[se])return Y;switch(Y.reason.state=me.state,me.state){case Se:break;case ze:(function(ve,J,H){const B=ve.getMediaInfo(),G=ve.getMediaType(),be=ve.getThroughputController().getSafeAverageThroughput(G);if(isNaN(be))return J;const re=ve.getAbrController(),we=re.getOptimalRepresentationForBitrate(B,be,!0),Ee=b.getCurrentBufferLevel(G,!0),Ie=D[G],Fe=re.getPossibleVoRepresentationsFilteredBySettings(B,!0);if(J.representation=we,J.reason.throughput=be,H.currentRepresentation=we,!isNaN(H.lastSegmentDurationS)&&Ee>=Ie.B_target){H.state=Le,Ie.Q=Re;for(let Ce=0;Ce<Fe.length;++Ce)Fe[Ce].id===H.currentRepresentation.id?Ie.prev_w[Ce]=1:Ie.prev_w[Ce]=0}})(ee,Y,me);break;case Le:(function(ve,J,H){let B=[];const G=ve.getThroughputController(),be=ve.getMediaType();let re=G.getAverageThroughput(be,h.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),we=b.getCurrentHttpRequest(be),Ee=null;const Ie=D[be];if(re<1&&(re=1),we.url===H.lastSegmentUrl||we.type===he.HTTPRequest.INIT_SEGMENT_TYPE)Ee=H.currentRepresentation;else{let Fe=H.lastSegmentDurationS,Ce=1;const Q=ve.getAbrController(),ne=ve.getMediaInfo(),fe=Q.getPossibleVoRepresentationsFilteredBySettings(ne,!0);let ae=ve.getVideoModel().getPlaybackRate();const oe=Math.max(Math.pow(4,1),Re*Math.sqrt(4));for(let Te=0;Te<fe.length;++Te){const Ae=fe[Te];ae*Ae.bitrateInKbit>re&&(Ce=-1),Ie.w[Te]=Ie.prev_w[Te]+Ce*(Fe/(2*oe))*((Ie.Q+Re)*(ae*Ae.bitrateInKbit/re))}Ie.w=function(Te){const Ae=Te.length;let Oe=!1,De=[];for(let tn=0;tn<Ae;++tn)De[tn]=Te[tn];let Ge=Te.sort(function(tn,kt){return kt-tn}),ot=0,Et=0,xt=[];for(let tn=0;tn<Ae-1;++tn)if(ot+=Ge[tn],Et=(ot-1)/(tn+1),Et>=Ge[tn+1]){Oe=!0;break}Oe||(Et=(ot+Ge[Ae-1]-1)/Ae);for(let tn=0;tn<Ae;++tn)xt[tn]=Math.max(De[tn]-Et,0);return xt}(Ie.w);for(let Te=0;Te<fe.length;++Te)B[Te]=Ie.w[Te]-Ie.prev_w[Te],Ie.prev_w[Te]=Ie.w[Te];const ge=fe.map(Te=>Te.bandwidth);Ie.Q=Math.max(0,Ie.Q-Fe+Fe*ae*((K(ge,Ie.prev_w)+K(ge,B))/re));let V=[];for(let Te=0;Te<ge.length;++Te)V[Te]=Math.abs(ge[Te]-K(Ie.w,ge));const ye=V.indexOf(Math.min(...V));Ee=Q.getRepresentationByAbsoluteIndex(ye,ne,!0),Ee.absoluteIndex>H.currentRepresentation.absoluteIndex&&ge[H.currentRepresentation.absoluteIndex+1]<=re&&(Ee=Q.getRepresentationByAbsoluteIndex(H.currentRepresentation.absoluteIndex+1,ne,!0)),Ee.bitrateInKbit>=re&&(Ie.Q=2*Math.max(Re,Ie.Q)),H.lastSegmentUrl=we.url}J.representation=Ee,H.currentRepresentation=J.representation})(ee,Y,me);break;default:(function(ve,J,H){const B=ve.getAbrController(),G=ve.getMediaInfo(),be=ve.getMediaType(),re=ve.getThroughputController().getSafeAverageThroughput(be);J.representation=B.getOptimalRepresentationForBitrate(G,re,!0),J.reason.throughput=re,H.state=ze,$(H)})(ee,Y,me)}return Y.priority=I.get().streaming.abr.rules.l2ARule.priority,Y}catch(Y){return N.error(Y),(0,i.default)(y).create()}},reset:function(){Z(),w.off(f.default.PLAYBACK_SEEKING,q,R),w.off(f.default.MEDIA_FRAGMENT_LOADED,k,R),w.off(f.default.METRIC_ADDED,L,R)}},N=(0,l.default)(y).getInstance().getLogger(R),Z(),w.on(f.default.PLAYBACK_SEEKING,q,R),w.on(f.default.MEDIA_FRAGMENT_LOADED,k,R),w.on(f.default.METRIC_ADDED,L,R),R}Ye.__dashjs_factory_name="L2ARule";var Ue=r.default.getClassFactory(Ye);function Me(){const v=this.context;let y,b,w,I,R,M,D,N,$;function q(){w=null,I=1,R=100,M=0,D=null,N=null,$="dynamic_weight_selection"}function k(){let ee=0;if(w)for(let Y=0;Y<w.length;Y++){let se=w[Y];se.state.throughput>ee&&(ee=se.state.throughput)}return ee}function L(ee,Y,se){let ue=ee.map((me,ve)=>se[ve]*Math.pow(me-Y[ve],2)).reduce((me,ve)=>me+ve);return(ue<0?-1:1)*Math.sqrt(Math.abs(ue))}function F(ee,Y){return L([ee.state.throughput,ee.state.latency,ee.state.rebuffer,ee.state.switch],[Y.state.throughput,Y.state.latency,Y.state.rebuffer,Y.state.switch],[1,1,1,1])}function K(ee,Y){for(let se=0;se<w.length;se++){let ue=w[se],me=.1;const ve=F(ue,ee);Z(ue,Y,Math.exp(-1*Math.pow(ve,2)/(2*Math.pow(me,2))))}}function Z(ee,Y,se){let ue=ee.state,me=[.01,.01,.01,.01];ue.throughput=ue.throughput+(Y[0]-ue.throughput)*me[0]*se,ue.latency=ue.latency+(Y[1]-ue.latency)*me[1]*se,ue.rebuffer=ue.rebuffer+(Y[2]-ue.rebuffer)*me[2]*se,ue.switch=ue.switch+(Y[3]-ue.switch)*me[3]*se}return y={getNextQuality:function(ee,Y,se,ue,me,ve,J,H){let B=ue,G=se;(function(ne,fe){if(!w){w=[];const ae=fe.getPossibleVoRepresentationsFilteredBySettings(ne,!0),oe=ae.map(ge=>ge.bandwidth);M=Math.min(...oe),I=function(ge){const V=ge.map(ye=>Math.pow(ye,2)).reduce((ye,Te)=>ye+Te);return Math.sqrt(V)}(oe),ae.forEach(ge=>{let V={representation:ge,state:{throughput:ge.bandwidth/I,latency:0,rebuffer:0,switch:0}};w.push(V)}),N=function(ge){let V=[],ye=function(Ge){let ot=[];for(let Et=0;Et<Ge;Et++){let xt=[Math.random()*k(),Math.random(),Math.random(),Math.random()];ot.push(xt)}return ot}(Math.pow(ge.length,2));V.push(ye[0]);let Te=[1,1,1,1];for(let Ge=1;Ge<ge.length;Ge++){let ot=null,Et=null;for(let xt=0;xt<ye.length;xt++){let tn=ye[xt],kt=null;for(let nn=0;nn<V.length;nn++){let fn=L(tn,V[nn],Te);(kt===null||fn<kt)&&(kt=fn)}(Et===null||kt>Et)&&(ot=tn,Et=kt)}V.push(ot)}let Ae=null,Oe=null;for(let Ge=0;Ge<V.length;Ge++){let ot=0;for(let Et=0;Et<V.length;Et++)Ge!==Et&&(ot+=L(V[Ge],V[Et],Te));(Ae===null||ot>Ae)&&(Ae=ot,Oe=Ge)}let De=[];for(De.push(V[Oe]),V.splice(Oe,1);V.length>0;){let Ge=null,ot=null;for(let Et=0;Et<V.length;Et++){let xt=L(De[0],V[Et],Te);(Ge===null||xt<Ge)&&(Ge=xt,ot=Et)}De.push(V[ot]),V.splice(ot,1)}return De}(w)}})(Y,ee);let be=se/I;be>1&&(be=k()),ue/=R;let re=w.find(ne=>ne.representation.id===J.id),we=re.representation.bandwidth*H.getSegmentDuration()/G,Ee=Math.max(0,we-me);if(me-we<H.getMinBuffer())return b.debug(`Buffer is low for bitrate= ${re.representation.bandwidth} downloadTime=${we} currentBuffer=${me} rebuffer=${Ee}`),function(ne,fe){let ae=0,oe=ne;if(w)for(let ge=0;ge<w.length;ge++){let V=w[ge];V.representation.bandwidth<ne.representation.bandwidth&&V.representation.bandwidth>ae&&fe>V.representation.bandwidth&&(ae=V.representation.bandwidth,oe=V)}return oe}(re,G).representation;switch($){case"manual_weight_selection":D=[.4,.4,.4,.4];break;case"random_weight_selection":D=function(ne){let fe=[],ae=Math.sqrt(2/ne);for(let oe=0;oe<4;oe++)fe.push(Math.random()*ae);return D=fe,D}(w.length);break;default:(function(ne,fe,ae,oe,ge,V){D||(D=N[N.length-1]);let ye=ne.findWeightVector(w,fe,ae,oe,ge,V);ye!==null&&ye!==-1&&(D=ye)})(H,B,me,Ee,G,ve)}let Ie=null,Fe=null,Ce=null;for(let ne=0;ne<w.length;ne++){let fe=w[ne],ae=fe.state,oe=[ae.throughput,ae.latency,ae.rebuffer,ae.switch],ge=D.slice(),V=H.getNextBufferWithBitrate(fe.representation.bandwidth,me,G),ye=V<H.getMinBuffer();ye&&b.debug(`Buffer is low for bitrate=${fe.representation.bandwidth} downloadTime=${we} currentBuffer=${me} nextBuffer=${V}`),(fe.representation.bandwidth>se-1e4||ye)&&fe.representation.bandwidth!==M&&(ge[0]=100);let Te=L(oe,[be,0,0,0],ge);(Ie===null||Te<Ie)&&(Ie=Te,Fe=fe.representation,Ce=fe)}let Q=Math.abs(re.representation.bandwidth-Ce.representation.bandwidth)/I;return K(re,[be,ue,Ee,Q]),K(Ce,[be,0,0,Q]),Fe},reset:function(){q()}},b=(0,l.default)(v).getInstance().getLogger(y),q(),y}Me.__dashjs_factory_name="LearningAbrController";var We=r.default.getClassFactory(Me),Ke=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function nt(){let v,y,b,w,I;function R(){y=null,b=null,w=null,I=null}function M(N,$,q,k){let L=new Ke;return L.type=N,L.weights.bitrateReward=$||1,L.weights.bitrateSwitchPenalty=1,L.weights.rebufferPenalty=q||1e3,L.weights.latencyPenalty=[],L.weights.latencyPenalty.push({threshold:1.1,penalty:.05*k}),L.weights.latencyPenalty.push({threshold:1e8,penalty:.1*q}),L.weights.playbackSpeedPenalty=k||200,L}function D(N,$,q,k,L){L.bitrateWSum+=L.weights.bitrateReward*N,L.lastBitrate&&(L.bitrateSwitchWSum+=L.weights.bitrateSwitchPenalty*Math.abs(N-L.lastBitrate)),L.lastBitrate=N,L.rebufferWSum+=L.weights.rebufferPenalty*$;for(let F=0;F<L.weights.latencyPenalty.length;F++){let K=L.weights.latencyPenalty[F];if(q<=K.threshold){L.latencyWSum+=K.penalty*q;break}}L.playbackSpeedWSum+=L.weights.playbackSpeedPenalty*Math.abs(1-k),L.totalQoe=L.bitrateWSum-L.bitrateSwitchWSum-L.rebufferWSum-L.latencyWSum-L.playbackSpeedWSum}return v={setupPerSegmentQoe:function(N,$,q){y=M("segment",N,$,q),b=N,w=$,I=q},logSegmentMetrics:function(N,$,q,k){y&&D(N,$,q,k,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(N,$,q,k){let L=null;return b&&w&&I&&(L=M("segment",b,w,I)),L?(D(N,$,q,k,L),L.totalQoe):0},reset:function(){R()}},R(),v}nt.__dashjs_factory_name="LoLpQoeEvaluator";var bt=r.default.getClassFactory(nt);function Rt(v){let y,b,w,I,R=v.targetLatency,M=v.bufferMin,D=v.segmentDuration,N=v.qoeEvaluator;function $(){return D}function q(k,L){const F=$();let K;return K=L>F?k-F:k+F-L,K}return y={getMinBuffer:function(){return M},getSegmentDuration:$,getNextBufferWithBitrate:function(k,L,F){return q(L,k*D/F)},getNextBuffer:q,findWeightVector:function(k,L,F,K,Z,ee){let Y=null,se=null,ue=null,me=Math.abs(L-I);return k.forEach(ve=>{w.forEach(J=>{J[0];let H,B=J[1],G=J[2],be=(J[3],ve.representation.bandwidth*D/Z),re=q(F,be);H=G===0?10:1/G;let we=H*Math.max(1e-5,be-re);H=B===0?10:1/B;let Ee=H*ve.state.latency,Ie=N.calculateSingleUseQoe(ve.representation.bandwidth,we,Ee,ee);(Y===null||Ie>Y)&&function(Fe,Ce,Q){return!(Fe>R+Q)&&Ce>=M}(L,re,me)&&(Y=Ie,se=J,ue=ve.representation.bandwidth)})}),se===null&&ue===null&&(se=-1),I=L,se}},b=[.2,.4,.6,.8,1],w=function(k){let L=k.map(function(K){return[K]}),F=function(K,Z,ee){if(ee===Z)return K;let Y=K.length;for(let se=0;se<Y;se++){let ue=K.shift();for(let me=0;me<k.length;me++)K.push(ue.concat(k[me]))}return F(K,Z,ee+1)};return F(L,4,1)}(b),I=0,y}Rt.__dashjs_factory_name="LoLpWeightSelector";var Pe=r.default.getClassFactory(Rt);function Ne(v){let y,b,w,I,R,M=(v=v||{}).dashMetrics,D=this.context;return w={getSwitchRequest:function(N){try{let $=(0,i.default)(D).create();$.rule=this.getClassName();let q=N.getMediaInfo().type,k=N.getAbrController();const L=N.getStreamInfo();let F=N.getRepresentation();const K=N.getMediaInfo(),Z=M.getCurrentBufferState(q),ee=N.getScheduleController(),Y=M.getCurrentBufferLevel(q,!0),se=ee.getPlaybackController();let ue=se.getCurrentLiveLatency();if(q===h.default.AUDIO)return $;ue||(ue=0);const me=se.getPlaybackRate(),ve=N.getThroughputController().getSafeAverageThroughput(q);if(y.debug(`Throughput ${Math.round(ve)} kbps`),isNaN(ve)||!Z||k.getAbandonmentStateFor(L.id,q)===o.ABANDON_LOAD)return $;let J=k.getPossibleVoRepresentationsFilteredBySettings(K,!0).map(Fe=>Fe.bandwidth),H=N.getRepresentation().fragmentDuration,B=Math.min(...J)/1e3,G=Math.max(...J)/1e3,be=F.bandwidth/1e3,re=M.getCurrentHttpRequest(q,!0),we=(re.tresponse.getTime()-re.trequest.getTime())/1e3,Ee=we>H?we-H:0;R.setupPerSegmentQoe(H,G,B),R.logSegmentMetrics(be,Ee,ue,me);let Ie=Pe(D).create({targetLatency:1.5,bufferMin:.3,segmentDuration:H,qoeEvaluator:R});return $.representation=I.getNextQuality(k,K,1e3*ve,ue,Y,me,F,Ie),$.reason={throughput:ve,latency:ue},$.priority=b.get().streaming.abr.rules.loLPRule.priority,ee.setTimeToLoadDelay(0),$}catch($){throw $}},reset:function(){I.reset(),R.reset()}},y=(0,l.default)(D).getInstance().getLogger(w),I=We(D).create(),R=bt(D).create(),b=(0,u.default)(D).getInstance(),w}Ne.__dashjs_factory_name="LoLPRule";var Qe=r.default.getClassFactory(Ne);function X(v){v=v||{};const y=this.context,b=v.mediaPlayerModel,w=v.customParametersModel,I=v.dashMetrics,R=v.settings,M=(0,m.default)(y).getInstance();let D,N,$,q;function k(){Object.values(h.default.QUALITY_SWITCH_RULES).forEach(ee=>{N=L(ee,N)}),Object.values(h.default.ABANDON_FRAGMENT_RULES).forEach(ee=>{$=L(ee,$)}),w.getAbrCustomRules().forEach(function(ee){ee.type===h.default.RULES_TYPES.QUALITY_SWITCH_RULES&&N.push(ee.rule(y).create()),ee.type===h.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&$.push(ee.rule(y).create())}),N.length===0&&(N.push(je(y).create({dashMetrics:I,mediaPlayerModel:b,settings:R})),N.push(d(y).create({dashMetrics:I})))}function L(ee,Y){const se=ee.charAt(0).toLowerCase()+ee.slice(1);return R.get().streaming.abr.rules[se].active&&!function(ue,me){return ue.filter(ve=>ve.getClassName()===me).length>0}(Y,ee)?(Y.push(function(ue){switch(ue){case h.default.QUALITY_SWITCH_RULES.BOLA_RULE:return je(y).create({dashMetrics:I,mediaPlayerModel:b,settings:R});case h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return d(y).create({dashMetrics:I});case h.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return E(y).create({dashMetrics:I,settings:R});case h.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return ie(y).create();case h.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return A(y).create();case h.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return Ue(y).create({dashMetrics:I,settings:R});case h.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Qe(y).create({dashMetrics:I});case h.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return x(y).create({dashMetrics:I,mediaPlayerModel:b,settings:R})}}(ee)),Y):R.get().streaming.abr.rules[se].active?Y:function(ue,me){return ue.filter(ve=>ve.getClassName()!==me)}(Y,ee)}function F(ee){return ee.filter(Y=>Y.representation!==i.default.NO_CHANGE)}function K(ee){const Y={};let se,ue,me,ve=null;if(ee.length!==0){for(Y[i.default.PRIORITY.STRONG]=null,Y[i.default.PRIORITY.WEAK]=null,Y[i.default.PRIORITY.DEFAULT]=null,se=0,ue=ee.length;se<ue;se+=1)me=ee[se],me.representation!==i.default.NO_CHANGE&&(Y[me.priority]===null||Y[me.priority].representation!==i.default.NO_CHANGE&&me.representation.bitrateInKbit<Y[me.priority].representation.bitrateInKbit)&&(Y[me.priority]=me);return Y[i.default.PRIORITY.WEAK]&&Y[i.default.PRIORITY.WEAK].representation!==i.default.NO_CHANGE&&(ve=Y[i.default.PRIORITY.WEAK]),Y[i.default.PRIORITY.DEFAULT]&&Y[i.default.PRIORITY.DEFAULT].representation!==i.default.NO_CHANGE&&(ve=Y[i.default.PRIORITY.DEFAULT]),Y[i.default.PRIORITY.STRONG]&&Y[i.default.PRIORITY.STRONG].representation!==i.default.NO_CHANGE&&(ve=Y[i.default.PRIORITY.STRONG]),ve}}function Z(){k()}return D={clearDataForStream:function(ee){[N,$].forEach(Y=>{Y&&Y.length&&Y.forEach(se=>se.clearDataForStream&&typeof se.clearDataForStream=="function"&&se.clearDataForStream(ee))})},getAbandonFragmentRules:function(){return $},getBestPossibleSwitchRequest:function(ee){return ee&&K(F(N.filter(Y=>{const se=Y.getClassName();if(se!==h.default.QUALITY_SWITCH_RULES.BOLA_RULE&&se!==h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const ue=ee.getMediaType();return q[ue]&&se===h.default.QUALITY_SWITCH_RULES.BOLA_RULE||!q[ue]&&se===h.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(Y=>Y.getSwitchRequest(ee))))||(0,i.default)(y).create()},getBolaState:function(ee){return q[ee]},getMinSwitchRequest:K,getQualitySwitchRules:function(){return N},handleNewMediaInfo:function(ee){N.forEach(Y=>Y.handleNewMediaInfo&&Y.handleNewMediaInfo(ee)),$.forEach(Y=>Y.handleNewMediaInfo&&Y.handleNewMediaInfo(ee))},initialize:function(){N=[],$=[],q={},k(),M.on(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,Z,D)},reset:function(){[N,$].forEach(ee=>{ee&&ee.length&&ee.forEach(Y=>Y.reset&&Y.reset())}),N=[],$=[],q={},M.off(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,Z,D)},setBolaState:function(ee,Y){q[ee]=Y},shouldAbandonFragment:function(ee){if(!ee)return(0,i.default)(y).create();const Y=K(F($.map(se=>se.shouldAbandon(ee))));return Y&&Y.reason&&(Y.reason.forceAbandon=!0),Y||(0,i.default)(y).create()}},D}X.__dashjs_factory_name="ABRRulesCollection";const W=r.default.getClassFactory(X);r.default.updateSingletonFactory(X.__dashjs_factory_name,W);var C=W;class O{constructor(y){this.action=O.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.isPartialSegmentRequest=!1,this.mediaStartTime=NaN,this.mediaType=null,this.presentationStartTime=NaN,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=y||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===he.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(y){this.type=y&&y.init?he.HTTPRequest.INIT_SEGMENT_TYPE:he.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=y&&y.url?y.url:null,this.range=y&&y.range?y.range.start+"-"+y.range.end:null,this.mediaType=y&&y.mediaType?y.mediaType:null,this.representation=y&&y.representation?y.representation:null}}O.ACTION_DOWNLOAD="download",O.ACTION_COMPLETE="complete";var le=O;const te="loading",Be="executed",rt="failed";function qe(v){const y=(v=v||{}).eventBus,b=v.events,w=v.dashMetrics,I=v.fragmentLoader,R=v.debug,M=v.streamInfo,D=v.type;let N,$,q,k;function L(J){return!!J&&function(H){let B=!1;return H.some(G=>{if(be=J,re=G,!isNaN(be.index)&&be.startTime===re.startTime&&be.adaptationIndex===re.adaptationIndex&&be.type===re.type||function(we,Ee){return we.representation.id===Ee.representation.id}(J,G)||function(we,Ee){return we.action===le.ACTION_COMPLETE&&we.action===Ee.action}(J,G))return B=!0,B;var be,re}),B}(q)}function F(J){return isNaN(J.duration)?.25:Math.min(J.duration/8,.5)}function K(J){q=q.filter(H=>{const B=F(H);return isNaN(H.startTime)||J!==void 0&&H.startTime>=J-B})}function Z(J,H){H<=J+.5||(q=q.filter(B=>{const G=F(B);return isNaN(B.startTime)||B.startTime>=H-G||isNaN(B.duration)||B.startTime+B.duration<=J+G}))}function ee(J,H,B){for(let G=J.length-1;G>=0;G--){const be=J[G],re=be.startTime,we=re+be.duration;if(B=isNaN(B)?F(be):B,!isNaN(re)&&!isNaN(we)&&H+B>=re&&H-B<we||isNaN(re)&&isNaN(H))return be}return null}function Y(J,H){w.addSchedulingInfo(J,H),w.addRequestsQueue(J.mediaType,k,q)}function se(J){J.sender===I&&(k.splice(k.indexOf(J.request),1),J.response&&!J.error&&q.push(J.request),Y(J.request,J.error?rt:Be),y.trigger(b.FRAGMENT_LOADING_COMPLETED,{request:J.request,response:J.response,error:J.error,sender:this},{streamId:M.id,mediaType:D}))}function ue(J){J.sender===I&&y.trigger(b.FRAGMENT_LOADING_PROGRESS,{request:J.request,response:J.response,error:J.error,sender:this},{streamId:M.id,mediaType:D})}function me(J){J.sender===I&&y.trigger(b.FRAGMENT_LOADING_ABANDONED,{request:J.request},{streamId:M.id,mediaType:D})}function ve(){q=[],k=[],I&&I.resetInitialSettings()}return N={abortRequests:function(){$.debug("abort requests"),I.abort(),k=[]},executeRequest:function(J){J.action===le.ACTION_DOWNLOAD?(Y(J,te),k.push(J),function(H){y.trigger(b.FRAGMENT_LOADING_STARTED,{request:H},{streamId:M.id,mediaType:D}),I.load(H)}(J)):$.warn("Unknown request action.")},getRequests:function(J){const H=J?J.state instanceof Array?J.state:[J.state]:[];let B=[];return H.forEach(G=>{const be=function(re){let we;switch(re){case te:we=k;break;case Be:we=q;break;default:we=[]}return we}(G);B=B.concat(function(re,we){return we.hasOwnProperty("time")?[ee(re,we.time,we.threshold)]:re.filter(Ee=>{for(const Ie in we)if(Ie!=="state"&&we.hasOwnProperty(Ie)&&Ee[Ie]!=we[Ie])return!1;return!0})}(be,J))}),B},getStreamId:function(){return M.id},getType:function(){return D},isFragmentLoaded:L,isFragmentLoadedOrPending:function(J){let H,B=!1,G=0;if(B=L(J),!B)for(G=0;G<k.length;G++)H=k[G],J.url===H.url&&J.startTime===H.startTime&&(B=!0);return B},removeExecutedRequestsAfterTime:function(J){q=q.filter(H=>isNaN(H.startTime)||J!==void 0&&H.startTime<J)},removeExecutedRequestsBeforeTime:K,reset:function(){y.off(b.LOADING_COMPLETED,se,this),y.off(b.LOADING_DATA_PROGRESS,ue,this),y.off(b.LOADING_ABANDONED,me,this),I&&I.reset(),ve()},resetInitialSettings:ve,syncExecutedRequestsWithBufferedRange:function(J,H){if(!J||J.length===0)return void K();let B=0;for(let G=0,be=J.length;G<be;G++)Z(B,J.start(G)),B=J.end(G);H>0&&Z(B,H)}},$=R.getLogger(N),ve(),y.on(b.LOADING_COMPLETED,se,N),y.on(b.LOADING_DATA_PROGRESS,ue,N),y.on(b.LOADING_ABANDONED,me,N),N}qe.__dashjs_factory_name="FragmentModel";const Xe=r.default.getClassFactory(qe);Xe.FRAGMENT_MODEL_LOADING=te,Xe.FRAGMENT_MODEL_EXECUTED=Be,Xe.FRAGMENT_MODEL_CANCELED="canceled",Xe.FRAGMENT_MODEL_FAILED=rt,r.default.updateClassFactory(qe.__dashjs_factory_name,Xe);var $e=Xe;function et(v){let y;const b=(v=v||{}).abrController,w=v.throughputController,I=v.switchRequestHistory,R=v.droppedFramesHistory,M=v.currentRequest,D=v.streamProcessor?v.streamProcessor.getScheduleController():null,N=v.streamProcessor?v.streamProcessor.getRepresentation():null,$=v.videoModel?v.videoModel:null;function q(){return N?N.mediaInfo:null}return y={getAbrController:function(){return b},getCurrentRequest:function(){return M},getDroppedFramesHistory:function(){return R},getMediaInfo:q,getMediaType:function(){const k=q();return k?k.type:null},getRepresentation:function(){return N},getScheduleController:function(){return D},getStreamInfo:function(){const k=q();return k?k.streamInfo:null},getSwitchRequestHistory:function(){return I},getThroughputController:function(){return w},getVideoModel:function(){return $}},y}et.__dashjs_factory_name="RulesContext";var Ve=r.default.getClassFactory(et);function Ze(){let v={},y={};const b=this.context,w=(0,u.default)(b).getInstance();return{clearForStream:function(I){delete v[I],delete y[I]},getSwitchRequests:function(I,R){return I!=null&&R!=null&&v[I]&&v[I][R]?v[I][R]:{}},push:function(I){const R=I.currentRepresentation,M=I.newRepresentation;if(R.mediaInfo.streamInfo.id!==M.mediaInfo.streamInfo.id||M.mediaInfo.id!==R.mediaInfo.id)return;const D=R.mediaInfo.streamInfo.id;v[D]||function(Z){v[Z]={},y[Z]={}}(D);const N=R.mediaInfo.type;v[D][N]||function(Z,ee){v[Z][ee]={},y[Z][ee]=[]}(D,N);const $=I.currentRepresentation.id;v[D][N][$]||function(Z,ee,Y){v[Z][ee][Y]={noDrops:0,drops:0,dropSize:0}}(D,N,$);let q=I.newRepresentation.absoluteIndex-I.currentRepresentation.absoluteIndex,k=q<0?1:0,L=k?-q:0,F=k?0:1;v[D][N][I.currentRepresentation.id].drops+=k,v[D][N][I.currentRepresentation.id].dropSize+=L,v[D][N][I.currentRepresentation.id].noDrops+=F,y[D][N].push({id:I.currentRepresentation.id,noDrop:F,drop:k,dropSize:L});const K=function(Z,ee){return y[Z][ee].length>w.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?y[Z][ee].shift():null}(D,N);K&&function(Z,ee,Y){v[Z][ee][Y.id].drops-=Y.drop,v[Z][ee][Y.id].dropSize-=Y.dropSize,v[Z][ee][Y.id].noDrops-=Y.noDrop}(D,N,K)},reset:function(){v={},y={}}}}Ze.__dashjs_factory_name="SwitchRequestHistory";var ct=r.default.getClassFactory(Ze);function Ht(){let v={},y={},b={};return{clearForStream:function(w){delete v[w],delete y[w],delete b[w]},getFrameHistory:function(w){return v[w]},push:function(w,I,R){if(!I)return;v[w]||function(k){v[k]=[],y[k]=0,b[k]=0}(w);let M=R&&R.droppedVideoFrames?R.droppedVideoFrames:0,D=R&&R.totalVideoFrames?R.totalVideoFrames:0,N=M-y[w];y[w]=M;let $=D-b[w];b[w]=D;const q=v[w];q[I]?(q[I].droppedVideoFrames+=N,q[I].totalVideoFrames+=$):q[I]={droppedVideoFrames:N,totalVideoFrames:$}},reset:function(){v={},y={},b={}}}}Ht.__dashjs_factory_name="DroppedFramesHistory";var Pt=r.default.getClassFactory(Ht);function Kt(){const v=this.context,y=(0,l.default)(v).getInstance(),b=(0,m.default)(v).getInstance();let w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H;function B(){w={},me={},Y=new Map,F&&F.reset(),ve&&ve.reset(),$=void 0,F=void 0,ve=void 0,clearTimeout(I),I=null}function G(V,ye=!0){let Te=be(V,ye);return Te=function(Ae){try{return function(Oe){try{if(!se.get().streaming.cmsd.enabled||!se.get().streaming.cmsd.abr.applyMb)return Oe;const De=Oe.filter(Ge=>{const ot=Ge.mediaInfo.type;let Et=N.getMaxBitrate(ot);if(ot!==h.default.VIDEO||Et<0)return!0;const xt=Ge.mediaInfo.streamInfo.id;return Et-=me[xt][h.default.AUDIO].getRepresentation().bitrateInKbit||0,Ge.bitrateInKbit<=Et});return De.length>0?De:Oe}catch(De){return Z.error(De),Oe}}(Ae=function(Oe){try{if(!se.get().streaming.abr.limitBitrateByPortal)return Oe;const{elementWidth:De}=H.getVideoElementSize(),Ge=Oe.filter(ot=>ot.mediaInfo.type!==h.default.VIDEO||ot.width<=De);return Ge.length>0?Ge:Oe}catch(De){return Z.error(De),Oe}}(Ae=function(Oe){try{const De=Oe.filter(Ge=>{const ot=Ge.mediaInfo.type,Et=Ge.bitrateInKbit,xt=ee.getAbrBitrateParameter("maxBitrate",ot),tn=ee.getAbrBitrateParameter("minBitrate",ot);return!(xt>-1&&Et>xt||tn>-1&&Et<tn)});return De.length>0?De:Oe}catch(De){return Z.error(De),Oe}}(Ae)))}catch(Oe){return Z.error(Oe),Ae}}(Te),Te}function be(V,ye){let Te=[];return V&&(function(Oe){try{const De=[];if(Oe&&De.push(Oe),!se.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!Oe.adaptationSetSwitchingCompatibleIds||Oe.adaptationSetSwitchingCompatibleIds.length===0)return De;const Ge=me[Oe.streamInfo.id][Oe.type].getAllMediaInfos().filter(ot=>Oe.adaptationSetSwitchingCompatibleIds.includes(ot.id));return De.concat(Ge)}catch{return[Oe]}}(V).forEach(Oe=>{let De=M.getVoRepresentations(Oe);De&&De.length>0&&(Te=Te.concat(De))}),Te=function(Oe){return Oe.forEach(De=>{if(De.dependentRepresentation&&De.dependentRepresentation.mediaInfo===null){let Ge=De.dependentRepresentation.id,ot=Oe.find(Et=>Et.id===Ge);ot&&(De.dependentRepresentation=ot)}}),Oe}(Te),Te=function(Oe){return Oe=function(De){let Ge=null;return De.filter(ot=>(Ge||(Ge=ot.mediaInfo),!isNaN(ot.qualityRanking)&&M.areMediaInfosEqual(Ge,ot.mediaInfo))).length===De.length}(Oe)?function(De){return De.sort((Ge,ot)=>ot.qualityRanking-Ge.qualityRanking),De}(Oe):function(De){return De.sort((Ge,ot)=>M.areMediaInfosEqual(Ge.mediaInfo,ot.mediaInfo)?isNaN(Ge.pixelsPerSecond)||isNaN(ot.pixelsPerSecond)||Ge.pixelsPerSecond===ot.pixelsPerSecond?Ge.bandwidth-ot.bandwidth:Ge.pixelsPerSecond-ot.pixelsPerSecond:isNaN(Ge.pixelsPerSecond)||isNaN(ot.pixelsPerSecond)||Ge.pixelsPerSecond===ot.pixelsPerSecond?isNaN(Ge.bitsPerPixel)||isNaN(ot.bitsPerPixel)?Ge.bandwidth-ot.bandwidth:ot.bitsPerPixel-Ge.bitsPerPixel:Ge.pixelsPerSecond-ot.pixelsPerSecond),De}(Oe)}(Te),Te.forEach((Oe,De)=>{Oe.absoluteIndex=De}),Te=Te.filter(Oe=>{const De=!!ye||M.areMediaInfosEqual(Oe.mediaInfo,V),Ge=!Oe||!Oe.mediaInfo||D.areKeyIdsUsable(Oe.mediaInfo);return De&&Ge})),Te}function re(V){const ye=V.request.mediaType,Te=V.streamId;if(!(ye&&Te&&me[Te]&&se.get().streaming.abr.autoSwitchBitrate[ye]))return;const Ae=me[Te][ye];if(!Ae)return;var Oe;if(!(!((Oe=Ae.getLastSegment())&&Oe.isPartialSegment&&!isNaN(Oe.totalNumberOfPartialSegments)&&!isNaN(Oe.replacementSubNumber))||Oe.replacementSubNumber===0))return;const De=Ee(Ae,V.request),Ge=R.shouldAbandonFragment(De);Ge&&Ge.representation!==i.default.NO_CHANGE&&function(ot,Et,xt,tn,kt){if(tn.getFragmentModel().getRequests({state:$e.FRAGMENT_MODEL_LOADING,index:ot.request.index})[0]){const nn=function(fn,Ln){return w[fn]&&w[fn][Ln]?w[fn][Ln]:null}(Et,xt);nn&&(nn.state=o.ABANDON_LOAD),ve.reset(),fe(xt,ue.getActiveStreamInfo(),kt.representation,kt.reason),clearTimeout(I),I=setTimeout(()=>{nn&&(w[Et][xt].state=o.ALLOW_LOAD),I=null},se.get().streaming.abandonLoadTimeout)}}(V,Te,ye,Ae,Ge)}function we(){se.get().streaming.abr.limitBitrateByPortal&&Object.keys(me).forEach(V=>{Object.keys(me[V]).forEach(ye=>{Ce(ye,V)})})}function Ee(V,ye){return Ve(v).create({abrController:K,adapter:M,currentRequest:ye,droppedFramesHistory:F,streamProcessor:V,switchRequestHistory:ve,throughputController:J,videoModel:H})}function Ie(V){V.mediaType===h.default.VIDEO&&(ne(V.streamId),$=V.newRepresentation.id)}function Fe(V){!ge()||V.metric!==o.BUFFER_LEVEL||V.mediaType!==h.default.AUDIO&&V.mediaType!==h.default.VIDEO||function(ye,Te){try{const Ae=ee.getBufferTimeDefault(),Oe=Ae,De=.5*Ae,Ge=R.getBolaState(ye),ot=Te>=(Ge?De:Oe);R.setBolaState(ye,ot),ot!==Ge&&(ot?Z.info("["+ye+"] switching from throughput to buffer occupancy ABR rule (buffer: "+Te.toFixed(3)+")."):Z.info("["+ye+"] switching from buffer occupancy to throughput ABR rule (buffer: "+Te.toFixed(3)+")."))}catch(Ae){Z.error(Ae)}}(V.mediaType,.001*V.value.level)}function Ce(V,ye){var Te;try{if(!(V&&me&&me[ye]&&me[ye][V]))return!1;ne(ye);const Ae=me[ye][V],Oe=Ae.getLastSegment(),De=(Te=Ae.getRepresentationController())==null?void 0:Te.getCurrentCompositeRepresentation(),Ge=Q(Oe,De);if(!se.get().streaming.abr.autoSwitchBitrate[V]||!Ge)return!1;const ot=Ee(Ae),Et=R.getBestPossibleSwitchRequest(ot);if(!Et||!Et.representation)return!1;let xt=Et.representation;return function(tn,kt){ve.push({currentRepresentation:tn,newRepresentation:kt})}(De,xt),xt.id!==De.id&&(w[ye][V].state===o.ALLOW_LOAD||xt.absoluteIndex<De.absoluteIndex)&&(oe(V,De,xt,Et.reason),!0)}catch(Ae){return Z.error(Ae),!1}}function Q(V,ye){return!(V&&V.isPartialSegment&&!isNaN(V.totalNumberOfPartialSegments)&&!isNaN(V.replacementSubNumber))||V.replacementSubNumber===V.totalNumberOfPartialSegments-1||function(Te,Ae){if(!Ae||!Ae.segmentSequenceProperties||Ae.segmentSequenceProperties.length<=0||Ae&&Ae.mediaInfo&&Ae.mediaInfo.adaptationSetSwitchingCompatibleIds&&Ae.mediaInfo.adaptationSetSwitchingCompatibleIds.length>0)return!1;const Oe=Ae.segmentSequenceProperties.filter(Ge=>!isNaN(Ge.sapType)&&Ge.sapType<=1);if(Oe.length===0)return!1;let De=(Te.replacementSubNumber+1)%Te.totalNumberOfPartialSegments;return Oe.some(Ge=>De%Ge.cadence==0)}(V,ye)}function ne(V){if(F){const ye=H.getPlaybackQuality();ye&&F.push(V,$,ye)}}function fe(V,ye,Te,Ae={}){var Ge;if(!(ye&&ye.id&&V&&me&&me[ye.id]&&me[ye.id][V]&&Te))return!1;const Oe=me[ye.id][V],De=(Ge=Oe.getRepresentationController())==null?void 0:Ge.getCurrentCompositeRepresentation();return(!De||Te.id!==De.id)&&oe(V,De,Te,Ae)}function ae(V,ye){return`${V}-${ye}`}function oe(V,ye,Te,Ae){const Oe=Te.mediaInfo.streamInfo.id;if(!V||!me[Oe]||!me[Oe][V])return!1;const De=me[Oe][V].getStreamInfo(),Ge=k.getCurrentBufferLevel(V),ot=ye!==null&&!M.areMediaInfosEqual(ye.mediaInfo,Te.mediaInfo),Et=ye?ye.bitrateInKbit:0;return Z.info(`[AbrController]: Switching quality in period ${Oe} for media type ${V}. Switch from bitrate ${Et} to bitrate ${Te.bitrateInKbit}. Current buffer level: ${Ge}. Reason:`+(Ae?JSON.stringify(Ae):"/")),b.trigger(g.default.QUALITY_CHANGE_REQUESTED,{isAdaptationSetSwitch:ot,mediaType:V,newRepresentation:Te,oldRepresentation:ye,reason:Ae,streamInfo:De},{streamId:De.id,mediaType:V}),function(xt){const tn=J.getAverageThroughput(xt);isNaN(tn)||L.setSavedBitrateSettings(xt,tn)}(V),!0}function ge(){return se.get().streaming.abr.rules.bolaRule.active&&se.get().streaming.abr.rules.throughputRule.active}return K={canPerformQualitySwitch:Q,checkPlaybackQuality:Ce,clearDataForStream:function(V){F&&F.clearForStream(V),me[V]&&delete me[V],ve&&ve.clearForStream(V),w[V]&&delete w[V],R.clearDataForStream(V)},getAbandonmentStateFor:function(V,ye){return w[V]&&w[V][ye]?w[V][ye].state:null},getInitialBitrateFor:function(V){if(V===h.default.TEXT)return NaN;let ye=ee.getAbrBitrateParameter("initialBitrate",V);if(ye>0)return ye;let Te=NaN;if(L&&L.hasOwnProperty("getSavedBitrateSettings")&&(Te=L.getSavedBitrateSettings(V)),!isNaN(Te))return Te;const Ae=J.getAverageThroughput(V);return!isNaN(Ae)&&Ae>0?Ae:V===h.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(V,ye,Te=!0){const Ae=G(V,Te);if(!Ae||Ae.length===0)return null;const Oe=Ae.reduce((Ge,ot)=>Ge.bandwidth<ot.bandwidth?Ge:ot);if(ye<=0)return Oe;const De=Ae.filter(Ge=>Ge.bitrateInKbit<=ye);return De&&De.length!==0?De.reduce((Ge,ot)=>ot.absoluteIndex>Ge.absoluteIndex?ot:Ge):Oe},getPossibleVoRepresentations:function(V,ye=!0){return be(V,ye)},getPossibleVoRepresentationsFilteredBySettings:G,getRepresentationByAbsoluteIndex:function(V,ye,Te=!0){return isNaN(V)||V<0?null:G(ye,Te).find(Ae=>Ae.absoluteIndex===V)},handleNewMediaInfo:function(V){R.handleNewMediaInfo(V)},handlePendingManualQualitySwitch:function(V,ye){try{const Te=ae(V,ye);let Ae=null;if(Y.has(Te)&&(Ae=Y.get(Te)),!Ae)return!1;const Oe=me[V][ye],De=Oe.getLastSegment();if(!Q(De,Oe.getRepresentation()))return!1;const{type:Ge,streamInfo:ot,representation:Et,reason:xt}=Ae;return Y.delete(Te),fe(Ge,ot,Et,xt),!0}catch(Te){Z.error(`Can not handle pending manual quality switch: ${Te}`)}},initialize:function(){F=Pt(v).create(),ve=ct(v).create(),R=C(v).create({dashMetrics:k,customParametersModel:q,mediaPlayerModel:ee,settings:se}),R.initialize(),b.on(g.default.QUALITY_CHANGE_RENDERED,Ie,K),b.on(g.default.METRIC_ADDED,Fe,K),b.on(f.default.LOADING_PROGRESS,re,K),b.on(f.default.VIDEO_ELEMENT_RESIZED,we,K)},isPlayingAtLowestQuality:function(V){return G(V.mediaInfo,!0)[0].id===V.id},isPlayingAtTopQuality:function(V){if(!V)return!0;const ye=G(V.mediaInfo,!0);return ye[ye.length-1].id===V.id},manuallySetPlaybackQuality:function(V,ye,Te,Ae={}){const Oe=me[ye.id][V];if(Q(Oe.getLastSegment(),Oe.getRepresentation()))return fe(V,ye,Te,Ae);(function(De,Ge,ot,Et){try{Z.debug(`[AbrController] Queuing manual quality switch for stream ${Ge.id} and type ${De} to representation ${ot.id}`);const xt=ae(Ge.id,De);Y.set(xt,{type:De,streamInfo:Ge,representation:ot,reason:Et})}catch(xt){Z.error(`Can not queue manual quality switch: ${xt}`)}})(V,ye,Te,Ae)},registerStreamType:function(V,ye){const Te=ye.getStreamInfo().id;me[Te]||(me[Te]={}),me[Te][V]=ye,w[Te]||(w[Te]={}),w[Te][V]={},w[Te][V].state=o.ALLOW_LOAD,R.getBolaState(V)===void 0&&R.setBolaState(V,se.get().streaming.abr.rules.bolaRule.active&&!ge())},reset:function(){B(),b.off(g.default.QUALITY_CHANGE_RENDERED,Ie,K),b.off(g.default.METRIC_ADDED,Fe,K),b.off(f.default.LOADING_PROGRESS,re,K),b.off(f.default.VIDEO_ELEMENT_RESIZED,we,K),R&&R.reset()},setConfig:function(V){V&&(V.streamController&&(ue=V.streamController),V.throughputController&&(J=V.throughputController),V.domStorage&&(L=V.domStorage),V.mediaPlayerModel&&(ee=V.mediaPlayerModel),V.customParametersModel&&(q=V.customParametersModel),V.cmsdModel&&(N=V.cmsdModel),V.dashMetrics&&(k=V.dashMetrics),V.adapter&&(M=V.adapter),V.videoModel&&(H=V.videoModel),V.settings&&(se=V.settings),V.capabilities&&(D=V.capabilities))},setPlaybackQuality:fe,unRegisterStreamType:function(V,ye){try{me[V]&&me[V][ye]&&delete me[V][ye],w[V]&&w[V][ye]&&delete w[V][ye]}catch{}}},Z=y.getLogger(K),B(),K}Kt.__dashjs_factory_name="AbrController";const It=r.default.getSingletonFactory(Kt);r.default.updateSingletonFactory(Kt.__dashjs_factory_name,It);var yn,Vn,ar,xr,Or,Fr=It,Gt=function(v){for(var y=[],b=0;b<v.length;++b){var w=v.charCodeAt(b);w<128?y.push(w):w<2048?(y.push(192|w>>6),y.push(128|63&w)):w<65536?(y.push(224|w>>12),y.push(128|63&w>>6),y.push(128|63&w)):(y.push(240|w>>18),y.push(128|63&w>>12),y.push(128|63&w>>6),y.push(128|63&w))}return y},Ft=function(v){for(var y=[],b=0;b<v.length;){var w=v[b++];w<128||(w<224?(w=(31&w)<<6,w|=63&v[b++]):w<240?(w=(15&w)<<12,w|=(63&v[b++])<<6,w|=63&v[b++]):(w=(7&w)<<18,w|=(63&v[b++])<<12,w|=(63&v[b++])<<6,w|=63&v[b++])),y.push(String.fromCharCode(w))}return y.join("")},_t={};yn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vn=function(v){for(var y=0,b=[],w=0|v.length/3;0<w--;){var I=(v[y]<<16)+(v[y+1]<<8)+v[y+2];y+=3,b.push(yn.charAt(63&I>>18)),b.push(yn.charAt(63&I>>12)),b.push(yn.charAt(63&I>>6)),b.push(yn.charAt(63&I))}return v.length-y==2?(I=(v[y]<<16)+(v[y+1]<<8),b.push(yn.charAt(63&I>>18)),b.push(yn.charAt(63&I>>12)),b.push(yn.charAt(63&I>>6)),b.push("=")):v.length-y==1&&(I=v[y]<<16,b.push(yn.charAt(63&I>>18)),b.push(yn.charAt(63&I>>12)),b.push("==")),b.join("")},ar=function(){for(var v=[],y=0;y<64;++y)v[yn.charCodeAt(y)]=y;return v[61]=0,v}(),xr=function(v){for(var y=0,b=[],w=0|v.length/4;0<w--;){var I=(ar[v.charCodeAt(y)]<<18)+(ar[v.charCodeAt(y+1)]<<12)+(ar[v.charCodeAt(y+2)]<<6)+ar[v.charCodeAt(y+3)];b.push(255&I>>16),b.push(255&I>>8),b.push(255&I),y+=4}return b&&(v.charAt(y-2)=="="?(b.pop(),b.pop()):v.charAt(y-1)=="="&&b.pop()),b},Or={encode:function(v){for(var y=[],b=0;b<v.length;++b)y.push(v.charCodeAt(b));return y},decode:function(v){for(var y=0;y<s.length;++y)a[y]=String.fromCharCode(a[y]);return a.join("")}},_t.decodeArray=function(v){var y=xr(v);return new Uint8Array(y)},_t.encodeASCII=function(v){var y=Or.encode(v);return Vn(y)},_t.decodeASCII=function(v){var y=xr(v);return Or.decode(y)},_t.encode=function(v){var y=Gt(v);return Vn(y)},_t.decode=function(v){var y=xr(v);return Ft(y)},typeof _u<"u"&&(_u.decode=_t.decode,_u.decodeArray=_t.decodeArray,_u.encode=_t.encode,_u.encodeASCII=_t.encodeASCII);var yt=_t,Vt=t(7393);const $t=NaN;class Wt{constructor(y,b){this.data={baseUrls:y||null,selectedIdx:b||$t},this.children=[]}}function rn(){let v,y,b,w;const I=this.context,R=(0,Vt.default)(I).getInstance();function M(q,k,L){const F=D(L);q[k]?R.areEqual(F,q[k].data.baseUrls)||(q[k].data.baseUrls=F,q[k].data.selectedIdx=$t):q[k]=new Wt(F)}function D(q){let k=b.getBaseURLsFromElement(q);const L=w.getSynthesizedBaseUrlElements(k);return L&&L.length>0&&L.forEach(F=>{const K=k.findIndex(Z=>Z.serviceLocation===F.serviceLocation);K!==-1?k[K]=F:k.push(F)}),k}function N(q,k){const L=k||y;q(L.data),L.children&&L.children.forEach(F=>N(q,F))}function $(){y=new Wt}return v={reset:$,update:function(q){(function(k){(function(){if(!b||!b.hasOwnProperty("getBaseURLsFromElement")||!b.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const L=D(k);R.areEqual(L,y.data.baseUrls)||(y.data.baseUrls=L,y.data.selectedIdx=$t),k&&k.Period&&k.Period.forEach((F,K)=>{M(y.children,K,F),F.AdaptationSet&&F.AdaptationSet.forEach((Z,ee)=>{M(y.children[K].children,ee,Z),Z.Representation&&Z.Representation.sort(b.getRepresentationSortFunction()).forEach((Y,se)=>{M(y.children[K].children[ee].children,se,Y)})})})})(q)},getForPath:function(q){let k=y;const L=[k.data];return q&&q.forEach(F=>{k=k.children[F],k&&L.push(k.data)}),L.filter(F=>F.baseUrls.length)},invalidateSelectedIndexes:function(q){N(k=>{isNaN(k.selectedIdx)||q===k.baseUrls[k.selectedIdx].serviceLocation&&(k.selectedIdx=$t)})},setConfig:function(q){q.adapter&&(b=q.adapter),q.contentSteeringController&&(w=q.contentSteeringController)},getBaseUrls:function(q){return D(q)}},$(),v}rn.__dashjs_factory_name="BaseURLTreeModel";var Dt=r.default.getClassFactory(rn),Lt=t(8748);class qt extends Lt.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var en=new qt;function gt(v){let y;v=v||{};let b=[];const w=(0,m.default)(this.context).getInstance(),I=v.updateEventName,R=v.addBlacklistEventName;function M(N){b.indexOf(N)===-1&&(b.push(N),w.trigger(I,{entry:N}))}function D(N){M(N.entry)}return y={add:M,remove:function(N){const $=b.indexOf(N);$!==-1&&b.splice($,1)},contains:function(N){return!!(b.length&&N&&N.length)&&b.indexOf(N)!==-1},reset:function(){R&&w.off(R,D,y),b=[]}},R&&w.on(R,D,y),y}gt.__dashjs_factory_name="BlackListController";var Jt=r.default.getClassFactory(gt);function dn(v){let y;const b=(v=v||{}).blacklistController;return y={select:function(w){return w&&function(I){let R,M,D=0,N=[],$=0;if(M=I.sort(function(q,k){let L=q.dvbPriority-k.dvbPriority;return isNaN(L)?0:L}).filter(function(q,k,L){return!k||L[0].dvbPriority&&q.dvbPriority&&L[0].dvbPriority===q.dvbPriority}),M.length)return M.length>1&&(M.forEach(q=>{D+=q.dvbWeight,N.push(D)}),R=Math.floor(Math.random()*(D-1)),N.every((q,k)=>($=k,!(R<q)))),M[$]}(function(I){let R=[];return I.filter(function(M){return!b.contains(M.serviceLocation)||(M.dvbPriority&&R.push(M.dvbPriority),!1)}).filter(function(M){return!R.length||!M.dvbPriority||R.indexOf(M.dvbPriority)===-1})}(w))}},y}dn.__dashjs_factory_name="DVBSelector";var hn=r.default.getClassFactory(dn);function mn(v){let y;const b=(v=v||{}).blacklistController;return y={select:function(w){let I,R=0;return w&&w.some((M,D)=>(R=D,!b.contains(M.serviceLocation)))&&(I=w[R]),I}},y}mn.__dashjs_factory_name="BasicSelector";var Fn=r.default.getClassFactory(mn),Yt=t(1944),ht=t(656),st=t(7263);function Xt(){let v,y;function b(){y&&(y.onloadend=y.onerror=y.onprogress=y.onload=null,y.abort(),y=null)}return v={load:function(w,I){if(y=null,y=new XMLHttpRequest,y.open(w.method,w.url,!0),w.responseType&&(y.responseType=w.responseType),w.headers)for(let R in w.headers){let M=w.headers[R];M&&y.setRequestHeader(R,M)}return y.withCredentials=w.credentials==="include",y.timeout=w.timeout,y.onload=function(){I.url=this.responseURL,I.status=this.status,I.statusText=this.statusText,I.headers=st.default.parseHttpHeaders(this.getAllResponseHeaders()),I.data=this.response},w.customData&&(y.onloadend=w.customData.onloadend,y.onprogress=w.customData.onprogress,y.onabort=w.customData.onabort,y.ontimeout=w.customData.ontimeout),y.send(),w.customData.abort=b.bind(this),!0},abort:b,getXhr:function(){return y},reset:function(){b(),v=null},resetInitialSettings:function(){b()}},v}Xt.__dashjs_factory_name="XHRLoader";var an=r.default.getClassFactory(Xt);function kn(){const v=this.context,y=(0,u.default)(v).getInstance();let b,w,I;function R(k,L,F){k.customData.reader.read().then(F).catch(function(){M(k)})}function M(k){k.customData.onloadend&&k.customData.onloadend()}function D(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function N(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function $(k,L){try{if((k=k.filter(F=>F.bytes>L/4/k.length)).length>1){let F=0;const K=(k[k.length-1].timestamp-k[0].timestamp)/k.length;return k.forEach((Z,ee)=>{const Y=k[ee+1];if(Y){const se=Y.timestamp-Z.timestamp;F+=se<K?se:0}}),F}return null}catch{return null}}function q(k,L){return 8*k/L}return I=(0,l.default)(v).getInstance().getLogger(b),b={abort:N,calculateDownloadedTime:$,load:function(k,L){const F=function(ee){const Y=new Headers;if(ee.headers)for(let se in ee.headers){let ue=ee.headers[se];ue&&Y.append(se,ue)}return Y}(k),K=function(ee){let Y;return typeof window.AbortController=="function"&&(Y=new AbortController,ee.customData.abortController=Y,Y.signal.onabort=ee.customData.onabort),ee.customData.abort=N.bind(ee),Y}(k),Z=function(ee,Y,se){return new Request(ee.url,{method:ee.method,headers:Y,credentials:ee.credentials,signal:se?se.signal:void 0})}(k,F,K);fetch(Z).then(ee=>{(function(Y,se,ue){(function(Ie,Fe){Ie.status=Fe.status,Ie.statusText=Fe.statusText,Ie.url=Fe.url;const Ce={};for(const Q of Fe.headers.keys())Ce[Q]=Fe.headers.get(Q);Ie.headers=Ce})(ue,Y),Y.ok||se.customData.onloadend();let me=0,ve=!1,J=new Uint8Array,H=0;se.customData.reader=Y.body.getReader();let B=[],G=[],be=[],re=!0;const we=y.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,Ee=({value:Ie,done:Fe})=>{Fe?function(){if(J){const Ce=function(){let Q=null;return we===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?Q=function(){const ne=function(fe,ae){try{let oe,ge;if(oe=fe.slice(0,-1),ge=ae.slice(0,-1),oe.length!==ge.length&&I.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${oe.length}, Mdat: ${ge.length}`),oe.length<=1)return null;let V=[],ye=0,Te=0;for(let Ae=0;Ae<oe.length;Ae++)if(oe[Ae]&&ge[Ae]){let Oe=ge[Ae].timestamp-oe[Ae].timestamp;if(Oe>1){const De=q(ge[Ae].bytes,Oe);V.push(De),Te=0}else{Te===0&&(Te=oe[Ae].timestamp,ye=0);let De=ge[Ae].timestamp-Te;if(De>1){ye+=ge[Ae].bytes;const Ge=q(ye,De);V.push(Ge),Te=0}else ye+=ge[Ae].bytes}}return V.length>0?V.reduce((Ae,Oe)=>Ae+Oe,0)/V.length:null}catch{return null}}(G,be);return ne?8*me/ne:null}():we===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(Q=$(B,me)),Q}();se.customData.onprogress({loaded:me,total:me,lengthComputable:!0,time:Ce}),ue.data=J.buffer}se.customData.onloadend()}():(Ie&&Ie.length>0&&function(Ce){J=function(ne,fe){if(ne.length===0)return fe;const ae=new Uint8Array(ne.length+fe.length);return ae.set(ne),ae.set(fe,ne.length),ae}(J,Ce),me+=Ce.length,B.push({timestamp:D(),bytes:Ce.length}),we===h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&re&&w.findLastTopIsoBoxCompleted(["moof"],J,H).found&&(re=!1,G.push({timestamp:D()}));const Q=w.findLastTopIsoBoxCompleted(["moov","mdat"],J,H);Q.found?function(ne){const fe=function(ae){let oe;return ae===J.length?(oe=J,J=new Uint8Array):(oe=new Uint8Array(J.subarray(0,ae)),J=J.subarray(ae)),oe}(ne.startOffsetOfLastFoundTargetBox+ne.sizeOfLastFoundTargetBox);we!==h.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||re||(re=!0,be.push({timestamp:D(),bytes:fe.length})),se.customData.onprogress({data:fe.buffer,lengthComputable:!1,noTrace:!0}),H=0}(Q):function(ne){H=ne.startOffsetOfLastCompletedBox+ne.sizeOfLastCompletedBox,ve||(se.customData.onprogress({lengthComputable:!1,noTrace:!0}),ve=!0)}(Q)}(Ie),R(se,0,Ee))};R(se,0,Ee)})(ee,k,L)}).catch(()=>{M(k)})},reset:function(){},setConfig:function(k){w=k.boxParser}},b}kn.__dashjs_factory_name="FetchLoader";var Wn=r.default.getClassFactory(kn),sr=t(913),Vr=class{constructor(){this.period=null,this.index=-1,this.id=null,this.type=null}};class ur{constructor(y,b,w,I){this.url=y||"",this.serviceLocation=b||y||"",this.dvbPriority=w||1,this.dvbWeight=I||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}ur.DEFAULT_DVB_PRIORITY=1,ur.DEFAULT_DVB_WEIGHT=1;var kr=ur,xe=t(8854),Kr=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(v){v&&(this.schemeIdUri=v.schemeIdUri?v.schemeIdUri:null,this.value=v.value!==null&&v.value!==void 0?v.value.toString():null,this.id=v.id?v.id:null,v[xe.default.DVB_URL]&&(this.dvbUrl=v[xe.default.DVB_URL]),v[xe.default.DVB_MIMETYPE]&&(this.dvbMimeType=v[xe.default.DVB_MIMETYPE]),v[xe.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=v[xe.default.DVB_FONTFAMILY]))}inArray(v){return!!v&&v.some(y=>this.schemeIdUri===y.schemeIdUri&&(this.value?this.value.toString().match(y.value):"".match(y.value)))}},la=class extends Kr{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(v){super.init(v),v&&(this.version=v.version,this.sessionID=v.sessionID,this.contentID=v.contentID,this.mode=v.mode??"query",this.keys=v.keys?v.keys.split(" "):null,this.includeInRequests=v.includeInRequests?v.includeInRequests.split(" "):["segment"],this.schemeIdUri=v.schemeIdUri)}},Cs=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},hi=class extends Kr{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(v){super.init(v),v&&(this.ref=v.hasOwnProperty(xe.default.REF)?v[xe.default.REF]:null,this.refId=v.hasOwnProperty(xe.default.REF_ID)?v[xe.default.REF_ID]:null,this.robustness=v.hasOwnProperty(xe.default.ROBUSTNESS)?v[xe.default.ROBUSTNESS]:null,this.cencDefaultKid=v.hasOwnProperty(xe.default.CENC_DEFAULT_KID)?v[xe.default.CENC_DEFAULT_KID]:null,this.pssh=v.hasOwnProperty(xe.default.PSSH)?v[xe.default.PSSH]:null,this.pro=v.hasOwnProperty(xe.default.PRO)?v[xe.default.PRO]:null,this.laUrl=v.hasOwnProperty(xe.default.LA_URL)?v[xe.default.LA_URL]:v.hasOwnProperty(xe.default.LA_URL_LOWER_CASE)?v[xe.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(v){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(y=>{this[y]===null&&(this[y]=v[y])})}},ll=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},mi=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},Mc=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},Cf=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},Oc=class{constructor(v,y){this.url=v||"",this.serviceLocation=y||null,this.queryParams={}}},Nf=class{constructor(v,y,b){this.url=v||"",this.serviceLocation=y||null,this.ttl=b||NaN,this.queryParams={}}};class Fc{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}Fc.DEFAULT_ID="defaultId";var no=Fc,Df=class{constructor(){this.period=null,this.index=-1,this.id=1,this.type=null,this.tag=null,this.order="undefined",this.preselectionComponents=[]}},Ut=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},on=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.dependencyId=null,this.dependentRepresentation=null,this.endNumber=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.segmentSequenceProperties=[],this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==xe.default.BASE_URL&&this.segmentInfoType!==xe.default.SEGMENT_BASE&&!this.indexRange}};function An(){let v;const y=/^[a-z][a-z0-9+\-_.]*:/i,b=/^https?:\/\//i,w=/^https:\/\//i,I=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,R=(F,K)=>{try{return new window.URL(F,K).toString()}catch{return F}},M=(F,K)=>{let Z=D;if(!K||!q(F))return F;k(F)&&(Z=N),L(F)&&(Z=$);const ee=Z(K),Y=ee.charAt(ee.length-1)!=="/"&&F.charAt(0)!=="/"?"/":"";return[ee,F].join(Y)};function D(F){const K=F.indexOf("/"),Z=F.lastIndexOf("/");return K!==-1?Z===K+1?F:(F.indexOf("?")!==-1&&(F=F.substring(0,F.indexOf("?"))),F.substring(0,Z+1)):""}function N(F){const K=F.match(I);return K?K[1]:""}function $(F){const K=F.match(y);return K?K[0]:""}function q(F){return!y.test(F)}function k(F){return q(F)&&F.charAt(0)==="/"}function L(F){return F.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),v=R}catch{}finally{v=v||M}}(),{parseBaseUrl:D,parseOrigin:N,parseScheme:$,isRelative:q,isPathAbsolute:k,isSchemeRelative:L,isHTTPURL:function(F){return b.test(F)},isHTTPS:function(F){return w.test(F)},removeHostname:function(F){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(F)[2].substring(1)},resolve:function(F,K){return v(F,K)}}}An.__dashjs_factory_name="DefaultURLUtils";var Gn=r.default.getSingletonFactory(An);function $n(){let v,y,b=[];const w=this.context;function I(R,M,D){let N=function($){let q;for(q=0;q<b.length;q++)if(b[q].regex.test($))return b[q].utils;return y}(D||M);return N&&typeof N[R]=="function"?N[R](M,D):y[R](M,D)}return y=Gn(w).getInstance(),v={registerUrlRegex:function(R,M){b.push({regex:R,utils:M})},parseBaseUrl:function(R){return I("parseBaseUrl",R)},parseOrigin:function(R){return I("parseOrigin",R)},parseScheme:function(R){return I("parseScheme",R)},isRelative:function(R){return I("isRelative",R)},isPathAbsolute:function(R){return I("isPathAbsolute",R)},isSchemeRelative:function(R){return I("isSchemeRelative",R)},isHTTPURL:function(R){return I("isHTTPURL",R)},isHTTPS:function(R){return I("isHTTPS",R)},removeHostname:function(R){return I("removeHostname",R)},resolve:function(R,M){return I("resolve",R,M)}},v}$n.__dashjs_factory_name="URLUtils";var or=r.default.getSingletonFactory($n),vr=t(5717),tr=class{constructor(){this.cadence=1,this.sapType=0,this.event=!0,this.alignment=null}init(v){v&&(this.cadence=v.cadence===void 0||isNaN(v.cadence)?1:v.cadence,this.sapType=v.sapType===void 0||isNaN(v.sapType)?0:v.sapType,this.event=v.event===void 0||v.event,this.alignment=v.alignment!==void 0?v.alignment:null)}};function Jn(){let v,y,b,w;const I=this.context,R=or(I).getInstance(),M=Number.isInteger||function(Q){return typeof Q=="number"&&isFinite(Q)&&Math.floor(Q)===Q};function D(Q,ne){if(!Q)throw new Error("adaptation is not defined");if(!ne)throw new Error("type is not defined");if(Q.Representation&&Q.Representation.length){const ae=ve(Q.Representation[0]);if(ae&&ae.some(oe=>h.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(oe.schemeIdUri)>=0))return ne===h.default.IMAGE}if(Q.ContentComponent&&Q.ContentComponent.length>0){if(Q.ContentComponent.length>1)return ne===h.default.MUXED;if(Q.ContentComponent[0].contentType===ne)return!0}const fe=ne===h.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ne);if(Q.Representation&&Q.Representation.length){const ae=Q.Representation[0].codecs;if(fe.test(ae))return!0}if(Q.hasOwnProperty(xe.default.MIME_TYPE))return fe.test(Q.mimeType);if(Q.Representation){let ae;for(let oe=0;oe<Q.Representation.length;oe++)if(ae=Q.Representation[oe],ae.hasOwnProperty(xe.default.MIME_TYPE))return fe.test(ae.mimeType)}return!1}function N(Q){if(!Q)throw new Error("adaptation is not defined");if(Q.hasOwnProperty(xe.default.SEGMENT_TEMPLATE)||Q.hasOwnProperty(xe.default.SEGMENT_TIMELINE)||Q.hasOwnProperty(xe.default.SEGMENT_LIST)||Q.hasOwnProperty(xe.default.SEGMENT_BASE))return!0;if(Q.Representation&&Q.Representation.length>0){const ne=Q.Representation[0];if(ne.hasOwnProperty(xe.default.SEGMENT_TEMPLATE)||ne.hasOwnProperty(xe.default.SEGMENT_TIMELINE)||ne.hasOwnProperty(xe.default.SEGMENT_LIST)||ne.hasOwnProperty(xe.default.SEGMENT_BASE))return!0}return!1}function $(Q){return D(Q,h.default.TEXT)}function q(Q){return Q&&Q.Representation&&Q.Representation.sort((ne,fe)=>ne.bandwidth-fe.bandwidth),Q}function k(Q,ne){return Q&&Q.Period&&M(ne)&&Q.Period[ne]?Q.Period[ne].AdaptationSet:[]}function L(Q){return Q&&Q.Period?Q.Period:[]}function F(Q,ne,fe){let ae=null;if(Q&&Q.Representation&&Q.Representation.length>0){const oe=M(ne)&&ne>=0&&ne<Q.Representation.length?Q.Representation[ne]:Q.Representation[0];oe&&(ae=oe.mimeType+';codecs="'+oe.codecs+'"',fe&&oe.width!==void 0&&(ae+=';width="'+oe.width+'";height="'+oe.height+'"'))}return ae&&(ae=ae.replace(/\sprofiles=[^;]*/g,"")),ae}function K(Q){const ne=Z(Q);return ne&&ne.length>0}function Z(Q){let ne=[];if(!Q)return ne;const fe=ee(Q);return ne=ne.concat(fe),Q.hasOwnProperty(xe.default.ADAPTATION_SET)&&Q[xe.default.ADAPTATION_SET].length>0&&Q[xe.default.ADAPTATION_SET].forEach(ae=>{const oe=ee(ae);ne=ne.concat(oe)}),ne}function ee(Q){return Q&&Q.hasOwnProperty(xe.default.CONTENT_PROTECTION)&&Q.ContentProtection.length!==0?Q[xe.default.CONTENT_PROTECTION].map(ne=>{const fe=new hi;return fe.init(ne),fe}):[]}function Y(Q){let ne=!1;return Q&&Q.hasOwnProperty("type")&&(ne=Q.type===xe.default.DYNAMIC),ne}function se(Q){if(!Q)return null;const ne=Q[xe.default.FRAMERATE];if(!ne)return null;if(typeof ne=="string"&&ne.includes("/")){const[fe,ae]=ne.split("/").map(oe=>parseInt(oe,10));if(!isNaN(fe)&&!isNaN(ae)&&ae!==0)return fe/ae}return parseInt(ne)}function ue(Q,ne){return ne&&ne.hasOwnProperty(Q)&&ne[Q].length?ne[Q].map(fe=>{const ae=new Kr;return ae.init(fe),ae}):[]}function me(Q,ne){if(!ne)return[];let fe=function(ae,oe){if(!oe||!oe.length)return[];let ge=oe[0][ae]||[];return ge.length===0?[]:oe.length===1?ge:ge.filter(V=>oe.slice(1).every(ye=>ye.hasOwnProperty(ae)&&ye[ae].some(Te=>Te.schemeIdUri===V.schemeIdUri&&Te.value===V.value)))}(Q,ne[xe.default.REPRESENTATION]);return ne.hasOwnProperty(Q)&&ne[Q].length&&fe.push(...ne[Q]),fe.map(ae=>{const oe=new Kr;return oe.init(ae),oe})}function ve(Q){return ue(xe.default.ESSENTIAL_PROPERTY,Q)}function J(Q){return ue(xe.default.SUPPLEMENTAL_PROPERTY,Q)}function H(Q){return Q&&Q.hasOwnProperty(xe.default.SEGMENT_SEQUENCE_PROPERTIES)&&Q[xe.default.SEGMENT_SEQUENCE_PROPERTIES].length?Q[xe.default.SEGMENT_SEQUENCE_PROPERTIES].map(ne=>{const fe=new tr(ne);return fe.init(ne),fe}):[]}function B(Q,ne,fe,ae,oe,ge){const V=new on;(function(Ae,Oe,De,Ge,ot){if(Ae.index=ot,Ae.adaptation=De,Ae.mediaInfo=Ge,Oe.hasOwnProperty(xe.default.ID)&&(Ae.id=Oe.id),Oe.hasOwnProperty(xe.default.CODECS)&&(Ae.codecs=Oe.codecs,Ae.codecFamily=st.default.getCodecFamily(Ae.codecs)),Oe.hasOwnProperty(xe.default.DEPENDENCY_ID)){const Et=Oe[xe.default.DEPENDENCY_ID].toString().split(" ")[0];Ae.dependencyId=Et,Ae.dependentRepresentation=new on,Ae.dependentRepresentation.id=Et}Oe.hasOwnProperty(xe.default.MIME_TYPE)&&(Ae.mimeType=Oe[xe.default.MIME_TYPE]),Oe.hasOwnProperty(xe.default.CODEC_PRIVATE_DATA)&&(Ae.codecPrivateData=Oe.codecPrivateData),Oe.hasOwnProperty(xe.default.BANDWITH)&&(Ae.bandwidth=Oe.bandwidth,Ae.bitrateInKbit=Oe.bandwidth/1e3),Oe.hasOwnProperty(xe.default.WIDTH)&&(Ae.width=Oe.width),Oe.hasOwnProperty(xe.default.HEIGHT)&&(Ae.height=Oe.height),Oe.hasOwnProperty(xe.default.SCAN_TYPE)&&(Ae.scanType=Oe.scanType),Oe.hasOwnProperty(xe.default.FRAMERATE)&&(Ae.frameRate=se(Oe)),Oe.hasOwnProperty(xe.default.QUALITY_RANKING)&&(Ae.qualityRanking=Oe[xe.default.QUALITY_RANKING]),Oe.hasOwnProperty(xe.default.MAX_PLAYOUT_RATE)&&(Ae.maxPlayoutRate=Oe.maxPlayoutRate),Ae.essentialProperties=ve(Oe),Ae.supplementalProperties=J(Oe),Ae.segmentSequenceProperties=H(Oe),Ae.path=[De.period.index,De.index,ot]})(V,ne,fe,Q,ge);const{segmentInfo:ye,segmentInfoType:Te}=function(Ae){let Oe,De;return Ae.hasOwnProperty(xe.default.SEGMENT_BASE)?(Oe=Ae.SegmentBase,De=xe.default.SEGMENT_BASE):Ae.hasOwnProperty(xe.default.SEGMENT_LIST)?(Oe=Ae.SegmentList,De=Oe.hasOwnProperty(xe.default.SEGMENT_TIMELINE)?xe.default.SEGMENT_TIMELINE:xe.default.SEGMENT_LIST):Ae.hasOwnProperty(xe.default.SEGMENT_TEMPLATE)?(Oe=Ae.SegmentTemplate,De=Oe.hasOwnProperty(xe.default.SEGMENT_TIMELINE)?xe.default.SEGMENT_TIMELINE:xe.default.SEGMENT_TEMPLATE):De=xe.default.BASE_URL,{segmentInfo:Oe,segmentInfoType:De}}(ne);return V.segmentInfoType=Te,function(Ae,Oe,De,Ge,ot,Et){if(Ae){if(Ae.hasOwnProperty(xe.default.INITIALIZATION_MINUS)&&(De.initialization=Ae.initialization.split("$Bandwidth$").join(ot.bandwidth).split("$RepresentationID$").join(ot.id)),Ae.hasOwnProperty(xe.default.INITIALIZATION)){const xt=Ae.Initialization;xt.hasOwnProperty(xe.default.SOURCE_URL)&&(De.initialization=xt.sourceURL),xt.hasOwnProperty(xe.default.RANGE)&&(De.range=xt.range)}else $(Ge)&&N(Ge)&&Ge.mimeType&&Ge.mimeType.indexOf("application/mp4")===-1&&(De.range=0);Ae.hasOwnProperty(xe.default.TIMESCALE)&&(De.timescale=Ae.timescale),Ae.hasOwnProperty(xe.default.DURATION)?De.segmentDuration=Ae.duration/De.timescale:Oe===xe.default.SEGMENT_TIMELINE&&(De.segmentDuration=function(xt){if(!xt||!xt.S)return NaN;let tn=xt.S[0],kt=xt.S[1];return tn.hasOwnProperty("d")?tn.d:kt.t-tn.t}(Ae.SegmentTimeline)/De.timescale),Ae.hasOwnProperty(xe.default.MEDIA)&&(De.media=Ae.media),Ae.hasOwnProperty(xe.default.START_NUMBER)&&(De.startNumber=parseInt(Ae.startNumber)),Ae.hasOwnProperty(xe.default.INDEX_RANGE)&&(De.indexRange=Ae.indexRange),Ae.hasOwnProperty(xe.default.PRESENTATION_TIME_OFFSET)&&(De.presentationTimeOffset=Ae.presentationTimeOffset/De.timescale),Ae.hasOwnProperty(xe.default.AVAILABILITY_TIME_OFFSET)?De.availabilityTimeOffset=Ae.availabilityTimeOffset:Et&&Et.availabilityTimeOffset!==void 0&&(De.availabilityTimeOffset=Et.availabilityTimeOffset),Ae.hasOwnProperty(xe.default.AVAILABILITY_TIME_COMPLETE)?De.availabilityTimeComplete=Ae.availabilityTimeComplete!=="false":Et&&Et.availabilityTimeComplete!==void 0&&(De.availabilityTimeComplete=Et.availabilityTimeComplete),Ae.hasOwnProperty(xe.default.END_NUMBER)&&(De.endNumber=Ae[xe.default.END_NUMBER]),De.mseTimeOffset=function(xt){const tn=xt.presentationTimeOffset;return xt.adaptation.period.start-tn}(De)}}(ye,Te,V,ae,ne,oe),function(Ae){isNaN(Ae.width)||isNaN(Ae.height)||isNaN(Ae.frameRate)||(Ae.pixelsPerSecond=Math.max(1,Ae.width*Ae.height*Ae.frameRate),isNaN(Ae.bandwidth)||(Ae.bitsPerPixel=Ae.bandwidth/Ae.pixelsPerSecond))}(V),V}function G(Q){return D(Q,h.default.MUXED)?h.default.MUXED:D(Q,h.default.AUDIO)?h.default.AUDIO:function(ne){return D(ne,h.default.VIDEO)}(Q)?h.default.VIDEO:$(Q)?h.default.TEXT:function(ne){return D(ne,h.default.IMAGE)}(Q)?h.default.IMAGE:(y.warn("Unknown Preselection stream type"),null)}function be(Q,ne){if(Q&&Q.hasOwnProperty(xe.default.PRESELECTION_COMPONENTS)&&Array.isArray(ne))return String(Q.preselectionComponents).split(" ").map(fe=>ne.find(ae=>ae.id===fe))}function re(Q,ne){if(!Q||!Q.hasOwnProperty(xe.default.PRESELECTION_COMPONENTS)||!Array.isArray(ne))return;const fe=String(Q.preselectionComponents).split(" ");return ne.find(ae=>ae.id===fe[0])}function we(Q,ne){if(!Q)throw new Error("Period cannot be null or undefined");let fe=no.DEFAULT_ID+"_"+ne;return Q.hasOwnProperty(xe.default.ID)&&Q.id.toString().length>0&&Q.id!=="__proto__"&&(fe=Q.id.toString()),fe}function Ee(Q,ne,fe){const ae=[];let oe;if(!Q)return ae;for(oe=0;oe<Q.length;oe++){const ge=new Mc;if(ge.timescale=1,ge.representation=ne,!Q[oe].hasOwnProperty(h.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");ge.schemeIdUri=Q[oe].schemeIdUri,Q[oe].hasOwnProperty(xe.default.TIMESCALE)&&(ge.timescale=Q[oe].timescale),Q[oe].hasOwnProperty(xe.default.VALUE)&&(ge.value=Q[oe].value),ae.push(ge),ge.period=fe}return ae}function Ie(Q){const ne=[],fe=Q.BaseURL||[Q.baseUri];let ae=!1;return fe.some(oe=>{if(oe){const ge=new kr;let V=oe.__text||oe;return R.isRelative(V)&&(ae=!0,Q.baseUri&&(V=R.resolve(V,Q.baseUri))),ge.url=V,oe.hasOwnProperty(xe.default.SERVICE_LOCATION)&&oe.serviceLocation.length?ge.serviceLocation=oe.serviceLocation:ge.serviceLocation=V,oe.hasOwnProperty(xe.default.DVB_PRIORITY)&&(ge.dvbPriority=oe[xe.default.DVB_PRIORITY]),oe.hasOwnProperty(xe.default.DVB_WEIGHT)&&(ge.dvbWeight=oe[xe.default.DVB_WEIGHT]),oe.hasOwnProperty(xe.default.AVAILABILITY_TIME_OFFSET)&&(ge.availabilityTimeOffset=oe[xe.default.AVAILABILITY_TIME_OFFSET]),oe.hasOwnProperty(xe.default.AVAILABILITY_TIME_COMPLETE)&&(ge.availabilityTimeComplete=oe[xe.default.AVAILABILITY_TIME_COMPLETE]!=="false"),ne.push(ge),ae}}),ne}function Fe(Q){const ne=new ll;return ne.serverUrl=Q.__text,Q.hasOwnProperty(xe.default.DEFAULT_SERVICE_LOCATION)&&(ne.defaultServiceLocation=Q[xe.default.DEFAULT_SERVICE_LOCATION],ne.defaultServiceLocationArray=ne.defaultServiceLocation.split(" ")),Q.hasOwnProperty(xe.default.QUERY_BEFORE_START)&&(ne.queryBeforeStart=Q[xe.default.QUERY_BEFORE_START].toLowerCase()==="true"),Q.hasOwnProperty(xe.default.CLIENT_REQUIREMENT)&&(ne.clientRequirement=Q[xe.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ne}function Ce(Q){const ne=new Cs;return Q.hasOwnProperty(xe.default.CMCD_PARAMETERS)&&Q[xe.default.CMCD_PARAMETERS].schemeIdUri===h.default.CTA_5004_2023_SCHEME&&(ne.cmcdParameters=new la,ne.cmcdParameters.init(Q[xe.default.CMCD_PARAMETERS])),Q.hasOwnProperty(xe.default.SERVICE_LOCATIONS)&&Q[xe.default.SERVICE_LOCATIONS]!==""&&(ne.serviceLocations=Q[xe.default.SERVICE_LOCATIONS],ne.serviceLocationsArray=ne.serviceLocations.toString().split(" ")),Q.hasOwnProperty(xe.default.ADAPTATION_SETS)&&Q[xe.default.ADAPTATION_SETS]!==""&&(ne.adaptationSets=Q[xe.default.ADAPTATION_SETS],ne.adaptationSetsArray=ne.adaptationSets.toString().split(" ")),ne}return v={getAccessibilityForAdaptation:function(Q){return Q&&Q.hasOwnProperty(xe.default.ACCESSIBILITY)&&Q[xe.default.ACCESSIBILITY].length?Q[xe.default.ACCESSIBILITY].map(ne=>{const fe=new Kr;return fe.init(ne),fe}):[]},getAdaptationForId:function(Q,ne,fe){const ae=k(ne,fe);let oe,ge;for(oe=0,ge=ae.length;oe<ge;oe++)if(ae[oe].hasOwnProperty(xe.default.ID)&&ae[oe].id===Q)return ae[oe];return null},getAdaptationForIndex:function(Q,ne,fe){const ae=k(ne,fe);return ae.length>0&&M(Q)?ae[Q]:null},getAdaptationsForPeriod:function(Q){const ne=Q&&M(Q.index)?Q.mpd.manifest.Period[Q.index]:null,fe=[];let ae,oe,ge;if(ne&&ne.AdaptationSet)for(ge=0;ge<ne.AdaptationSet.length;ge++)oe=ne.AdaptationSet[ge],ae=new Vr,oe.hasOwnProperty(xe.default.ID)&&(ae.id=oe.id),ae.index=ge,ae.period=Q,ae.type=G(oe),fe.push(ae);return fe},getAdaptationsForType:function(Q,ne,fe){const ae=k(Q,ne);let oe,ge;const V=[];for(oe=0,ge=ae.length;oe<ge;oe++)D(ae[oe],fe)&&V.push(q(ae[oe]));return V},getAudioChannelConfigurationForAdaptation:function(Q){return Q&&Q.hasOwnProperty(xe.default.AUDIO_CHANNEL_CONFIGURATION)&&Q[xe.default.AUDIO_CHANNEL_CONFIGURATION].length?Q[xe.default.AUDIO_CHANNEL_CONFIGURATION].map(ne=>{const fe=new Kr;return fe.init(ne),fe}):[]},getAudioChannelConfigurationForRepresentation:function(Q){return Q&&Q.hasOwnProperty(xe.default.AUDIO_CHANNEL_CONFIGURATION)&&Q[xe.default.AUDIO_CHANNEL_CONFIGURATION].length?Q[xe.default.AUDIO_CHANNEL_CONFIGURATION].map(ne=>{const fe=new Kr;return fe.init(ne),fe}):[]},getAvailabilityStartTime:function(Q){return Q&&Q.hasOwnProperty(xe.default.AVAILABILITY_START_TIME)&&Q.availabilityStartTime!==null?Q.availabilityStartTime.getTime():null},getBandwidth:function(Q){return Q&&Q.bandwidth?Q.bandwidth:NaN},getBaseURLsFromElement:Ie,getBitrateListForAdaptation:function(Q){const ne=q(Q);return(ne&&ne.Representation?ne.Representation:[]).map(fe=>({bandwidth:fe.bandwidth,width:fe.width||0,height:fe.height||0,scanType:fe.scanType||null,id:fe.id||null}))},getCodec:F,getCodecForPreselection:function(Q,ne,fe){let ae=null;if(Q&&ne){let oe=F(re(Q,ne),0,fe);if(Q.hasOwnProperty(xe.default.CODECS)){let ge=Q.codecs;ae=oe.replace(/(codecs=")[^"]*(")/,`$1${ge}$2`),y.info("Preselection has own codecs-attribute: replacing in MainAdaptationSet (was: "+oe+"), new Preselection codec is: "+ae)}else ae=oe}return ae},getCombinedEssentialPropertiesForAdaptationSet:function(Q){return me(xe.default.ESSENTIAL_PROPERTY,Q)},getCombinedSupplementalPropertiesForAdaptationSet:function(Q){return me(xe.default.SUPPLEMENTAL_PROPERTY,Q)},getContentProtectionByAdaptation:function(Q){return ee(Q)},getContentProtectionByManifest:function(Q){let ne=[];if(!Q)return ne;const fe=ee(Q);return ne=ne.concat(fe),Q.hasOwnProperty(xe.default.PERIOD)&&Q[xe.default.PERIOD].length>0&&Q[xe.default.PERIOD].forEach(ae=>{const oe=Z(ae);ne=ne.concat(oe)}),ne},getContentProtectionByPeriod:Z,getContentSteering:function(Q){if(Q&&Q.hasOwnProperty(xe.default.CONTENT_STEERING))return Fe(Q[xe.default.CONTENT_STEERING][0])},getDuration:function(Q){let ne;return ne=Q&&Q.hasOwnProperty(xe.default.MEDIA_PRESENTATION_DURATION)?Q.mediaPresentationDuration:Q&&Q.type==="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,ne},getEssentialProperties:ve,getEventStreamForAdaptationSet:function(Q,ne,fe){let ae,oe,ge;return Q&&Q.Period&&ne&&ne.period&&M(ne.period.index)&&(oe=Q.Period[ne.period.index],oe&&oe.AdaptationSet&&M(ne.index)&&(ge=oe.AdaptationSet[ne.index],ge&&(ae=ge.InbandEventStream))),Ee(ae,null,fe)},getEventStreamForRepresentation:function(Q,ne,fe){let ae,oe,ge,V;return Q&&Q.Period&&ne&&ne.adaptation&&ne.adaptation.period&&M(ne.adaptation.period.index)&&(oe=Q.Period[ne.adaptation.period.index],oe&&oe.AdaptationSet&&M(ne.adaptation.index)&&(ge=oe.AdaptationSet[ne.adaptation.index],ge&&ge.Representation&&M(ne.index)&&(V=ge.Representation[ne.index],V&&(ae=V.InbandEventStream)))),Ee(ae,ne,fe)},getEventsForPeriod:function(Q){const ne=Q&&Q.mpd&&Q.mpd.manifest?Q.mpd.manifest:null,fe=ne?ne.Period:null,ae=fe&&Q&&M(Q.index)?fe[Q.index].EventStream:null,oe=[];let ge,V;if(ae)for(ge=0;ge<ae.length;ge++){const ye=new Mc;if(ye.period=Q,ye.timescale=1,!ae[ge].hasOwnProperty(h.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ye.schemeIdUri=ae[ge][h.default.SCHEME_ID_URI],ae[ge].hasOwnProperty(xe.default.TIMESCALE)&&(ye.timescale=ae[ge][xe.default.TIMESCALE]),ae[ge].hasOwnProperty(xe.default.VALUE)&&(ye.value=ae[ge][xe.default.VALUE]),ae[ge].hasOwnProperty(xe.default.PRESENTATION_TIME_OFFSET)&&(ye.presentationTimeOffset=ae[ge][xe.default.PRESENTATION_TIME_OFFSET]),V=0;ae[ge].Event&&V<ae[ge].Event.length;V++){const Te=ae[ge].Event[V],Ae=new mi;Ae.presentationTime=0,Ae.eventStream=ye,Te.hasOwnProperty(xe.default.PRESENTATION_TIME)&&(Ae.presentationTime=Te.presentationTime);const Oe=ye.presentationTimeOffset?ye.presentationTimeOffset/ye.timescale:0;Ae.calculatedPresentationTime=Ae.presentationTime/ye.timescale+Q.start-Oe,Te.hasOwnProperty(xe.default.DURATION)&&(Ae.duration=Te.duration/ye.timescale),Te.hasOwnProperty(xe.default.ID)?Ae.id=parseInt(Te.id):Ae.id=null,Te.Signal&&Te.Signal.Binary&&Te.Signal.Binary.__text?Ae.messageData=w.decodeArray(Te.Signal.Binary.__text.toString()):Ae.messageData=Te.messageData||Te.__cdata||Te.__text,oe.push(Ae)}}return oe},getFramerate:se,getId:function(Q){return Q&&Q[xe.default.ID]||null},getIndexForAdaptation:function(Q,ne,fe){if(!Q)return-1;const ae=k(ne,fe);for(let oe=0;oe<ae.length;oe++)if((0,Vt.default)(I).getInstance().areEqual(ae[oe],Q))return oe;return-1},getIsDynamic:Y,getIsFragmented:N,getIsText:$,getIsTypeOf:D,getLabelsForAdaptation:function(Q){if(!Q||!Q.Label)return[];const ne=[];for(let fe=0;fe<Q.Label.length;fe++)ne.push({lang:Q.Label[fe].lang,text:Q.Label[fe].__text||Q.Label[fe]});return ne},getLanguageForAdaptation:function(Q){let ne="";return Q&&Q.hasOwnProperty(xe.default.LANG)&&(ne=Q.lang),ne},getLocation:function(Q){return Q&&Q.hasOwnProperty(xe.default.LOCATION)?Q[xe.default.LOCATION].map(ne=>{const fe=ne.__text||ne,ae=ne.hasOwnProperty(xe.default.SERVICE_LOCATION)?ne[xe.default.SERVICE_LOCATION]:null;return new Oc(fe,ae)}):[]},getMainAdaptationSetForPreselection:re,getCommonRepresentationForPreselection:function(Q,ne){if(!Q||!Array.isArray(ne))return;const fe=re(Q,ne);return fe?fe.Representation[0]:void 0},getManifestUpdatePeriod:function(Q,ne=0){let fe=NaN;return Q&&Q.hasOwnProperty(xe.default.MINIMUM_UPDATE_PERIOD)&&(fe=Q.minimumUpdatePeriod),isNaN(fe)?fe:Math.max(fe-ne,1)},getMimeType:function(Q){return Q&&Q.Representation&&Q.Representation.length>0?Q.Representation[0].mimeType:null},getMpd:function(Q){const ne=new Cf;return Q&&(ne.manifest=Q,Q.hasOwnProperty(xe.default.AVAILABILITY_START_TIME)?ne.availabilityStartTime=new Date(Q.availabilityStartTime.getTime()):Q.loadedTime&&(ne.availabilityStartTime=new Date(Q.loadedTime.getTime())),Q.hasOwnProperty(xe.default.AVAILABILITY_END_TIME)&&(ne.availabilityEndTime=new Date(Q.availabilityEndTime.getTime())),Q.hasOwnProperty(xe.default.MINIMUM_UPDATE_PERIOD)&&(ne.minimumUpdatePeriod=Q.minimumUpdatePeriod),Q.hasOwnProperty(xe.default.MEDIA_PRESENTATION_DURATION)&&(ne.mediaPresentationDuration=Q.mediaPresentationDuration),Q.hasOwnProperty(xe.default.SUGGESTED_PRESENTATION_DELAY)&&(ne.suggestedPresentationDelay=Q.suggestedPresentationDelay),Q.hasOwnProperty(xe.default.TIMESHIFT_BUFFER_DEPTH)&&(ne.timeShiftBufferDepth=Q.timeShiftBufferDepth),Q.hasOwnProperty(xe.default.MAX_SEGMENT_DURATION)&&(ne.maxSegmentDuration=Q.maxSegmentDuration),Q.hasOwnProperty(xe.default.PUBLISH_TIME)&&(ne.publishTime=new Date(Q.publishTime))),ne},getPatchLocation:function(Q){return Q&&Q.hasOwnProperty(xe.default.PATCH_LOCATION)?Q[xe.default.PATCH_LOCATION].map(ne=>{const fe=ne.__text||ne,ae=ne.hasOwnProperty(xe.default.SERVICE_LOCATION)?ne[xe.default.SERVICE_LOCATION]:null;let oe=ne.hasOwnProperty(xe.default.TTL)?1e3*parseFloat(ne[xe.default.TTL]):NaN;return new Nf(fe,ae,oe)}):[]},getPreselectionIsTypeOf:function(Q,ne,fe){if(!Q)throw new Error("preselection is not defined");if(!ne)throw new Error("adaptations is not defined");if(!fe)throw new Error("type is not defined");const ae=re(Q,ne);return!!ae&&D(ae,fe)},getPreselectionsForPeriod:function(Q){const ne=Q&&M(Q.index)?Q.mpd.manifest.Period[Q.index]:null,fe=[];let ae,oe,ge;if(ne&&ne.Preselection)for(ge=0;ge<ne.Preselection.length;ge++){oe=ne.Preselection[ge],ae=new Df;const V=be(oe,ne.AdaptationSet);V.every(ye=>!!ye)&&V.length===1?(oe.hasOwnProperty(xe.default.ID)&&(ae.id=oe.id),ae.index=ge,ae.period=Q,oe.hasOwnProperty(xe.default.TAG)&&(ae.tag=oe.tag),oe.hasOwnProperty(xe.default.PRESELECTION_COMPONENTS)?ae.preselectionComponents=V:y.warn("Preselection (index: "+ae.index+") missing component(s)"),oe.hasOwnProperty(xe.default.ORDER)&&(ae.order=oe.order),ae.type=G(V[0]),fe.push(ae)):y.warn("Preselection removed because we don't support multi-representation preselections or not all components available.")}return fe},getProducerReferenceTimesForAdaptation:function(Q){const ne=Q&&Q.hasOwnProperty(xe.default.PRODUCER_REFERENCE_TIME)?Q[xe.default.PRODUCER_REFERENCE_TIME]:[];(Q&&Q.hasOwnProperty(xe.default.REPRESENTATION)?Q[xe.default.REPRESENTATION]:[]).forEach(ae=>{ae.hasOwnProperty(xe.default.PRODUCER_REFERENCE_TIME)&&ne.push(...ae[xe.default.PRODUCER_REFERENCE_TIME])});const fe=[];return ne.forEach(ae=>{const oe=new Ut;ae.hasOwnProperty(xe.default.ID)&&(oe[xe.default.ID]=parseInt(ae[xe.default.ID]),ae.hasOwnProperty(xe.default.WALL_CLOCK_TIME)&&(oe[xe.default.WALL_CLOCK_TIME]=ae[xe.default.WALL_CLOCK_TIME],ae.hasOwnProperty(xe.default.PRESENTATION_TIME)&&(oe[xe.default.PRESENTATION_TIME]=ae[xe.default.PRESENTATION_TIME],ae.hasOwnProperty(xe.default.INBAND)&&(oe[xe.default.INBAND]=ae[xe.default.INBAND]!=="false"),ae.hasOwnProperty(xe.default.TYPE)&&(oe[xe.default.TYPE]=ae[xe.default.TYPE]),fe.push(oe))))}),fe},getPublishTime:function(Q){return Q&&Q.hasOwnProperty(xe.default.PUBLISH_TIME)?new Date(Q[xe.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(Q,ne){const fe=L(ne);return fe.length>0&&M(Q)?fe[Q]:null},getRealPeriods:L,getRegularPeriods:function(Q){const ne=!!Q&&Y(Q.manifest),fe=[];let ae,oe,ge=null,V=null,ye=null,Te=null;for(oe=0,ae=Q&&Q.manifest&&Q.manifest.Period?Q.manifest.Period.length:0;oe<ae;oe++)V=Q.manifest.Period[oe],V.hasOwnProperty(xe.default.START)?(Te=new no,Te.start=V.start):ge!==null&&ge.hasOwnProperty(xe.default.DURATION)&&ye!==null?(Te=new no,Te.start=parseFloat((ye.start+ye.duration).toFixed(5))):oe!==0||ne||(Te=new no,Te.start=0),ye!==null&&isNaN(ye.duration)&&(Te!==null?ye.duration=parseFloat((Te.start-ye.start).toFixed(5)):y.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Te!==null&&(Te.id=we(V,oe),Te.index=oe,Te.mpd=Q,Te.isEncrypted=K(V),V.hasOwnProperty(xe.default.DURATION)&&(Te.duration=V.duration),ye&&(ye.nextPeriodId=Te.id),fe.push(Te),ge=V,ye=Te),V=null,Te=null;return fe.length===0||ye!==null&&isNaN(ye.duration)&&(ye.duration=parseFloat((function(Ae){(function(){if(!b||!b.hasOwnProperty("error"))throw new Error(h.default.MISSING_CONFIG_ERROR)})();const Oe=Y(Ae.mpd.manifest);let De;return Ae.mpd.manifest.mediaPresentationDuration?De=Ae.mpd.manifest.mediaPresentationDuration:Ae.duration?De=Ae.duration:Oe?De=Number.POSITIVE_INFINITY:b.error(new Yt.default(en.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Ae)),De}(ye)-ye.start).toFixed(5))),fe},getRepresentationCount:function(Q){return Q&&Q.Representation?Q.Representation.length:0},getRepresentationFor:function(Q,ne){return ne&&ne.Representation&&ne.Representation.length>0&&M(Q)?ne.Representation[Q]:null},getRepresentationSortFunction:function(){return(Q,ne)=>Q.bandwidth-ne.bandwidth},getRepresentationsForAdaptation:function(Q,ne){const fe=[],ae=function(ge){if(ge&&ge.period&&M(ge.period.index)){const V=ge.period.mpd.manifest.Period[ge.period.index];if(V&&V.AdaptationSet&&M(ge.index))return q(V.AdaptationSet[ge.index])}}(Q);let oe;if(ae&&ae.Representation){if(Q&&Q.period&&M(Q.period.index)){const ge=Ie(Q.period.mpd.manifest);ge&&(oe=ge[0])}for(let ge=0,V=ae.Representation.length;ge<V;++ge){const ye=B(ne,ae.Representation[ge],Q,ae,oe,ge);fe.push(ye)}}return fe},getRolesForAdaptation:function(Q){return Q&&Q.hasOwnProperty(xe.default.ROLE)&&Q[xe.default.ROLE].length?Q[xe.default.ROLE].map(ne=>{ne.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&ne.value==="Main"&&(ne.value=xe.default.MAIN);const fe=new Kr;return fe.init(ne),fe}):[]},getSegmentAlignment:function(Q){return!(!Q||!Q.hasOwnProperty(xe.default.SEGMENT_ALIGNMENT))&&Q[xe.default.SEGMENT_ALIGNMENT]==="true"},getSegmentSequencePropertiesForAdaptationSet:function(Q){const ne=[];return Q&&(ne.push(...H(Q)),Q.Representation&&Q.Representation.length&&Q.Representation.forEach(fe=>{ne.push(...H(fe))})),ne},getSelectionPriority:function(Q){try{const ne=Q&&Q.selectionPriority!==void 0?parseInt(Q.selectionPriority):1;return isNaN(ne)?1:ne}catch{return 1}},getServiceDescriptions:function(Q){const ne=[];if(Q&&Q.hasOwnProperty(xe.default.SERVICE_DESCRIPTION))for(const fe of Q.ServiceDescription){let ae=null,oe=null,ge=null,V=null,ye=null,Te=null,Ae=null,Oe=null;for(const De in fe)if(fe.hasOwnProperty(De))if(De===xe.default.ID)ae=fe[De];else if(De===xe.default.SERVICE_DESCRIPTION_SCOPE)oe=fe[De].schemeIdUri;else if(De===xe.default.SERVICE_DESCRIPTION_LATENCY)ge={target:parseInt(fe[De].target),max:parseInt(fe[De].max),min:parseInt(fe[De].min),referenceId:parseInt(fe[De].referenceId)};else if(De===xe.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)V={max:parseFloat(fe[De].max),min:parseFloat(fe[De].min)};else if(De===xe.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)ye={mediaType:fe[De].mediaType,max:parseInt(fe[De].max),min:parseInt(fe[De].min),target:parseInt(fe[De].target),type:fe[De].type,maxQualityDifference:parseInt(fe[De].maxQualityDifference)};else if(De===xe.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)Te={mediaType:fe[De].mediaType,max:parseInt(fe[De].max),min:parseInt(fe[De].min),target:parseInt(fe[De].target)};else if(De===xe.default.CONTENT_STEERING){let Ge=fe[De];Ge=Array.isArray(Ge)?Ge.at(Ge.length-1):Ge,Ae=Fe(Ge)}else De===xe.default.CLIENT_DATA_REPORTING&&(Oe=Ce(fe[De]));ne.push({id:ae,schemeIdUri:oe,latency:ge,playbackRate:V,operatingQuality:ye,operatingBandwidth:Te,contentSteering:Ae,clientDataReporting:Oe})}return ne},getSubSegmentAlignment:function(Q){return!(!Q||!Q.hasOwnProperty(xe.default.SUB_SEGMENT_ALIGNMENT))&&Q[xe.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(Q){return Q&&Q.hasOwnProperty(xe.default.SUGGESTED_PRESENTATION_DELAY)?Q.suggestedPresentationDelay:null},getSupplementalProperties:J,getUTCTimingSources:function(Q){const ne=Y(Q),fe=!!Q&&Q.hasOwnProperty(xe.default.AVAILABILITY_START_TIME),ae=Q?Q.UTCTiming:null,oe=[];return(ne||fe)&&ae&&ae.forEach(function(ge){const V=new vr.default;ge.hasOwnProperty(h.default.SCHEME_ID_URI)&&(V.schemeIdUri=ge.schemeIdUri,ge.hasOwnProperty(xe.default.VALUE)&&(V.value=ge.value.toString(),oe.push(V)))}),oe},getViewpointForAdaptation:function(Q){return Q&&Q.hasOwnProperty(xe.default.VIEWPOINT)&&Q[xe.default.VIEWPOINT].length?Q[xe.default.VIEWPOINT].map(ne=>{const fe=new Kr;return fe.init(ne),fe}):[]},hasProfile:function(Q,ne){let fe=!1;return Q&&Q.profiles&&Q.profiles.length>0&&(fe=Q.profiles.indexOf(ne)!==-1),fe},isPeriodEncrypted:K,setConfig:function(Q){Q&&(Q.errHandler&&(b=Q.errHandler),Q.BASE64&&(w=Q.BASE64))}},y=(0,l.default)(I).getInstance().getLogger(v),v}Jn.__dashjs_factory_name="DashManifestModel";var Xn=r.default.getSingletonFactory(Jn);const cr="utf-16",Ra="utf-16be",ka="utf-16le",Ca="utf-8";function Ns(v,y){if(v<0)return-Ns(-v,y);const b=Math.pow(10,y);if(Math.abs(v*b%1-.5)<Number.EPSILON){const w=Math.floor(v*b);return(w%2==0?w:w+1)/b}return Math.round(v*b)/b}const Lf=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g;function ul(v){return v.indexOf("&")===-1?v:v.replace(Lf,y=>{switch(y){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'";case"&nbsp;":return" ";case"&lrm;":return"‎";case"&rlm;":return"‏";default:if(y[1]==="#"){const b=y[2]==="x"||y[2]==="X"?parseInt(y.slice(3),16):parseInt(y.slice(2),10);return String.fromCodePoint(b)}return y}})}var Ni=class hb{constructor(y,b){Array.isArray(y)&&(y=y.map(w=>w instanceof hb?w:new hb(w))),this.value=y,this.params=b}};const ro="Dict";function Jr(v,y){return{value:v,src:y}}function Pf(v,y,b,w){return new Error(`failed to ${v} "${I=y,Array.isArray(I)?JSON.stringify(I):I instanceof Map?"Map{}":I instanceof Set?"Set{}":typeof I=="object"?JSON.stringify(I):String(I)}" as ${b}`,{cause:w});var I}function fr(v,y,b){return Pf("parse",v,y,b)}const zc="Inner List",Uc="Bare Item",jc="Boolean",Bc="Byte Sequence",Mf="Date",$c="Decimal",Of="Integer",hr=`${Of} or ${$c}`;function io(v){return v<-999999999999999||999999999999999<v}function cl(v){let y,b=1,w="";const I=fr(v,hr);if(v[0]==="-"&&(b=-1,v=v.substring(1)),v.length<=0)throw I;const R=/^(\d+)?/g,M=R.exec(v);if(M[0].length===0)throw I;if(w+=M[1],(v=v.substring(R.lastIndex))[0]==="."){if(w.length>12)throw I;const D=/^(\.\d+)?/g,N=D.exec(v);if(v=v.substring(D.lastIndex),N[0].length===0||N[1].length>4||(w+=N[1],w.length>16))throw I;y=parseFloat(w)*b}else{if(w.length>15)throw I;if(y=parseInt(w)*b,io(y))throw fr(w,hr)}return Jr(y,v)}const ua="String",Ff=/[\x00-\x1f\x7f]+/;var Di=class{constructor(v){this.description=v}};const zf="Token";function Na(v,y){const b=v[0];if(b==='"')return function(w){let I="",R=0;if(w[R]!=='"')throw fr(w,ua);for(R++;w.length>R;){if(w[R]==="\\"){if(w.length<=R+1||(R++,w[R]!=='"'&&w[R]!=="\\"))throw fr(w,ua);I+=w[R]}else{if(w[R]==='"')return Jr(I,w.substring(++R));if(Ff.test(w[R]))throw fr(w,ua);I+=w[R]}R++}throw fr(w,ua)}(v);if(/^[-0-9]/.test(b))return cl(v);if(b==="?")return function(w){let I=0;if(w[I]!=="?")throw fr(w,jc);if(I++,w[I]==="1")return Jr(!0,w.substring(++I));if(w[I]==="0")return Jr(!1,w.substring(++I));throw fr(w,jc)}(v);if(b===":")return function(w){if(w[0]!==":"||(w=w.substring(1)).includes(":")===!1)throw fr(w,Bc);const I=/(^.*?)(:)/g,R=I.exec(w)[1];return w=w.substring(I.lastIndex),Jr(new Uint8Array([...atob(R)].map(M=>M.charCodeAt(0))),w)}(v);if(/^[a-zA-Z*]/.test(b))return function(w,I){if(/^[a-zA-Z*]$/.test(w[0])===!1)throw fr(w,zf);const R=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,M=R.exec(w)[1];return w=w.substring(R.lastIndex),Jr(Symbol.for(M),w)}(v);if(b==="@")return function(w){let I=0;if(w[I]!=="@")throw fr(w,Mf);I++;const R=cl(w.substring(I));if(Number.isInteger(R.value)===!1)throw fr(w,Mf);return Jr(new Date(1e3*R.value),R.src)}(v);throw fr(v,Uc)}const FT="Key";function zT(v){let y=0;if(/^[a-z*]$/.test(v[y])===!1)throw fr(v,FT);let b="";for(;v.length>y;){if(/^[a-z0-9_\-.*]$/.test(v[y])===!1)return Jr(b,v.substring(y));b+=v[y],y++}return Jr(b,v.substring(y))}function hp(v,y){let b;for(;v.length>0&&v[0]===";";){const w=zT(v=v.substring(1).trim()),I=w.value;let R=!0;if((v=w.src)[0]==="="){const M=Na(v=v.substring(1));R=M.value,v=M.src}b==null&&(b={}),b[I]=R}return Jr(b,v)}function UT(v,y){const b=Na(v),w=hp(v=b.src);return v=w.src,Jr(new Ni(b.value,w.value),v)}function jT(v,y){return v[0]==="("?function(b,w){if(b[0]!=="(")throw fr(b,zc);b=b.substring(1);const I=[];for(;b.length>0;){if((b=b.trim())[0]===")"){const M=hp(b=b.substring(1));return Jr(new Ni(I,M.value),M.src)}const R=UT(b);if(I.push(R.value),(b=R.src)[0]!==" "&&b[0]!==")")throw fr(b,zc)}throw fr(b,zc)}(v):UT(v)}const Uf="List";function ns(v,y,b){return Pf("serialize",v,y,b)}function BT(v){if(io(v))throw ns(v,Of);return v.toString()}function OO(v){const y=Ns(v,3);if(Math.floor(Math.abs(y)).toString().length>12)throw ns(v,$c);const b=y.toString();return b.includes(".")?b:`${b}.0`}function $T(v){return v.description||v.toString().slice(7,-1)}function qT(v){const y=$T(v);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(y)===!1)throw ns(y,zf);return y}function mp(v){switch(typeof v){case"number":if(!Number.isFinite(v))throw ns(v,Uc);return Number.isInteger(v)?BT(v):OO(v);case"string":return function(y){if(Ff.test(y))throw ns(y,ua);return`"${y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(v);case"symbol":return qT(v);case"boolean":return function(y){if(typeof y!="boolean")throw ns(y,jc);return y?"?1":"?0"}(v);case"object":if(v instanceof Date)return function(y){return`@${BT(y.getTime()/1e3)}`}(v);if(v instanceof Uint8Array)return function(y){if(ArrayBuffer.isView(y)===!1)throw ns(y,Bc);return`:${b=y,btoa(String.fromCharCode(...b))}:`;var b}(v);if(v instanceof Di)return qT(v);default:throw ns(v,Uc)}}function gp(v){if(/^[a-z*][a-z0-9\-_.*]*$/.test(v)===!1)throw ns(v,FT);return v}function pp(v){return v==null?"":Object.entries(v).map(([y,b])=>b===!0?`;${gp(y)}`:`;${gp(y)}=${mp(b)}`).join("")}function GT(v){return v instanceof Ni?`${mp(v.value)}${pp(v.params)}`:mp(v)}function HT(v,y){return function(b,w={whitespace:!0}){if(typeof b!="object"||b==null)throw ns(b,ro);const I=b instanceof Map?b.entries():Object.entries(b),R=w!=null&&w.whitespace?" ":"";return Array.from(I).map(([M,D])=>{D instanceof Ni==0&&(D=new Ni(D));let N=gp(M);return D.value===!0?N+=pp(D.params):(N+="=",Array.isArray(D.value)?N+=function($){return`(${$.value.map(GT).join(" ")})${pp($.params)}`}(D):N+=GT(D)),N}).join(`,${R}`)}(v,y)}const VT={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Da="CMCD-Object",zr="CMCD-Request",ao="CMCD-Session",Ds="CMCD-Status",FO={br:Da,ab:Da,d:Da,ot:Da,tb:Da,tpb:Da,lb:Da,tab:Da,lab:Da,url:Da,pb:zr,bl:zr,tbl:zr,dl:zr,ltc:zr,mtp:zr,nor:zr,nrr:zr,rc:zr,sn:zr,sta:zr,su:zr,ttfb:zr,ttfbb:zr,ttlb:zr,cmsdd:zr,cmsds:zr,smrt:zr,df:zr,cs:zr,ts:zr,cid:ao,pr:ao,sf:ao,sid:ao,st:ao,v:ao,msd:ao,bs:Ds,bsd:Ds,cdn:Ds,rtp:Ds,bg:Ds,pt:Ds,ec:Ds,e:Ds},yp={OBJECT:Da,REQUEST:zr,SESSION:ao,STATUS:Ds},KT="event",jf=v=>Math.round(v),vp=(v,y)=>Array.isArray(v)?v.map(b=>vp(b,y)):v instanceof Ni&&typeof v.value=="string"?new Ni(vp(v.value,y),v.params):(y.baseUrl&&(v=function(b,w){const I=new URL(b),R=new URL(w);if(I.origin!==R.origin)return b;const M=I.pathname.split("/").slice(1),D=R.pathname.split("/").slice(1,-1),N=Math.min(M.length,D.length);for(let $=0;$<N&&M[$]===D[$];$++)M.shift(),D.shift();for(;D.length;)D.shift(),M.unshift("..");return M.join("/")+I.search+I.hash}(v,y.baseUrl)),y.version===1?encodeURIComponent(v):v),Bf=v=>100*jf(v/100),zO={br:jf,d:jf,bl:Bf,dl:Bf,mtp:Bf,nor:(v,y)=>{let b=v;return y.version>=2&&(v instanceof Ni&&typeof v.value=="string"?b=new Ni([v]):typeof v=="string"&&(b=[v])),vp(b,y)},rtp:Bf,tb:jf},YT="request",Ep=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],WT=["e"],bp=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"],UO=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Tp(v){return UO.test(v)}const QT=["d","dl","nor","ot","rtp","su"],XT=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function jO(v){return XT.includes(v)||Tp(v)}const BO={[KT]:function(v){return Ep.includes(v)||WT.includes(v)||bp.includes(v)||Tp(v)},[YT]:function(v){return Ep.includes(v)||QT.includes(v)||Tp(v)}};function ZT(v,y={}){const b={};if(v==null||typeof v!="object")return b;const w=y.version||v.v||1,I=y.reportingMode||YT,R=w===1?jO:BO[I];let M=Object.keys(v).filter(R);v.e&&v.e!=="rr"&&(M=M.filter(k=>!function(L){return bp.includes(L)}(k)));const D=y.filter;typeof D=="function"&&(M=M.filter(D));const N=I===KT;N&&!M.includes("ts")&&M.push("ts"),w>1&&!M.includes("v")&&M.push("v");const $=Object.assign({},zO,y.formatters),q={version:w,reportingMode:I,baseUrl:y.baseUrl};return M.sort().forEach(k=>{let L=v[k];const F=$[k];if(typeof F=="function"&&(L=F(L,q)),k==="v"){if(w===1)return;L=w}k=="pr"&&L===1||(N&&k==="ts"&&!Number.isFinite(L)&&(L=Date.now()),function(K){return typeof K=="number"?Number.isFinite(K):K!=null&&K!==""&&K!==!1}(L)&&(function(K){return["ot","sf","st","e","sta"].includes(K)}(k)&&typeof L=="string"&&(L=new Di(L)),b[k]=L))}),b}function $O(v,y={}){const b={};if(!v)return b;const w=function(I,R){const M={};if(!I)return M;const D=Object.keys(I),N=R?($=R,Object.keys($).reduce((q,k)=>{var L;return(L=$[k])==null||L.forEach(F=>q[F]=k),q},{})):{};var $;return D.reduce((q,k)=>{const L=FO[k]||N[k]||yp.REQUEST;return(q[L]??(q[L]={}))[k]=I[k],q},M)}(ZT(v,y),y==null?void 0:y.customHeaderMap);return Object.entries(w).reduce((I,[R,M])=>{const D=HT(M,{whitespace:!1});return D&&(I[R]=D),I},b)}const qO=new Set([...XT,...Ep,...QT,...bp,...WT]),rs=(Array.from(qO),VT),JT={DASH:"d",HLS:"h",SMOOTH:"s",OTHER:"o"},eS={VOD:"v",LIVE:"l"},tS="segment";function nS(){let v,y,b,w,I,R,M,D,N,$,q,k,L,F,K,Z,ee=this.context,Y=(0,m.default)(ee).getInstance(),se=(0,u.default)(ee).getInstance(),ue=(0,l.default)(ee).getInstance();function me(){w={pr:1,nor:null,st:null,sf:null,sid:`${st.default.generateUuid()}`,cid:null},L={},k={},F={},q=void 0,K=void 0,Z=!1,B()}function ve(){B()}function J(){K||(K=Date.now())}function H(){K&&!w.msd&&(w.msd=Date.now()-K)}function B(){if(!M)return;const oe=M.getStreamController();if(!oe||typeof oe.getActiveStream!="function")return;const ge=oe.getActiveStream();ge&&($=ge.getStreamProcessors())}function G(oe){try{const ge=re(),V=ge.version?ge.keys:se.get().streaming.cmcd.enabledKeys;return Object.keys(oe).filter(ye=>V.includes(ye)).reduce((ye,Te)=>(ye[Te]=oe[Te],ye),{})}catch{return oe}}function be(){const oe=re();return function(ge){if(Object.keys(ge).length){if(parseInt(ge.version)!==1)return b.error("version parameter must be defined in 1."),!1;if(!ge.keys)return b.error("keys parameter must be defined."),!1}const V=ge.version,ye=se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled;return V||ye}(oe)&&function(ge){let V=se.get().streaming.cmcd.includeInRequests;ge.version&&(V=ge.includeInRequests??[tS]);const ye=h.default.CMCD_AVAILABLE_REQUESTS,Te=V.filter(Ae=>!ye.includes(Ae));return Te.length===V.length?(b.error("None of the request types are supported."),!1):(Te.map(Ae=>{b.warn(`request type ${Ae} is not supported.`)}),!0)}(oe)&&function(ge){const V=h.default.CMCD_AVAILABLE_KEYS,ye=h.default.CMCD_V2_AVAILABLE_KEYS,Te=ge.version?ge.keys:se.get().streaming.cmcd.enabledKeys,Ae=se.get().streaming.cmcd.version,Oe=Te.filter(De=>!(V.includes(De)||Ae===2&&ye.includes(De)));return Oe.length===Te.length&&Te.length>0?(b.error(`None of the keys are implemented for CMCD version ${Ae}.`),!1):(Oe.map(De=>{b.warn(`key parameter ${De} is not implemented for CMCD version ${Ae}.`)}),!0)}(oe)}function re(){let oe={};if(D){const ge=D.getServiceDescriptionSettings();se.get().streaming.cmcd.applyParametersFromMpd&&ge.clientDataReporting&&ge.clientDataReporting.cmcdParameters&&(oe=ge.clientDataReporting.cmcdParameters)}return oe}function we(oe){try{let V=null;if(oe.type,(ge=oe.mediaType)!==h.default.VIDEO&&ge!==h.default.AUDIO||q&&q!=h.default.AUDIO||(q=ge),function(ye){const Te=re();let Ae=se.get().streaming.cmcd.includeInRequests;Te.version&&(Ae=Te.includeInRequests?Te.includeInRequests:[tS]);const Oe={[he.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[he.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[he.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[he.HTTPRequest.MPD_TYPE]:"mpd",[he.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[he.HTTPRequest.OTHER_TYPE]:"other"};return Ae.some(De=>Oe[ye]===De)}(oe.type)){if(oe.type===he.HTTPRequest.MPD_TYPE)return function(){const ye=Fe();return ye.ot=rs.MANIFEST,ye}();if(oe.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE)return Ie(oe.mediaType),Ee(oe,oe.mediaType);if(oe.type===he.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const ye=Fe();return ye.ot=rs.INIT,ye.su=!0,ye}();if(oe.type===he.HTTPRequest.OTHER_TYPE||oe.type===he.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const ye=Fe();return ye.ot=rs.OTHER,ye}();if(oe.type===he.HTTPRequest.LICENSE)return function(){const ye=Fe();return ye.ot=rs.KEY,ye}();if(oe.type===he.HTTPRequest.CONTENT_STEERING_TYPE)return function(ye){const Te=q?Ee(ye,q):Fe();return Te.ot=rs.OTHER,Te}(oe)}return V}catch{return null}var ge}function Ee(oe,ge){var kt;Ie(ge);const V=Fe(),ye=function(nn){try{return parseInt(nn.bandwidth/1e3)}catch{return null}}(oe),Te=function(nn){try{return isNaN(nn.duration)?NaN:Math.round(1e3*nn.duration)}catch{return null}}(oe),Ae=function(nn){try{return 100*parseInt(N.getSafeAverageThroughput(nn)/100)}catch{return null}}(ge),Oe=function(nn){try{const fn=w.pr,Ln=R.getCurrentBufferLevel(nn);return isNaN(fn)||isNaN(Ln)?null:100*parseInt(Ln/fn*10)}catch{return null}}(ge),De=Ce(ge),Ge=function(nn){try{const fn=I.getPossibleVoRepresentationsFilteredBySettings(nn).map(Ln=>Ln.bitrateInKbit);return Math.max(...fn)}catch{return null}}((kt=oe.representation)==null?void 0:kt.mediaInfo),ot=w.pr,Et=function(nn){if($&&$.length!==0){for(let fn of $)if(fn.getType()===nn)return fn.probeNextRequest()}}(ge);let xt;ge===h.default.VIDEO&&(xt=rs.VIDEO),ge===h.default.AUDIO&&(xt=rs.AUDIO),oe.mediaType===h.default.ENHANCEMENT&&(xt=rs.OTHER),ge===h.default.TEXT&&(xt=oe.representation.mediaInfo.mimeType==="application/mp4"?rs.TIMED_TEXT:rs.CAPTION);let tn=se.get().streaming.cmcd.rtp;return tn||(tn=function(nn){try{let fn=M.getPlaybackRate();fn||(fn=1);let{bandwidth:Ln,mediaType:Mn,representation:wn,duration:bn}=nn;if(!wn.mediaInfo)return NaN;let Je=Ce(Mn);Je===0&&(Je=500);let Tt=Ln*bn/1e3/(Je/fn/1e3),vt=se.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(se.get().streaming.cmcd.rtpSafetyFactor)?se.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Tt*vt/100)+1)}catch{return NaN}}(oe)),isNaN(tn)||(V.rtp=tn),Et&&(oe.url!==Et.url?V.nor=encodeURIComponent(st.default.getRelativeUrl(oe.url,Et.url)):Et.range&&(V.nrr=Et.range)),ye&&(V.br=ye),xt&&(V.ot=xt),isNaN(Te)||(V.d=Te),isNaN(Ae)||(V.mtp=Ae),isNaN(Oe)||(V.dl=Oe),isNaN(De)||(V.bl=De),isNaN(Ge)||(V.tb=Ge),isNaN(ot)||ot===1||(V.pr=ot),L[ge]&&(V.bs=!0,L[ge]=!1),!k[ge]&&F[ge]||(V.su=!0,k[ge]=!1,F[ge]=!0),V}function Ie(oe){F.hasOwnProperty(oe)||(F[oe]=!1),k.hasOwnProperty(oe)||(k[oe]=!1),L.hasOwnProperty(oe)||(L[oe]=!1)}function Fe(){const oe=re(),ge={};let V=se.get().streaming.cmcd.cid?se.get().streaming.cmcd.cid:w.cid;if(V=oe.contentID?oe.contentID:V,ge.v=se.get().streaming.cmcd.version??1,ge.sid=se.get().streaming.cmcd.sid?se.get().streaming.cmcd.sid:w.sid,ge.sid=oe.sessionID?oe.sessionID:ge.sid,ge.sid=`${ge.sid}`,V&&(ge.cid=`${V}`),isNaN(w.pr)||w.pr===1||w.pr===null||(ge.pr=w.pr),w.st&&(ge.st=w.st),w.sf&&(ge.sf=w.sf),ge.v===2){let ye=1e3*M.getCurrentLiveLatency();isNaN(ye)||(ge.ltc=ye);const Te=w.msd;Z||isNaN(Te)||(ge.msd=Te,Z=!0)}return ge}function Ce(oe){try{const ge=R.getCurrentBufferLevel(oe);return isNaN(ge)?null:100*parseInt(10*ge)}catch{return null}}function Q(oe){try{w.pr=oe.playbackRate}catch{}}function ne(oe){try{const ge=v.getIsDynamic(oe.data)?eS.LIVE:eS.VOD,V=oe.protocol&&oe.protocol==="MSS"?JT.SMOOTH:JT.DASH;w.st=`${ge}`,w.sf=`${V}`}catch{}}function fe(oe){try{oe.state&&oe.mediaType&&oe.state===g.default.BUFFER_EMPTY&&(L[oe.mediaType]||(L[oe.mediaType]=!0),k[oe.mediaType]||(k[oe.mediaType]=!0))}catch{}}function ae(){for(let oe in L)L.hasOwnProperty(oe)&&(L[oe]=!0);for(let oe in k)k.hasOwnProperty(oe)&&(k[oe]=!0)}return y={getCmcdData:we,getQueryParameter:function(oe){try{if(be()){const ge=we(oe),V=function(ye,Te={}){return ye?HT(ZT(ye,Te),{whitespace:!1}):""}(G(ge));return Y.trigger(sr.default.CMCD_DATA_GENERATED,{url:oe.url,mediaType:oe.mediaType,cmcdData:ge,cmcdString:V}),{key:"CMCD",value:V}}return null}catch{return null}},getHeaderParameters:function(oe){try{if(be()){const ge=we(oe),V=$O(G(ge),se.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[yp.REQUEST]:["ltc"],[yp.SESSION]:["msd"]}});return Y.trigger(sr.default.CMCD_DATA_GENERATED,{url:oe.url,mediaType:oe.mediaType,cmcdData:ge,headers:V}),V}return null}catch{return null}},getCmcdParametersFromManifest:re,setConfig:function(oe){oe&&(oe.abrController&&(I=oe.abrController),oe.dashMetrics&&(R=oe.dashMetrics),oe.throughputController&&(N=oe.throughputController),oe.playbackController&&(M=oe.playbackController),oe.serviceDescriptionController&&(D=oe.serviceDescriptionController))},reset:function(){Y.off(g.default.PLAYBACK_RATE_CHANGED,Q,this),Y.off(g.default.MANIFEST_LOADED,ne,this),Y.off(g.default.BUFFER_LEVEL_STATE_CHANGED,fe,y),Y.off(g.default.PLAYBACK_SEEKED,ae,y),Y.off(g.default.PLAYBACK_STARTED,J,y),Y.off(g.default.PLAYBACK_PLAYING,H,y),me()},initialize:function(oe){Y.on(g.default.PLAYBACK_RATE_CHANGED,Q,y),Y.on(g.default.MANIFEST_LOADED,ne,y),Y.on(g.default.BUFFER_LEVEL_STATE_CHANGED,fe,y),Y.on(g.default.PLAYBACK_SEEKED,ae,y),Y.on(g.default.PERIOD_SWITCH_COMPLETED,ve,y),oe?Y.on(g.default.MANIFEST_LOADING_STARTED,J,y):Y.on(g.default.PLAYBACK_STARTED,J,y),Y.on(g.default.PLAYBACK_PLAYING,H,y)},isCmcdEnabled:be},v=Xn(ee).getInstance(),b=ue.getLogger(y),me(),y}nS.__dashjs_factory_name="CmcdModel";var rS=r.default.getSingletonFactory(nS);const qc="CMSD-Dynamic",iS="CMSD-Static",$f=VT,GO=iS.toLowerCase(),HO=qc.toLowerCase(),VO=["mb","st","sf","v"],Sp="stream",KO={video:$f.VIDEO,audio:$f.AUDIO,text:$f.TIMED_TEXT,stream:Sp};function aS(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R;function M(){I={},R={}}function D(L){L&&Object.keys(L).forEach(F=>{VO.includes(F)||delete L[F]})}function N(L){try{return(F=L)?Object.entries(function(K,Z){try{const{src:ee,value:Y}=function(se,ue){const me={};for(;se.length>0;){let ve;const J=zT(se),H=J.value;if((se=J.src)[0]==="="){const B=jT(se.substring(1),ue);ve=B.value,se=B.src}else{const B=hp(se,ue);ve=new Ni(!0,B.value),se=B.src}if(me[H]=ve,(se=se.trim()).length===0)return Jr(me,se);if(se[0]!==","||(se=se.substring(1).trim()).length===0||se[0]===",")throw fr(se,ro)}return Jr(me,se)}(K.trim(),Z);if(ee!=="")throw fr(ee,ro);return Y}catch(ee){throw fr(K,ro,ee)}}(F)).reduce((K,[Z,ee])=>{const{value:Y}=ee;return K[Z]=typeof Y=="symbol"?$T(Y):Y,K},{}):{}}catch(K){w.error("Failed to parse CMSD-Static response header value:",K)}var F}function $(L){try{const K=(F=L)?function(ee,Y){try{const{src:se,value:ue}=function(me,ve){const J=[];for(;me.length>0;){const H=jT(me,ve);if(J.push(H.value),(me=H.src.trim()).length===0)return Jr(J,me);if(me[0]!==","||(me=me.substring(1).trim()).length===0||me[0]===",")throw fr(me,Uf)}return Jr(J,me)}(ee.trim(),Y);if(se!=="")throw fr(se,Uf);return ue}catch(se){throw fr(ee,Uf,se)}}(F):[],Z=K[K.length-1];return(Z==null?void 0:Z.params)||{}}catch(K){return w.error("Failed to parse CMSD-Dynamic response header value:",K),{}}var F}function q(L){return KO[L]||$f.OTHER}function k(L,F,K){const Z=L===iS?I:R,ee=Z[F]||{},Y=Z[Sp]||{};return ee[K]||Y[K]}return b={setConfig:function(){},initialize:function(){},reset:function(){M()},parseResponseHeaders:function(L,F){let K=null,Z=null;for(const Y in L){const se=L[Y];switch(Y){case GO:K=N(se),y.trigger(f.default.CMSD_STATIC_HEADER,K);break;case HO:Z||(Z=$(se))}}let ee=Sp;return K&&K.ot?ee=K.ot:F&&(ee=q(F)),D(I[ee]),D(R[ee]),K&&(I[ee]=Object.assign(I[ee]||{},K)),Z&&(R[ee]=Object.assign(R[ee]||{},Z)),{static:K,dynamic:Z}},getMaxBitrate:function(L){let F=q(L);return k(qc,F,"mb")||-1},getEstimatedThroughput:function(L){let F=q(L);return k(qc,F,"etp")||null},getResponseDelay:function(L){let F=q(L);return k(qc,F,"rd")||null},getRoundTripTime:function(L){let F=q(L);return k(qc,F,"rtt")||null}},w=(0,l.default)(v).getInstance().getLogger(b),M(),b}aS.__dashjs_factory_name="CmsdModel";var sS=r.default.getSingletonFactory(aS),xp=t(1926);function oS(){let v,y;function b(){y={}}return v={reset:function(){b()},processResponseHeaders:function(w){if(!(w&&w.headers&&w.request&&w.request.url))return;const I=w.headers[h.default.COMMON_ACCESS_TOKEN_HEADER];if(I){const R=st.default.getHostFromUrl(w.request.url);R&&(y[R]=I)}},getCommonAccessTokenForUrl:function(w){if(!w)return null;const I=st.default.getHostFromUrl(w);return I?y[I]?y[I]:null:void 0}},b(),v}oS.__dashjs_factory_name="CommonAccessTokenController";var YO=r.default.getSingletonFactory(oS);function lS(){let v,y;return v={setConfig:function(b){b&&b.serviceDescriptionController&&(y=b.serviceDescriptionController)},isAdaptationsIncluded:function(b){var I;const{adaptationSetsArray:w}=((I=y==null?void 0:y.getServiceDescriptionSettings())==null?void 0:I.clientDataReporting)??{};return!w||(w==null?void 0:w.length)===0||w.includes(b)},isServiceLocationIncluded:function(b,w){var R;if(b===he.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:I}=((R=y==null?void 0:y.getServiceDescriptionSettings())==null?void 0:R.clientDataReporting)??{};return!I||(I==null?void 0:I.length)===0||I.includes(w)}},v}lS.__dashjs_factory_name="ClientDataReportingController";var uS=r.default.getSingletonFactory(lS);function cS(){let v,y,b;const w=this.context;function I(R,M,D,N,$){var k;const q=function(L,F){let K=[];return K=F===xe.default.PERIOD?L[xe.default.SUPPLEMENTAL_PROPERTY]||[]:[...L[xe.default.ESSENTIAL_PROPERTY]||[],...L[xe.default.SUPPLEMENTAL_PROPERTY]||[]],K.find(Z=>Z.schemeIdUri===h.default.URL_QUERY_INFO_SCHEME&&Z.UrlQueryInfo||Z.schemeIdUri===h.default.EXT_URL_QUERY_INFO_SCHEME&&Z.ExtUrlQueryInfo)}(M,$);(function(L,F,K,Z){K.initialQueryString="";let ee="";const Y=(L==null?void 0:L.ExtUrlQueryInfo)||(L==null?void 0:L.UrlQueryInfo);ee=Y&&Y.queryString?F&&F.length>0?F+"&"+Y.queryString:Y.queryString:F,(Y==null?void 0:Y.useMPDUrlQuery)==="true"&&Z&&(ee=ee?ee+"&"+Z:Z),K.initialQueryString=ee})(q,N.initialQueryString,R,D),function(L,F,K){var ee,Y;if(!L)return void(F.finalQueryString=K);const Z=((ee=L==null?void 0:L.ExtUrlQueryInfo)==null?void 0:ee.queryTemplate)||((Y=L==null?void 0:L.UrlQueryInfo)==null?void 0:Y.queryTemplate)||"";F.finalQueryString=Z===xe.default.QUERY_PART?F==null?void 0:F.initialQueryString:""}(q,R,N.finalQueryString),R.sameOriginOnly=(k=q==null?void 0:q.ExtUrlQueryInfo)==null?void 0:k.sameOriginOnly,R.queryParams=st.default.parseQueryParams(R==null?void 0:R.finalQueryString),R.includeInRequests=function(L,F){var K;return L?(K=L.ExtUrlQueryInfo)!=null&&K.includeInRequests?L.ExtUrlQueryInfo.includeInRequests.split(" "):[xe.default.SEGMENT_TYPE]:F}(q,N.includeInRequests)}return y=(0,l.default)(w).getInstance().getLogger(v),v={getFinalQueryString:function(R){try{if(!b)return null;if(R.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE||R.type===he.HTTPRequest.INIT_SEGMENT_TYPE){const M=R.representation;if(!M)return null;const D=M.adaptation,N=D.period,$=b.period[N.index].adaptation[D.index].representation[M.index],q=new URL(R.url),k=!$.sameOriginOnly||b.origin===q.origin;if($.includeInRequests.includes(xe.default.SEGMENT_TYPE)&&k)return $.queryParams}else if(R.type===he.HTTPRequest.MPD_TYPE){if([xe.default.MPD_TYPE,xe.default.MPD_PATCH_TYPE].some(M=>b.includeInRequests.includes(M)))return b.queryParams}else if(R.type===he.HTTPRequest.CONTENT_STEERING_TYPE&&b.includeInRequests.includes(xe.default.STEERING_TYPE))return b.queryParams}catch(M){return y.error(M),null}},createFinalQueryStrings:function(R){b={origin:new URL(R.url).origin,period:[]};const M=R.url.split("?")[1];I(b,R,M,{initialQueryString:"",includeInRequests:[]},xe.default.MPD),R.Period.forEach(D=>{const N={adaptation:[]};I(N,D,M,b,xe.default.PERIOD),D.AdaptationSet.forEach($=>{const q={representation:[]};I(q,$,M,N,xe.default.ADAPTATION_SET),$.Representation.forEach(k=>{const L={};I(L,k,M,q,xe.default.REPRESENTATION),q.representation.push(L)}),N.adaptation.push(q)}),b.period.push(N)})}},v}cS.__dashjs_factory_name="ExtUrlQueryInfoController";var dS=r.default.getSingletonFactory(cS),wp=class{constructor(v){this.url=v.url,this.method=v.method,this.responseType=v.responseType!==void 0?v.responseType:null,this.headers=v.headers!==void 0?v.headers:{},this.credentials=v.credentials!==void 0?v.credentials:null,this.mode=v.mode!==void 0?v.mode:null,this.timeout=v.timeout!==void 0?v.timeout:0,this.cmcd=v.cmcd!==void 0?v.cmcd:null,this.customData=v.customData!==void 0?v.customData:null}},_p=class{constructor(v){this.request=v.request,this.url=v.url!==void 0?v.url:null,this.redirected=v.redirected!==void 0&&v.redirected,this.status=v.status!==void 0?v.status:null,this.statusText=v.statusText!==void 0?v.statusText:"",this.type=v.type!==void 0?v.type:"",this.headers=v.headers!==void 0?v.headers:{},this.data=v.data!==void 0?v.data:null,this.resourceTiming=v.resourceTiming!==void 0?v.resourceTiming:null}};function fS(v){v=v||{};const y=this.context,b=v.errHandler,w=v.dashMetrics,I=v.mediaPlayerModel,R=v.boxParser,M=v.errors,D=v.requestTimeout||0,N=(0,m.default)(y).getInstance(),$=(0,u.default)(y).getInstance();let q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H;function B(G,be){const re=function(){Fe()},we=function(kt){const nn=new Date;ge&&(ge=!1,(!kt.lengthComputable||kt.lengthComputable&&kt.total!==kt.loaded)&&(ae.firstByteDate=nn,De.resourceTiming.responseStart=nn.getTime())),kt.lengthComputable&&(ae.bytesLoaded=De.length=kt.loaded,ae.bytesTotal=De.resourceTiming.encodedBodySize=kt.total,De.length=kt.total,De.resourceTiming.encodedBodySize=kt.loaded),kt.noTrace||(oe.push({s:ye,d:kt.time?kt.time:nn.getTime()-ye.getTime(),b:[kt.loaded?kt.loaded-Te:0],t:kt.throughput}),ae.traces=oe,ye=nn,Te=kt.loaded),Ae&&(clearTimeout(Ae),Ae=null),$.get().streaming.fragmentRequestProgressTimeout>0&&(Ae=setTimeout(function(){H.warn("Abort request "+Oe.url+" due to progress timeout"),ot.abort(Oe),re()},$.get().streaming.fragmentRequestProgressTimeout)),G.progress&&kt&&G.progress(kt)},Ee=function(){Fe(!0)},Ie=function(kt){let nn;if(kt.lengthComputable){let fn=kt.loaded/kt.total*100;nn="Request timeout: loaded: "+kt.loaded+", out of: "+kt.total+" : "+fn.toFixed(3)+"% Completed"}else nn="Request timeout: non-computable download size";H.warn(nn)},Fe=function(kt=!1){k.indexOf(Oe)!==-1&&k.splice(k.indexOf(Oe),1),Ae&&(clearTimeout(Ae),Ae=null),me.processResponseHeaders(De),Ce(),Q(),function(nn){const fn=ue.getResponseInterceptors();return fn?fn.reduce((Ln,Mn)=>Ln.then(wn=>Mn(wn)),Promise.resolve(nn)):Promise.resolve(nn)}(De).then(nn=>{if(De=nn,function(fn,Ln,Mn){const wn=fn.customData.request,bn=$.get().streaming.cmsd&&$.get().streaming.cmsd.enabled?ee.parseResponseHeaders(Ln.headers,wn.mediaType):null;w.addHttpRequest(wn,Ln.url,Ln.status,Ln.headers,Mn,bn)}(Oe,De,oe),kt)G.abort&&G.abort(ae);else if(ae.type===he.HTTPRequest.MPD_TYPE&&(w.addManifestUpdate(ae),N.trigger(f.default.MANIFEST_LOADING_FINISHED,{requestObject:ae})),De.status>=200&&De.status<=299&&De.data)G.success&&G.success(De.data,De.statusText,De.url),G.complete&&G.complete(ae,De.statusText);else{try{De.status===404&&$.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ae.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE&&I.getRetryAttemptsForType(he.HTTPRequest.MEDIA_SEGMENT_TYPE)===be&&N.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch{}fe()}})},Ce=function(){ae.startDate=V,ae.endDate=new Date,ae.firstByteDate=ae.firstByteDate||V},Q=function(){De.resourceTiming.responseEnd=Date.now(),function(kt,nn){var wn;if(!$.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||kt.range)return;const fn=(wn=performance.getEntriesByType)==null?void 0:wn.call(performance,"resource");if(fn===void 0||fn.length<=0)return;let Ln=0,Mn=null;for(;Ln<fn.length;){if(fn[Ln].name===kt.url){Mn=fn[Ln];break}Ln+=1}(function(bn){return bn&&!isNaN(bn.responseStart)&&bn.responseStart>0&&!isNaN(bn.responseEnd)&&bn.responseEnd>0&&!isNaN(bn.transferSize)&&bn.transferSize>0})(Mn)&&(kt.customData.request.resourceTimingValues=Mn,nn.resourceTiming.startTime=Mn.startTime,nn.resourceTiming.encodedBodySize=Mn.encodedBodySize,nn.resourceTiming.responseStart=Mn.startTime,nn.resourceTiming.responseEnd=Mn.responseEnd,nn.resourceTiming.duration=Mn.duration)}(Oe,De)},ne=function(kt,nn,fn){return new Promise(Ln=>{(function(Mn){const wn=ue.getRequestInterceptors();return wn?wn.reduce((bn,Je)=>bn.then(Tt=>Je(Tt)),Promise.resolve(Mn)):Promise.resolve(Mn)})(nn).then(Mn=>{(nn=Mn).customData.onloadend=re,nn.customData.onprogress=we,nn.customData.onabort=Ee,nn.customData.ontimeout=Ie,fn.resourceTiming.startTime=Date.now(),kt.load(nn,fn),Ln()})})},fe=function(){if(be>0){be--,G&&G.request&&(G.request.retryAttempts+=1);let kt={config:G};F.push(kt),kt.timeout=setTimeout(function(){F.indexOf(kt)!==-1&&(F.splice(F.indexOf(kt),1),B(G,be))},I.getRetryIntervalsForType(ae.type))}else{if(ae.type===he.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;b.error(new Yt.default(K[ae.type],ae.url+" is not available",{request:ae,response:De})),G.error&&G.error(ae,"error",De.statusText,De),G.complete&&G.complete(ae,De.statusText)}},ae=G.request,oe=[];let ge,V,ye,Te,Ae,Oe,De;if(ae.bytesLoaded=NaN,ae.bytesTotal=NaN,ae.firstByteDate=null,ae.traces=[],ge=!0,V=new Date,ye=V,Te=0,Ae=null,!w||!b)throw new Error("config object is not correct or missing");const Ge=function(kt){let nn,fn;return!kt.isPartialSegmentRequest&&kt.hasOwnProperty("availabilityTimeComplete")&&kt.availabilityTimeComplete===!1&&window.fetch&&kt.responseType==="arraybuffer"&&kt.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE?(se||(se=Wn(y).create(),se.setConfig({dashMetrics:w,boxParser:R})),nn=se,fn=h.default.FILE_LOADER_TYPES.FETCH):(Y||(Y=an(y).create()),nn=Y,fn=h.default.FILE_LOADER_TYPES.XHR),{loader:nn,fileLoaderType:fn}}(ae),ot=Ge.loader;var Et;ae.fileLoaderType=Ge.fileLoaderType,ae.headers={},function(kt){var Ln,Mn;const nn=kt==null?void 0:kt.serviceLocation,fn=(Mn=(Ln=kt==null?void 0:kt.mediaInfo)==null?void 0:Ln.id)==null?void 0:Mn.toString();if(ve.isServiceLocationIncluded(kt.type,nn)&&ve.isAdaptationsIncluded(fn)&&Z.isCmcdEnabled()){const wn=Z.getCmcdParametersFromManifest(),bn=wn.mode?wn.mode:$.get().streaming.cmcd.mode;if(bn===h.default.CMCD_MODE_QUERY){kt.url=st.default.removeQueryParameterFromUrl(kt.url,h.default.CMCD_QUERY_KEY);const Je=function(Tt){try{const vt=[],At=Z.getQueryParameter(Tt);return At&&vt.push(At),vt}catch{return[]}}(kt);kt.url=st.default.addAdditionalQueryParameterToUrl(kt.url,Je)}else bn===h.default.CMCD_MODE_HEADER&&(kt.headers=Object.assign(kt.headers,Z.getHeaderParameters(kt)))}}(Et=ae),Et.retryAttempts===0&&function(kt){let nn=J.getFinalQueryString(kt);nn&&(kt.url=st.default.addAdditionalQueryParameterToUrl(kt.url,nn))}(Et),function(kt){if(kt.queryParams){const nn=Object.keys(kt.queryParams).map(fn=>({key:fn,value:kt.queryParams[fn]}));kt.url=st.default.addAdditionalQueryParameterToUrl(kt.url,nn)}}(Et),function(kt){const nn=me.getCommonAccessTokenForUrl(kt.url);nn&&(kt.headers[h.default.COMMON_ACCESS_TOKEN_HEADER]=nn)}(Et),ae.range&&(ae.headers.Range="bytes="+ae.range);const xt=ue.getXHRWithCredentialsForType(ae.type);Oe=new wp({url:ae.url,method:he.HTTPRequest.GET,responseType:ae.responseType,headers:ae.headers,credentials:xt?"include":"omit",timeout:D,cmcd:Z.getCmcdData(ae),customData:{request:ae}}),De=new _p({request:Oe,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let tn=new Date().getTime();if(isNaN(ae.delayLoadingTime)||tn>=ae.delayLoadingTime)return k.push(Oe),ne(ot,Oe,De);{let kt={httpRequest:Oe,httpResponse:De};return L.push(kt),kt.delayTimeout=setTimeout(function(){if(L.indexOf(kt)!==-1){L.splice(L.indexOf(kt),1);try{V=new Date,ye=V,k.push(kt.httpRequest),ne(ot,kt.httpRequest,kt.httpResponse)}catch{kt.httpRequest.onloadend()}}},ae.delayLoadingTime-tn),Promise.resolve()}}return q={abort:function(){F.forEach(G=>{clearTimeout(G.timeout),G.config.request&&G.config.abort&&G.config.abort(G.config.request)}),F=[],L.forEach(G=>clearTimeout(G.delayTimeout)),L=[],k.forEach(G=>{const be=G.customData;be&&(be.request&&be.request.type===he.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(be.onloadend=be.onprogress=void 0,be.abort&&be.abort()))}),k=[]},load:function(G){return G.request?B(G,I.getRetryAttemptsForType(G.request.type)):(G.error&&G.error(G.request,"error"),Promise.resolve())},reset:function(){k=[],L=[],F=[],Y&&Y.reset(),se&&se.reset(),Y=null,se=null},resetInitialSettings:function(){Y&&Y.resetInitialSettings()},setConfig:function(G){G&&(G.commonAccessTokenController&&(me=G.commonAccessTokenController),G.extUrlQueryInfoController&&(J=G.extUrlQueryInfoController))}},H=(0,l.default)(y).getInstance().getLogger(q),k=[],L=[],F=[],Z=rS(y).getInstance(),ve=uS(y).getInstance(),ee=sS(y).getInstance(),ue=(0,xp.default)(y).getInstance(),me=YO(y).getInstance(),J=dS(y).getInstance(),K={[he.HTTPRequest.MPD_TYPE]:M.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[he.HTTPRequest.XLINK_EXPANSION_TYPE]:M.DOWNLOAD_ERROR_ID_XLINK_CODE,[he.HTTPRequest.INIT_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[he.HTTPRequest.MEDIA_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[he.HTTPRequest.INDEX_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[he.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE,[he.HTTPRequest.OTHER_TYPE]:M.DOWNLOAD_ERROR_ID_CONTENT_CODE},q}fS.__dashjs_factory_name="HTTPLoader";var WO=r.default.getClassFactory(fS);function hS(){let v,y;function b(){y={}}function w(){b()}return w(),v={getLoader:function(I){for(var R in y)if(y.hasOwnProperty(R)&&I.startsWith(R))return y[R];return WO},registerLoader:function(I,R){y[I]=R},unregisterLoader:function(I){y[I]&&delete y[I]},unregisterAllLoader:b,reset:w},v}hS.__dashjs_factory_name="SchemeLoaderFactory";var mS=r.default.getSingletonFactory(hS);function gS(v){v=v||{};const y=this.context;let b,w,I;return w=mS(y).getInstance(),b={abort:function(){I&&I.abort()},load:function(R){I||(I=w.getLoader(R&&R.request?R.request.url:null)(y).create({errHandler:v.errHandler,mediaPlayerModel:v.mediaPlayerModel,dashMetrics:v.dashMetrics,boxParser:v.boxParser?v.boxParser:null,constants:v.constants?v.constants:null,dashConstants:v.dashConstants?v.dashConstants:null,urlUtils:v.urlUtils?v.urlUtils:null,requestTimeout:isNaN(v.requestTimeout)?0:v.requestTimeout,errors:v.errors})),I.load(R)},reset:function(){w&&(w.reset(),w=null),I&&typeof I.reset=="function"&&I.reset(),I=null},resetInitialSettings:function(){I&&typeof I.resetInitialSettings=="function"&&I.resetInitialSettings()}},b}gS.__dashjs_factory_name="URLLoader";var nu=r.default.getClassFactory(gS),QO=class{constructor(v){this.url=v||null,this.type=he.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},XO=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function pS(){const v=this.context,y=or(v).getInstance();let b,w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y;function se(Ee){ve(Ee,"baseUrl")}function ue(Ee){ve(Ee,"location")}function me(Ee){var Ie,Fe;Ee&&Ee.throughputValues&&Ee.throughputValues.serviceLocation&&(Ie=Ee.throughputValues.serviceLocation,Fe=Ee.throughputValues,Z[Ie]||(Z[Ie]=[]),Z[Ie].push(Fe),Z[Ie].length>4&&Z[Ie].shift())}function ve(Ee,Ie){if(Ee&&Ee.request&&Ee.request.serviceLocation){const Fe=Ee.request.serviceLocation;F[Ie].all.indexOf(Fe)===-1&&F[Ie].all.push(Fe),F[Ie].current=Fe}}function J(){const Ee=$.getValue();let Ie=b.getContentSteering(Ee);return Ie||(Ie=L.getServiceDescriptionSettings().contentSteering),!Ie&&w&&(Ie=w),w=Ie,Ie}function H(){return new Promise(Ee=>{try{const Ie=J();if(!Ie||!Ie.serverUrl)return void Ee();const Fe=function(Q){let ne=Q.serverUrl;I&&I.reloadUri&&(ne=y.isRelative(I.reloadUri)?y.resolve(I.reloadUri,Q.serverUrl):I.reloadUri);const fe=[],ae=F.baseUrl.all.concat(F.location.all);if(ae.length>0){const oe=ae.map(ye=>{const Te=function(Ae){if(!Ae||!Z[Ae]||Z[Ae].length===0)return-1;const Oe=K.getArithmeticMean(Z[Ae],Z[Ae].length,!0);return parseInt(1e3*Oe)}(ye);return{serviceLocation:ye,throughput:Te}});let ge="",V="";oe.forEach((ye,Te)=>{Te!==0&&(ge+=",",V+=","),ge+=ye.serviceLocation,V+=ye.throughput>-1?ye.throughput:""}),fe.push({key:"_DASH_pathway",value:`"${ge}"`}),fe.push({key:"_DASH_throughput",value:V})}return ne=st.default.addAdditionalQueryParameterToUrl(ne,fe),ne}(Ie),Ce=new QO(Fe);ee.load({request:Ce,success:Q=>{(function(ne){ne&&ne[xe.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ne[xe.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(I=new XO,I.version=ne[xe.default.CONTENT_STEERING_RESPONSE.VERSION],ne[xe.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ne[xe.default.CONTENT_STEERING_RESPONSE.TTL])&&(I.ttl=ne[xe.default.CONTENT_STEERING_RESPONSE.TTL]),ne[xe.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(I.reloadUri=ne[xe.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ne[xe.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(I.pathwayPriority=ne[xe.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ne[xe.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(I.pathwayClones=ne[xe.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],I.pathwayClones=I.pathwayClones.filter(fe=>function(ae){return ae[xe.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&ae[xe.default.CONTENT_STEERING_RESPONSE.ID]&&ae[xe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ae[xe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][xe.default.CONTENT_STEERING_RESPONSE.HOST]}(fe))),be())})(Q),D.trigger(g.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:I,url:Fe}),Ee()},error:(Q,ne,fe,ae)=>{(function(oe,ge){try{switch(N.warn("Error fetching data from content steering server",oe),ge.status){case 404:case 410:w=null;break;case 429:const V=ge&&ge.getResponseHeader?ge.getResponseHeader("retry-after"):null;V!==null&&(I||(I={}),I.ttl=parseInt(V)),be();break;default:be()}}catch(V){N.error(V)}})(Q,ae),Ee(Q)},complete:()=>{F.baseUrl.all=B(F.baseUrl),F.location.all=B(F.location)}})}catch(Ie){Ee(Ie)}})}function B(Ee){return Ee.all&&Ee.all.length!==0&&Ee.current?Ee.all.filter(Ie=>Ie===Ee.current):[]}function G(Ee){try{const Ie=[];return Ee&&Ee.length!==0&&I&&I.pathwayClones&&I.pathwayClones.length!==0&&I.pathwayClones.forEach(Fe=>{let Ce=Ee.filter(ne=>Fe[xe.default.CONTENT_STEERING_RESPONSE.BASE_ID]===ne.serviceLocation),Q=null;if(Ce&&Ce.length>0&&(Q=Ce[0]),Q){const ne=new URL(Q.url);let fe=Fe[xe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][xe.default.CONTENT_STEERING_RESPONSE.HOST];fe=st.default.stringHasProtocol(fe)?fe:`${ne.protocol}//${fe}`;const ae={synthesizedUrl:`${fe}${ne.pathname}`,serviceLocation:Fe[xe.default.CONTENT_STEERING_RESPONSE.ID],queryParams:Fe[xe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][xe.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:Q};Ie.push(ae)}}),Ie}catch(Ie){return N.error(Ie),[]}}function be(){I&&I.ttl&&!isNaN(I.ttl)&&(k&&clearTimeout(k),k=setTimeout(()=>{H()},1e3*I.ttl))}function re(){k&&clearTimeout(k),k=null}function we(){I=null,w=null,Z={},F={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},re()}return Y={reset:function(){we(),D.off(g.default.FRAGMENT_LOADING_STARTED,se,Y),D.off(g.default.MANIFEST_LOADING_STARTED,ue,Y),D.off(g.default.THROUGHPUT_MEASUREMENT_STORED,me,Y)},setConfig:function(Ee){Ee&&(Ee.adapter&&(b=Ee.adapter),Ee.errHandler&&(M=Ee.errHandler),Ee.dashMetrics&&(R=Ee.dashMetrics),Ee.mediaPlayerModel&&(q=Ee.mediaPlayerModel),Ee.manifestModel&&($=Ee.manifestModel),Ee.serviceDescriptionController&&(L=Ee.serviceDescriptionController),Ee.throughputController&&(K=Ee.throughputController),Ee.eventBus&&(D=Ee.eventBus))},loadSteeringData:H,getCurrentSteeringResponseData:function(){return I},shouldQueryBeforeStart:function(){const Ee=J();return!!Ee&&Ee.queryBeforeStart},getSteeringDataFromManifest:J,stopSteeringRequestTimer:re,getSynthesizedBaseUrlElements:function(Ee){try{return G(Ee).map(Ie=>{const Fe=new kr(Ie.synthesizedUrl,Ie.serviceLocation);return Fe.queryParams=Ie.queryParams,Fe.dvbPriority=Ie.reference.dvbPriority,Fe.dvbWeight=Ie.reference.dvbWeight,Fe.availabilityTimeOffset=Ie.reference.availabilityTimeOffset,Fe.availabilityTimeComplete=Ie.reference.availabilityTimeComplete,Fe})}catch(Ie){return N.error(Ie),[]}},getSynthesizedLocationElements:function(Ee){try{return G(Ee).map(Ie=>{const Fe=new Oc(Ie.synthesizedUrl,Ie.serviceLocation);return Fe.queryParams=Ie.queryParams,Fe})}catch(Ie){return N.error(Ie),[]}},initialize:function(){ee=nu(v).create({errHandler:M,dashMetrics:R,mediaPlayerModel:q,errors:en}),D.on(g.default.FRAGMENT_LOADING_STARTED,se,Y),D.on(g.default.MANIFEST_LOADING_STARTED,ue,Y),D.on(g.default.THROUGHPUT_MEASUREMENT_STORED,me,Y)}},N=(0,l.default)(v).getInstance().getLogger(Y),we(),Y}pS.__dashjs_factory_name="ContentSteeringController";var Ip=r.default.getSingletonFactory(pS);function yS(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R=[];function M(N=[],$=[]){let q=0,k=NaN;for(;q<N.length;){const L=N[q],F=$.findIndex(K=>K.serviceLocation&&K.serviceLocation===L);if(F!==-1&&!I.contains($[F].serviceLocation)){k=F;break}q+=1}return k}function D(N){const $=w.getCurrentSteeringResponseData();if(!$)return;const q=N.entry,k=setTimeout(()=>{I.remove(q),R.splice(R.indexOf(k,1))},1e3*$.ttl);R.push(k)}return b={selectBaseUrlIndex:function(N){let $=NaN;if(isNaN(N.selectedIdx)){const k=w.getSteeringDataFromManifest();k&&k.defaultServiceLocationArray.length>0&&($=M(k.defaultServiceLocationArray,N.baseUrls))}const q=w.getCurrentSteeringResponseData();return N.baseUrls&&N.baseUrls.length&&q&&q.pathwayPriority&&q.pathwayPriority.length&&($=M(q.pathwayPriority,N.baseUrls)),$},setConfig:function(N){N.blacklistController&&(I=N.blacklistController),N.contentSteeringController&&(w=N.contentSteeringController),y.on(N.addBlacklistEventName,D,b)},reset:function(){R.forEach(N=>clearTimeout(N)),R=[]}},w=Ip(v).getInstance(),b}yS.__dashjs_factory_name="ContentSteeringSelector";var ZO=r.default.getClassFactory(yS);function vS(){const v=this.context,y=(0,m.default)(v).getInstance(),b=(0,u.default)(v).getInstance();let w,I,R,M,D,N;function $(){D.reset(),I.reset()}return w={chooseSelector:function(q){(0,ht.checkParameterType)(q,"boolean"),N=q?M:R},select:function(q){if(!q)return;if(b.get().streaming.applyContentSteering){const L=D.selectBaseUrlIndex(q);isNaN(L)||L===-1||(q.selectedIdx=L)}if(!isNaN(q.selectedIdx))return q.baseUrls[q.selectedIdx];let k=N.select(q.baseUrls);return k?(q.selectedIdx=q.baseUrls.indexOf(k),k):(y.trigger(f.default.URL_RESOLUTION_FAILED,{error:new Yt.default(en.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,en.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(N===R&&$()))},reset:$,setConfig:function(q){q.selector&&(N=q.selector),q.contentSteeringSelector&&(D=q.contentSteeringSelector)}},I=Jt(v).create({updateEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),R=Fn(v).create({blacklistController:I}),M=hn(v).create({blacklistController:I}),D=ZO(v).create(),D.setConfig({blacklistController:I,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),N=R,w}vS.__dashjs_factory_name="BaseURLSelector";var JO=r.default.getClassFactory(vS);function ES(){let v,y;const b=this.context,w=(0,m.default)(b).getInstance(),I=or(b).getInstance();let R,M,D;function N(q){R.update(q),M.chooseSelector(y.getIsDVB(q)),w.trigger(g.default.BASE_URLS_UPDATED,{baseUrls:$(q)})}function $(q){return R.getBaseUrls(q)}return v={reset:function(){R.reset(),M.reset()},initialize:function(q){R.setConfig({adapter:y,contentSteeringController:D}),N(q)},resolve:function(q){const k=R.getForPath(q).reduce((L,F)=>{const K=M.select(F);return K?(I.isRelative(K.url)?L.url=I.resolve(K.url,L.url):(L.url=K.url,L.serviceLocation=K.serviceLocation),L.availabilityTimeOffset=K.availabilityTimeOffset,L.availabilityTimeComplete=K.availabilityTimeComplete,L.queryParams=K.queryParams,L):new kr},new kr);if(!I.isRelative(k.url))return k},setConfig:function(q){q.baseURLTreeModel&&(R=q.baseURLTreeModel),q.baseURLSelector&&(M=q.baseURLSelector),q.adapter&&(y=q.adapter),q.contentSteeringController&&(D=q.contentSteeringController)},getBaseUrls:$,update:N},R=Dt(b).create(),M=JO(b).create(),w.on(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(q){R.invalidateSelectedIndexes(q.entry)},v),v}ES.__dashjs_factory_name="BaseURLController";var eF=r.default.getClassFactory(ES);class Ap{constructor(y){if(this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(let b=0;b<y.boxes.length;b++)this.boxes.push(new Ap(y.boxes[b]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(let b=0;b<y.references.length;b++){let w={reference_type:y.references[b].reference_type,referenced_size:y.references[b].referenced_size,subsegment_duration:y.references[b].subsegment_duration};this.references.push(w)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(let b=0,w=y.samples.length;b<w;b++){let I={sample_size:y.samples[b].sample_size,sample_duration:y.samples[b].sample_duration,sample_composition_time_offset:y.samples[b].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}getChildBox(y){for(let b=0;b<this.boxes.length;b++)if(this.boxes[b].type===y)return this.boxes[b]}getChildBoxes(y){let b=[];for(let w=0;w<this.boxes.length;w++)this.boxes[w].type===y&&b.push(this.boxes[w]);return b}}var tF=Ap;function bS(){let v,y;function b(I){let R=[];if(!I||!y||typeof y.fetchAll!="function")return R;let M,D=y.fetchAll(I);for(let N=0,$=D.length;N<$;N++)M=w(D[N]),M&&R.push(M);return R}function w(I){if(!I)return null;let R=new tF(I);return I.hasOwnProperty("_incomplete")&&(R.isComplete=!I._incomplete),R}return v={getBox:function(I){return I&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?w(y.fetch(I)):null},getBoxes:b,setData:function(I){y=I},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;let I=b(y.boxes[y.boxes.length-1].type);return I.length>0?I[I.length-1]:null}},v}bS.__dashjs_factory_name="IsoFile";var nF=r.default.getClassFactory(bS),Gc=t(6877),Rp=class{constructor({found:v,sizeOfLastCompletedBox:y,sizeOfLastFoundTargetBox:b,startOffsetOfLastCompletedBox:w,startOffsetOfLastFoundTargetBox:I,typeOfLastCompletedBox:R,typeOfLastTargetBox:M}){this.found=v!==void 0&&v,this.sizeOfLastCompletedBox=y!==void 0?y:0,this.sizeOfLastFoundTargetBox=b!==void 0?b:0,this.startOffsetOfLastCompletedBox=w!==void 0?w:0,this.startOffsetOfLastFoundTargetBox=I!==void 0?I:0,this.typeOfLastCompletedBox=R!==void 0?R:null,this.typeOfLastTargetBox=M!==void 0?M:null}};function TS(){let v,y,b=this.context;function w(M){if(!M)return null;M.fileStart===void 0&&(M.fileStart=0);let D=Gc.parseBuffer(M),N=nF(b).create();return N.setData(D),N}function I(M,D){return M[D+3]>>>0|M[D+2]<<8>>>0|M[D+1]<<16>>>0|M[D]<<24>>>0}function R(M,D){return String.fromCharCode(M[D++])+String.fromCharCode(M[D++])+String.fromCharCode(M[D++])+String.fromCharCode(M[D])}return y={findInitRange:function(M){let D,N,$=null;const q=w(M);if(!q)return $;const k=q.getBox("ftyp"),L=q.getBox("moov");return v.debug("Searching for initialization."),L&&L.isComplete&&(D=k?k.offset:L.offset,N=L.offset+L.size-1,$=D+"-"+N,v.debug("Found the initialization.  Range: "+$)),$},findLastTopIsoBoxCompleted:function(M,D,N){if(N===void 0&&(N=0),!D||N+8>=D.byteLength)return new Rp({found:!1});const $=D instanceof ArrayBuffer?new Uint8Array(D):D;let q,k=0,L=0,F=null;for(;N<$.byteLength;){const K=I($,N),Z=R($,N+4);if(K===0)break;N+K<=$.byteLength&&(M.indexOf(Z)>=0?q=new Rp({found:!0,startOffsetOfLastFoundTargetBox:N,sizeOfLastFoundTargetBox:K,typeOfLastTargetBox:Z}):(k=N,L=K,F=Z)),N+=K}return q||new Rp({found:!1,startOffsetOfLastCompletedBox:k,sizeOfLastCompletedBox:L,typeOfLastCompletedBox:F})},getMediaTimescaleFromMoov:function(M){let D=w(M),N=D?D.getBox("mdhd"):void 0;return N?N.timescale:NaN},getSamplesInfo:function(M){if(!M||M.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let D,N,$,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B=w(M),G=B.getBoxes("moof"),be=B.getBoxes("mfhd");J=B.getBoxes("moof").length,ve=be[be.length-1].sequence_number,$=0,L=[];let re=-1,we=-1;for(Y=0;Y<G.length;Y++){let Ee=G[Y],Ie=Ee.getChildBoxes("traf");for(Z=0;Z<Ie.length;Z++){let Fe=Ie[Z],Ce=Fe.getChildBox("tfhd"),Q=Fe.getChildBox("tfdt");k=Q.baseMediaDecodeTime;let ne=Fe.getChildBoxes("trun"),fe=Fe.getChildBoxes("subs");for(ee=0;ee<ne.length;ee++){let ae=ne[ee];for($=ae.sample_count,me=(Ce.base_data_offset||0)+(ae.data_offset||0),K=0;K<$;K++){F=ae.samples[K],D=F.sample_duration!==void 0?F.sample_duration:Ce.default_sample_duration,q=F.sample_size!==void 0?F.sample_size:Ce.default_sample_size,N=F.sample_composition_time_offset!==void 0?F.sample_composition_time_offset:0;let oe={dts:k,cts:k+N,duration:D,offset:Ee.offset+me,size:q,subSizes:[q]};if(fe)for(se=0;se<fe.length;se++){let ge=fe[se];if(re<ge.entry_count-1&&K>we&&(re++,we+=ge.entries[re].sample_delta),K==we){oe.subSizes=[];let V=ge.entries[re];for(ue=0;ue<V.subsample_count;ue++)oe.subSizes.push(V.subsamples[ue].subsample_size)}}L.push(oe),me+=q,k+=D}}H=k-Q.baseMediaDecodeTime}}return{sampleList:L,lastSequenceNumber:ve,totalDuration:H,numSequences:J}},parse:w},v=(0,l.default)(b).getInstance().getLogger(y),y}TS.__dashjs_factory_name="BoxParser";var qf=r.default.getSingletonFactory(TS),SS=t(559);const kp={0:void 0,1:{channels:1,lfe:0},2:{channels:2,lfe:0},3:{channels:3,lfe:0},4:{channels:4,lfe:0},5:{channels:5,lfe:0},6:{channels:5,lfe:1},7:{channels:7,lfe:1},8:{channels:2,lfe:0},9:{channels:3,lfe:0},10:{channels:4,lfe:0},11:{channels:6,lfe:1},12:{channels:7,lfe:1},13:{channels:22,lfe:2},14:{channels:7,lfe:1},15:{channels:10,lfe:2},16:{channels:9,lfe:1},17:{channels:11,lfe:1},18:{channels:13,lfe:1},19:{channels:11,lfe:1},20:{channels:13,lfe:1}};function xS(v){return v==0?0:v.toString(2).match(/1/g).length}function Cp(v,y){let b,w=parseInt("0x"+v,16),I=w&y[0],R=w&y[1];return b=xS(I)+2*xS(R),b}var wS=function(v,y=!1){let b;if(!v||!v.schemeIdUri||!v.value)return;const w=v.schemeIdUri,I=v.value;return w==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||w==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?b=kp[I]&&kp[I].channels+(y?kp[I].lfe:0):w==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?b=function(R,M){if(R.length===4)return Cp(R,[63880+(M?6:0),1648])}(I,y):w==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?b=function(R,M){if(R.length===6)return R==="800000"?24:Cp(R,[56834+(M?4160:0),205245])}(I,y):w==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?b=parseInt(I):w==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(b=function(R,M){if(!(R.length>8))return Cp(R,[4294901727+(M?65568:0),0])}(I,y)),b};function _S(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N;function $(Y,se,ue,me=void 0){const ve=k(Y,se,ue,me);return I.isCodecSupportedBasedOnTestedConfigurations(ve,Y)}function q(Y,se,ue,me,ve,J=void 0){const H=k(Y,se,ue,J),B=JSON.stringify(H);me.has(B)||(me.add(B),ve.push(H))}function k(Y,se,ue,me){let ve=null;switch(Y){case h.default.VIDEO:ve=function(J,H,B){let G={codec:H,width:J&&J.width||null,height:J&&J.height||null,framerate:w.getFramerate(J)||null,bitrate:J&&J.bandwidth||null,isSupported:!0};if(J.tagName===xe.default.PRESELECTION&&B&&(G.width||(G.width=B.width||null),G.height||(G.height=B.height||null),G.bitrate||(G.bitrate=B.bandwidth||null),G.framerate||(G.framerate=w.getFramerate(B)||null)),R.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(Object.assign(G,F(J)),J.tagName===xe.default.PRESELECTION&&B)){let we=F(B),Ee=we.isSupported;delete we.isSupported,G.isSupported=G.isSupported&&Ee,L(G,we)}let be=G.isSupported;if(R.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(Object.assign(G,K(J)),J.tagName===xe.default.PRESELECTION&&B)){let we=K(B),Ee=we.isSupported;delete we.isSupported,G.isSupported=G.isSupported&&Ee,L(G,we)}let re=G.isSupported;return be&&re||(G.isSupported=!1),G}(se,ue,me);break;case h.default.AUDIO:ve=function(J,H,B){let G={codec:H,samplerate:J&&J.audioSamplingRate||null,bitrate:J&&J.bandwidth||null,isSupported:!0};return J.tagName===xe.default.PRESELECTION&&B&&(G.samplerate||(G.samplerate=B.audioSamplingRate||null),G.bitrate||(G.bitrate=B.bandwidth||null)),R.get().streaming.capabilities.filterAudioChannelConfiguration&&Object.assign(G,function(be,re){let we=be[xe.default.AUDIO_CHANNEL_CONFIGURATION]||[],Ee=null;we.length==0&&re&&(we=re[xe.default.AUDIO_CHANNEL_CONFIGURATION]||[]);const Ie=we.map(Fe=>wS(Fe,!0));return Ie.every(Fe=>Fe==Ie[0])&&(Ee=Ie[0]),{channels:Ee}}(J,B)),G}(se,ue,me);break;default:return ve}return me&&(ve=Z(me,ve)),Z(se,ve)}function L(Y,se){for(const ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&!(ue in Y)&&(Y[ue]=se[ue]);return Y}function F(Y){let se={colorGamut:null,transferFunction:null,isSupported:!0};for(const ue of Y.EssentialProperty||[])ue.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(ue.value.toString())?se.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:ue.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(ue.value.toString())?se.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:ue.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(ue.value.toString())?se.colorGamut=h.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:ue.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(ue.value.toString())?se.colorGamut=null:ue.schemeIdUri===h.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(se.isSupported=!1),ue.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(ue.value.toString())?se.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:ue.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(ue.value.toString())?se.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:ue.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(ue.value.toString())?se.transferFunction=h.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:ue.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(ue.value.toString())?se.transferFunction=null:ue.schemeIdUri===h.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(se.isSupported=!1);return se}function K(Y){let se={isSupported:!0,hdrMetadataType:null};for(const ue of Y.EssentialProperty||[])ue.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ue.value===h.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?se.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:ue.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ue.value===h.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?se.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:ue.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ue.value===h.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?se.hdrMetadataType=h.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:ue.schemeIdUri===h.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(se.isSupported=!1);return se}function Z(Y,se){return D&&Y&&Y[xe.default.CONTENT_PROTECTION]&&Y[xe.default.CONTENT_PROTECTION].length>0&&(se.keySystemsMetadata=D.getSupportedKeySystemMetadataFromContentProtection(Y[xe.default.CONTENT_PROTECTION])),se}function ee(Y){if(!Y||Y.length===0)return!0;let se=0;for(;se<Y.length;){if(!I.supportsEssentialProperty(Y[se]))return N.debug("[Stream] EssentialProperty not supported: "+Y[se].schemeIdUri),!1;se+=1}return!0}return b={setConfig:function(Y){Y&&(Y.adapter&&(w=Y.adapter),Y.capabilities&&(I=Y.capabilities),Y.settings&&(R=Y.settings),Y.protectionController&&(D=Y.protectionController),Y.customParametersModel&&(M=Y.customParametersModel))},filterUnsupportedFeatures:function(Y){return new Promise(se=>{const ue=[h.default.VIDEO,h.default.AUDIO],me=[];ue.forEach(ve=>{(function(H,B){if(!H||!H.Period||H.Period.length===0)return[];const G=new Set,be=[];return H.Period.forEach(re=>{re.AdaptationSet.forEach(we=>{w.getIsTypeOf(we,B)&&we.Representation.forEach((Ee,Ie)=>{const Fe=w.getCodec(we,Ie,!1);q(B,Ee,Fe,G,be);const Ce=w.getSupplementalCodecs(Ee);Ce.length>0&&q(B,Ee,Ce[0],G,be)})}),re.Preselection&&re.Preselection.length&&re.Preselection.forEach(we=>{if(w.getPreselectionIsTypeOf(we,re.AdaptationSet,B)){const Ee=w.getCodecForPreselection(we,re.AdaptationSet),Ie=w.getCommonRepresentationForPreselection(we,re.AdaptationSet);q(B,we,Ee,G,be,Ie)}})}),be})(Y,ve).forEach(H=>{me.push(I.runCodecSupportCheck(H,ve))})}),Promise.allSettled(me).then(()=>(ue.forEach(ve=>{(function(J,H){H&&H.Period&&H.Period.length!==0&&H.Period.forEach(B=>{(function(G,be){G&&G.AdaptationSet&&G.AdaptationSet.length!==0&&(G.AdaptationSet=G.AdaptationSet.filter(re=>{w.getIsTypeOf(re,be)&&function(Ee,Ie){Ee.Representation&&Ee.Representation.length!==0&&(Ee.Representation=Ee.Representation.filter((Fe,Ce)=>{const Q=w.getCodec(Ee,Ce,!1),ne=$(Ie,Fe,Q);let fe=function(ae,oe){let ge=!1;const V=w.getSupplementalCodecs(ae);return V.length>0&&(V.length>1&&N.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),ge=$(oe,ae,V[0])),ge}(Fe,Ie);return fe&&(N.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${Fe.id}`),Fe.codecs=Fe[xe.default.SUPPLEMENTAL_CODECS]),ne||fe||N.warn(`[CapabilitiesFilter] Codec ${Q} not supported. Removing Representation with ID ${Fe.id}`),ne||fe}))}(re,be);const we=re.Representation&&re.Representation.length>0;return we||(y.trigger(f.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:re}),N.warn(`[CapabilitiesFilter] AdaptationSet with ID ${re.id?re.id:"undefined"} and codec ${re.codecs?re.codecs:"undefined"} has been removed because of no supported Representation`)),we}))})(B,J),function(G,be){G&&G.Preselection&&G.Preselection.length!==0&&(G.Preselection=G.Preselection.filter(re=>{if(w.getPreselectionIsTypeOf(re,G.AdaptationSet,be)){const we=w.getCodecForPreselection(re,G.AdaptationSet);let Ee=!0;if(we){let Ie=w.getCommonRepresentationForPreselection(re,G.AdaptationSet);Ee=$(be,re,we,Ie)}return Ee||N.warn(`[CapabilitiesFilter] Preselection@codecs ${we} not supported. Removing Preselection with ID ${re.id}`),Ee}return!0}))}(B,J)})})(ve,Y)}),R.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(ve){ve&&ve.Period&&ve.Period.length!==0&&ve.Period.forEach(J=>{J.AdaptationSet=J.AdaptationSet.filter(H=>!H.Representation||H.Representation.length===0||!!ee(w.getEssentialProperties(H))&&(H.Representation=H.Representation.filter(B=>ee(w.getEssentialProperties(B))),H.Representation&&H.Representation.length>0)),J.Preselection&&J.Preselection.length&&(J.Preselection=J.Preselection.filter(H=>!!ee(w.getEssentialProperties(H))||(N.warn(`[CapabilitiesFilter] removed Preselection (id: ${H.id}) with unsupported EssentialProperty`),!1)))})}(Y),function(ve){ve&&ve.Period&&ve.Period.length!==0&&ve.Period.forEach(J=>{J.Preselection&&(J.Preselection=J.Preselection.filter(H=>{const B=String(H.preselectionComponents).split(" ").length;return B!==1&&N.warn(`Multi-Representation Preselection (id: ${H.id}) removed as not supported.`),B===1}))})}(Y),function(ve){ve&&ve.Period&&ve.Period.length!==0&&ve.Period.forEach(J=>{J.Preselection&&(J.Preselection=J.Preselection.filter(H=>{const B=String(H.preselectionComponents).split(" "),G=J.AdaptationSet.map(be=>be.id);return B.every(be=>G.includes(be))}))})}(Y),function(ve){if(!ve||!ve.Period||ve.Period.length===0)return Promise.resolve();const J=[];return ve.Period.forEach(H=>{J.push(function(B){return new Promise(G=>{if(!B||!B.AdaptationSet||B.AdaptationSet.length===0)return void G();const be=[];B.AdaptationSet.forEach(re=>{be.push(function(we){return new Promise(Ee=>{if(!we.Representation||we.Representation.length===0)return void Ee();const Ie=[];we.Representation.forEach(Fe=>{Ie.push(function(Ce){const Q=[],ne=M.getCustomCapabilitiesFilters();return ne&&ne.length!==0?ne.forEach(fe=>{Q.push(new Promise(ae=>ae(fe(Ce))))}):Q.push(Promise.resolve(!0)),Promise.all(Q)}(Fe))}),Promise.all(Ie).then(Fe=>{we.Representation=we.Representation.filter((Ce,Q)=>{let ne=Fe[Q].every(fe=>fe);return ne||N.debug("[Stream] Representation "+Ce.id+" has been removed because of unsupported CustomFilter"),ne}),Ee()}).catch(Fe=>{N.warn("[Stream] at least one promise rejected in CustomFilter with error: ",Fe),Ee()})})}(re))}),Promise.all(be).then(()=>{B.AdaptationSet=B.AdaptationSet.filter(re=>re.Representation&&re.Representation.length>0),G()}).catch(()=>{G()})})}(H))}),Promise.all(J)}(Y))).then(()=>{se()}).catch(ve=>{N.error(ve),se()})})}},N=(0,l.default)(v).getInstance().getLogger(b),b}_S.__dashjs_factory_name="CapabilitiesFilter";var rF=r.default.getSingletonFactory(_S);function IS(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N,$,q,k;function L(){w=!1;const ve=st.default.parseUserAgent();I=ve&&ve.browser&&ve.browser.name&&ve.browser.name.toLowerCase()==="safari"}function F(){w=!1}function K(ve){if(ve.streamId!==D.getActiveStreamInfo().id||!q)return;const J=N.getLiveDelay();N.getBufferLevel()>J/2&&(q=!1)}function Z(ve){ve.streamId===D.getActiveStreamInfo().id&&(q=ve.state===o.BUFFER_EMPTY)}function ee(){$.getCatchupModeEnabled()||R.setPlaybackRate(1)}function Y(){N.getIsDynamic()&&$.getCatchupModeEnabled()&&($.getCatchupPlaybackRates().max>0||$.getCatchupPlaybackRates().min<0)&&!N.isPaused()&&!N.isSeeking()&&function(){try{return!N.getTime()>0||w?!1:ue()===h.default.LIVE_CATCHUP_MODE_LOLP?function(ve,J){try{return Math.abs(se())>0||ve<J}catch{return!1}}(N.getBufferLevel(),M.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(se())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!w&&R){let ve;const J=R.getPlaybackRate(),H=$.getCatchupPlaybackRates(),B=N.getBufferLevel(),G=se(),be=$.getCatchupMaxDrift();if(!isNaN(be)&&be>0&&G>be)k.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),w=!0,N.seekToCurrentLive(!0,!1);else{const re=N.getCurrentLiveLatency(),we=N.getLiveDelay();ve=ue()===h.default.LIVE_CATCHUP_MODE_LOLP?function(Ie,Fe,Ce,Q,ne){let fe;if(ne<Q){const ae=Math.abs(Ie.min),oe=5*(ne-Q);fe=1-ae+2*ae/(1+Math.pow(Math.E,-oe)),k.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ne+", newRate: "+fe)}else{if(Math.abs(Fe-Ce)<=.02*Ce)fe=1;else{const oe=Fe-Ce,ge=oe<0?Math.abs(Ie.min):Ie.max,V=5*oe;fe=1-ge+2*ge/(1+Math.pow(Math.E,-V))}k.debug("[LoL+ playback control_latency-based] latency: "+Fe+", newRate: "+fe)}return fe}(H,re,we,M.get().streaming.liveCatchup.playbackBufferMin,B):function(Ie,Fe,Ce,Q){if(q)return 1;const ne=Fe-Ce,fe=ne<0?Math.abs(Ie.min):Ie.max,ae=5*ne;let oe=1-fe+2*fe/(1+Math.pow(Math.E,-ae));return N.getPlaybackStalled()&&Q<=Ce/2&&ne>0&&(oe=1),oe}(H,re,we,B);const Ee=I?.25:.02/(.5/H.max);(ve&&Math.abs(J-ve)>=Ee||ve==1)&&(k.debug(`[CatchupController]: Setting playback rate to ${ve}`),R.setPlaybackRate(ve))}}}()}function se(){return N.getCurrentLiveLatency()-N.getLiveDelay()}function ue(){const ve=M.get().streaming.liveCatchup.playbackBufferMin;return M.get().streaming.liveCatchup.mode!==h.default.LIVE_CATCHUP_MODE_LOLP||ve===null||isNaN(ve)?h.default.LIVE_CATCHUP_MODE_DEFAULT:h.default.LIVE_CATCHUP_MODE_LOLP}function me(){$.getCatchupPlaybackRates(!0)}return b={reset:function(){y.off(g.default.BUFFER_LEVEL_UPDATED,K,b),y.off(g.default.BUFFER_LEVEL_STATE_CHANGED,Z,b),y.off(g.default.PLAYBACK_PROGRESS,Y,b),y.off(g.default.PLAYBACK_TIME_UPDATED,Y,b),y.off(g.default.PLAYBACK_SEEKED,F,b),y.off(f.default.SETTING_UPDATED_CATCHUP_ENABLED,ee,b),y.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,b),y.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,b),y.off(g.default.STREAM_INITIALIZED,me,b),L(),R.setPlaybackRate(1,!0)},setConfig:function(ve){ve&&(ve.settings&&(M=ve.settings),ve.videoModel&&(R=ve.videoModel),ve.streamController&&(D=ve.streamController),ve.playbackController&&(N=ve.playbackController),ve.mediaPlayerModel&&($=ve.mediaPlayerModel))},initialize:function(){y.on(g.default.BUFFER_LEVEL_UPDATED,K,b),y.on(g.default.BUFFER_LEVEL_STATE_CHANGED,Z,b),y.on(g.default.PLAYBACK_PROGRESS,Y,b),y.on(g.default.PLAYBACK_TIME_UPDATED,Y,b),y.on(g.default.PLAYBACK_SEEKED,F,b),y.on(f.default.SETTING_UPDATED_CATCHUP_ENABLED,ee,b),y.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,b),y.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,b),y.on(g.default.STREAM_INITIALIZED,me,b),me()}},k=(0,l.default)(v).getInstance().getLogger(b),L(),b}IS.__dashjs_factory_name="CatchupController";var iF=r.default.getSingletonFactory(IS);const aF=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],AS="dashjs_?_bitrate",RS="dashjs_?_settings",ru="localStorage",kS="lastBitrate",CS="lastMediaSettings";function NS(v){v=v||{};const y=this.context,b=v.settings;let w,I,R;function M(q){if(R!==void 0)return R;let k;R=!1;try{typeof window<"u"&&(k=window[q])}catch(L){return I.warn("DOMStorage access denied: "+L.message),R}if(!k||q!==ru)return R;try{k.setItem("1","1"),k.removeItem("1"),R=!0}catch(L){I.warn("DOMStorage is supported, but cannot be used: "+L.message)}return R}function D(){return Math.round(new Date().getTime()/6e5)*6e5}function N(q,k){return M(q)&&b.get().streaming[k+"CachingInfo"].enabled}function $(){if(!b)throw new Error(h.default.MISSING_CONFIG_ERROR)}return w={getSavedBitrateSettings:function(q){if($(),!b.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let k=NaN;if(N(ru,kS)){const L=AS.replace(/\?/,q);try{const F=JSON.parse(localStorage.getItem(L))||{},K=new Date().getTime()-parseInt(F.timestamp,10)>=b.get().streaming.lastBitrateCachingInfo.ttl||!1,Z=parseFloat(F.bitrate);isNaN(Z)||K?K&&localStorage.removeItem(L):(k=Z,I.debug("Last saved bitrate for "+q+" was "+Z))}catch{return null}}return k},setSavedBitrateSettings:function(q,k){if(N(ru,kS)&&k){const L=AS.replace(/\?/,q);try{localStorage.setItem(L,JSON.stringify({bitrate:k.toFixed(3),timestamp:D()}))}catch(F){I.error(F.message)}}},getSavedMediaSettings:function(q){if($(),!b.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let k=null;if(N(ru,CS)){const L=RS.replace(/\?/,q);try{const F=JSON.parse(localStorage.getItem(L))||{},K=new Date().getTime()-parseInt(F.timestamp,10)>=b.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;k=F.settings,K&&(localStorage.removeItem(L),k=null)}catch{return null}}return k},setSavedMediaSettings:function(q,k){if(N(ru,CS)){const L=RS.replace(/\?/,q);try{localStorage.setItem(L,JSON.stringify({settings:k,timestamp:D()}))}catch(F){I.error(F.message)}}}},I=(0,l.default)(y).getInstance().getLogger(w),M(ru)&&aF.forEach(q=>{const k=localStorage.getItem(q.oldKey);if(k){localStorage.removeItem(q.oldKey);try{localStorage.setItem(q.newKey,k)}catch(L){I.error(L.message)}}}),w}NS.__dashjs_factory_name="DOMStorage";var sF=r.default.getSingletonFactory(NS),Gf=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isPreselection=!1,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.segmentSequenceProperties=[],this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},DS=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},oF=class{constructor(){this.availableFrom=null,this.duration=NaN,this.dvrWindowSize=NaN,this.isDynamic=!1,this.loadedTime=null,this.maxFragmentDuration=null,this.minBufferTime=NaN,this.protocol=null,this.serviceDescriptions=[]}},lF=class{constructor(v){this.valid=v[0]=="/",this.path=v.split("/").filter(y=>y.length!==0).map(y=>{let b={name:y},w=y.indexOf("[");if(w!=-1){b.name=y.substring(0,w);let I=y.substring(w+1,y.length-1);this.valid=this.valid&&I.indexOf("[")==-1;let R=I.indexOf("=");R!=-1?(b.attribute={name:I.substring(1,R),value:I.substring(R+1)},["'",'"'].indexOf(b.attribute.value[0])!=-1&&(b.attribute.value=b.attribute.value.substring(1,b.attribute.value.length-1))):b.position=parseInt(I,10)-1}return b})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(v,y){let b=null,w=v,I=1,R="MPD";for(;I<this.path.length&&w!==null;){b=w;let M=this.path[I];if(R=M.name,I!==this.path.length-1||!R.startsWith("@")&&R!=="text()"){let D=b[R]||[];if(D.length===0&&b[R]&&D.push(b[R]),M.position)w=D[M.position]||null;else if(M.attribute){let N=M.attribute;w=D.filter($=>$[N.name]==N.value)[0]||null}else w=Array.isArray(D)?D[0]:D}I++}return w===null?null:R.startsWith("@")?{name:R.substring(1),leaf:w,target:w}:R==="text()"?{name:"__text",leaf:w,target:w}:{name:R,leaf:w,target:y?b:w}}},uF=class{constructor(v,y,b){this.action=v,this.xpath=y,this.value=b,this.position=null}getMpdTarget(v){let y=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(v,y)}};function LS(){let v,y;const b=this.context;return v={getIsPatch:function(w){return w&&w.hasOwnProperty(xe.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(w){return w&&w[xe.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(w){return w&&w.hasOwnProperty(xe.default.ORIGINAL_PUBLISH_TIME)?new Date(w[xe.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(w){return w?(w.__children||[]).map(I=>{const R=I.tagName;if(R!=="add"&&R!=="remove"&&R!=="replace")return y.warn(`Ignoring node of invalid action: ${R}`),null;let M=I.sel;if(R==="add"&&I.type){if(!I.type.startsWith("@"))return y.warn(`Ignoring add action for prefixed namespace declaration: ${I.type}=${I.__text}`),null;M=`${M}/${I.type}`}let D=new lF(M);if(!D.isValid())return y.warn(`Ignoring action with invalid selector: ${R} - ${M}`),null;let N=null;D.findsAttribute()||D.findsTextReplace()?N=I.__text||"":R!=="remove"&&(N=I.__children.reduce((q,k)=>{let L=k.tagName;return L!=="#text"&&(q[L]=q[L]||[],q[L].push(k)),q},{}));let $=new uF(R,D,N);return R==="add"&&($.position=I.pos),$}).filter(I=>!!I):[]},getPublishTime:function(w){return w&&w.hasOwnProperty(xe.default.PUBLISH_TIME)?new Date(w[xe.default.PUBLISH_TIME]):null}},y=(0,l.default)(b).getInstance().getLogger(v),v}LS.__dashjs_factory_name="PatchManifestModel";var cF=r.default.getSingletonFactory(LS);function dl(v={}){let y=[];if(v.irregular)return v.irregular;if(v.regular)return v.regular;if(v.language){y=y.concat(v.language,v.extendedLanguageSubtags||[],v.script||[],v.region||[],v.variants||[]);const b=v.extensions||[];let w=-1;for(;++w<b.length;){const I=b[w];I.singleton&&I.extensions&&I.extensions.length>0&&y.push(I.singleton,...I.extensions)}}return v.privateuse&&v.privateuse.length>0&&y.push("x",...v.privateuse),y.join("-")}function Li(v){const y=typeof v=="string"?v.charCodeAt(0):v;return y>=97&&y<=122||y>=65&&y<=90}function iu(v){const y=typeof v=="string"?v.charCodeAt(0):v;return y>=48&&y<=57}function so(v){return Li(v)||iu(v)}const dF=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],PS={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},fF={}.hasOwnProperty;function oo(v,y={}){const b={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},w=String(v),I=w.toLowerCase();let R=0;if(v==null)throw new Error("Expected string, got `"+v+"`");if(fF.call(PS,I)){const D=PS[I];return y.normalize!==void 0&&y.normalize!==null&&!y.normalize||typeof D!="string"?(b[dF.includes(I)?"regular":"irregular"]=w,b):oo(D)}for(;Li(I.charCodeAt(R))&&R<9;)R++;if(R>1&&R<9){if(b.language=w.slice(0,R),R<4){let D=0;for(;I.charCodeAt(R)===45&&Li(I.charCodeAt(R+1))&&Li(I.charCodeAt(R+2))&&Li(I.charCodeAt(R+3))&&!Li(I.charCodeAt(R+4));){if(D>2)return M(R,3,"Too many extended language subtags, expected at most 3 subtags");b.extendedLanguageSubtags.push(w.slice(R+1,R+4)),R+=4,D++}}for(I.charCodeAt(R)===45&&Li(I.charCodeAt(R+1))&&Li(I.charCodeAt(R+2))&&Li(I.charCodeAt(R+3))&&Li(I.charCodeAt(R+4))&&!Li(I.charCodeAt(R+5))&&(b.script=w.slice(R+1,R+5),R+=5),I.charCodeAt(R)===45&&(Li(I.charCodeAt(R+1))&&Li(I.charCodeAt(R+2))&&!Li(I.charCodeAt(R+3))?(b.region=w.slice(R+1,R+3),R+=3):iu(I.charCodeAt(R+1))&&iu(I.charCodeAt(R+2))&&iu(I.charCodeAt(R+3))&&!iu(I.charCodeAt(R+4))&&(b.region=w.slice(R+1,R+4),R+=4));I.charCodeAt(R)===45;){const D=R+1;let N=D;for(;so(I.charCodeAt(N));){if(N-D>7)return M(N,1,"Too long variant, expected at most 8 characters");N++}if(!(N-D>4||N-D>3&&iu(I.charCodeAt(D))))break;b.variants.push(w.slice(D,N)),R=N}for(;I.charCodeAt(R)===45&&I.charCodeAt(R+1)!==120&&so(I.charCodeAt(R+1))&&I.charCodeAt(R+2)===45&&so(I.charCodeAt(R+3));){let D=R+2,N=0;for(;I.charCodeAt(D)===45&&so(I.charCodeAt(D+1))&&so(I.charCodeAt(D+2));){const $=D+1;for(D=$+2,N++;so(I.charCodeAt(D));){if(D-$>7)return M(D,2,"Too long extension, expected at most 8 characters");D++}}if(!N)return M(D,4,"Empty extension, extensions must have at least 2 characters of content");b.extensions.push({singleton:w.charAt(R+1),extensions:w.slice(R+3,D).split("-")}),R=D}}else R=0;if(R===0&&I.charCodeAt(R)===120||I.charCodeAt(R)===45&&I.charCodeAt(R+1)===120){R=R?R+2:1;let D=R;for(;I.charCodeAt(D)===45&&so(I.charCodeAt(D+1));){const N=R+1;for(D=N;so(I.charCodeAt(D));){if(D-N>7)return M(D,5,"Too long private-use area, expected at most 8 characters");D++}b.privateuse.push(w.slice(R+1,D)),R=D}}return R!==w.length?M(R,6,"Found superfluous content after tag"):b;function M(D,N,$){return y.warning&&y.warning($,N,D),y.forgiving?b:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function hF(v,y){return function(b,w){let I=MS(b,"tag");const R=MS(w??"*","range"),M=[];let D=-1;for(;++D<R.length;){const N=R[D].toLowerCase();if(!y&&N==="*")continue;let $=-1;const q=[];for(;++$<I.length;)if(v(I[$].toLowerCase(),N)){if(!y)return I[$];M.push(I[$])}else q.push(I[$]);I=q}return y?M:void 0}}const Np=hF(function(v,y){const b=v.split("-"),w=y.split("-");let I=0,R=0;if(w[R]!=="*"&&b[I]!==w[R])return!1;for(I++,R++;R<w.length;)if(w[R]!=="*"){if(!b[I])return!1;if(b[I]!==w[R]){if(b[I].length===1)return!1;I++}else I++,R++}else R++;return!0},!0);function MS(v,y){const b=v&&typeof v=="string"?[v]:v;if(!b||typeof b!="object"||!("length"in b))throw new Error("Invalid "+y+" `"+b+"`, expected non-empty string");return b}const Dp=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],Hc=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Lp={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Hf={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},Vf={}.hasOwnProperty;function Kf(v){const{language:y,script:b,region:w}=v;let I;var R,M;return b&&w&&(I=Hf[dl({language:y,script:b,region:w})])?(v.script=void 0,v.region=void 0):b&&(I=Hf[dl({language:y,script:b})])?v.script=void 0:w&&(I=Hf[dl({language:y,region:w})])?v.region=void 0:y&&(I=Hf[y]),I&&(v.language=void 0,R=v,M=oo(I),R.language||(R.language=M.language),R.script||(R.script=M.script),R.region||(R.region=M.region),M.variants&&R.variants.push(...M.variants)),dl(v)}function Yf(v,y){const b={},w=oo(String(v||"").toLowerCase(),b),I=dl(w);if(!I)return I;let R=-1;for(;++R<Dp.length;){let M=Dp[R].from;M.slice(0,4)==="und-"&&w.language&&(M=w.language+M.slice(3)),Np(I,M).length>0&&mF(w,M,Dp[R].to)}for(R=-1;++R<Hc.length;)OS(w,Hc[R].from.field,Hc[R].from.value)&&FS(w,Hc[R].to.field,Hc[R].to.value);if(function(M){Kf(M);const{language:D,script:N,region:$}=M;if(!D)return M;const q=dl({language:D,script:N,region:$});q===Kf(oo(D))?(M.script=void 0,M.region=void 0):$&&q===Kf(oo(D+"-"+$))?M.script=void 0:N&&q===Kf(oo(D+"-"+N))&&(M.region=void 0)}(w),w.variants.sort(),w.extensions.sort(gF),b.warning){let M;for(M in Lp)if(Vf.call(Lp,M)){const D=Lp[M],N=w[M];if(N&&Vf.call(D,N)){const $=D[N];b.warning("Deprecated "+M+" `"+N+"`, expected one of `"+$.join("`, `")+"`",-1,7)}}}return w.script&&(w.script=w.script.charAt(0).toUpperCase()+w.script.slice(1)),w.region&&(w.region=w.region.toUpperCase()),dl(w)}function mF(v,y,b){const w=oo(y),I=oo(b),R=[],M=w.language;let D;for(D in w)if(Vf.call(w,D)){const N=w[D];N&&OS(v,D,N)&&R.push(D)}for(D in I)if(Vf.call(I,D)){const N=I[D];M&&N&&(R.includes(D)||!v[D])&&FS(v,D,D==="language"&&N==="und"?M:N)}}function OS(v,y,b){let w,I=!1;if(b){const R=v[y];if(w=R,Array.isArray(R)){w=[];let M=-1;for(;++M<R.length;){const D=R[M];b.includes(D)?I=!0:w.push(D)}}else R===b&&(w=null,I=!0);v[y]=w}return I}function FS(v,y,b){const w=v[y];if(Array.isArray(w)){const I=Array.isArray(b)?b:[b];let R=-1;for(;++R<I.length;){const M=I[R];w.includes(M)||w.push(M)}}else v[y]=b}function gF(v,y){return v.singleton>y.singleton?1:v.singleton<y.singleton?-1:0}function pF(v,y){return y+10<=v.length&&v[y]===73&&v[y+1]===68&&v[y+2]===51&&v[y+3]<255&&v[y+4]<255&&v[y+6]<128&&v[y+7]<128&&v[y+8]<128&&v[y+9]<128}function zS(v,y){let b=0;return b=(127&v[y])<<21,b|=(127&v[y+1])<<14,b|=(127&v[y+2])<<7,b|=127&v[y+3],b}function yF(v,y){return y+10<=v.length&&v[y]===51&&v[y+1]===68&&v[y+2]===73&&v[y+3]<255&&v[y+4]<255&&v[y+6]<128&&v[y+7]<128&&v[y+8]<128&&v[y+9]<128}function Pp(v,y=0,b=1/0){return function(w,I,R,M){const D=(N=w)instanceof ArrayBuffer?N:N.buffer;var N;let $=1;"BYTES_PER_ELEMENT"in M&&($=M.BYTES_PER_ELEMENT);const q=(K=w)&&K.buffer instanceof ArrayBuffer&&K.byteLength!==void 0&&K.byteOffset!==void 0?w.byteOffset:0,k=(q+w.byteLength)/$,L=(q+I)/$,F=Math.floor(Math.max(0,Math.min(L,k)));var K;return new M(D,F,Math.floor(Math.min(F+Math.max(R,0),k))-F)}(v,y,b,Uint8Array)}function is(v,y=!1){const b=y?v.indexOf(0):v.length,w=function(I,R={}){let M;M=I instanceof ArrayBuffer?new DataView(I):new DataView(I.buffer,I.byteOffset,I.byteLength);let D=0,{encoding:N}=R;if(!N){const F=M.getUint8(0),K=M.getUint8(1);F==239&&K==187&&M.getUint8(2)==191?(N=Ca,D=3):F==254&&K==255?(N=Ra,D=2):F==255&&K==254?(N=ka,D=2):N=Ca}if(typeof TextDecoder<"u")return new TextDecoder(N).decode(M);const{byteLength:$}=M,q=N!==Ra;let k,L="";for(;D<$;){switch(N){case Ca:if(k=M.getUint8(D),k<128)D++;else if(k>=194&&k<=223)if(D+1<$){const F=M.getUint8(D+1);F>=128&&F<=191?(k=(31&k)<<6|63&F,D+=2):D++}else D++;else if(k>=224&&k<=239)if(D+2<=$-1){const F=M.getUint8(D+1),K=M.getUint8(D+2);F>=128&&F<=191&&K>=128&&K<=191?(k=(15&k)<<12|(63&F)<<6|63&K,D+=3):D++}else D++;else if(k>=240&&k<=244)if(D+3<=$-1){const F=M.getUint8(D+1),K=M.getUint8(D+2),Z=M.getUint8(D+3);F>=128&&F<=191&&K>=128&&K<=191&&Z>=128&&Z<=191?(k=(7&k)<<18|(63&F)<<12|(63&K)<<6|63&Z,D+=4):D++}else D++;else D++;break;case Ra:case cr:case ka:k=M.getUint16(D,q),D+=2}L+=String.fromCodePoint(k)}return L}(new DataView(v.buffer,v.byteOffset,b),{encoding:Ca});return y?w:w.replace(/\0/g,"")}function vF(v){return v.type==="PRIV"?function(y){if(y.size<2)return;const b=is(y.data,!0),w=new Uint8Array(y.data.subarray(b.length+1));return{key:y.type,info:b,data:w.buffer}}(v):v.type[0]==="W"?function(y){if(y.type==="WXXX"){if(y.size<2)return;let w=1;const I=is(y.data.subarray(w),!0);w+=I.length+1;const R=is(y.data.subarray(w));return{key:y.type,info:I,data:R}}const b=is(y.data);return{key:y.type,info:"",data:b}}(v):v.type==="APIC"?function(y){const b={key:y.type,description:"",data:"",mimeType:null,pictureType:null};if(y.size<2)return;if(y.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const w=y.data.subarray(1).indexOf(0);if(w===-1)return;const I=is(Pp(y.data,1,w)),R=y.data[2+w],M=y.data.subarray(3+w).indexOf(0);if(M===-1)return;const D=is(Pp(y.data,3+w,M));let N;var $;return N=I==="-->"?is(Pp(y.data,4+w+M)):($=y.data.subarray(4+w+M))instanceof ArrayBuffer?$:$.byteOffset==0&&$.byteLength==$.buffer.byteLength?$.buffer:new Uint8Array($).buffer,b.mimeType=I,b.pictureType=R,b.description=D,b.data=N,b}(v):function(y){if(y.size<2)return;if(y.type==="TXXX"){let w=1;const{data:I}=y,R=is(I.subarray(w),!0);w+=R.length+1;const M=is(I.subarray(w));return{key:y.type,info:R,data:M}}const b=is(y.data.subarray(1));return{key:y.type,info:"",data:b}}(v)}function EF(v){const y=String.fromCharCode(v[0],v[1],v[2],v[3]),b=zS(v,4);return{type:y,size:b,data:v.subarray(10,10+b)}}const Wf=10,bF=10;function US(){let v,y,b,w,I,R,M;const D=this.context;function N(H,B){const G=B?B.index:0,be=y.getAdaptationsForType(I[G].mpd.manifest,G,H);if(!be||be.length===0)return null;if(be.length>1&&B){for(let we=0,Ee=be.length;we<Ee;we++)if(re=be[we],y.getRolesForAdaptation(re).filter(function(Ie){return Ie.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&Ie.value===xe.default.MAIN})[0])return be[we]}var re;return be[0]}function $(H,B,G,be,re,we){let Ee,Ie,Fe,Ce,Q,ne,fe=[];if(!be||be.length===0)return[];const ae=y.getAdaptationsForPeriod(B);for(Ce=0,ne=be.length;Ce<ne;Ce++)if(Ee=be[Ce],Fe=y.getIndexForAdaptation(Ee,H,G.index),Ie=ee(ae[Fe]),we){let oe=Ie.accessibility.length;for(Q=0;Q<oe;Q++){if(!Ie)continue;let ge=Ie.accessibility[Q];if(ge.schemeIdUri===R.ACCESSIBILITY_CEA608_SCHEME)if(ge.value&&ge.value!==""){let V=ge.value.split(";");if(V[0].substring(0,2)==="CC")for(Q=0;Q<V.length;Q++)Ie||(Ie=ee.call(this,ae[Fe])),se(Ie,V[Q].substring(0,3),V[Q].substring(4)),fe.push(Ie),Ie=null;else for(Q=0;Q<V.length;Q++)Ie||(Ie=ee.call(this,ae[Fe])),se(Ie,"CC"+(Q+1),V[Q]),fe.push(Ie),Ie=null}else se(Ie,R.CC1,"eng"),fe.push(Ie),Ie=null}}else re===R.IMAGE?(Ie.type=R.IMAGE,fe.push(Ie),Ie=null):Ie&&fe.push(Ie);if(w.get().streaming.includePreselectionsInMediainfoArray){const oe=y.getPreselectionsForPeriod(B);for(Ce=0,ne=oe.length;Ce<ne;Ce++){const ge=oe[Ce];ge.hasOwnProperty("type")&&ge.type===re&&(Ie=Y(oe[Ce]),Ie&&fe.push(Ie))}}return fe}function q(H){const B=k(H);return y.getRegularPeriods(B)}function k(H){const B=F(H);return y.getMpd(B)}function L(){I=[]}function F(H){return H||(I.length>0?I[0].mpd.manifest:null)}function K(H){try{const B=Z(H.streamInfo,I),G=y.getAdaptationsForPeriod(B);return H&&H.streamInfo&&H.streamInfo.id!==void 0&&G?G[H.index]:null}catch{return null}}function Z(H,B){const G=B.length;for(let be=0;be<G;be++){let re=B[be];if(H&&H.id===re.id)return re}return null}function ee(H){if(!H)return null;let B=new Gf;const G=H.period.mpd.manifest.Period[H.period.index].AdaptationSet[H.index];B.id=H.id,B.index=H.index,B.codec=y.getCodec(G);const be=w.get().streaming.enhancement.codecs;return B.type=be.some(re=>{var we;return(we=B.codec)==null?void 0:we.includes(re)})?h.default.ENHANCEMENT:H.type,B.streamInfo=ue(H.period),B.representationCount=y.getRepresentationCount(G),B.labels=y.getLabelsForAdaptation(G),B.lang=y.getLanguageForAdaptation(G),B.segmentAlignment=y.getSegmentAlignment(G),B.subSegmentAlignment=y.getSubSegmentAlignment(G),B.viewpoint=y.getViewpointForAdaptation(G),B.accessibility=y.getAccessibilityForAdaptation(G),B.accessibility.filter(function(re){if(re.schemeIdUri&&re.schemeIdUri.search("cea-608")>=0&&M!==void 0)return!0})[0]&&(B.embeddedCaptions=!0),B.audioChannelConfiguration=y.getAudioChannelConfigurationForAdaptation(G),B.audioChannelConfiguration.length===0&&G.Representation&&G.Representation.length>0&&(B.audioChannelConfiguration=y.getAudioChannelConfigurationForRepresentation(G.Representation[0])),B.roles=y.getRolesForAdaptation(G),B.mimeType=y.getMimeType(G),B.contentProtection=y.getContentProtectionByAdaptation(G),B.bitrateList=y.getBitrateListForAdaptation(G),B.selectionPriority=y.getSelectionPriority(G),B.contentProtection&&B.contentProtection.length>0&&(B.contentProtection=function(re,we){if(!re||!re.length||!we)return re;const Ee=y.getContentProtectionByManifest(we);if(!Ee||!Ee.length)return re;const Ie=Ee.reduce((Fe,Ce)=>(Ce.refId&&Fe.set(Ce.refId,Ce),Fe),new Map);return re.map(Fe=>{if(Fe.ref){const Ce=Ie.get(Fe.ref);Ce&&Fe.mergeAttributesFromReference(Ce)}return Fe})}(B.contentProtection,H.period.mpd.manifest),B.contentProtection=function(re){const we=re.map(Ee=>Ee.cencDefaultKid).filter(Ee=>Ee!==null);if(we.length){const Ee=we[0];re.forEach(Ie=>{Ie.keyId=Ee})}return re}(B.contentProtection),B.normalizedKeyIds=function(re){const we=new Set;return re.forEach(Ee=>{Ee.cencDefaultKid&&typeof Ee.cencDefaultKid=="string"&&we.add(Ee.cencDefaultKid.replace(/-/g,"").toLowerCase())}),we}(B.contentProtection)),B.isText=y.getIsText(G),B.essentialProperties=y.getCombinedEssentialPropertiesForAdaptationSet(G),B.supplementalProperties=y.getCombinedSupplementalPropertiesForAdaptationSet(G),B.isFragmented=y.getIsFragmented(G),B.isEmbedded=!1,B.adaptationSetSwitchingCompatibleIds=function(re){if(!re||!re.supplementalProperties)return[];let we=[];const Ee=re.supplementalProperties.filter(Ie=>Ie.schemeIdUri===xe.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return Ee&&Ee.length>0&&(we=Ee[0].value.toString().split(",").map(Ie=>Ie)),we}(B),B.segmentSequenceProperties=y.getSegmentSequencePropertiesForAdaptationSet(G),B}function Y(H){if(!H)return null;let B=new Gf;const G=H.period.mpd.manifest.Period[H.period.index].Preselection[H.index],be=H.period.mpd.manifest.Period[H.period.index].AdaptationSet,re=y.getAdaptationsForPeriod(H.period);return B=ee(y.getMainAdaptationSetForPreselection(G,re)),B&&(B.isPreselection=!0,B.tag=H.tag,B.id=H.id,B.codec=y.getCodecForPreselection(G,be),B.selectionPriority=y.getSelectionPriority(G),B.labels=y.getLabelsForAdaptation(G),B.lang=y.getLanguageForAdaptation(G),B.viewpoint=y.getViewpointForAdaptation(G),B.accessibility=y.getAccessibilityForAdaptation(G),B.audioChannelConfiguration=y.getAudioChannelConfigurationForAdaptation(G),B.roles=y.getRolesForAdaptation(G),B.essentialProperties=y.getCombinedEssentialPropertiesForAdaptationSet(G),B.supplementalProperties=y.getCombinedSupplementalPropertiesForAdaptationSet(G)),B}function se(H,B,G){H.id=B,H.index=100+parseInt(B.substring(2,3)),H.type=R.TEXT,H.codec="cea-608-in-SEI",H.isEmbedded=!0,H.isFragmented=!1,H.lang=Yf(G),H.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function ue(H){let B=new DS;return B.id=H.id,B.index=H.index,B.start=H.start,B.duration=H.duration,B.manifestInfo=function(G){let be=new oF;return be.dvrWindowSize=G.timeShiftBufferDepth,be.loadedTime=G.manifest.loadedTime,be.availableFrom=G.availabilityStartTime,be.minBufferTime=G.manifest.minBufferTime,be.maxFragmentDuration=G.maxSegmentDuration,be.duration=y.getDuration(G.manifest),be.isDynamic=y.getIsDynamic(G.manifest),be.serviceDescriptions=y.getServiceDescriptions(G.manifest),be.protocol=G.manifest.protocol,be}(H.mpd),B.isLast=H.mpd.manifest.Period.length===1||Math.abs(B.start+B.duration-B.manifestInfo.duration)<1,B.isEncrypted=H.isEncrypted,B}function me(){if(!R)throw new Error("setConfig function has to be called previously")}function ve(H){return I.length>0?I[0].mpd.manifest.Period[H]:null}function J(H,B,G){let be,re,we,Ee,Ie,Fe;if(H){for(re=H.AdaptationSet,Ie=0;Ie<re.length;Ie+=1)for(be=re[Ie],Ee=be.Representation,Fe=0;Fe<Ee.length;Fe+=1)if(we=Ee[Fe],B===we.id)return G?Fe:we}return null}return v={applyPatchToManifest:function(H,B){b.getPatchOperations(B).forEach(G=>{let be=G.getMpdTarget(H);if(be===null)return;let{name:re,target:we,leaf:Ee}=be;if(G.xpath.findsAttribute()||re==="__text"){switch(G.action){case"add":case"replace":we[re]=G.value;break;case"remove":delete we[re]}return}let Ie=(we[re]||[]).indexOf(Ee),Fe=G.position==="prepend"||G.position==="before";if(G.action==="remove"||G.action==="replace")if(Array.isArray(we[re])){if(Ie!=-1){let Ce=we[re];Ce.splice(Ie,1),Ce.length>0?we[re]=Ce:delete we[re]}}else delete we[re];G.action!=="add"&&G.action!=="replace"||Object.keys(G.value).forEach(Ce=>{let Q=G.value[Ce],ne=we[Ce]||[];if(ne.length===0&&we[Ce]&&ne.push(we[Ce]),ne.length===0)ne=Q;else{let fe=ne.length;fe=Ce==re&&Ie!=-1?Ie+(Fe?0:1)+(G.action==="replace"?-1:0):Fe?0:ne.length,ne.splice.apply(ne,[fe,0].concat(Q))}we[Ce]=ne})})},areMediaInfosEqual:function(H,B){if(!H||!B)return!1;const G=H.id===B.id,be=H.codec===B.codec,re=JSON.stringify(H.viewpoint)===JSON.stringify(B.viewpoint),we=H.lang===B.lang,Ee=JSON.stringify(H.roles)===JSON.stringify(B.roles),Ie=JSON.stringify(H.accessibility)===JSON.stringify(B.accessibility),Fe=JSON.stringify(H.audioChannelConfiguration)===JSON.stringify(B.audioChannelConfiguration);return G&&be&&re&&we&&Ee&&Ie&&Fe},getAllMediaInfoForType:function(H,B,G){let be=I,re=G,we=[];if(re)me(),be=q(re);else{if(!(I.length>0))return we;re=I[0].mpd.manifest}const Ee=Z(H,be);let Ie=y.getAdaptationsForType(re,H?H.index:null,B);return we=$(re,Ee,H,Ie,B),B===R.TEXT&&(Ie=y.getAdaptationsForType(re,H?H.index:null,R.VIDEO),we=we.concat($(re,Ee,H,Ie,B,!0))),we},getAvailabilityStartTime:function(H){const B=k(H);return y.getAvailabilityStartTime(B)},getBandwidthForRepresentation:function(H,B){let G;return G=J(ve(B),H),G?G.bandwidth:null},getBaseURLsFromElement:function(H){return y.getBaseURLsFromElement(H)},getCodec:function(H,B,G){return y.getCodec(H,B,G)},getCodecForPreselection:function(H,B){return y.getCodecForPreselection(H,B)},getContentSteering:function(H){return y.getContentSteering(H)},getDuration:function(H){const B=F(H);return y.getDuration(B)},getEssentialProperties:function(H){try{return y.getEssentialProperties(H)}catch{return[]}},getEvent:function(H,B,G,be){try{if(!H||!B||isNaN(G)||!be)return null;const re=H.scheme_id_uri,we=H.value;if(!B[re+"/"+we])return null;const Ee=new mi,Ie=H.timescale||1,Fe=be.adaptation.period.start,Ce=B[re+"/"+we],Q=isNaN(be.presentationTimeOffset)?isNaN(Ce.presentationTimeOffset)?0:Ce.presentationTimeOffset:be.presentationTimeOffset;let ne,fe=H.presentation_time_delta/Ie;ne=H.version===0?Fe+G-Q+fe:Fe-Q+fe;const ae=H.event_duration/Ie,oe=H.id,ge=H.message_data;return Ee.eventStream=Ce,Ee.eventStream.value=we,Ee.eventStream.timescale=Ie,Ee.duration=ae,Ee.id=oe,Ee.calculatedPresentationTime=ne,Ee.messageData=ge,Ee.presentationTimeDelta=fe,Ee.parsedMessageData=re===h.default.ID3_SCHEME_ID_URI?function(V){let ye=0;const Te=[];for(;pF(V,ye);){const Ae=zS(V,ye+6);V[ye+5]>>6&1&&(ye+=Wf),ye+=Wf;const Oe=ye+Ae;for(;ye+bF<Oe;){const De=EF(V.subarray(ye)),Ge=vF(De);Ge&&Te.push(Ge),ye+=De.size+Wf}yF(V,ye)&&(ye+=Wf)}return Te}(ge):null,Ee}catch{return null}},getEventsFor:function(H,B,G){let be=[];if(I.length>0){const re=I[0].mpd.manifest;if(H instanceof DS){const we=Z(H,I);be=y.getEventsForPeriod(we)}else if(H instanceof Gf){const we=Z(G,I);be=y.getEventStreamForAdaptationSet(re,K(H),we)}else if(H instanceof on){const we=Z(G,I);be=y.getEventStreamForRepresentation(re,B,we)}}return be},getFramerate:function(H){return y.getFramerate(H)},getIndexForRepresentation:function(H,B){return function(G,be){const re=J(G,be,!0);return re!==null?re:-1}(ve(B),H)},getIsDVB:function(H){return y.hasProfile(H,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(H){const B=F(H);return y.getIsDynamic(B)},getIsPatch:function(H){return b.getIsPatch(H)},getIsTextTrack:function(H){return y.getIsText(H)},getIsTypeOf:function(H,B){return y.getIsTypeOf(H,B)},getLocation:function(H){return y.getLocation(H)},getMainAdaptationForType:N,getMainAdaptationSetForPreselection:function(H,B){return y.getMainAdaptationSetForPreselection(H,B)},getCommonRepresentationForPreselection:function(H,B){return y.getCommonRepresentationForPreselection(H,B)},getManifestUpdatePeriod:function(H,B=0){return y.getManifestUpdatePeriod(H,B)},getMediaInfoForType:function(H,B){if(I.length===0||!H)return null;let G=Z(H,I);if(!G)return null;const be=y.getAdaptationsForPeriod(G);let re=N(B,H);return re?ee(be[y.getIndexForAdaptation(re,I[0].mpd.manifest,H.index)]):null},getMpd:k,getPatchLocation:function(H){const B=y.getPatchLocation(H),G=y.getPublishTime(H);return B&&B.length!==0&&G?B.filter(be=>isNaN(be.ttl)||G.getTime()+be.ttl>new Date().getTime()):[]},getPeriodById:function(H){if(!H||I.length===0)return null;const B=I.filter(G=>G.id===H);return B&&B.length>0?B[0]:null},getPreselectionIsTypeOf:function(H,B,G){return y.getPreselectionIsTypeOf(H,B,G)},getProducerReferenceTimes:function(H,B){let G,be;const re=Z(H,I);return G=B?B.id:null,I.length>0&&re&&(be=G?y.getAdaptationForId(G,I[0].mpd.manifest,re.index):y.getAdaptationForIndex(B?B.index:null,I[0].mpd.manifest,re.index)),be?y.getProducerReferenceTimesForAdaptation(be):[]},getPublishTime:function(H){return y.getPublishTime(H)},getRealAdaptation:function(H,B){let G,be;const re=Z(H,I);return G=B?B.id:null,I.length>0&&re&&(be=G?y.getAdaptationForId(G,I[0].mpd.manifest,re.index):y.getAdaptationForIndex(B?B.index:null,I[0].mpd.manifest,re.index)),be},getRealPeriodByIndex:function(H){return y.getRealPeriodForIndex(H,I[0].mpd.manifest)},getRegularPeriods:q,getRepresentationSortFunction:function(){return y.getRepresentationSortFunction()},getStreamsInfo:function(H,B){const G=[];let be=I;if(H&&(me(),be=q(H)),be.length>0){(!B||B>be.length)&&(B=be.length);for(let re=0;re<B;re++)G.push(ue(be[re]))}return G},getSuggestedPresentationDelay:function(){const H=I.length>0?I[0].mpd:null;return y.getSuggestedPresentationDelay(H)},getSupplementalCodecs:function(H){const B=H[xe.default.SUPPLEMENTAL_CODECS];return B?B.split(" ").map(G=>H.mimeType+';codecs="'+G+'"'):[]},getUTCTimingSources:function(){const H=F();return y.getUTCTimingSources(H)},getVoRepresentations:function(H){let B;const G=K(H);return B=y.getRepresentationsForAdaptation(G,H),B},isPatchValid:function(H,B){let G=y.getId(H),be=b.getMpdId(B),re=y.getPublishTime(H),we=b.getPublishTime(B),Ee=b.getOriginalPublishTime(B);return!!(G&&be&&G==be&&re&&Ee&&re.getTime()==Ee.getTime()&&we&&re.getTime()<we.getTime())},reset:L,setConfig:function(H){H&&(H.constants&&(R=H.constants),H.cea608parser&&(M=H.cea608parser),H.errHandler&&y.setConfig({errHandler:H.errHandler}),H.BASE64&&y.setConfig({BASE64:H.BASE64}))},updatePeriods:function(H){if(!H)return null;me(),I=q(H)}},y=Xn(D).getInstance(),b=cF(D).getInstance(),w=(0,u.default)(D).getInstance(),L(),v}US.__dashjs_factory_name="DashAdapter";var TF=r.default.getSingletonFactory(US);class SF{static round10(y,b){return function(w,I,R){return R===void 0||+R==0?Math[w](I):(R=+R,(I=+I)===null||isNaN(I)||typeof R!="number"||R%1!=0?NaN:(I=I.toString().split("e"),+((I=(I=Math[w](+(I[0]+"e"+(I[1]?+I[1]-R:-R)))).toString().split("e"))[0]+"e"+(I[1]?+I[1]+R:R))))}("round",y,b)}}var xF=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},wF=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},_F=class{constructor(){this.t=null,this.level=null}},IF=class{constructor(){this.target=null,this.state=o.BUFFER_EMPTY}},AF=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},RF=class{constructor(){this.time=null,this.droppedFrames=null}};class kF{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class CF{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class NF{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var DF=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},LF=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function jS(v){const y=(v=v||{}).settings;let b,w,I=this.context,R=(0,m.default)(I).getInstance();function M(){R.trigger(f.default.METRICS_CHANGED)}function D(F){R.trigger(f.default.METRIC_CHANGED,{mediaType:F}),M()}function N(F,K,Z){R.trigger(f.default.METRIC_UPDATED,{mediaType:F,metric:K,value:Z}),D(F)}function $(F,K,Z){R.trigger(f.default.METRIC_ADDED,{mediaType:F,metric:K,value:Z}),D(F)}function q(F,K){let Z=null;return F&&(w.hasOwnProperty(F)?Z=w[F]:K||(Z=new xF,w[F]=Z)),Z}function k(F,K,Z){let ee=q(F);ee!==null&&(ee[K].push(Z),ee[K].length>y.get().streaming.metrics.maxListDepth&&ee[K].shift())}function L(F,K,Z){k(F,K,Z),$(F,K,Z)}return b={addBufferLevel:function(F,K,Z){let ee=new _F;ee.t=K,ee.level=Z,L(F,o.BUFFER_LEVEL,ee)},addBufferState:function(F,K,Z){let ee=new IF;ee.target=Z,ee.state=K,L(F,o.BUFFER_STATE,ee)},addDVBErrors:function(F){L(h.default.STREAM,o.DVB_ERRORS,F)},addDVRInfo:function(F,K,Z,ee){let Y=new AF;Y.time=K,Y.range=ee,Y.manifestInfo=Z,L(F,o.DVR_INFO,Y)},addDroppedFrames:function(F,K){let Z=new RF,ee=q(F).DroppedFrames;K&&(Z.time=K.creationTime,Z.droppedFrames=K.droppedVideoFrames,ee.length>0&&ee[ee.length-1]==Z||L(F,o.DROPPED_FRAMES,Z))},addHttpRequest:function F(K,Z,ee,Y){let se=new he.HTTPRequest;Z.url&&Z.url!==K.url&&(F({mediaType:K.mediaType,type:K.type,url:K.url,serviceLocation:null,range:K.range,startDate:K.startDate,firstByteDate:null,endDate:null,duration:K.duration,fileLoaderType:K.fileLoaderType,resourceTimingValues:K.resourceTimingValues},{url:null,status:null,headers:null},null,Y),se.actualurl=Z.url),se.tcpid=null,se.type=K.type,se.url=K.url,se.range=K.range||null,se.trequest=K.startDate,se.tresponse=K.firstByteDate,se.responsecode=Z.status,se.cmsd=Y,se._tfinish=K.endDate,se._stream=K.mediaType,se._mediaduration=K.duration,se._responseHeaders="";for(const ue in Z.headers)se._responseHeaders+=ue+": "+Z.headers[ue]+`\r
`;se._serviceLocation=K.serviceLocation||null,se._fileLoaderType=K.fileLoaderType,se._resourceTimingValues=K.resourceTimingValues,se._streamId=K&&K.representation&&K.representation.mediaInfo&&K.representation.mediaInfo.streamInfo?K.representation.mediaInfo.streamInfo.id:null,ee?ee.forEach(ue=>{(function(me,ve,J,H){let B=new he.HTTPRequestTrace;B.s=ve,B.d=J,B.b=H,me.trace.push(B),me.interval||(me.interval=0),me.interval+=J})(se,ue.s,ue.d,ue.b,ue.t)}):(delete se.interval,delete se.trace),L(K.mediaType,o.HTTP_REQUEST,se)},addManifestUpdate:function(F,K,Z,ee){let Y=new kF;Y.mediaType=F,Y.type=K,Y.requestTime=Z,Y.fetchTime=ee,k(h.default.STREAM,o.MANIFEST_UPDATE,Y),$(F,o.MANIFEST_UPDATE,Y)},addManifestUpdateRepresentationInfo:function(F,K,Z){if(F&&F.representationInfo){const ee=new NF;ee.id=K?K.id:null,ee.index=K?K.index:null,ee.mediaType=Z,ee.startNumber=K?K.startNumber:null,ee.presentationTimeOffset=K?K.presentationTimeOffset:null,F.representationInfo.push(ee),N(F.mediaType,o.MANIFEST_UPDATE_TRACK_INFO,F)}},addManifestUpdateStreamInfo:function(F,K,Z,ee,Y){if(F){let se=new CF;se.id=K,se.index=Z,se.start=ee,se.duration=Y,F.streamInfo.push(se),N(F.mediaType,o.MANIFEST_UPDATE_STREAM_INFO,F)}},addPlayList:function(F){F.trace&&Array.isArray(F.trace)?F.trace.forEach(K=>{K.hasOwnProperty("subreplevel")&&!K.subreplevel&&delete K.subreplevel}):delete F.trace,L(h.default.STREAM,o.PLAY_LIST,F)},addRepresentationSwitch:function(F,K,Z,ee,Y){let se=new wF;se.t=K,se.mt=Z,se.to=ee,Y?se.lto=Y:delete se.lto,L(F,o.TRACK_SWITCH,se)},addRequestsQueue:function(F,K,Z){let ee=new LF;ee.loadingRequests=K,ee.executedRequests=Z,q(F).RequestsQueue=ee,$(F,o.REQUESTS_QUEUE,ee)},addSchedulingInfo:function(F,K,Z,ee,Y,se,ue,me,ve){let J=new DF;J.mediaType=F,J.t=K,J.type=Z,J.startTime=ee,J.availabilityStartTime=Y,J.duration=se,J.bandwidth=ue,J.range=me,J.state=ve,L(F,o.SCHEDULING_INFO,J)},clearAllCurrentMetrics:function(){w={},M()},clearCurrentMetricsForType:function(F){delete w[F],D(F)},getMetricsFor:q,updateManifestUpdateInfo:function(F,K){if(F){for(let Z in K)F[Z]=K[Z];N(F.mediaType,o.MANIFEST_UPDATE,F)}}},w={},b}jS.__dashjs_factory_name="MetricsModel";var PF=r.default.getSingletonFactory(jS);class lo{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}lo.INITIAL_PLAYOUT_START_REASON="initial_playout",lo.SEEK_START_REASON="seek",lo.RESUME_FROM_PAUSE_START_REASON="resume",lo.METRICS_COLLECTION_START_REASON="metrics_collection_start";class gi{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function BS(v){v=v||{};const y=this.context;let b,w,I,R,M=v.metricsModel;function D(q){const k=M.getMetricsFor(q,!0);if(!k)return null;const L=k.HttpList;let F,K=null;if(!L||L.length<=0)return null;for(F=L.length-1;F>=0;){if(L[F].responsecode){K=L[F];break}F--}return K}function N(q){const k=M.getMetricsFor(q,!0);return k&&k.HttpList?k.HttpList:[]}function $(q,k){if(!q)return null;const L=q[k];return L&&L.length!==0?L[L.length-1]:null}return b={getCurrentRepresentationSwitch:function(q){return $(M.getMetricsFor(q,!0),o.TRACK_SWITCH)},getCurrentBufferState:function(q){return $(M.getMetricsFor(q,!0),o.BUFFER_STATE)},getCurrentBufferLevel:function(q){const k=$(M.getMetricsFor(q,!0),o.BUFFER_LEVEL);return k?SF.round10(k.level/1e3,-3):0},getCurrentHttpRequest:D,getHttpRequests:N,getCurrentDroppedFrames:function(){return $(M.getMetricsFor(h.default.VIDEO,!0),o.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(q){return $(M.getMetricsFor(q,!0),o.SCHEDULING_INFO)},getCurrentDVRInfo:function(q){return $(q?M.getMetricsFor(q,!0):M.getMetricsFor(h.default.VIDEO,!0)||M.getMetricsFor(h.default.AUDIO,!0),o.DVR_INFO)},getCurrentManifestUpdate:function(){return $(M.getMetricsFor(h.default.STREAM),o.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(q,k){if(!k)return null;let L={},F=D(q);F&&(L=st.default.parseHttpHeaders(F._responseHeaders));const K=L[k.toLowerCase()];return K===void 0?null:K},getLatestMPDRequestHeaderValueByID:function(q){if(!q)return null;let k,L,F,K={};for(k=N(h.default.STREAM),F=k.length-1;F>=0;F--)if(L=k[F],L.type===he.HTTPRequest.MPD_TYPE){K=st.default.parseHttpHeaders(L._responseHeaders);break}const Z=K[q.toLowerCase()];return Z===void 0?null:Z},addRepresentationSwitch:function(q,k,L,F,K){M.addRepresentationSwitch(q,k,L,F,K)},addDVRInfo:function(q,k,L,F){M.addDVRInfo(q,k,L,F)},updateManifestUpdateInfo:function(q){const k=this.getCurrentManifestUpdate();M.updateManifestUpdateInfo(k,q)},addManifestUpdateStreamInfo:function(q){if(q){const k=this.getCurrentManifestUpdate();M.addManifestUpdateStreamInfo(k,q.id,q.index,q.start,q.duration)}},addManifestUpdateRepresentationInfo:function(q,k){if(q){const L=this.getCurrentManifestUpdate();M.addManifestUpdateRepresentationInfo(L,q,k)}},addManifestUpdate:function(q){M.addManifestUpdate(h.default.STREAM,q.type,q.startDate,q.endDate)},addHttpRequest:function(q,k,L,F,K,Z){const ee={status:L,headers:F,url:k};M.addHttpRequest(q,ee,K,Z)},addSchedulingInfo:function(q,k){M.addSchedulingInfo(q.mediaType,new Date,q.type,q.startTime,q.availabilityStartTime,q.duration,q.bandwidth,q.range,k)},addRequestsQueue:function(q,k,L){M.addRequestsQueue(q,k,L)},addBufferLevel:function(q,k,L){M.addBufferLevel(q,k,L)},addBufferState:function(q,k,L){M.addBufferState(q,k,L)},addDroppedFrames:function(q){M.addDroppedFrames(h.default.VIDEO,q)},addPlayList:function(){R&&(M.addPlayList(R),R=null)},addDVBErrors:function(q){M.addDVBErrors(q)},createPlaylistMetrics:function(q,k){R=new lo,R.start=new Date,R.mstart=q,R.starttype=k},createPlaylistTraceMetrics:function(q,k,L){w===!0&&(w=!1,I=new gi,I.representationid=q,I.start=new Date,I.mstart=k,I.playbackspeed=L!==null?L.toString():null)},updatePlayListTraceMetrics:function(q){if(I)for(let k in I)I[k]=q[k]},pushPlayListTraceMetrics:function(q,k){if(w===!1&&R&&I&&I.start){const L=I.start;I.duration=q.getTime()-L.getTime(),I.stopreason=k,R.trace.push(I),w=!0}},clearAllCurrentMetrics:function(){M.clearAllCurrentMetrics()}},M=M||PF(y).getInstance({settings:v.settings}),w=!0,I=null,R=null,b}gi.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",gi.REBUFFERING_REASON="rebuffering",gi.USER_REQUEST_STOP_REASON="user_request",gi.END_OF_PERIOD_STOP_REASON="end_of_period",gi.END_OF_CONTENT_STOP_REASON="end_of_content",gi.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",gi.FAILURE_STOP_REASON="failure",BS.__dashjs_factory_name="DashMetrics";var MF=r.default.getSingletonFactory(BS);function $S(){let v;const y=this.context,b=(0,m.default)(y).getInstance();return v={error:function(w){b.trigger(f.default.ERROR,{error:w})}},v}$S.__dashjs_factory_name="ErrorHandler";var OF=r.default.getSingletonFactory($S),FF=t(5560);function qS(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N,$,q,k,L,F;function K(){F.debug("Stopping the gap controller"),M&&(clearInterval(M),M=null),function(){y.off(f.default.WALLCLOCK_TIME_UPDATED,ue,this),y.off(f.default.INITIAL_STREAM_SWITCH,se,this),y.off(f.default.PLAYBACK_SEEKING,Z,this),y.off(f.default.BUFFER_REPLACEMENT_STARTED,ee,b),y.off(f.default.TRACK_CHANGE_RENDERED,Y,b)}(),M=null,D=NaN,R=0,k=null,L={}}function Z(){k&&(clearTimeout(k),k=null)}function ee(J){try{if(J.streamId!==$.getActiveStreamInfo().id||J.mediaType!==h.default.VIDEO&&J.mediaType!==h.default.AUDIO)return;J.streamId===$.getActiveStreamInfo().id&&(L[J.mediaType]=!0)}catch(H){F.error(H)}}function Y(J){J&&J.mediaType&&(L[J.mediaType]=!1)}function se(){M||function(){try{M||(F.debug("Starting the gap controller"),M=setInterval(()=>{me()&&ve(N.getTime())},100))}catch{}}()}function ue(){if(me(I.get().streaming.gaps.enableSeekFix)&&(R++,R>=10)){const J=N.getTime();w===J?ve(J,!0):(w=J,D=NaN),R=0}}function me(J=!1){if(!$.getActiveStream())return!1;const H=Object.keys(L).some(G=>L[G]),B=!!J&&function(){const G=$.getActiveStream(),be=parseFloat((G.getStartTime()+G.getDuration()).toFixed(5));return N.getTime()+I.get().streaming.gaps.threshold>=be}();return!H&&I.get().streaming.gaps.jumpGaps&&$.getActiveStreamProcessors().length>0&&(!N.isSeeking()||B)&&!N.isPaused()&&!$.getIsStreamSwitchInProgress()&&!$.getHasMediaOrInitialisationError()}function ve(J,H=!1){const B=I.get().streaming.gaps.enableStallFix,G=I.get().streaming.gaps.stallSeek,be=I.get().streaming.gaps.smallGapLimit,re=I.get().streaming.gaps.jumpLargeGaps,we=I.get().streaming.gaps.seekOffset,Ee=q.getBufferRange();let Ie,Fe=NaN,Ce=!1;if(Ie=function(ne,fe){try{if(!ne||ne.length<=1&&fe>0)return NaN;let ae=NaN,oe=0;for(;isNaN(ae)&&oe<ne.length;){const ge=oe>0?ne.end(oe-1):0;fe<ne.start(oe)&&ge-fe<I.get().streaming.gaps.threshold&&(ae=oe),oe+=1}return ae}catch{return null}}(Ee,J),!isNaN(Ie)){const ne=Ee.start(Ie),fe=ne-J;fe>0&&(fe<=be||re)&&(Fe=ne)}const Q=N.getTimeToStreamEnd();if(isNaN(Fe)&&H&&isFinite(Q)&&!isNaN(Q)&&Q<be&&(Fe=parseFloat(N.getStreamEndTime().toFixed(5)),Ce=!0),B&&isNaN(Fe)&&H&&isNaN(Ie)&&function(ne,fe){for(let ae=0,oe=ne.length;ae<oe;ae++)if(fe>=ne.start(ae)&&fe<=ne.end(ae))return!0;return!1}(Ee,J)&&(G===0?(F.warn("Toggle play pause to break stall"),q.pause(),q.play()):(F.warn(`Jumping ${G}s to break stall`),Fe=J+G)),Fe>0&&D!==Fe&&Fe>J&&!k){const ne=Fe-J;if(Ce){const fe=$.getStreamForTime(Fe),ae=fe&&!!fe.getPreloaded();F.warn(`Jumping to end of stream because of gap from ${J} to ${Fe}. Gap duration: ${ne}`),N.seek(Fe+we,!0,ae)}else{const fe=N.getIsDynamic(),ae=Ie>0?Ee.end(Ie-1):J,oe=fe?1e3*Math.max(0,ne-.1):0;k=window.setTimeout(()=>{N.seek(Fe+we,!0,!0);const ge=$.getActiveStream();ge&&F.warn(`Jumping gap occuring in period ${ge.getStreamId()} starting at ${ae} and ending at ${Fe}. Jumping by: ${Fe+we-ae}`),k=null},oe)}D=Fe}}return b={reset:K,setConfig:function(J){J&&(J.settings&&(I=J.settings),J.playbackController&&(N=J.playbackController),J.streamController&&($=J.streamController),J.videoModel&&(q=J.videoModel))},initialize:function(){(function(){y.on(f.default.WALLCLOCK_TIME_UPDATED,ue,this),y.on(f.default.INITIAL_STREAM_SWITCH,se,this),y.on(f.default.PLAYBACK_SEEKING,Z,this),y.on(f.default.BUFFER_REPLACEMENT_STARTED,ee,b),y.on(f.default.TRACK_CHANGE_RENDERED,Y,b)})()}},F=(0,l.default)(v).getInstance().getLogger(b),K(),b}qS.__dashjs_factory_name="GapController";var zF=r.default.getSingletonFactory(qS),GS=class extends le{constructor(v,y){super(),this.url=v||null,this.type=y||null,this.mediaType=h.default.STREAM,this.responseType=""}};function HS(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance();let w,I=nu(y).create({errHandler:v.errHandler,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,errors:en});return w={load:function(R,M,D){const N=function($,q){M.resolved=!0,M.resolvedContent=$||null,b.trigger(f.default.XLINK_ELEMENT_LOADED,{element:M,resolveObject:D,error:$||q?null:new Yt.default(en.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,en.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+R)})};if(R==="urn:mpeg:dash:resolve-to-zero:2013")N(null,!0);else{const $=new GS(R,he.HTTPRequest.XLINK_EXPANSION_TYPE);I.load({request:$,success:function(q){N(q)},error:function(){N(null)}})}},reset:function(){I&&(I.abort(),I=null)}},w}HS.__dashjs_factory_name="XlinkLoader";var UF=r.default.getClassFactory(HS);const au="onLoad";function VS(v){v=v||{};let y=this.context,b=(0,m.default)(y).getInstance();const w=or(y).getInstance();let I,R,M,D;function N(F,K,Z){let ee,Y,se={};se.elements=F,se.type=K,se.resolveType=Z,se.elements.length===0&&q(se);for(let ue=0;ue<se.elements.length;ue++)ee=se.elements[ue],Y=w.isHTTPURL(ee.url)?ee.url:ee.originalContent.BaseURL+ee.url,D.load(Y,ee,se)}function $(F){let K,Z,ee="";if(K=F.element,Z=F.resolveObject,K.resolvedContent){let Y=0;K.resolvedContent.indexOf("<?xml")===0&&(Y=K.resolvedContent.indexOf("?>")+2),ee=K.resolvedContent.substr(0,Y)+"<response>"+K.resolvedContent.substr(Y)+"</response>",K.resolvedContent=R.parseXml(ee).response}(function(Y){let se,ue;for(se=0;se<Y.elements.length;se++)if(ue=Y.elements[se],ue.resolved===!1)return!1;return!0})(Z)&&q(Z)}function q(F){let K,Z,ee=[];if(function(Y){let se,ue,me,ve,J,H,B=[];for(ve=Y.elements.length-1;ve>=0;ve--){if(se=Y.elements[ve],ue=se.type,se.resolvedContent){if(se.resolvedContent)for(J=0;J<se.resolvedContent[ue].length;J++)me=se.resolvedContent[ue][J],B.push(me)}else delete se.originalContent["xlink:actuate"],delete se.originalContent["xlink:href"],B.push(se.originalContent);for(se.parentElement[ue].splice(se.index,1),H=0;H<B.length;H++)se.parentElement[ue].splice(se.index+H,0,B[H]);B=[]}Y.elements.length>0&&R.getIron().run(M)}(F),F.resolveType==="onActuate"&&b.trigger(f.default.XLINK_READY,{manifest:M}),F.resolveType===au)switch(F.type){case xe.default.PERIOD:for(K=0;K<M[xe.default.PERIOD].length;K++)Z=M[xe.default.PERIOD][K],Z.hasOwnProperty(xe.default.ADAPTATION_SET)&&(ee=ee.concat(k(Z[xe.default.ADAPTATION_SET],Z,xe.default.ADAPTATION_SET,au))),Z.hasOwnProperty(xe.default.EVENT_STREAM)&&(ee=ee.concat(k(Z[xe.default.EVENT_STREAM],Z,xe.default.EVENT_STREAM,au)));N(ee,xe.default.ADAPTATION_SET,au);break;case xe.default.ADAPTATION_SET:b.trigger(f.default.XLINK_READY,{manifest:M})}}function k(F,K,Z,ee){let Y,se,ue,me=[];for(se=F.length-1;se>=0;se--)Y=F[se],Y.hasOwnProperty("xlink:href")&&Y["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&F.splice(se,1);for(se=0;se<F.length;se++)Y=F[se],Y.hasOwnProperty("xlink:href")&&Y.hasOwnProperty("xlink:actuate")&&Y["xlink:actuate"]===ee&&(ue=L(Y["xlink:href"],K,Z,se,ee,Y),me.push(ue));return me}function L(F,K,Z,ee,Y,se){return{url:F,parentElement:K,type:Z,index:ee,resolveType:Y,originalContent:se,resolvedContent:null,resolved:!1}}return I={resolveManifestOnLoad:function(F){let K;M=F,M.Period?(K=k(M.Period,M,xe.default.PERIOD,au),N(K,xe.default.PERIOD,au)):b.trigger(f.default.XLINK_READY,{manifest:M})},setParser:function(F){F&&(R=F)},reset:function(){b.off(f.default.XLINK_ELEMENT_LOADED,$,I),D&&(D.reset(),D=null)}},b.on(f.default.XLINK_ELEMENT_LOADED,$,I),D=UF(y).create({errHandler:v.errHandler,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,settings:v.settings}),I}VS.__dashjs_factory_name="XlinkController";var jF=r.default.getClassFactory(VS);function KS(v){function y(I,R){for(let M in I)R.hasOwnProperty(M)||(R[M]=I[M])}function b(I,R,M){for(let D=0,N=I.length;D<N;++D){const $=I[D];if(R[$.name])if(M[$.name]){if($.merge){const q=R[$.name],k=M[$.name];typeof q=="object"&&typeof k=="object"?y(q,k):M[$.name]=q+k}}else M[$.name]=R[$.name]}}function w(I,R){for(let M=0,D=I.children.length;M<D;++M){const N=I.children[M],$=R[N.name];if($)for(let q=0,k=$.length;q<k;++q){const L=$[q];b(I.properties,R,L),w(N,L)}}}return{run:function(I){if(I===null||typeof I!="object")return I;if(I.Period&&"period"in v){const R=v.period,M=I.Period;for(let D=0,N=M.length;D<N;++D){const $=M[D];if(w(R,$),"adaptationset"in v){const q=$.AdaptationSet;if(q){const k=v.adaptationset;for(let L=0,F=q.length;L<F;++L)w(k,q[L])}}}}return I}}}KS.__dashjs_factory_name="ObjectIron";var BF=r.default.getClassFactory(KS),Qf=class{constructor(v,y){this._test=v,this._converter=y}get test(){return this._test}get converter(){return this._converter}};const YS=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var $F=class extends Qf{constructor(){super((v,y,b)=>{const w=[xe.default.MIN_BUFFER_TIME,xe.default.MEDIA_PRESENTATION_DURATION,xe.default.MINIMUM_UPDATE_PERIOD,xe.default.TIMESHIFT_BUFFER_DEPTH,xe.default.MAX_SEGMENT_DURATION,xe.default.MAX_SUBSEGMENT_DURATION,xe.default.SUGGESTED_PRESENTATION_DELAY,xe.default.START,h.default.START_TIME,xe.default.DURATION],I=w.length;for(let R=0;R<I;R++)if(y===w[R])return YS.test(b);return!1},v=>{const y=YS.exec(v);let b=31536e3*parseFloat(y[3]||0)+2592e3*parseFloat(y[5]||0)+86400*parseFloat(y[7]||0)+3600*parseFloat(y[9]||0)+60*parseFloat(y[11]||0)+parseFloat(y[13]||0);return y[1]!==void 0&&(b=-b),b})}};const WS=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var qF=class extends Qf{constructor(){super((v,y,b)=>WS.test(b),v=>{const y=WS.exec(v);let b;if(b=Date.UTC(parseInt(y[1],10),parseInt(y[2],10)-1,parseInt(y[3],10),parseInt(y[4],10),parseInt(y[5],10),y[6]&&parseInt(y[6],10)||0,y[7]&&1e3*parseFloat(y[7])||0),y[9]&&y[10]){const w=60*parseInt(y[9],10)+parseInt(y[10],10);b+=(y[8]==="+"?-1:1)*w*60*1e3}return new Date(b)})}};const GF=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,HF=[xe.default.ID];var VF=class extends Qf{constructor(){super((v,y,b)=>GF.test(b)&&HF.indexOf(y)===-1,v=>parseFloat(v))}},KF=class extends Qf{constructor(){super((v,y)=>{const b={[xe.default.ADAPTATION_SET]:[xe.default.LANG],[xe.default.REPRESENTATION]:[xe.default.LANG],[xe.default.CONTENT_COMPONENT]:[xe.default.LANG],[xe.default.LABEL]:[xe.default.LANG],[xe.default.GROUP_LABEL]:[xe.default.LANG]};if(b.hasOwnProperty(v)){let w=b[v];return w!==void 0&&w.indexOf(y)>=0}return!1},v=>Yf(v)||String(v))}},YF=class{constructor(v){var y;this._name=v,this._merge=(y=v)&&y.length&&y.charAt(0)===y.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},su=class{constructor(v,y,b){this._name=v||"",this._properties=[],this._children=b||[],Array.isArray(y)&&y.forEach(w=>{this._properties.push(new YF(w))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},WF=class extends su{constructor(){const v=[xe.default.AUDIO_CHANNEL_CONFIGURATION,xe.default.AUDIO_SAMPLING_RATE,xe.default.CODECS,xe.default.CODING_DEPENDENCY,xe.default.CONTENT_PROTECTION,xe.default.FRAMERATE,xe.default.FRAME_PACKING,xe.default.HEIGHT,xe.default.INBAND_EVENT_STREAM,xe.default.MAXIMUM_SAP_PERIOD,xe.default.MAX_PLAYOUT_RATE,xe.default.MIME_TYPE,xe.default.PROFILES,xe.default.SAR,xe.default.SCAN_TYPE,xe.default.SEGMENT_PROFILES,xe.default.SEGMENT_SEQUENCE_PROPERTIES,xe.default.START_WITH_SAP,xe.default.WIDTH];super(xe.default.ADAPTATION_SET,v,[new su(xe.default.REPRESENTATION,v,[new su(xe.default.SUB_REPRESENTATION,v)])])}},QF=class extends su{constructor(){const v=[xe.default.SEGMENT_BASE,xe.default.SEGMENT_TEMPLATE,xe.default.SEGMENT_LIST];super(xe.default.PERIOD,v,[new su(xe.default.ADAPTATION_SET,v,[new su(xe.default.REPRESENTATION,v)])])}};const XF=[xe.default.ACCESSIBILITY,xe.default.ADAPTATION_SET,xe.default.ADD,xe.default.AUDIO_CHANNEL_CONFIGURATION,xe.default.BASE_URL,xe.default.CONTENT_COMPONENT,xe.default.CONTENT_PROTECTION,xe.default.CONTENT_STEERING,xe.default.ESSENTIAL_PROPERTY,xe.default.EVENT,xe.default.EVENT_STREAM,xe.default.INBAND_EVENT_STREAM,xe.default.LABEL,xe.default.LOCATION,xe.default.METRICS,xe.default.PATCH_LOCATION,xe.default.PERIOD,xe.default.PRESELECTION,xe.default.PRODUCER_REFERENCE_TIME,xe.default.REMOVE,xe.default.REPLACE,xe.default.REPORTING,xe.default.REPRESENTATION,xe.default.ROLE,xe.default.S,xe.default.SEGMENT_SEQUENCE_PROPERTIES,xe.default.SEGMENT_URL,xe.default.SERVICE_DESCRIPTION,xe.default.SUPPLEMENTAL_PROPERTY,xe.default.UTC_TIMING];function QS(v){v=v||{};const y=this.context,b=v.debug;let w,I,R,M;function D(N){try{const $=function(q){const k=function(F,K={}){let Z=K.pos||0;const ee=F.length,Y=!!K.keepComments,se=!!K.keepWhitespace,ue="<",me=60,ve=">",J=62,H=45,B=47,G=63,be=33,re=39,we=34,Ee=91,Ie=93,Fe=`\r
	>/= `;function Ce(ge,V="#text"){return{nodeName:V,nodeValue:ge,attributes:{},childNodes:[]}}function Q(ge=""){const V=[];for(;F[Z];)if(F.charCodeAt(Z)==me){if(F.charCodeAt(Z+1)===B){const Te=Z+2;if(Z=F.indexOf(ve,Z),!F.startsWith(ge,Te)){const Ae=F.substring(0,Z).split(`
`);throw new Error(`Unexpected close tag
Line: `+(Ae.length-1)+`
Column: `+(Ae[Ae.length-1].length+1)+`
Char: `+F[Z])}return Z+1&&(Z+=1),V}if(F.charCodeAt(Z+1)===G){Z=F.indexOf(ve,Z),Z++;continue}if(F.charCodeAt(Z+1)===be){if(F.charCodeAt(Z+2)==H){const Te=Z;for(;Z!==-1&&(F.charCodeAt(Z)!==J||F.charCodeAt(Z-1)!=H||F.charCodeAt(Z-2)!=H||Z==-1);)Z=F.indexOf(ve,Z+1);Z===-1&&(Z=ee),Y&&V.push(Ce(F.substring(Te,Z+1),"#comment"))}else{if(F.charCodeAt(Z+2)===Ee&&F.charCodeAt(Z+8)===Ee&&F.startsWith("CDATA",Z+3)){const Te=F.indexOf("]]>",Z);Te==-1?(V.push(Ce(F.substr(Z+9),"#cdata")),Z=ee):(V.push(Ce(F.substring(Z+9,Te),"#cdata")),Z=Te+3);continue}{const Te=Z+1;Z+=2;let Ae=!1;for(;(F.charCodeAt(Z)!==J||Ae===!0)&&F[Z];)F.charCodeAt(Z)===Ee?Ae=!0:Ae===!0&&F.charCodeAt(Z)===Ie&&(Ae=!1),Z++;V.push(Ce(F.substring(Te,Z),"#doctype"))}}Z++;continue}const ye=ae();V.push(ye)}else{const ye=ne();if(se)ye.length>0&&V.push(Ce(ye));else{const Te=ye.trim();Te.length>0&&V.push(Ce(Te))}Z++}return V}function ne(){const ge=Z;return Z=F.indexOf(ue,Z)-1,Z===-2&&(Z=ee),ul(F.slice(ge,Z+1))}function fe(){const ge=Z;for(;Fe.indexOf(F[Z])===-1&&F[Z];)Z++;return F.slice(ge,Z)}function ae(){Z++;const ge=fe();let V=ge,ye=null;const Te=ge.indexOf(":");Te!==-1&&(ye=ge.slice(0,Te),V=ge.slice(Te+1));const Ae=function(){const Ge={};for(;F.charCodeAt(Z)!==J&&F[Z];){const ot=F.charCodeAt(Z);if(ot>64&&ot<91||ot>96&&ot<123){const Et=fe();let xt="",tn=F.charCodeAt(Z);for(;tn!==re&&tn!==we;)Z++,tn=F.charCodeAt(Z);if(tn===re||tn===we){if(xt=oe(),Z===-1)throw new Error("Missing closing quote")}else Z--;Ge[Et]=ul(xt)}Z++}return Ge}();let Oe=[];const De=F.charCodeAt(Z-1);return Z++,De!==B&&(Oe=Q(ge)),{nodeName:ge,nodeValue:null,attributes:Ae,childNodes:Oe,prefix:ye,localName:V}}function oe(){const ge=F[Z],V=Z+1;return Z=F.indexOf(ge,V),F.slice(V,Z)}return{nodeName:"#document",nodeValue:null,childNodes:Q(""),attributes:{}}}(q),L=k.childNodes.find(F=>F.nodeName==="MPD"||F.nodeName==="Patch")||k.childNodes[0];return function F(K){K.nodeName.indexOf(":")!==-1&&(K.__prefix=K.prefix,K.nodeName=K.localName);const{childNodes:Z,attributes:ee,nodeName:Y}=K;K.tagName=Y;for(let ue in ee){let me=ee[ue];if(Y==="S")me=parseInt(me);else for(let ve=0,J=R.length;ve<J;ve++){const H=R[ve];if(H.test(Y,ue,me)){me=H.converter(me);break}}K[ue]=me}const se=Z==null?void 0:Z.length;for(let ue=0;ue<se;ue++){const me=Z[ue];if(me.nodeName==="#text"){K.__text=me.nodeValue;continue}F(me);const{nodeName:ve}=me;Array.isArray(K[ve])?K[ve].push(me):XF.indexOf(ve)!==-1?(K[ve]||(K[ve]=[]),K[ve].push(me)):K[ve]=me}K.__children=Z}(L),L}(N);return{[$.tagName]:$}}catch{return null}}return w={getIron:function(){return M},parseXml:D,parse:function(N){let $;const q=window.performance.now();if($=D(N),!$)throw new Error("failed to parse the manifest");$.Patch?($=$.Patch,$.add&&$.add.forEach(L=>M.run(L)),$.replace&&$.replace.forEach(L=>M.run(L))):($=$.MPD,M.run($));const k=window.performance.now();return I.info("Parsing complete: "+(k-q).toPrecision(3)+"ms"),$.protocol="DASH",$}},I=b.getLogger(w),R=[new $F,new qF,new VF,new KF],M=BF(y).create({adaptationset:new WF,period:new QF}),w}QS.__dashjs_factory_name="DashParser";var ZF=r.default.getClassFactory(QS);function XS(v){v=v||{};const y=this.context,b=v.debug,w=v.settings,I=(0,m.default)(y).getInstance(),R=or(y).getInstance();let M,D,N,$,q,k=v.mssHandler,L=v.errHandler;function F(K){I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:K.manifest})}return M={load:function(K,Z=null,ee=null){const Y=new Date,se=new GS(K,he.HTTPRequest.MPD_TYPE);Z&&(se.serviceLocation=Z),ee&&(se.queryParams=ee),se.startDate||(se.startDate=Y),I.trigger(f.default.MANIFEST_LOADING_STARTED,{request:se}),N.load({request:se,success:function(ue,me,ve){if(!$)return;let J,H,B;if(ve&&ve!==K?(H=R.parseBaseUrl(ve),J=ve):(R.isRelative(K)&&(K=R.resolve(K,window.location.href)),H=R.parseBaseUrl(K)),me!="No Content")if(q===null&&(q=function(G){let be=null;return G.indexOf("SmoothStreamingMedia")>-1?(k&&(be=k.createMssParser(),k.createMssFragmentProcessor(),k.registerEvents()),be):G.indexOf("MPD")>-1||G.indexOf("Patch")>-1?ZF(y).create({debug:b}):be}(ue)),q!==null){$.setParser(q);try{B=q.parse(ue)}catch{return void I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Yt.default(en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${K}`)})}if(B){if(B.url=J||K,B.originalUrl||(B.originalUrl=B.url),w&&w.get().streaming.enableManifestDurationMismatchFix&&B.mediaPresentationDuration&&B.Period.length>1){const G=B.Period.reduce((be,re)=>be+re.duration,0);!isNaN(G)&&B.mediaPresentationDuration>G&&(D.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),B.mediaPresentationDuration=G)}B.baseUri=H,B.loadedTime=new Date,$.resolveManifestOnLoad(B),I.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ue})}else I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Yt.default(en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${K}`)})}else I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Yt.default(en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${K}`)});else I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ue,me,ve){I.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Yt.default(en.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,en.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${K}, ${ve}`)})}})},reset:function(){I.off(f.default.XLINK_READY,F,M),k&&k.reset(),$&&($.reset(),$=null),N&&(N.abort(),N=null)}},D=b.getLogger(M),I.on(f.default.XLINK_READY,F,M),N=nu(y).create({errHandler:v.errHandler,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,urlUtils:R,constants:h.default,dashConstants:xe.default,errors:en,requestTimeout:v.settings.get().streaming.manifestRequestTimeout}),$=jF(y).create({errHandler:L,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,settings:v.settings}),q=null,M}XS.__dashjs_factory_name="ManifestLoader";var JF=r.default.getClassFactory(XS);function ZS(){let v,y,b=this.context,w=(0,m.default)(b).getInstance();return v={getValue:function(){return y},setValue:function(I){y=I,I&&w.trigger(f.default.MANIFEST_LOADED,{data:I})}},v}ZS.__dashjs_factory_name="ManifestModel";var e2=r.default.getSingletonFactory(ZS);function JS(){const v=this.context,y=(0,u.default)(v).getInstance();let b,w,I;return b={select:function(R){if(!R||R.length===0)return null;let M=null;return y.get().streaming.applyContentSteering&&(M=function(D){const N=I.getCurrentSteeringResponseData();return N&&N.pathwayPriority&&N.pathwayPriority.length>0?function($=[],q=[]){let k=0,L=null;for(;k<$.length;){const F=$[k],K=q.findIndex(Z=>Z.serviceLocation&&Z.serviceLocation===F);if(K!==-1&&!w.contains(q[K].serviceLocation)){L=q[K];break}k+=1}return L}(N.pathwayPriority,D):null}(R)),M||(M=function(D){return D[0]}(R)),M},setConfig:function(R){R.blacklistController&&(w=R.blacklistController),R.contentSteeringController&&(I=R.contentSteeringController)},reset:function(){w.reset()}},w=Jt(v).create({updateEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),I=Ip(v).getInstance(),b}JS.__dashjs_factory_name="LocationSelector";var t2=r.default.getClassFactory(JS);function ex(){const v=this.context,y=(0,m.default)(v).getInstance(),b=or(v).getInstance();let w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y;function se(){Z=NaN,q=!1,N=!0,$=!1,ue()}function ue(){ee!==null&&(clearTimeout(ee),ee=null)}function me(Ee){ue(),$||(isNaN(Ee)&&!isNaN(Z)&&(Ee=1e3*Z),isNaN(Ee)||(L.debug("Refresh manifest in "+Ee+" milliseconds."),ee=setTimeout(H,Ee)))}function ve(Ee=!1){q=!0;const Ie=K.getValue();let Fe=Ie.url;Fe&&(Fe=st.default.removeQueryParameterFromUrl(Fe,h.default.CMCD_QUERY_KEY));let Ce=null;const Q=w.getPatchLocation(Ie),ne=k.select(Q);let fe=null;if(ne&&!Ee)Fe=ne.url,Ce=ne.serviceLocation,fe=ne.queryParams;else{const ae=function(ge){const V=w.getLocation(ge),ye=I.getSynthesizedLocationElements(V);return V.concat(ye)}(Ie),oe=k.select(ae);oe&&(Fe=oe.url,Ce=oe.serviceLocation,fe=oe.queryParams)}b.isRelative(Fe)&&(Fe=b.resolve(Fe,Ie.url)),F.load(Fe,Ce,fe)}function J(Ee){if(Ee){if(w.getIsPatch(Ee)){let Ce=Ee;Ee=K.getValue();let Q=w.isPatchValid(Ee,Ce),ne=Q;if(Q){let fe=w.getPublishTime(Ee);w.applyPatchToManifest(Ee,Ce);let ae=w.getPublishTime(Ee);ne=fe.getTime()!==ae.getTime()}if(!ne)return L.debug("Patch provided is invalid, performing full manifest refresh"),void ve(!0);Ee.loadedTime=new Date}}else(Ee=K.getValue()).loadedTime=new Date;if(K.getValue()&&K.getValue().type===xe.default.DYNAMIC&&Ee.type===xe.default.STATIC)return y.trigger(f.default.DYNAMIC_TO_STATIC),q=!1,void($=!0);K.setValue(Ee);const Ie=new Date,Fe=(Ie.getTime()-Ee.loadedTime.getTime())/1e3;Z=w.getManifestUpdatePeriod(Ee,Fe),1e3*Z>2147483647&&(Z=2147483647e-3),y.trigger(f.default.MANIFEST_UPDATED,{manifest:Ee}),L.info("Manifest has been refreshed at "+Ie+"["+Ie.getTime()/1e3+"] "),N||me()}function H(){N||(q?me(Y.get().streaming.manifestUpdateRetryInterval):ve())}function B(Ee){if(Ee.error)Ee.error.code===en.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&M.error(Ee.error);else{const Ie=Ee.manifest;(function(Fe){(function(Ce){const Q=R.getExternalSubtitles();if(!Q||Q.length===0)return;const ne=Ce&&Ce.Period?Ce.Period.length:0;Q.forEach(fe=>{if(fe.periodId===null&&ne>1)L.warn(`External subtitle with id ${fe.id} has no periodId and the MPD contains more than one period. Unable to add the external subtitle as it is not clear which period shall be used.`);else if(ne===1)G(Ce.Period[0],fe);else{const ae=Ce.Period.find(oe=>oe.id===fe.periodId);ae?G(ae,fe):L.warn(`External subtitle with id ${fe.id} has periodId ${fe.periodId} but the MPD does not contain a period with that id. Unable to add the external subtitle.`)}})})(Fe)})(Ie),J(Ie)}}function G(Ee,Ie){if(!Ee||!Ee.AdaptationSet)return Ee;Ee.AdaptationSet.push(Ie.serializeToMpdParserFormat())}function be(){N=!1,me()}function re(){N=!Y.get().streaming.scheduling.scheduleWhilePaused,N&&ue()}function we(){q=!1}return D={getIsUpdating:function(){return q},initialize:function(){se(),y.on(f.default.STREAMS_COMPOSED,we,this),y.on(g.default.PLAYBACK_STARTED,be,this),y.on(g.default.PLAYBACK_PAUSED,re,this),y.on(f.default.INTERNAL_MANIFEST_LOADED,B,this)},refreshManifest:ve,reset:function(){y.off(g.default.PLAYBACK_STARTED,be,this),y.off(g.default.PLAYBACK_PAUSED,re,this),y.off(f.default.STREAMS_COMPOSED,we,this),y.off(f.default.INTERNAL_MANIFEST_LOADED,B,this),se()},setConfig:function(Ee){Ee&&(Ee.manifestModel&&(K=Ee.manifestModel),Ee.adapter&&(w=Ee.adapter),Ee.manifestLoader&&(F=Ee.manifestLoader),Ee.errHandler&&(M=Ee.errHandler),Ee.locationSelector&&(k=Ee.locationSelector),Ee.settings&&(Y=Ee.settings),Ee.contentSteeringController&&(I=Ee.contentSteeringController),Ee.customParametersModel&&(R=Ee.customParametersModel))},setManifest:function(Ee){J(Ee)}},L=(0,l.default)(v).getInstance().getLogger(D),k=t2(v).create(),R=(0,xp.default)(v).getInstance(),D}ex.__dashjs_factory_name="ManifestUpdater";var tx=r.default.getClassFactory(ex);function Mp(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N,$,q,k,L;function F(V){if(!(V&&V.currentRepresentation&&V.currentRepresentation.mediaInfo&&V.currentRepresentation.mediaInfo.type))return;const ye=V.currentRepresentation.mediaInfo.type;N[ye]=V.currentRepresentation}function K(V,ye){return V&&I[ye]&&I[ye][V]?I[ye][V].list:[]}function Z(V,ye){return V&&I[ye]&&I[ye][V]?I[ye][V].current:null}function ee(V,ye={}){if(!V||!V.streamInfo)return;const Te=V.type,Ae=V.streamInfo.id,Oe=Z(Te,Ae);if(I[Ae]&&I[Ae][Te]&&(I[Ae][Te].current=V,I[Ae][Te].current&&(Te!==h.default.TEXT&&!ue(V,Oe)||Te===h.default.TEXT&&V.isFragmented)&&y.trigger(f.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:Oe,newMediaInfo:V,switchMode:R.get().streaming.trackSwitchMode[Te],options:ye},{streamId:Ae}),!ye.hasOwnProperty("noSettingsSave")||!ye.noSettingsSave)){let De=function(Ge){const ot={lang:Ge.lang,viewpoint:Ge.viewpoint,roles:Ge.roles,accessibility:Ge.accessibility,audioChannelConfiguration:Ge.audioChannelConfiguration,codec:Ge.codec};return ot.lang||ot.viewpoint||ot.role&&ot.role.length>0||ot.accessibility&&ot.accessibility.length>0||ot.audioChannelConfiguration&&ot.audioChannelConfiguration.length>0?ot:null}(V);if(!De||!I[Ae][Te].storeLastSettings)return;De.roles&&(De.role=De.roles[0],delete De.roles),De.accessibility&&(De.accessibility=De.accessibility[0]),De.audioChannelConfiguration&&(De.audioChannelConfiguration=De.audioChannelConfiguration[0]),D[Te]=De,L.setSavedMediaSettings(Te,De)}}function Y(V,ye){V&&ye&&(M[V]=ye)}function se(V){return V?M[V]:null}function ue(V,ye){if(!V&&!ye)return!0;if(!V||!ye||V.isPreselection!==ye.isPreselection)return!1;const Te=V.id===ye.id,Ae=JSON.stringify(V.viewpoint)===JSON.stringify(ye.viewpoint),Oe=V.lang===ye.lang,De=V.codec===ye.codec,Ge=JSON.stringify(V.roles)===JSON.stringify(ye.roles),ot=JSON.stringify(V.accessibility)===JSON.stringify(ye.accessibility),Et=JSON.stringify(V.audioChannelConfiguration)===JSON.stringify(ye.audioChannelConfiguration);return Te&&De&&Ae&&Oe&&Ge&&ot&&Et}function me(){I={},D={},N={},M={audio:null,video:null,text:null},y.off(g.default.REPRESENTATION_SWITCH,F,b)}function ve(V,ye,Te){let Ae=[];return V.forEach(function(Oe){ye(Te,Oe)&&Ae.push(Oe)}),Ae.length!==0||ye===be&&R.get().streaming.assumeDefaultRoleAsMain&&ge(Te.role,{schemeIdUri:h.default.DASH_ROLE_SCHEME_ID,value:xe.default.MAIN})&&(w.info("no track with Role set to main - assuming main as default and searching again"),Ae=ve(V,re,null),Ae.length!==0)?Ae:(w.info("Filter-Function ("+ye.name+") resulted in no tracks; setting ignored"),V)}function J(V,ye){try{return!V.lang||V.lang instanceof RegExp?ye.lang.match(V.lang):ye.lang!==""&&Np(ye.lang,Yf(V.lang)).length>0}catch{return!1}}function H(V,ye){return V.index===void 0||V.index===null||ye.index===V.index}function B(V,ye){return V.id===void 0||V.id===null||ye.id===V.id}function G(V,ye){return!V.viewpoint||!!ye.viewpoint.filter(function(Te){return ge(Te,V.viewpoint)})[0]}function be(V,ye,Te=!1){return!!ye.roles&&(!V.role||!!ye.roles.filter(function(Ae){return ge(Ae,V.role)})[0]||ye.type===h.default.AUDIO&&Te)}function re(V,ye){return!ye.roles||ye.roles.length===0}function we(V,ye){let Te;return Te=V.accessibility?!!ye.accessibility.filter(function(Ae){return ge(Ae,V.accessibility)})[0]:!ye.accessibility.length,Te}function Ee(V,ye){return!V.audioChannelConfiguration||!!ye.audioChannelConfiguration.filter(function(Te){return ge(Te,V.audioChannelConfiguration)})[0]}function Ie(V,ye){return!V.codec||V.codec===ye.codec}function Fe(V){let ye=0,Te=[];return V.forEach(Ae=>{isNaN(Ae.selectionPriority)||(Ae.selectionPriority>ye?(ye=Ae.selectionPriority,Te=[Ae]):Ae.selectionPriority===ye&&Te.push(Ae))}),Te}function Ce(V){let ye,Te=0,Ae=[];return V.forEach(function(Oe){ye=Math.max.apply(Math,Oe.bitrateList.map(function(De){return De.bandwidth})),ye>Te?(Te=ye,Ae=[Oe]):ye===Te&&Ae.push(Oe)}),Ae}function Q(V){return V[0]&&V[0].type===h.default.VIDEO?function(ye){let Te,Ae=1/0,Oe=[];return ye.forEach(function(De){Te=De.bitrateList.reduce(function(ot,Et){const xt=Math.max(1,Et.width*Et.height);return ot+Et.bandwidth/xt},0)/De.bitrateList.length,Te<Ae?(Ae=Te,Oe=[De]):Te===Ae&&Oe.push(De)}),Oe}(V):V[0]&&V[0].type===h.default.AUDIO?function(ye){let Te=1/0,Ae=[];return ye.forEach(function(Oe){let De=Oe.audioChannelConfiguration.reduce(function(ot,Et){return ot+(wS(Et)||0)},0)/Oe.audioChannelConfiguration.length;Oe.hasOwnProperty("supplementalProperties")&&Oe.supplementalProperties.some(ot=>ot.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ot.value==="JOC")&&(De=16),De||(De=1);let Ge=Oe.bitrateList.reduce(function(ot,Et){return ot+Et.bandwidth/De},0)/Oe.bitrateList.length;Ge<Te?(Te=Ge,Ae=[Oe]):Ge===Te&&Ae.push(Oe)}),Ae}(V):V}function ne(V){let ye,Te=0,Ae=[];return V.forEach(function(Oe){ye=Oe.representationCount,ye>Te?(Te=ye,Ae=[Oe]):ye===Te&&Ae.push(Oe)}),Ae}function fe(V,ye){if(V===h.default.TEXT)return function(Oe){if(!Oe||Oe.length===0)return null;const De=Oe.filter(Ge=>!(Ge&&Ge.roles&&Ge.roles.length>0)||Ge.roles.every(ot=>ot.schemeIdUri!==h.default.DASH_ROLE_SCHEME_ID||ot.value!==xe.default.FORCED_SUBTITLE));return De.length>0?De[0]:Oe[0]}(ye);let Te;const Ae=$.getCustomInitialTrackSelectionFunction();if(Te=function(Oe){try{let De;return De=function(Ge){try{const ot=Ge.filter(Et=>{const xt=Et.type;return Et.bitrateList.some(tn=>{const kt=q.getAbrBitrateParameter("maxBitrate",xt),nn=q.getAbrBitrateParameter("minBitrate",xt);return!(kt>-1&&tn.bandwidth>1e3*kt||nn>-1&&tn.bandwidth<1e3*nn)})});return ot.length>0?ot:Ge}catch(ot){return w.error(ot),Ge}}(Oe),De=function(Ge){try{if(!R.get().streaming.abr.limitBitrateByPortal)return Ge;const{elementWidth:ot}=k.getVideoElementSize(),Et=Ge.filter(xt=>xt.type!==h.default.VIDEO||xt.bitrateList.some(tn=>tn.width<=ot));return Et.length>0?Et:Ge}catch(ot){return w.error(ot),Ge}}(De),De}catch(De){return w.error(De),Oe}}(ye),Ae&&typeof Ae=="function")Te=Ae(Te);else if(N[V])Te=function(Oe,De){if(!Oe||Oe.length===0||!De||!N[De])return Oe;const Ge=N[De].bandwidth;if(!Ge||isNaN(Ge))return Oe;let ot={min:NaN,track:null};return Oe.forEach(Et=>{Et.bitrateList.forEach(xt=>{const tn=Math.abs(xt.bandwidth-Ge);(isNaN(ot.min)||tn<ot.min)&&(ot.min=tn,ot.track=Et)})}),ot.track?[ot.track]:Oe}(Te,V);else if(R.get().streaming.ignoreSelectionPriority||(w.info("Trying to find track with highest selectionPriority"),Te=function(Oe){return Fe(Oe)}(Te)),Te.length>1&&R.get().streaming.prioritizeRoleMain&&(w.info("Trying to find a main track"),Te=ve(Te,be,{role:{schemeIdUri:h.default.DASH_ROLE_SCHEME_ID,value:xe.default.MAIN}})),Te.length>1){w.info("Selecting track based on selectionModeForInitialTrack");let Oe=R.get().streaming.selectionModeForInitialTrack;switch(Oe){case h.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Te=function(De){let Ge=Ce(De);return Ge.length>1&&(Ge=ne(Ge)),Ge}(Te);break;case h.default.TRACK_SELECTION_MODE_FIRST_TRACK:Te=ae(Te);break;case h.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Te=oe(Te);break;case h.default.TRACK_SELECTION_MODE_WIDEST_RANGE:Te=function(De){let Ge=ne(De);return Ge.length>1&&(Ge=Ce(De)),Ge}(Te);break;case h.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:Te=function(De){let Ge=De.filter(ot=>!(!ot.segmentSequenceProperties||ot.segmentSequenceProperties.length===0)&&ot.segmentSequenceProperties.some(Et=>Et.cadence===1&&(Et.sapType===0||Et.sapType===1)));return oe(Ge.length>0?Ge:De)}(Te);break;default:w.warn(`Track selection mode ${Oe} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),Te=ae(Te)}}return Te.length>0?Te[0]:ye[0]}function ae(V){return V[0]}function oe(V){let ye=Q(V);return ye.length>1&&(ye=Ce(ye)),ye}function ge(V,ye){return!(!V||!ye)&&JSON.stringify({schemeIdUri:V.schemeIdUri,value:V.value})===JSON.stringify({schemeIdUri:ye.schemeIdUri,value:ye.value})}return b={addTrack:function(V){if(!V)return;w.info("addTrack with track.codec='"+V.codec+"', track.type='"+V.type+"'");const ye=V.type;if((Te=ye)!==h.default.AUDIO&&Te!==h.default.VIDEO&&Te!==h.default.TEXT&&Te!==h.default.IMAGE)return;var Te;let Ae=V.streamInfo.id;I[Ae]||(I[Ae]=function(){const De=R.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:De,current:null},video:{list:[],storeLastSettings:De,current:null},text:{list:[],storeLastSettings:De,current:null},image:{list:[],storeLastSettings:De,current:null}}}());const Oe=I[Ae][ye].list;for(let De=0,Ge=Oe.length;De<Ge;++De)if(ue(Oe[De],V))return;Oe.push(V)},areTracksEqual:ue,clearDataForStream:function(V){I[V]&&delete I[V]},getCurrentTrackFor:Z,getInitialSettings:se,getTracksFor:K,getTracksWithHighestSelectionPriority:Fe,getTracksWithHighestBitrate:Ce,getTracksWithHighestEfficiency:Q,getTracksWithWidestRange:ne,initialize:function(){y.on(g.default.REPRESENTATION_SWITCH,F,b)},isCurrentTrack:function(V){if(!V)return!1;const ye=V.type,Te=V.streamInfo.id;return I[Te]&&I[Te][ye]&&ue(I[Te][ye].current,V)},matchSettings:function(V,ye,Te=!1){try{let Ae=!1;if(V.lang){if(V.lang instanceof RegExp)Ae=ye.lang.match(V.lang);else if(ye.lang!==""){const xt=Yf(V.lang);xt&&(Ae=Np(ye.lang,xt).length>0)}}else Ae=!0;const Oe=V.index===void 0||V.index===null||ye.index===V.index,De=!V.viewpoint||!!ye.viewpoint.filter(function(xt){return ge(xt,V.viewpoint)})[0],Ge=!V.role||!!ye.roles.filter(function(xt){return ge(xt,V.role)})[0];let ot=!V.accessibility||!!ye.accessibility.filter(function(xt){return ge(xt,V.accessibility)})[0],Et=!V.audioChannelConfiguration||!!ye.audioChannelConfiguration.filter(function(xt){return ge(xt,V.audioChannelConfiguration)})[0];return Ae&&Oe&&De&&(Ge||ye.type===h.default.AUDIO&&Te)&&ot&&Et}catch{return!1}},matchSettingsAccessibility:we,matchSettingsAudioChannelConfig:Ee,matchSettingsIndex:H,matchSettingsLang:J,matchSettingsRole:be,matchSettingsViewPoint:G,reset:me,saveTextSettingsDisabled:function(){L.setSavedMediaSettings(h.default.TEXT,null)},selectInitialTrack:fe,setConfig:function(V){V&&(V.domStorage&&(L=V.domStorage),V.settings&&(R=V.settings),V.customParametersModel&&($=V.customParametersModel),V.mediaPlayerModel&&(q=V.mediaPlayerModel),V.videoModel&&(k=V.videoModel))},setInitialMediaSettingsForType:function(V,ye){let Te=D[V]||se(V);const Ae=K(V,ye.id);let Oe=[];Te&&Object.keys(Te).length!==0||(Te=L.getSavedMediaSettings(V),Te&&delete Te.codec,Y(V,Te)),Ae&&Ae.length!==0&&(Oe=R.get().streaming.includePreselectionsForInitialTrackSelection?Array.from(Ae):Ae.filter(De=>!De.isPreselection),Te&&(w.info("Filtering "+Oe.length+" "+V+" tracks based on settings"),Oe=ve(Oe,B,Te),Oe=ve(Oe,J,Te),Oe=ve(Oe,H,Te),Oe=ve(Oe,G,Te),V===h.default.AUDIO&&D[V]||(Oe=ve(Oe,be,Te)),Oe=ve(Oe,we,Te),Oe=ve(Oe,Ee,Te),Oe=ve(Oe,Ie,Te),w.info("Filtering "+V+" tracks ended, found "+Oe.length+" matching track(s).")),Oe.length>1?ee(fe(V,Oe)):ee(Oe[0]))},setInitialSettings:Y,setTrack:ee},w=(0,l.default)(v).getInstance().getLogger(b),me(),b}Mp.__dashjs_factory_name="MediaController";const nx=r.default.getSingletonFactory(Mp);r.default.updateSingletonFactory(Mp.__dashjs_factory_name,nx);var n2=nx;function rx(){let v,y,b,w;const I=this.context,R=(0,u.default)(I).getInstance();function M(k,L){return isNaN(k)?0:k>0?(L&&y.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):k<-.5?(L&&y.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):k}function D(k,L){return isNaN(k)?0:k<0?(L&&y.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):k>1?(L&&y.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):k}function N(){const k=$(),L=b.getLiveDelay();return!isNaN(L)&&L>0?Math.min(k,L):k}function $(){return R.get().streaming.buffer.bufferTimeDefault>0?R.get().streaming.buffer.bufferTimeDefault:q()?20:12}function q(){return R.get().streaming.buffer.fastSwitchEnabled!==null?R.get().streaming.buffer.fastSwitchEnabled:!b.getLowLatencyModeEnabled()}return v={getAbrBitrateParameter:function(k,L){try{const F=R.get().streaming.abr[k][L];if(!isNaN(F)&&F!==-1)return F;const K=w.getServiceDescriptionSettings();return K&&K[k]&&!isNaN(K[k][L])?K[k][L]:-1}catch{return-1}},getBufferTimeDefault:N,getBufferTimeDefaultUnadjusted:$,getCatchupMaxDrift:function(){if(!isNaN(R.get().streaming.liveCatchup.maxDrift)&&R.get().streaming.liveCatchup.maxDrift>=0)return R.get().streaming.liveCatchup.maxDrift;const k=w.getServiceDescriptionSettings();return k&&k.liveCatchup&&!isNaN(k.liveCatchup.maxDrift)&&k.liveCatchup.maxDrift>=0?k.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return R.get().streaming.liveCatchup.enabled!==null?R.get().streaming.liveCatchup.enabled:b.getInitialCatchupModeActivated()},getCatchupPlaybackRates:function(k){const L=R.get().streaming.liveCatchup.playbackRate;if(!isNaN(L.min)||!isNaN(L.max))return{min:M(L.min,k),max:D(L.max,k)};const F=w.getServiceDescriptionSettings();if(F&&F.liveCatchup&&(!isNaN(F.liveCatchup.playbackRate.min)||!isNaN(F.liveCatchup.playbackRate.max))){const K=F.liveCatchup.playbackRate;return{min:M(K.min,k),max:D(K.max,k)}}return{min:-.5,max:.5}},getFastSwitchEnabled:q,getInitialBufferLevel:function(){const k=R.get().streaming.buffer.initialBufferLevel;return isNaN(k)||k<0?0:Math.min(N(),k)},getRetryAttemptsForType:function(k){const L=isNaN(R.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:R.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return b.getLowLatencyModeEnabled()?R.get().streaming.retryAttempts[k]*L:R.get().streaming.retryAttempts[k]},getRetryIntervalsForType:function(k){const L=isNaN(R.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:R.get().streaming.retryIntervals.lowLatencyReductionFactor;return b.getLowLatencyModeEnabled()?R.get().streaming.retryIntervals[k]/L:R.get().streaming.retryIntervals[k]},getScheduleTimeout:function(){return b.getLowLatencyModeEnabled()?R.get().streaming.scheduling.lowLatencyTimeout:R.get().streaming.scheduling.defaultTimeout},reset:function(){},setConfig:function(k){k.playbackController&&(b=k.playbackController),k.serviceDescriptionController&&(w=k.serviceDescriptionController)}},y=(0,l.default)(I).getInstance().getLogger(v),v}rx.__dashjs_factory_name="MediaPlayerModel";var r2=r.default.getSingletonFactory(rx);function ix(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G;function be(){Ie(),ee=!1,k=0,Z=0,w=0,K=!1,F=!1,R=!1,se=NaN,q=NaN,B&&(y.off(f.default.DATA_UPDATE_COMPLETED,De,M),y.off(f.default.MANIFEST_UPDATED,tt,M),y.off(f.default.STREAMS_COMPOSED,St,M),y.off(g.default.PLAYBACK_ENDED,Zt,M),y.off(g.default.STREAM_INITIALIZING,jt,M),y.off(g.default.REPRESENTATION_SWITCH,He,M),y.off(g.default.BUFFER_LEVEL_STATE_CHANGED,Et,M),Oe(),B.removeEventListener("canplay",Ge),B.removeEventListener("canplaythrough",ot),B.removeEventListener("ended",vt),B.removeEventListener("error",Rn),B.removeEventListener("loadeddata",Tt),B.removeEventListener("loadedmetadata",Je),B.removeEventListener("pause",nn),B.removeEventListener("play",xt),B.removeEventListener("playing",kt),B.removeEventListener("progress",wn),B.removeEventListener("ratechange",bn),B.removeEventListener("seeked",Ln),B.removeEventListener("seeking",fn),B.removeEventListener("stalled",wt),B.removeEventListener("timeupdate",Mn),B.removeEventListener("volumechange",At),B.removeEventListener("waiting",tn)),G=null,B=null,J=null,N=null}function re(at=null){return parseFloat((we(at)-ne()).toFixed(5))}function we(at){const Ct=at||J;return Ct.start+Ct.duration}function Ee(at=!1){J&&B&&B.getElement()?(at&&N&&Q(ne()),B.play()):ee=!0}function Ie(){J&&B&&B.pause()}function Fe(at,Ct=!1,Mt=!1,ke=!1){J&&B&&B.getElement()&&at!==(isNaN(se)?B.getTime():se)&&(D=Mt===!0,D||(se=at),L.info("Requesting seek to time: "+at+(D?" (internal)":"")),N&&ke&&Q(at),B.setCurrentTime(at,Ct))}function Ce(){if(!J||!B||!N)return;const at=ve&&ve.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO,Ct=I.getCurrentDVRInfo(at);return Ct&&Ct.range?Ct.range.end:0}function Q(at){const Ct=new Date(H.getClientReferenceTime()),Mt=b.getRegularPeriods()[0];k=H.calcPresentationTimeFromWallTime(Ct,Mt)-at}function ne(){return J&&B?B.getTime():null}function fe(){return J&&B?B.isPaused():null}function ae(){return J&&B?B.isSeeking():null}function oe(){return J&&B?B.isStalled():null}function ge(){return J&&B?B.getPlaybackRate():null}function V(){return J&&B?B.getEnded():null}function ye(){return N}function Te(at=null){if(fe()||!N||B.getReadyState()===0||ae()||K)return;at||(at=ve.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO);const Ct=ne(),Mt=function(ke,lt){const Ot=I.getCurrentDVRInfo(lt),zt=Ot?Ot.range:null;let Cn;return zt?(Cn=ke>zt.end?Math.max(zt.end-k,zt.start):ke>0&&ke+.25<zt.start&&Math.abs(ke-zt.start)<31536e4?F?Math.max(zt.end-k,zt.start):zt.start:ke,Cn):NaN}(Ct,at);!isNaN(Mt)&&Mt!==Ct&&!ae()&&(oe()||Y||B.getReadyState()===1)&&(L.debug(`UpdateCurrentTime: Seek to actual time: ${Mt} from currentTime: ${Ct}`),Fe(Mt,!1,!1))}function Ae(){G===null&&(G=setInterval(()=>{(function(){if(y.trigger(f.default.WALLCLOCK_TIME_UPDATED,{isDynamic:N,time:new Date}),ye()){const at=Date.now();(isNaN(q)||at>q+me.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(ve.addDVRMetric(),fe()?function(){const Ct=Date.now();(!$||Ct>$+500)&&($=Ct,Mn())}():Te(),q=at)}})()},me.get().streaming.wallclockTimeUpdateInterval))}function Oe(){clearInterval(G),G=null}function De(at){const Ct=at.currentRepresentation,Mt=Ct?Ct.mediaInfo.streamInfo:null;Mt!==null&&J.id===Mt.id&&(J=Mt)}function Ge(){y.trigger(f.default.CAN_PLAY)}function ot(){y.trigger(f.default.CAN_PLAY_THROUGH)}function Et(at){at.streamId===ve.getActiveStreamInfo().id&&(Y=at.state===o.BUFFER_EMPTY,me.get().streaming.buffer.setStallState&&B.setStallState(at.mediaType,at.state===o.BUFFER_EMPTY))}function xt(){L.info("Native video element event: play"),Te(),Ae(),y.trigger(f.default.PLAYBACK_STARTED,{startTime:ne()})}function tn(){L.info("Native video element event: waiting"),y.trigger(f.default.PLAYBACK_WAITING,{playingTime:ne()})}function kt(){L.info("Native video element event: playing"),D=!1,y.trigger(f.default.PLAYBACK_PLAYING,{playingTime:ne()})}function nn(){L.info("Native video element event: pause"),y.trigger(f.default.PLAYBACK_PAUSED,{ended:V()})}function fn(){if(D)return;let at=ne();isNaN(se)||se===at||(at=se),se=NaN,L.info("Seeking to: "+at),Ae(),y.trigger(f.default.PLAYBACK_SEEKING,{seekTime:at,streamId:J.id})}function Ln(){L.info("Native video element event: seeked"),D=!1,y.trigger(f.default.PLAYBACK_SEEKED,{streamId:J.id})}function Mn(){J&&y.trigger(f.default.PLAYBACK_TIME_UPDATED,{timeToEnd:re(),time:ne(),streamId:J.id})}function wn(){y.trigger(f.default.PLAYBACK_PROGRESS,{streamId:J.id})}function bn(){const at=ge();L.info("Native video element event: ratechange: ",at),y.trigger(f.default.PLAYBACK_RATE_CHANGED,{playbackRate:at})}function Je(){L.info("Native video element event: loadedmetadata"),y.trigger(f.default.PLAYBACK_METADATA_LOADED),Ae()}function Tt(){L.info("Native video element event: loadeddata"),y.trigger(f.default.PLAYBACK_LOADED_DATA)}function vt(){L.info("Native video element event: ended"),Ie(),Oe();const at=ve?ve.getActiveStreamInfo():null;at&&y.trigger(f.default.PLAYBACK_ENDED,{isLast:at.isLast})}function At(){y.trigger(f.default.PLAYBACK_VOLUME_CHANGED)}function Zt(at){if(G&&at.isLast){L.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const Ct=at.seekTime?at.seekTime:we();B.setCurrentTime(Ct),Ie(),Oe()}}function Rn(at){const Ct=at.target||at.srcElement;y.trigger(f.default.PLAYBACK_ERROR,{error:Ct.error})}function dt(){N=!1}function wt(at){y.trigger(f.default.PLAYBACK_STALLED,{e:at})}function jt(at){var Ct;(Ct=at.mediaInfo)&&Ct.supplementalProperties&&Ct.supplementalProperties.find(Mt=>Mt.schemeIdUri===h.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(L.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),F=!0)}function He(at){const Ct=ve.getActiveStreamInfo();at&&Ct&&at.currentRepresentation&&at.streamId&&at.streamId===Ct.id&&at.mediaType&&(at.mediaType===h.default.VIDEO||at.mediaType===h.default.AUDIO)&&(F=at.currentRepresentation.availabilityTimeComplete===!1,F&&!R&&(R=!0))}function tt(){K=!0}function St(){K=!1}return M={computeAndSetLiveDelay:function(at,Ct){let Mt,ke,lt;const Ot=!isNaN(at)&&isFinite(at)?at:NaN;let zt=b.getSuggestedPresentationDelay();const Cn=ue.getServiceDescriptionSettings();return Mt=isNaN(me.get().streaming.delay.liveDelay)?me.get().streaming.delay.liveDelayFragmentCount===null||isNaN(me.get().streaming.delay.liveDelayFragmentCount)||isNaN(Ot)?Cn&&!isNaN(Cn.liveDelay)&&Cn.liveDelay>0?Cn.liveDelay:me.get().streaming.delay.useSuggestedPresentationDelay===!0&&zt!==null&&!isNaN(zt)&&zt>0?zt:isNaN(Ot)?Ct&&!isNaN(Ct.minBufferTime)?4*Ct.minBufferTime:4*J.manifestInfo.minBufferTime:4*Ot:Ot*me.get().streaming.delay.liveDelayFragmentCount:me.get().streaming.delay.liveDelay,lt=b.getAvailabilityStartTime(),lt!==null&&(w=lt),ke=Ct&&Ct.dvrWindowSize>0?Math.min(Mt,Ct.dvrWindowSize):Mt,k=ke,Z=ke,ke},getAvailabilityStartTime:function(){return w},getBufferLevel:function(at=null){let Ct=null;return ve.getActiveStreamProcessors().forEach(Mt=>{if(!at||at.length===0||at.indexOf(Mt.getType())===-1){const ke=Mt.getBufferLevel();Ct=Ct===null?ke:Math.min(Ct,ke)}}),Ct},getCurrentLiveLatency:function(){if(!N||isNaN(w))return NaN;let at=ne();if(isNaN(at)||at===0)return 0;const Ct=new Date().getTime()+1e3*H.getClientTimeOffset();return Math.max(((Ct-w-1e3*at)/1e3).toFixed(3),0)},getEnded:V,getInitialCatchupModeActivated:function(){return R},getIsDynamic:ye,getIsManifestUpdateInProgress:function(){return K},getLiveDelay:function(){return k},getLowLatencyModeEnabled:function(){return F},getOriginalLiveDelay:function(){return Z},getPlaybackRate:ge,getPlaybackStalled:function(){return Y},getPlayedRanges:function(){return J&&B?B.getPlayedRanges():null},getStreamController:function(){return ve},getStreamEndTime:we,getTime:ne,getTimeToStreamEnd:re,initialize:function(at,Ct){J=at,Ct!==!0&&(B.addEventListener("canplay",Ge),B.addEventListener("canplaythrough",ot),B.addEventListener("ended",vt),B.addEventListener("error",Rn),B.addEventListener("loadeddata",Tt),B.addEventListener("loadedmetadata",Je),B.addEventListener("pause",nn),B.addEventListener("play",xt),B.addEventListener("playing",kt),B.addEventListener("progress",wn),B.addEventListener("ratechange",bn),B.addEventListener("seeked",Ln),B.addEventListener("seeking",fn),B.addEventListener("stalled",wt),B.addEventListener("timeupdate",Mn),B.addEventListener("volumechange",At),B.addEventListener("waiting",tn),N=J.manifestInfo.isDynamic,Y=!1,D=!1,y.on(f.default.DATA_UPDATE_COMPLETED,De,M),y.on(f.default.MANIFEST_UPDATED,tt,M),y.on(f.default.STREAMS_COMPOSED,St,M),y.on(g.default.PLAYBACK_ENDED,Zt,M,{priority:m.default.EVENT_PRIORITY_HIGH}),y.on(g.default.STREAM_INITIALIZING,jt,M),y.on(g.default.REPRESENTATION_SWITCH,He,M),y.on(g.default.BUFFER_LEVEL_STATE_CHANGED,Et,M),y.on(g.default.DYNAMIC_TO_STATIC,dt,M),ee&&(ee=!1,Ee()))},isPaused:fe,isProgressing:function(at=500){return new Promise(Ct=>{let Mt=-1,ke=null;const lt=zt=>{clearTimeout(ke),ke=null,y.off(g.default.PLAYBACK_TIME_UPDATED,Ot,M),Ct(zt)},Ot=zt=>{Mt<0?Mt=zt.time:zt.time>Mt+.1&&lt(!0)};ke=setTimeout(()=>{lt(!1)},at),y.on(g.default.PLAYBACK_TIME_UPDATED,Ot,M)})},isSeeking:ae,isStalled:oe,pause:Ie,play:Ee,reset:be,seek:Fe,seekToCurrentLive:function(at=!1,Ct=!1,Mt=!1){const ke=Ce();ke!==0&&Fe(ke-k,at,Ct,Mt)},seekToOriginalLive:function(at=!1,Ct=!1,Mt=!1){const ke=Ce();ke!==0&&(k=Z,Fe(ke-k,at,Ct,Mt))},setConfig:function(at){at&&(at.streamController&&(ve=at.streamController),at.serviceDescriptionController&&(ue=at.serviceDescriptionController),at.dashMetrics&&(I=at.dashMetrics),at.adapter&&(b=at.adapter),at.videoModel&&(B=at.videoModel),at.timelineConverter&&(H=at.timelineConverter),at.settings&&(me=at.settings))},updateCurrentTime:Te},L=(0,l.default)(v).getInstance().getLogger(M),be(),M}ix.__dashjs_factory_name="PlaybackController";var i2=r.default.getSingletonFactory(ix),ax=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.isPartialSegment=!1,this.media=null,this.mediaRange=null,this.mediaUrl=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}assignAttributes(v){for(let y in v)v.hasOwnProperty(y)&&this.hasOwnProperty(y)&&(this[y]=v[y])}},Op=class extends ax{constructor(){super()}};function sx(){const v=this.context;let y,b,w,I,R,M,D,N,$,q,k,L;function F(Y,se,ue,me){let ve=null;const J=Y?L.resolve(Y.path):null,H=me||{init:!0,url:J?J.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:se,representation:Y};b.debug("Start searching for initialization.");const B=ee(H);D.load({request:B,success:function(G){if(H.bytesLoaded=H.range.end,ve=I.findInitRange(G),!ve)return H.range.end=H.bytesLoaded+H.bytesToLoad,F(Y,se,ue,H);Y.range=ve,ue(Y)},error:function(){ue(Y)}}),b.debug("Perform init search: "+H.url)}function K(Y,se,ue,me,ve,J){if(ue&&(ue.start===void 0||ue.end===void 0)){const Ee=ue?ue.toString().split("-"):null;ue=Ee?{start:parseFloat(Ee[0]),end:parseFloat(Ee[1])}:null}ve=ve||Z;let H=null,B=null;const G=!!ue,be=Y?L.resolve(Y.path):null,re={init:!1,url:be?be.url:void 0,range:G?ue:{start:0,end:1500},searching:!G,bytesLoaded:J?J.bytesLoaded:0,bytesToLoad:1500,mediaType:se,representation:Y},we=ee(re);D.load({request:we,success:function(Ee){const Ie=re.bytesToLoad,Fe=Ee.byteLength;if(re.bytesLoaded=re.range.end-re.range.start,H=I.parse(Ee),B=H.getBox("sidx"),B&&B.isComplete){const Ce=B.references;let Q,ne;if(Ce!=null&&Ce.length>0&&(Q=Ce[0].reference_type===1),Q){let fe,ae,oe,ge,V;b.debug("Initiate multiple SIDX load."),re.range.end=re.range.start+B.size;let ye=[],Te=0,Ae=(B.offset||re.range.start)+B.size;const Oe=function(De){De?(ye=ye.concat(De),Te++,Te>=ae&&(ye.sort(function(Ge,ot){return Ge.startTime-ot.startTime<0?-1:0}),ve(ye,Y,me))):ve(null,Y,me)};for(fe=0,ae=Ce.length;fe<ae;fe++)oe=Ae,ge=Ae+Ce[fe].referenced_size-1,Ae+=Ce[fe].referenced_size,V={start:oe,end:ge},K(Y,se,V,me,Oe,re)}else b.debug("Parsing segments from SIDX. representation "+se+" - id: "+Y.id+" for range : "+re.range.start+" - "+re.range.end),ne=function(fe,ae){const oe=fe.references,ge=oe.length,V=fe.timescale;let ye=fe.earliest_presentation_time,Te=ae.range.start+fe.offset+fe.first_offset+fe.size;const Ae=[];let Oe,De,Ge,ot;for(let Et=0;Et<ge;Et++)Ge=oe[Et].subsegment_duration,ot=oe[Et].referenced_size,Oe=new Op,Oe.duration=Ge,Oe.startTime=ye,Oe.timescale=V,De=Te+ot-1,Oe.mediaRange=Te+"-"+De,Ae.push(Oe),ye+=Ge,Te+=ot;return Ae}(B,re),ve(ne,Y,me)}else{if(B)re.range.start=B.offset||re.range.start,re.range.end=re.range.start+(B.size||Ie);else{if(Fe<re.bytesLoaded)return void ve(null,Y,me);{const Ce=H.getLastBox();Ce&&Ce.size?(re.range.start=Ce.offset+Ce.size,re.range.end=re.range.start+Ie):re.range.end+=Ie}}K(Y,se,re.range,me,null,re)}},error:function(){ve(null,Y,me)}}),b.debug(`Perform SIDX load for type ${se} : ${re.url} with range ${re.range.start} - ${re.range.end}`)}function Z(Y,se,ue){ue({segments:Y,representation:se,error:Y?void 0:new Yt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ee(Y){if(!Y.url)return;const se=new le;return se.setInfo(Y),se}return y={setConfig:function(Y){Y.baseURLController&&(L=Y.baseURLController),Y.dashMetrics&&(R=Y.dashMetrics),Y.mediaPlayerModel&&(M=Y.mediaPlayerModel),Y.errHandler&&(w=Y.errHandler),Y.boxParser&&(I=Y.boxParser),Y.debug&&(b=Y.debug.getLogger(y)),Y.errors&&(N=Y.errors),Y.urlUtils&&(k=Y.urlUtils),Y.constants&&($=Y.constants),Y.dashConstants&&(q=Y.dashConstants)},initialize:function(){D=nu(v).create({errHandler:w,dashMetrics:R,mediaPlayerModel:M,boxParser:I,errors:N,urlUtils:k,constants:$,dashConstants:q})},loadInitialization:function(Y,se){return new Promise(ue=>{F(Y,se,ue)})},loadSegments:function(Y,se,ue){return new Promise(me=>{K(Y,se,ue,me)})},reset:function(){D&&(D.abort(),D=null)}},y}sx.__dashjs_factory_name="SegmentBaseLoader";var a2=r.default.getSingletonFactory(sx);function ox(v){let y;v=v||{};let b=new DataView(v.data),w=0;function I(M,D){let N,$,q=!0,k=0;if(D===void 0&&(D=!1),M.tag>16777215?(b.getUint32(w)!==M.tag&&(q=!1),k=4):M.tag>65535?(N=b.getUint16(w),$=b.getUint8(w+2),256*N+$!==M.tag&&(q=!1),k=3):M.tag>255?(b.getUint16(w)!==M.tag&&(q=!1),k=2):(b.getUint8(w)!==M.tag&&(q=!1),k=1),!q&&M.required&&!D)throw new Error("required tag not found");return q&&(w+=k),q}function R(M){let D=1,N=128,$=-1,q=0,k=b.getUint8(w),L=0;for(L=0;L<8;L+=1){if((k&N)===N){q=M===void 0?k&~N:k,$=L;break}N>>=1}for(L=0;L<$;L+=1,D+=1)q=q<<8|255&b.getUint8(w+D);return w+=D,q}return y={getPos:function(){return w},setPos:function(M){w=M},consumeTag:I,consumeTagAndSize:function(M,D){let N=I(M,D);return N&&R(),N},parseTag:function(M){let D;return I(M),D=R(),y[M.parse](D)},skipOverElement:function(M,D){let N,$=I(M,D);return $&&(N=R(),w+=N),$},getMatroskaCodedNum:R,getMatroskaFloat:function(M){let D;switch(M){case 4:D=b.getFloat32(w),w+=4;break;case 8:D=b.getFloat64(w),w+=8}return D},getMatroskaUint:function(M){if(M>4)return function(N){const $=Math.floor(Number.MAX_SAFE_INTEGER/256);let q=0;for(let k=0;k<N;k+=1){if(q>$)throw new Error("Value exceeds safe integer limit");q*=256;const L=b.getUint8(w+k);if(q>Number.MAX_SAFE_INTEGER-L)throw new Error("Value exceeds safe integer limit");q+=L}return w+=N,q}(M);let D=0;for(let N=0;N<M;N+=1)D<<=8,D|=255&b.getUint8(w+N);return w+=M,D>>>0},moreData:function(){return w<b.byteLength}},y}ox.__dashjs_factory_name="EBMLParser";var lx=r.default.getClassFactory(ox);function ux(){const v=this.context;let y,b,w,I,R,M,D,N,$;function q(k){const L=new le;return L.setInfo(k),L}return y={setConfig:function(k){if(!(k.baseURLController&&k.dashMetrics&&k.mediaPlayerModel&&k.errHandler))throw new Error(h.default.MISSING_CONFIG_ERROR);$=k.baseURLController,R=k.dashMetrics,M=k.mediaPlayerModel,I=k.errHandler,N=k.errors,b=k.debug.getLogger(y)},initialize:function(){D=nu(v).create({errHandler:I,dashMetrics:R,mediaPlayerModel:M,errors:N})},loadInitialization:function(k,L){return new Promise(F=>{let K=null,Z=k?$.resolve(k.path):null,ee=k?k.range.split("-"):null,Y={range:{start:ee?parseFloat(ee[0]):null,end:ee?parseFloat(ee[1]):null},request:K,url:Z?Z.url:void 0,init:!0,mediaType:L};b.info("Start loading initialization."),K=q(Y),D.load({request:K,success:function(){F(k)},error:function(){F(k)}}),b.debug("Perform init load: "+Y.url)})},loadSegments:function(k,L,F){return new Promise(K=>{let Z=null,ee=k?$.resolve(k.path):null,Y=ee?ee.url:void 0;Z=q({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Z,url:Y,init:!1,mediaType:L,representation:k}),b.debug("Parsing ebml header"),D.load({request:Z,success:function(se){(function(ue,me,ve,J){if(!ue||ue.byteLength===0)return void J(null);let H,B,G,be,re=lx(v).create({data:ue}),we=ve?ve.split("-"):null,Ee=null,Ie={url:me,range:{start:we?parseFloat(we[0]):null,end:we?parseFloat(we[1]):null},request:Ee};for(b.debug("Parse EBML header: "+Ie.url),re.skipOverElement(w.EBML),re.consumeTag(w.Segment),G=re.getMatroskaCodedNum(),G+=re.getPos(),be=re.getPos();re.moreData()&&!re.consumeTagAndSize(w.Segment.Info,!0);)if(!(re.skipOverElement(w.Segment.SeekHead,!0)||re.skipOverElement(w.Segment.Tracks,!0)||re.skipOverElement(w.Segment.Cues,!0)||re.skipOverElement(w.Void,!0)))throw new Error("no valid top level element found");for(;H===void 0;){let Fe=re.getMatroskaCodedNum(!0),Ce=re.getMatroskaCodedNum();Fe===w.Segment.Info.Duration.tag?H=re[w.Segment.Info.Duration.parse](Ce):re.setPos(re.getPos()+Ce)}Ee=q(Ie),D.load({request:Ee,success:function(Fe){B=function(Ce,Q,ne,fe){let ae,oe,ge,V,ye,Te,Ae,Oe;for(oe=function(De){let Ge,ot,Et=[],xt=lx(v).create({data:De});for(xt.consumeTagAndSize(w.Segment.Cues);xt.moreData()&&xt.consumeTagAndSize(w.Segment.Cues.CuePoint,!0);){for(Ge={},Ge.CueTime=xt.parseTag(w.Segment.Cues.CuePoint.CueTime),Ge.CueTracks=[];xt.moreData()&&xt.consumeTag(w.Segment.Cues.CuePoint.CueTrackPositions,!0);){const tn=xt.getMatroskaCodedNum(),kt=xt.getPos();if(ot={},ot.Track=xt.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),ot.Track===0)throw new Error("Cue track cannot be 0");ot.ClusterPosition=xt.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Ge.CueTracks.push(ot),xt.setPos(kt+tn)}if(Ge.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Et.push(Ge)}if(Et.length===0)throw new Error("mandatory cuepoint not found");return Et}(Ce),ge=[],ye=0,Te=oe.length;ye<Te;ye+=1)V=new Op,ae=0,ae=ye<oe.length-1?oe[ye+1].CueTime-oe[ye].CueTime:fe-oe[ye].CueTime,V.duration=ae,V.startTime=oe[ye].CueTime,V.timescale=1e3,Ae=oe[ye].CueTracks[0].ClusterPosition+Q,Oe=ye<oe.length-1?oe[ye+1].CueTracks[0].ClusterPosition+Q-1:ne-1,V.mediaRange=Ae+"-"+Oe,ge.push(V);return b.debug("Parsed cues: "+ge.length+" cues."),ge}(Fe,be,G,H),J(B)},error:function(){b.error("Download Error: Cues "+Ie.url),J(null)}}),b.debug("Perform cues load: "+Ie.url+" bytes="+Ie.range.start+"-"+Ie.range.end)})(se,Y,F,function(ue){K({segments:ue,representation:k,error:ue?void 0:new Yt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){K({representation:k,error:new Yt.default(N.SEGMENT_BASE_LOADER_ERROR_CODE,N.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){D&&(D.abort(),D=null)}},w={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},y}ux.__dashjs_factory_name="WebmSegmentBaseLoader";var s2=r.default.getSingletonFactory(ux);function cx(v){v=v||{};const y=this.context,b=v.eventBus,w=v.events,I=v.dashMetrics,R=v.mediaPlayerModel,M=v.errHandler,D=v.baseURLController,N=v.debug,$=v.boxParser,q=v.errors;let k,L,F;function K(Z){return(Z?Z.split("/")[1]:"").toLowerCase()==="webm"}return k={initialize:function(){L.initialize(),F.initialize()},getSegmentBaseInitSegment:function(Z){return K(Z.representation.mimeType)?F.loadInitialization(Z.representation,Z.mediaType):L.loadInitialization(Z.representation,Z.mediaType)},getSegmentList:function(Z){return K(Z.mimeType)?F.loadSegments(Z.representation,Z.mediaType,Z.representation?Z.representation.indexRange:null):L.loadSegments(Z.representation,Z.mediaType,Z.representation?Z.representation.indexRange:null)},reset:function(){L.reset(),F.reset()}},L=a2(y).getInstance(),F=s2(y).getInstance(),L.setConfig({baseURLController:D,dashMetrics:I,mediaPlayerModel:R,errHandler:M,eventBus:b,events:w,errors:q,debug:N,boxParser:$}),F.setConfig({baseURLController:D,dashMetrics:I,mediaPlayerModel:R,errHandler:M,eventBus:b,events:w,errors:q,debug:N}),k}cx.__dashjs_factory_name="SegmentBaseController";var o2=r.default.getSingletonFactory(cx);const l2=[h.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],dx="video",fx="audio";function hx(){const v=this.context;let y,b,w,I,R;function M(){b={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},w=[]}function D(N,$,q){try{b[N][$]=q/1e3}catch(k){I.error(k)}}return y={getServiceDescriptionSettings:function(){return b},getProducerReferenceTimeOffsets:function(){return w},calculateProducerReferenceTimeOffsets:function(N){try{let $=[];if(N&&N.length>0){const q=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT],k=R.getAvailabilityStartTime()/1e3;N.forEach(L=>{const F=q.reduce((K,Z)=>K.concat(R.getAllMediaInfoForType(L,Z)),[]).reduce((K,Z)=>(R.getProducerReferenceTimes(L,Z).forEach(ee=>{const Y=R.getVoRepresentations(Z);if(Y&&Y.length>0&&Y[0].adaptation&&Y[0].segmentInfoType===xe.default.SEGMENT_TEMPLATE){const se=Y[0],ue=new Date(ee[xe.default.WALL_CLOCK_TIME]).getTime()/1e3-(ee[xe.default.PRESENTATION_TIME]/se[xe.default.TIMESCALE]-se[xe.default.PRESENTATION_TIME_OFFSET]+L.start),me=k-ue;K.push({id:ee[xe.default.ID],to:me})}}),K),[]);$=$.concat(F)})}w=$}catch($){I.error($),w=[]}},applyServiceDescription:function(N){if(!N||!N.serviceDescriptions)return;const $=N.serviceDescriptions.filter(L=>l2.includes(L.schemeIdUri)),q=N.serviceDescriptions.filter(L=>L.schemeIdUri==null);let k=$.length>0?$[$.length-1]:q[q.length-1];k&&(k.latency&&k.latency.target>0&&function(L){let F;if(L.schemeIdUri,h.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,F=function(K){return{liveDelay:K.latency.target/1e3,maxDrift:!isNaN(K.latency.max)&&K.latency.max>K.latency.target?(K.latency.max-K.latency.target+500)/1e3:NaN,referenceId:K.latency.referenceId||NaN}}(L),w.length>0){let{to:K,id:Z}=function(ee){let Y,se=0,ue=w.filter(me=>me.id===ee.referenceId);return ue.length===0?(se=w.length>0?w[0].to:0,Y=w[0].id||NaN):(se=ue[0].to||0,Y=ue[0].id||NaN),{to:se,id:Y}}(F);b.liveDelay=F.liveDelay-K,b.liveCatchup.maxDrift=F.maxDrift,I.debug(`
                Found latency properties coming from service description. Applied time offset of ${K} from ProducerReferenceTime element with id ${Z}.
                Live Delay: ${F.liveDelay-K}, Live catchup max drift: ${F.maxDrift}
            `)}else b.liveDelay=F.liveDelay,b.liveCatchup.maxDrift=F.maxDrift,I.debug(`Found latency properties coming from service description: Live Delay: ${F.liveDelay}, Live catchup max drift: ${F.maxDrift}`)}(k),k.playbackRate&&function(L){const F=L.playbackRate.min?Math.round(1e3*(L.playbackRate.min-1))/1e3:NaN,K=L.playbackRate.max?Math.round(1e3*(L.playbackRate.max-1))/1e3:NaN;b.liveCatchup.playbackRate.min=F,b.liveCatchup.playbackRate.max=K,I.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${F}`),I.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${K}`)}(k),k.operatingQuality,k.operatingBandwidth&&function(L){if(!L||!L.operatingBandwidth||!L.operatingBandwidth.mediaType||L.operatingBandwidth.mediaType==="all")return;const F={};F.minBandwidth=L.operatingBandwidth.min,F.maxBandwidth=L.operatingBandwidth.max,F.targetBandwidth=L.operatingBandwidth.target;const K=[];L.operatingBandwidth.mediaType===dx||L.operatingBandwidth.mediaType===fx?K.push(L.operatingBandwidth.mediaType):L.operatingBandwidth.mediaType==="any"&&(K.push(fx),K.push(dx)),K.forEach(Z=>{isNaN(F.minBandwidth)||D("minBitrate",Z,F.minBandwidth),isNaN(F.maxBandwidth)||D("maxBitrate",Z,F.maxBandwidth),isNaN(F.targetBandwidth)||D("initialBitrate",Z,F.targetBandwidth)})}(k),k.contentSteering&&function(L){b.contentSteering=L.contentSteering}(k),k.clientDataReporting&&function(L){b.clientDataReporting=L.clientDataReporting}(k))},reset:function(){M()},setConfig:function(N){N&&N.adapter&&(R=N.adapter)}},I=(0,l.default)(v).getInstance().getLogger(y),M(),y}hx.__dashjs_factory_name="ServiceDescriptionController";var u2=r.default.getSingletonFactory(hx);class c2{constructor(y){this._ranges=[];for(const b of y){const w=this._ranges,I={start:b.start,end:b.end},R=w.length?w[w.length-1]:null;!R||I.start>R.end?w.push(I):R.end=I.end}}get length(){return this._ranges.length}start(y){return this._ranges[y].start}end(y){return this._ranges[y].end}}var mx=class{constructor(v,y){this.eventBus=y,this.mimeType=v,this.updating=!1,this.chunks=[],this.appendWindowStart=0,this.appendWindowEnd=1/0,this.timestampOffset=0,this.mode="segments"}appendBuffer(v,y,b){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"appendBuffer",data:v,start:y,end:b}),Number.isNaN(y)||(this.chunks.push({data:v,start:y,end:b}),this.chunks.sort((w,I)=>w.start-I.start)),setTimeout(()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})},10)}abort(){this.updating&&(this.updating=!1,this.eventBus.trigger("externalSourceBufferAbort",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType}))}remove(v,y){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"remove",start:v,end:y}),this.chunks=this.chunks.filter(b=>b.end<=v||b.start>=y),setTimeout(()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})},10)}get buffered(){return new c2(this.chunks)}},d2=class{constructor(v){this.eventBus=v,this.reset()}get duration(){return this._duration}set duration(v){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._duration=v}get readyState(){return this._readyState}addSourceBuffer(v){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");const y=new mx(v,this.eventBus);return this.sourceBuffers.set(y,v),y}removeSourceBuffer(v){if(!this.sourceBuffers.has(v))throw new Error("ExternalSourceBuffer not found");this.sourceBuffers.delete(v)}open(){this._readyState="open",this.eventBus.trigger("externalMediaSourceOpen",{})}endOfStream(){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._readyState="ended",this.eventBus.trigger("externalMediaSourceEnded",{})}close(){this._readyState="closed",this.eventBus.trigger("externalMediaSourceClosed",{})}reset(){this.sourceBuffers=new Map,this._duration=NaN,this._readyState="closed"}},f2=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},h2=class extends le{constructor(v){super(v),this.checkForExistenceOnly=!0}};function gx(v){v=v||{};const y=this.context,b=v.eventBus,w=v.events,I=v.urlUtils,R=v.errors,M=v.streamId;let D,N;return D={abort:function(){N&&N.abort()},checkForExistence:function($){const q=function(k){b.trigger(w.CHECK_FOR_EXISTENCE_COMPLETED,{request:$,exists:k})};if($){let k=new h2($.url);N.load({request:k,success:function(){q(!0)},error:function(){q(!1)}})}else q(!1)},load:function($){const q=function(k,L){b.trigger(w.LOADING_COMPLETED,{request:$,response:k||null,error:L||null,sender:D})};$?N.load({request:$,progress:function(k){b.trigger(w.LOADING_PROGRESS,{request:$,stream:k.stream,streamId:M}),k.data&&b.trigger(w.LOADING_DATA_PROGRESS,{request:$,response:k.data||null,error:null,sender:D})},success:function(k){q(k)},error:function(k,L,F){q(void 0,new Yt.default(R.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,F,L))},abort:function(k){k&&b.trigger(w.LOADING_ABANDONED,{mediaType:k.mediaType,request:k,sender:D})}}):q(void 0,new Yt.default(R.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,R.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){N&&(N.abort(),N.reset(),N=null)},resetInitialSettings:function(){N&&N.resetInitialSettings()}},N=nu(y).create({errHandler:v.errHandler,errors:R,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,urlUtils:I,constants:h.default,boxParser:v.boxParser,dashConstants:v.dashConstants,requestTimeout:v.settings.get().streaming.fragmentRequestTimeout}),D}gx.__dashjs_factory_name="FragmentLoader";var m2=r.default.getClassFactory(gx);function px(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance(),w=v.errHandler,I=v.mediaPlayerModel,R=v.dashMetrics,M=(0,l.default)(y).getInstance(),D=v.streamInfo;let N,$,q;function k(){return D.id}function L(){for(let K in q)q[K].reset();q={}}function F(K){if(!K.sender)return;const Z=K.request,ee=K.response,Y=Z.isInitializationRequest(),se=Z.representation.mediaInfo.streamInfo;if(K.error&&(Z.mediaType===h.default.AUDIO||Z.mediaType===h.default.VIDEO||Z.mediaType===h.default.TEXT&&Z.representation.mediaInfo.isFragmented)&&b.trigger(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:K.request.serviceLocation}),!ee||!se)return void $.warn("No "+Z.mediaType+" bytes to push or stream is inactive.");const ue=function(me,ve,J,H){const B=new f2;return B.streamId=J,B.segmentType=ve.type,B.start=ve.startTime,B.duration=ve.duration,B.end=B.start+B.duration,B.bytes=me,B.index=ve.index,B.representation=ve.representation,B.endFragment=H,B}(ee,Z,D.id,K.type!==f.default.FRAGMENT_LOADING_PROGRESS);b.trigger(Y?f.default.INIT_FRAGMENT_LOADED:f.default.MEDIA_FRAGMENT_LOADED,{chunk:ue,request:Z},{streamId:se.id,mediaType:Z.mediaType})}return N={getStreamId:k,getModel:function(K){let Z=q[K];return Z||(Z=$e(y).create({streamInfo:D,type:K,dashMetrics:R,fragmentLoader:m2(y).create({dashMetrics:R,mediaPlayerModel:I,errHandler:w,settings:v.settings,boxParser:v.boxParser,eventBus:b,events:f.default,errors:en,dashConstants:v.dashConstants,urlUtils:v.urlUtils,streamId:k()}),debug:M,eventBus:b,events:f.default}),q[K]=Z),Z},reset:function(){b.off(g.default.FRAGMENT_LOADING_COMPLETED,F,this),b.off(g.default.FRAGMENT_LOADING_PROGRESS,F,this),L()}},$=M.getLogger(N),L(),b.on(g.default.FRAGMENT_LOADING_COMPLETED,F,N),b.on(g.default.FRAGMENT_LOADING_PROGRESS,F,N),N}px.__dashjs_factory_name="FragmentController";var g2=r.default.getClassFactory(px),Ls=class{constructor(v){this.newMediaInfo=v.newMediaInfo,this.previouslySelectedRepresentation=v.previouslySelectedRepresentation,this.newRepresentation=v.newRepresentation}};function yx(v){const y=this.context,b=(0,u.default)(y).getInstance(),w=v.textController,I=v.eventBus;let R,M,D,N,$,q,k=[],L=[],F=!1,K=v.mediaSource,Z=null;function ee(re){return re.mimeType+';codecs="'+re.codecs+'"'}function Y(re){return N=w.getTextSourceBuffer(re),Promise.resolve()}function se(){if(typeof N.addEventListener=="function")try{N.addEventListener("updateend",B,!1),N.addEventListener("error",G,!1),N.addEventListener("abort",G,!1)}catch{q=setInterval(B,50)}else q=setInterval(B,50)}function ue(){try{typeof N.removeEventListener=="function"&&(N.removeEventListener("updateend",B,!1),N.removeEventListener("error",G,!1),N.removeEventListener("abort",G,!1)),clearInterval(q)}catch(re){D.error(re)}}function me(re){return new Promise(we=>{N&&b.get().streaming.buffer.useAppendWindow?be(()=>{try{if(!N)return void we();let Ee=K.duration,Ie=0;re&&!isNaN(re.start)&&!isNaN(re.duration)&&isFinite(re.duration)&&(Ee=re.start+re.duration),re&&!isNaN(re.start)&&(Ie=re.start),N.appendWindowEnd===Ee&&N.appendWindowStart===Ie||(N.appendWindowStart=0,N.appendWindowEnd=Ee+.01,N.appendWindowStart=Math.max(Ie-.1,0),D.debug(`Updated append window for ${$.type}. Set start to ${N.appendWindowStart} and end to ${N.appendWindowEnd}`)),we()}catch{D.warn("Failed to set append window"),we()}}):we()})}function ve(re){return new Promise(we=>{N?be(()=>{try{N.timestampOffset===re||isNaN(re)||(N.timestampOffset=re,D.debug(`Set MSE timestamp offset to ${re}`)),we()}catch{we()}}):we()})}function J(){if(!F&&L.length>0){F=!0;const re=L[0];L.splice(0,1);const we=function(){F=!1,L.length>0&&J.call(this),re&&re.data&&re.data.segmentType&&re.data.segmentType!==he.HTTPRequest.INIT_SEGMENT_TYPE&&delete re.data.bytes,re.promise.resolve({chunk:re.data})};try{if(Z=re.request,re.data.bytes.byteLength===0)we.call(this);else{try{D.debug(`Appending ${re.data.segmentType} from period ${re.data.streamId} to buffer. Request URL: ${re.request.url}, Representation: ID: ${re.data.representation.id}, bitrate: ${re.data.representation.bitrateInKbit}`)}catch{}N instanceof mx?N.appendBuffer(re.data.bytes,re.data.start,re.data.end):N.appendBuffer?N.appendBuffer(re.data.bytes):N.append(re.data.bytes,re.data),be(we.bind(this))}}catch(Ee){D.fatal('SourceBuffer append failed "'+Ee+'"'),L.length>0?J():F=!1,delete re.data.bytes,re.promise.reject({chunk:re.data,error:new Yt.default(Ee.code,Ee.message)})}}}function H(){k.length>0&&!N.updating&&(k.shift()(),H())}function B(){N.updating||H()}function G(re){const we=re.target||{};(function(Ee,Ie){let Fe=Ie||{};I.trigger(Ee,Fe,{streamId:$.streamInfo.id,mediaType:M})})(f.default.SOURCE_BUFFER_ERROR,{error:we,lastRequestAppended:Z})}function be(re){try{k.push(re),N&&!N.updating&&H()}catch(we){D.error(we)}}return R={abort:function(){return new Promise(re=>{try{L=[],K.readyState==="open"?be(()=>{try{N&&N.abort(),re()}catch{re()}}):(N&&N.setTextTrack&&K.readyState==="ended"&&N.abort(),re())}catch{re()}})},abortBeforeAppend:function(){return new Promise(re=>{be(()=>{const we=N.appendWindowStart,Ee=N.appendWindowEnd;N&&(N.abort(),N.appendWindowStart=we,N.appendWindowEnd=Ee),re()})})},append:function(re,we=null){return new Promise((Ee,Ie)=>{re?(L.push({data:re,promise:{resolve:Ee,reject:Ie},request:we}),be(J.bind(this))):Ie({chunk:re,error:new Yt.default(en.APPEND_ERROR_CODE,en.APPEND_ERROR_MESSAGE)})})},changeType:function(re){const we=ee(re);return new Promise(Ee=>{be(()=>{N.changeType&&(D.debug(`Changing SourceBuffer codec to ${we}`),N.changeType(we)),Ee()})})},getAllBufferRanges:function(){try{return N==null?void 0:N.buffered}catch(re){return D.error("getAllBufferRanges exception: "+re.message),null}},getBuffer:function(){return N},getType:function(){return M},initializeForFirstUse:function(re,we){$=re;const Ee=re.streamInfo;M=$.type;const Ie=we?ee(we):re.codec;try{if(Ie.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Y(Ee);N=K.addSourceBuffer(Ie),se();const Fe=[];return Fe.push(me($.streamInfo)),we&&we.mseTimeOffset!==void 0&&Fe.push(ve(we.mseTimeOffset)),Promise.all(Fe)}catch(Fe){return $.type==h.default.TEXT&&!$.isFragmented||Ie.indexOf('codecs="stpp')!==-1||Ie.indexOf('codecs="vtt')!==-1||Ie.indexOf("text/vtt")!==-1?Y(Ee):Promise.reject(Fe)}},initializeForStreamSwitch:function(re,we,Ee){$=re,M=$.type,function(Ie){N=Ie.getBuffer()}(Ee),se()},remove:function(re){return new Promise((we,Ee)=>{const Ie=re.start,Fe=re.end;Ie>=0&&Fe>Ie?be(function(){try{N.remove(Ie,Fe),be(function(){we({from:Ie,to:Fe,unintended:!1}),re.resolve&&re.resolve()})}catch(Ce){Ee({from:Ie,to:Fe,unintended:!1,error:new Yt.default(en.REMOVE_ERROR_CODE,en.REMOVE_ERROR_MESSAGE)}),re.reject&&re.reject(Ce)}}):we()})},removeEventListeners:ue,reset:function(){if(N){try{k=[],ue(),F=!1,L=[],N.getClassName&&N.getClassName()==="TextSourceBuffer"||(D.debug("Removing sourcebuffer from media source"),K.removeSourceBuffer(N))}catch{}N=null}Z=null},updateAppendWindow:me,updateTimestampOffset:ve},D=(0,l.default)(y).getInstance().getLogger(R),R}yx.__dashjs_factory_name="SourceBufferSink";var vx=r.default.getClassFactory(yx);function Ex(v){const y=this.context;let b,w,I,R=[],M=v;function D(N,$){return R=R.filter(q=>!((isNaN($)||q.start<$)&&(isNaN(N)||q.end>N))),Promise.resolve()}return b={getAllBufferRanges:function(){let N=[];for(let q=0;q<R.length;q++){let k=R[q];N.length===0||k.start>N[N.length-1].end?N.push({start:k.start,end:k.end}):N[N.length-1].end=k.end}const $={start:function(q){return N[q].start},end:function(q){return N[q].end}};return Object.defineProperty($,"length",{get:function(){return N.length}}),$},append:function(N){return N.segmentType!=="InitializationSegment"?(R.push(N),R.sort(function($,q){return $.start-q.start}),I=null):I=N,w.debug("PreBufferSink appended chunk s: "+N.start+"; e: "+N.end),M&&M({chunk:N}),Promise.resolve()},remove:D,abort:function(){return Promise.resolve()},discharge:function(N,$){const q=function(k,L){return R.filter(F=>(isNaN(L)||F.start<L)&&(isNaN(k)||F.end>k))}(N,$);return I&&(q.push(I),I=null),D(N,$),q},reset:function(){R=[],I=null,M=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(N){N()},getBuffer:function(){return this}},w=(0,l.default)(y).getInstance().getLogger(b),b}Ex.__dashjs_factory_name="PreBufferSink";var p2=r.default.getClassFactory(Ex);function bx(){let v={};return{save:function(y){const b=y.streamId,w=y.representation.id;v[b]=v[b]||{},v[b][w]=y},extract:function(y,b){return v&&v[y]&&v[y][b]?v[y][b]:null},reset:function(){v={}}}}bx.__dashjs_factory_name="InitCache";var Fp=r.default.getSingletonFactory(bx);const zp=.01,Tx="BufferController";function Sx(v){const y=(v=v||{}).capabilities,b=this.context,w=(0,m.default)(b).getInstance(),I=v.fragmentModel,R=v.playbackController,M=v.representationController,D=v.settings,N=v.streamInfo,$=v.textController,q=v.type;let k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G,be,re,we,Ee,Ie,Fe;function Ce(He,tt=null){return new Promise((St,at)=>{ee=He,ue&&tt&&typeof ue.discharge=="function"?(me=ue,Q(tt).then(()=>{St()}).catch(Ct=>{at(Ct)})):St()})}function Q(He,tt=new Map,St){return new Promise((at,Ct)=>{we&&He?ee?(ve=!1,function(Mt,ke,lt){return new Promise(Ot=>{ue=vx(b).create({mediaSource:ee,textController:$,eventBus:w}),function(zt,Cn,mt){const Qt=M.getCurrentRepresentation();let Tn=null;return q!==h.default.VIDEO&&q!==h.default.AUDIO||(Tn=Cn.get(q)),Tn?function(vn,Pn,_n,nr){ue.initializeForStreamSwitch(vn,Pn,_n);const Er=[];return Er.push(ue.abortBeforeAppend()),Er.push(Je()),Er.push(ye(Pn,nr)),Pn&&Pn.mseTimeOffset!==void 0&&Er.push(bn(Pn)),Promise.allSettled(Er)}(zt,Qt,Tn,mt):function(vn,Pn){return ue.initializeForFirstUse(vn,Pn)}(zt,Qt)}(Mt,ke,lt).then(()=>bn(M.getCurrentRepresentation())).then(()=>{Ot(ue)}).catch(zt=>{L.warn("Caught error on create SourceBuffer: "+zt),Ot(ue)})})}(He,tt,St).then(Mt=>{at(Mt)}).catch(Mt=>{Ct(Mt)})):(ve=!0,function(){return new Promise((Mt,ke)=>{ue=p2(b).create(ge.bind(this)),bn(M.getCurrentRepresentation()).then(()=>{Mt(ue)}).catch(()=>{ke()})})}().then(Mt=>{at(Mt)}).catch(Mt=>{Ct(Mt)})):at(null)})}function ne(He){D.get().streaming.cacheInitSegments&&(L.info("Init fragment finished loading saving to",q+"'s init cache"),we.save(He.chunk)),L.debug(`Appending init fragment for type ${q}, representationId ${He.chunk.representation.id} and bandwidth ${He.chunk.representation.bandwidth}`),ae(He.chunk)}function fe(He){ae(He.chunk,He.request)}function ae(He,tt=null){ue&&(ue.append(He,tt).then(St=>{ge(St)}).catch(St=>{ge(St)}),He.representation.mediaInfo.type===h.default.VIDEO&&wt(f.default.VIDEO_CHUNK_RECEIVED,{chunk:He}))}function oe(He){if(He&&He.length>0)for(let tt=0,St=He.length;tt<St;tt++)L.debug("Buffered range: "+He.start(tt)+" - "+He.end(tt)+", currentTime = ",R.getTime())}function ge(He){if(He.error)return He.error.code===22&&function(){if(re=!0,Z=.8*Zt(),L.warn("Quota exceeded, Critical Buffer: "+Z),Z>0){const at=Math.max(.2*Z,1),Ct=Z-at,Mt=Math.min(D.get().streaming.buffer.bufferTimeAtTopQuality,.9*Ct),ke=Math.min(D.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Ct),lt={streaming:{buffer:{bufferToKeep:parseFloat(at.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Mt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(ke.toFixed(5))}}};D.update(lt)}}(),void(He.error.code!==22&&dt()||(L.warn("Clearing playback buffer to overcome quota exceed situation"),wt(f.default.QUOTA_EXCEEDED,{criticalBufferLevel:Z,quotaExceededTime:He.chunk.start}),Ln(fn())));if(!ue||(Et(),re=!1,B=He.chunk,!B||!B.endFragment))return;B&&!isNaN(B.index)&&(Y=Math.max(B.index,Y),xt());const tt=ue.getAllBufferRanges();B.segmentType===he.HTTPRequest.MEDIA_SEGMENT_TYPE&&(oe(tt),Oe(),function(){if(isNaN(Fe)||ve)return;if(q!==h.default.AUDIO&&q!==h.default.VIDEO)return void(Fe=NaN);const at=R.getTime(),Ct=ot(at,0),Mt=ot(Fe,0);if(Ct&&Mt&&Ct.start===Mt.start)return void(Fe=NaN);const ke=M.getCurrentRepresentation().segmentDuration,lt=ot(Fe,ke);lt&&(D.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(at-Fe)>ke?Fe<=lt.end&&R.seek(Math.max(Fe,lt.start),!1,!0):at<lt.start&&R.seek(lt.start,!1,!0))}());let St=!1;J&&(J.indexOf(B)>0&&(St=!0),J=null),B&&!St&&wt(f.default.BYTES_APPENDED_END_FRAGMENT,{startTime:B.start,index:B.index,bufferedRanges:tt,segmentType:B.segmentType,mediaType:q,representationId:B.representation.id})}function V(He,tt){const St=[];return St.push(bn(He)),St.push(ue?ue.abort():Promise.resolve()),St.push(ye(He,tt)),Promise.allSettled(St)}function ye(He,tt){if(!He||!tt)return L.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve();if(He&&tt&&He.mimeType===tt.mimeType&&He.codecFamily===tt.codecFamily)return L.debug(`Switching to new codec ${He.codecs} without changeType as previous codec ${tt.codecs} is compatible.`),Promise.resolve();if(!D.get().streaming.buffer.useChangeType||!y.supportsChangeType())return L.debug("changeType() not available"),Promise.resolve();L.debug(`Using changeType() to switch from codec ${tt.codecs} to ${He.codecs}`);const St=He.dependentRepresentation?He.dependentRepresentation:He;return ue.changeType(St)}function Te(){return new Promise((He,tt)=>{let St=Ae();if(!St||St.length===0)return Oe(),void He();Ln(St).then(()=>{He()}).catch(at=>{tt(at)})})}function Ae(He){const tt=[],St=ue.getAllBufferRanges();if(!St||St.length===0)return tt;if(!He&&He!==0||isNaN(He))tt.push({start:St.start(0),end:St.end(St.length-1)+.5});else{const at=function(Mt,ke){const lt=D.get().streaming.buffer.bufferToKeep,Ot=ke.start(0);if(Mt-Ot>lt){let zt=Math.max(0,Mt-lt);const Cn=I.getRequests({state:$e.FRAGMENT_MODEL_EXECUTED,time:Mt,threshold:zp})[0];if(Cn&&(zt=Math.min(Cn.startTime,zt)),zt>0)return{start:Ot,end:zt}}return null}(He,St),Ct=function(Mt,ke){const lt=ke.end(ke.length-1)+.5,Ot=Rn(Mt),zt=N.manifestInfo.duration>=D.get().streaming.buffer.longFormContentDurationThreshold?D.get().streaming.buffer.bufferTimeAtTopQualityLongForm:D.get().streaming.buffer.bufferTimeAtTopQuality;let Cn=isNaN(Ot)?Mt:Math.min(Ot,Mt+zt);if(Cn>=ke.end(ke.length-1))return null;const mt=I.getRequests({state:$e.FRAGMENT_MODEL_EXECUTED,time:Mt,threshold:zp})[0];if(mt&&(Cn=Math.max(mt.startTime+mt.duration,Cn)),D.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let Qt=0;Qt<ke.length;Qt++)if(ke.start(Qt)<=Mt&&Mt<=ke.end(Qt)&&ke.start(Qt)<=Cn&&Cn<=ke.end(Qt)){let Tn=Cn;Cn=Qt+1<ke.length?ke.start(Qt+1):ke.end(Qt)+1,L.debug("Buffered range ["+ke.start(Qt)+", "+ke.end(Qt)+"] overlaps with targetTime "+Mt+" and range to be pruned ["+Tn+", "+lt+"], using ["+Cn+", "+lt+"] instead"+(Cn<lt?"":" (no actual pruning)"));break}}return Cn<ke.end(ke.length-1)?{start:Cn,end:lt}:null}(He,St);at&&tt.push(at),Ct&&tt.push(Ct)}return tt}function Oe(){(!Ie||q===h.default.TEXT&&$.isTextEnabled())&&Et()}function De(){tn()}function Ge(){tn(),Fe=NaN}function ot(He,tt){if(!ue)return null;const St=ue.getAllBufferRanges();let at,Ct,Mt=0,ke=0,lt=null,Ot=null,zt=0;const Cn=isNaN(tt)?.15:tt;if(St!=null){for(Ct=0,at=St.length;Ct<at;Ct++)if(Mt=St.start(Ct),ke=St.end(Ct),lt===null)zt=Math.abs(Mt-He),(He>=Mt&&He<ke||zt<=Cn)&&(lt=Mt,Ot=ke);else{if(zt=Mt-Ot,!(zt<=Cn))break;Ot=ke}if(lt!==null)return{start:lt,end:Ot}}return null}function Et(){if(R){let He=R.getTime()||0;ve&&(He=isNaN(Fe)?0:Fe);const tt=D.get().streaming.gaps.jumpGaps&&!isNaN(D.get().streaming.gaps.smallGapLimit)?D.get().streaming.gaps.smallGapLimit:NaN;K=Math.max(function(St,at){let Ct,Mt;return D.get().streaming.gaps.jumpGaps&&(at=D.get().streaming.gaps.smallGapLimit),Ct=ot(St,at),Mt=Ct===null?0:Ct.end-St,Mt}(He,tt),0),wt(f.default.BUFFER_LEVEL_UPDATED,{mediaType:q,bufferLevel:K}),tn()}}function xt(){const He=Y>=se-1,tt=R.getTimeToStreamEnd(N)-K<1e-5;!He&&!tt||F||(At(!0),L.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${N.id} and type ${q}`))}function tn(){if(q!==h.default.AUDIO&&q!==h.default.VIDEO)return;const He=R.getLowLatencyModeEnabled()?D.get().streaming.buffer.lowLatencyStallThreshold:D.get().streaming.buffer.stallThreshold;K<=He&&!F?kt(o.BUFFER_EMPTY):(F||K>He)&&kt(o.BUFFER_LOADED)}function kt(He){H===He||He===o.BUFFER_EMPTY&&R.getTime()===0||q===h.default.TEXT&&!$.isTextEnabled()||(H=He,wt(f.default.BUFFER_LEVEL_STATE_CHANGED,{state:He}),wt(He===o.BUFFER_LOADED?f.default.BUFFER_LOADED:f.default.BUFFER_EMPTY),L.debug(He===o.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function nn(){ue&&q!==h.default.TEXT&&(F||Ln(fn()))}function fn(){const He=[],tt=ue.getAllBufferRanges();if(!tt||tt.length===0)return He;const St=R.getTime();let at=Math.max(0,St-D.get().streaming.buffer.bufferToKeep);const Ct=I.getRequests({state:$e.FRAGMENT_MODEL_EXECUTED,time:St,threshold:zp})[0];if(Ct)at=Math.min(Ct.startTime,at);else if(St===0&&R.getIsDynamic())return[];if(tt.start(0)<=at){const Mt={start:0,end:at};for(let ke=0;ke<tt.length&&tt.end(ke)<=at;ke++)Mt.end=tt.end(ke);Mt.start<Mt.end&&He.push(Mt)}return He}function Ln(He){return new Promise((tt,St)=>{if(!He||!ue||He.length===0)return Et(),void tt();const at=[];He.forEach(Ct=>{at.push(function(Mt){return new Promise((ke,lt)=>{Mt.resolve=ke,Mt.reject=lt,Ee.push(Mt)})}(Ct))}),be||Mn(),Promise.all(at).then(()=>{tt()}).catch(Ct=>{St(Ct)})})}function Mn(){try{if(Ee.length===0||!ue)return L.debug("Nothing to prune, halt pruning"),Ee=[],void(be=!1);const He=ue.getBuffer();if(!He||!He.buffered||He.buffered.length===0)return L.debug("SourceBuffer is empty (or does not exist), halt pruning"),Ee=[],void(be=!1);const tt=Ee.shift();L.debug(`${q}: Removing buffer from: ${tt.start} to ${tt.end}`),be=!0,R.getTime()<tt.end&&At(!1),ue.remove(tt).then(St=>{wn(St)}).catch(St=>{wn(St)})}catch{be=!1}}function wn(He){L.debug("onRemoved buffer from:",He.from,"to",He.to),ue&&(oe(ue.getAllBufferRanges()),Ee.length===0&&(be=!1,Et()),He.unintended&&(L.warn("Detected unintended removal from:",He.from,"to",He.to,"setting streamprocessor time to",He.from),wt(f.default.SEEK_TARGET,{time:He.from})),be?Mn():(Ie?Ie=!1:Et(),wt(f.default.BUFFER_CLEARED,{from:He.from,to:He.to,unintended:He.unintended,hasEnoughSpaceToAppend:dt(),quotaExceeded:re})))}function bn(He){return new Promise(tt=>{He&&He.mseTimeOffset!==void 0&&ue&&ue.updateTimestampOffset?ue.updateTimestampOffset(He.mseTimeOffset).then(()=>{tt()}).catch(()=>{tt()}):tt()})}function Je(){return ue&&!F?ue.updateAppendWindow(N):Promise.resolve()}function Tt(){G++,G*(D.get().streaming.wallclockTimeUpdateInterval/1e3)>=D.get().streaming.buffer.bufferPruningInterval&&(G=0,nn())}function vt(){tn()}function At(He){F=He,F?wt(f.default.BUFFERING_COMPLETED):se=Number.POSITIVE_INFINITY}function Zt(){try{const He=ue.getAllBufferRanges();let tt,St,at=0;if(!He)return at;for(St=0,tt=He.length;St<tt;St++)at+=He.end(St)-He.start(St);return at}catch{return 0}}function Rn(He){try{let tt=He;const St=ue.getAllBufferRanges();if(!St||St.length===0)return NaN;let at=0;for(;tt===He&&at<St.length;){const Ct=St.start(at),Mt=St.end(at);tt>=Ct&&tt<=Mt&&(tt=Mt),at+=1}return tt===He?NaN:tt}catch{return NaN}}function dt(){const He=Zt();return isNaN(He)||He<Z}function wt(He,tt){let St=tt||{};w.trigger(He,St,{streamId:N.id,mediaType:q})}function jt(He,tt){if(Z=Number.POSITIVE_INFINITY,H=void 0,se=Number.POSITIVE_INFINITY,Y=0,B=null,F=!1,be=!1,re=!1,K=0,G=0,Ee=[],Fe=NaN,ve=!1,ue){let St=ue;ue=null,He||(tt?St.removeEventListeners():St.abort().then(()=>{St.reset(tt),St=null}))}Ie=!1}return k={appendInitSegmentFromCache:function(He){const tt=we.extract(N.id,He);return!!tt&&(L.debug(`Appending init fragment for type ${q}, representationId ${tt.representation.id} and bandwidth ${tt.representation.bandwidth}`),ae(tt),!0)},clearBuffers:Ln,createBufferSink:Q,dischargePreBuffer:function(){if(ue&&me&&typeof me.discharge=="function"){const He=me.getAllBufferRanges();if(He.length>0){let at="Beginning "+q+"PreBuffer discharge, adding buffer for:";for(let Ct=0;Ct<He.length;Ct++)at+=" start: "+He.start(Ct)+", end: "+He.end(Ct)+";";L.debug(at)}else L.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");J=[];let tt=me.discharge(),St=null;for(let at=0;at<tt.length;at++){const Ct=tt[at];if(Ct.segmentType!==he.HTTPRequest.INIT_SEGMENT_TYPE){const Mt=we.extract(Ct.streamId,Ct.representation.id);Mt&&St!==Mt&&(J.push(Mt),ue.append(Mt),St=Mt)}J.push(Ct),ue.append(Ct)}me.reset(),me=null}},getAllRangesWithSafetyFactor:Ae,getBuffer:function(){return ue},getBufferControllerType:function(){return Tx},getBufferLevel:function(){return K},getContinuousBufferTimeForTargetTime:Rn,getIsBufferingCompleted:function(){return F},getIsPruningInProgress:function(){return be},getMediaSource:function(){return ee},getRangeAt:ot,getStreamId:function(){return N.id},getType:function(){return q},hasBufferAtTime:function(He){try{const tt=ue.getAllBufferRanges();if(!tt||tt.length===0)return!1;let St=0;for(;St<tt.length;){const at=tt.start(St),Ct=tt.end(St);if(He>=at&&He<=Ct)return!0;St+=1}return!1}catch(tt){return L.error(tt),!1}},initialize:function(He){Ce(He),w.on(f.default.INIT_FRAGMENT_LOADED,ne,k),w.on(f.default.MEDIA_FRAGMENT_LOADED,fe,k),w.on(f.default.WALLCLOCK_TIME_UPDATED,Tt,k),w.on(g.default.PLAYBACK_PLAYING,Ge,k),w.on(g.default.PLAYBACK_PROGRESS,Oe,k),w.on(g.default.PLAYBACK_TIME_UPDATED,Oe,k),w.on(g.default.PLAYBACK_RATE_CHANGED,vt,k),w.on(g.default.PLAYBACK_STALLED,De,k)},prepareForAbandonQualitySwitch:function(He,tt){return V(He,tt)},prepareForDefaultQualitySwitch:function(He,tt){return V(He,tt)},prepareForFastQualitySwitch:function(He,tt){return V(He,tt)},prepareForForceReplacementQualitySwitch:function(He,tt){return new Promise(St=>{const at=[];at.push(ue.abort()),at.push(Je()),at.push(Te()),at.push(bn(He)),at.push(ye(He,tt)),Promise.allSettled(at).then(()=>{At(!1),St()})})},prepareForNonReplacementTrackSwitch:function(He,tt){return new Promise(St=>{const at=[];at.push(Je()),at.push(ye(He,tt)),Promise.allSettled(at).then(()=>{St()})})},prepareForPlaybackSeek:function(){return F&&At(!1),ue.abort()},prepareForReplacementTrackSwitch:function(He,tt){return new Promise(St=>{const at=[];at.push(ue.abort()),at.push(Je()),at.push(ye(He,tt)),at.push(Te()),at.push(bn(He)),Promise.allSettled(at).then(()=>{At(!1),St()})})},pruneAllSafely:Te,pruneBuffer:nn,reset:function(He,tt){w.off(f.default.INIT_FRAGMENT_LOADED,ne,this),w.off(f.default.MEDIA_FRAGMENT_LOADED,fe,this),w.off(f.default.WALLCLOCK_TIME_UPDATED,Tt,this),w.off(g.default.PLAYBACK_PLAYING,Ge,this),w.off(g.default.PLAYBACK_PROGRESS,Oe,this),w.off(g.default.PLAYBACK_TIME_UPDATED,Oe,this),w.off(g.default.PLAYBACK_RATE_CHANGED,vt,this),w.off(g.default.PLAYBACK_STALLED,De,this),jt(He,tt)},segmentRequestingCompleted:function(He){isNaN(He)||(se=He,xt())},setIsBufferingCompleted:At,setMediaSource:Ce,setSeekTarget:function(He){Fe=He},updateAppendWindow:Je,updateBufferTimestampOffset:bn},L=(0,l.default)(b).getInstance().getLogger(k),we=Fp(b).getInstance(),jt(),k}Sx.__dashjs_factory_name=Tx;var y2=r.default.getClassFactory(Sx);const xx="NotFragmentedTextBufferController";function wx(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance(),w=v.textController,I=v.errHandler,R=v.streamInfo,M=v.type;let D,N,$,q,k,L;function F(ee){q=ee}function K(ee){N!==ee&&(N=ee,N&&function(Y){let se={};b.trigger(Y,se,{streamId:R.id,mediaType:M})}(f.default.BUFFERING_COMPLETED))}function Z(ee){ee.chunk.bytes&&!N&&(L.save(ee.chunk),k.append(ee.chunk),K(!0))}return D={initialize:function(ee){F(ee)},getStreamId:function(){return R.id},getType:function(){return M},getBufferControllerType:function(){return xx},createBufferSink:function(ee){return new Promise((Y,se)=>{try{k=vx(y).create({mediaSource:q,textController:w,eventBus:b}),k.initializeForFirstUse(ee),$||(k.getBuffer()&&typeof k.getBuffer().initialize=="function"&&k.getBuffer().initialize(),$=!0),Y(k)}catch(ue){I.error(new Yt.default(en.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,en.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+M)),se(ue)}})},dischargePreBuffer:function(){},getBuffer:function(){return k},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:F,getMediaSource:function(){return q},appendInitSegmentFromCache:function(ee){return L.extract(R.id,ee)!==null},getIsBufferingCompleted:function(){return N},setIsBufferingCompleted:K,getIsPruningInProgress:function(){return!1},reset:function(ee){b.off(f.default.INIT_FRAGMENT_LOADED,Z,D),!ee&&k&&(k.abort(),k.reset(),k=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return N=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},$=!1,q=null,N=!1,L=Fp(y).getInstance(),b.on(f.default.INIT_FRAGMENT_LOADED,Z,D),D}wx.__dashjs_factory_name=xx;var v2=r.default.getClassFactory(wx);function _x(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance(),w=v.dashMetrics,I=v.mediaPlayerModel,R=v.fragmentModel,M=v.abrController,D=v.playbackController,N=v.textController,$=v.type,q=v.bufferController,k=v.representationController,L=v.settings;let F,K,Z,ee,Y,se,ue,me,ve,J,H,B;function G(){ue=(0,l.default)(y).getInstance().getLogger(ee),oe(),J=v.streamInfo}function be(){me=!0}function re(){me=!1}function we(ge){if(q.getIsBufferingCompleted())return;Ee();const V=isNaN(ge)?0:ge;ve=setTimeout(Ie,V)}function Ee(){ve&&(clearTimeout(ve),ve=null)}function Ie(){const ge=I.getScheduleTimeout();try{if(function(){try{return $===h.default.TEXT&&!N.isTextEnabled()||D.isPaused()&&(!D.getStreamController().getInitialPlayback()||!D.getStreamController().getAutoPlay())&&!L.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void Ee();(function(){try{return!!me&&k.getCurrentRepresentation()&&(se==null||H||function(){const V=k.getCurrentRepresentation();if(!$||!V)return!0;let ye=V&&V.segmentDuration&&!isNaN(V.segmentDuration)?V.segmentDuration:0;const Te=w.getCurrentBufferLevel($),Ae=Fe();return(Ae<=ye||D.getLowLatencyModeEnabled()||$===h.default.AUDIO&&K)&&(ye=0),Te+ye<Ae}())}catch{return!1}})()?function(){if(M.handlePendingManualQualitySwitch(J.id,$))return;let V=!1;F&&(V=M.checkPlaybackQuality($,J.id)),V||function(){const ye=k.getCurrentRepresentation();Z||ye.id!==se||H?function(Te){H?(ue.debug("Switch track for "+$+", representation id = "+Te.id),H=!1):ue.debug("Quality has changed, get init request for representationid = "+Te.id),b.trigger(f.default.INIT_FRAGMENT_NEEDED,{representationId:Te.id,sender:ee},{streamId:J.id,mediaType:$}),F=!1,Z=!1}(ye):(ue.debug(`Media segment needed for ${$} and stream id ${J.id}`),b.trigger(f.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:J.id,mediaType:$}),F=!0)}()}():we(ge)}catch{we(ge)}}function Fe(){let ge=NaN;const V=k.getCurrentRepresentation();return $&&V&&(ge=$===h.default.TEXT?function(){try{if(N.isTextEnabled()){const ye=k.getCurrentRepresentation();if(isNaN(ye.fragmentDuration)){const Te=w.getCurrentSchedulingInfo(o.SCHEDULING_INFO);return Te?Te.duration:0}return ye.fragmentDuration}return 0}catch{return 0}}():$===h.default.AUDIO&&K?function(){try{const ye=w.getCurrentBufferLevel(h.default.VIDEO),Te=k.getCurrentRepresentation();return isNaN(Te.fragmentDuration)?ye+1:Math.max(ye+1,Te.fragmentDuration)}catch{return 0}}():function(){try{const ye=L.get().streaming.enhancement.enabled?k.getCurrentCompositeRepresentation():k.getCurrentRepresentation(),Te=ye.mediaInfo.streamInfo;return M.isPlayingAtTopQuality(ye)?Te.manifestInfo.duration>=L.get().streaming.buffer.longFormContentDurationThreshold?L.get().streaming.buffer.bufferTimeAtTopQualityLongForm:L.get().streaming.buffer.bufferTimeAtTopQuality:I.getBufferTimeDefaultUnadjusted()}catch{return I.getBufferTimeDefaultUnadjusted()}}()),ge}function Ce(){Q(!0)}function Q(ge){if(D&&R){const V=R.getRequests({state:$e.FRAGMENT_MODEL_EXECUTED,time:D.getTime(),threshold:0})[0];V&&D.getTime()>=V.startTime&&((!Y.representation||V.representation.mediaInfo.type===Y.representation.mediaInfo.type&&V.representation.mediaInfo.index!==Y.representation.mediaInfo.index)&&ge&&function(ye){ue.debug(`Track change rendered for streamId ${J.id} and type ${$}`),b.trigger(f.default.TRACK_CHANGE_RENDERED,{mediaType:$,oldMediaInfo:Y&&Y.representation&&Y.representation.mediaInfo?Y.representation.mediaInfo:null,newMediaInfo:ye.representation.mediaInfo,streamId:J.id})}(V),Y.representation&&V.representation.id===Y.representation.id||!ge||function(ye){ue.debug(`Quality change rendered for streamId ${J.id} and type ${$}`),b.trigger(f.default.QUALITY_CHANGE_RENDERED,{mediaType:$,oldRepresentation:Y.representation?Y.representation:null,newRepresentation:ye.representation,streamId:J.id})}(V),Y.representation=V.representation)}}function ne(){R.abortRequests(),Ee()}function fe(){L.get().streaming.scheduling.scheduleWhilePaused||we()}function ae(ge){w.updatePlayListTraceMetrics({playbackspeed:ge.playbackRate.toString()})}function oe(){F=!0,B=0,se=null,Y={representation:null},H=!1,Z=!1,me=!0}return ee={clearScheduleTimer:Ee,getBufferTarget:Fe,getPlaybackController:function(){return D},getStreamId:function(){return J.id},getSwitchTrack:function(){return H},getTimeToLoadDelay:function(){return B},getType:function(){return $},initialize:function(ge){K=ge,b.on(f.default.URL_RESOLUTION_FAILED,ne,ee),b.on(g.default.PLAYBACK_STARTED,fe,ee),b.on(g.default.PLAYBACK_RATE_CHANGED,ae,ee),b.on(g.default.PLAYBACK_TIME_UPDATED,Ce,ee),b.on(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING,be,ee),b.on(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING,re,ee)},reset:function(){b.off(f.default.URL_RESOLUTION_FAILED,ne,ee),b.off(g.default.PLAYBACK_STARTED,fe,ee),b.off(g.default.PLAYBACK_RATE_CHANGED,ae,ee),b.off(g.default.PLAYBACK_TIME_UPDATED,Ce,ee),b.off(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING,be,ee),b.off(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING,re,ee),Ee(),Q(!1),oe(),J=null},setShouldCheckPlaybackQuality:function(ge){F=ge},setInitSegmentRequired:function(ge){Z=ge},setLastInitializedRepresentationId:function(ge){se=ge},setup:G,setSwitchTrack:function(ge){H=ge},setTimeToLoadDelay:function(ge){B=ge},startScheduleTimer:we},G(),ee}_x.__dashjs_factory_name="ScheduleController";var E2=r.default.getClassFactory(_x);const b2=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var T2=class extends ax{constructor(){super(),this.isPartialSegment=!0,this.replacementSubNumber=NaN,this.totalNumberOfPartialSegments=NaN}};function Ix(v){return v?v.totalNumberOfPartialSegments&&!isNaN(v.totalNumberOfPartialSegments)&&v.totalNumberOfPartialSegments>0&&!isNaN(v.subNumberOfPartialSegmentToRequest)?function(y){const b=function(w,I){const R=new T2,M=w.segmentDurationInSeconds/w.totalNumberOfPartialSegments,{representation:D,timelineConverter:N,isDynamic:$,index:q,totalNumberOfPartialSegments:k}=w,L=Ax({representation:D,segmentDurationInSeconds:M,presentationStartTime:w.presentationStartTime+I*M,presentationEndTime:w.presentationStartTime+(I+1)*M,timelineConverter:N,isDynamic:$,mediaTimeInSeconds:w.mediaTimeInSeconds+I*M,index:q});return R.assignAttributes(L),R.replacementSubNumber=I,R.totalNumberOfPartialSegments=k,R}(y,y.subNumberOfPartialSegmentToRequest);return Rx(b,y),b}(v):function(y){const b=new Op,w=Ax(y);return b.assignAttributes(w),Rx(b,y),b}(v):null}function Ax(v){const{representation:y,segmentDurationInSeconds:b,presentationStartTime:w,presentationEndTime:I,mediaTimeInSeconds:R,timelineConverter:M,isDynamic:D,index:N}=v,$={availabilityEndTime:M.calcAvailabilityEndTimeFromPresentationTime(I+b,y,D),availabilityStartTime:M.calcAvailabilityStartTimeFromPresentationTime(I,y,D),duration:b,index:N,mediaStartTime:R,presentationStartTime:w,replacementNumber:y.startNumber+N,representation:y};return $.wallStartTime=M.calcWallTimeForSegment($,D),$}function Rx(v,y){const{tManifest:b,mediaTime:w,mediaUrl:I,mediaRange:R}=y;v.replacementTime=b||w,v.media=Vc(I,v.representation.id,v.replacementNumber,v.replacementSubNumber,v.representation.bandwidth,v.replacementTime),v.mediaRange=R,v.mediaUrl=I}function kx(v,y,b,w){const I=y.adaptation.period;if(isFinite(I.duration)&&I.start+I.duration<=b.presentationStartTime)return!1;if(w){if(y.availabilityTimeOffset==="INF")return!0;const R=v.getClientReferenceTime();return b.availabilityStartTime.getTime()<=R&&(!isFinite(b.availabilityEndTime)||b.availabilityEndTime.getTime()>=R)}return!0}function Vc(v,y,b,w,I,R){return v&&function(M,D,N,$,q,k){return M.replace(b2,(L,F,K,Z)=>{let ee,Y;switch(F){case void 0:return"$";case"RepresentationID":ee=D;break;case"Number":ee=N;break;case"SubNumber":ee=$;break;case"Bandwidth":ee=q;break;case"Time":if(typeof k=="string")return k;ee=k&&Math.round(k);break;default:ee=null}if(ee==null)return L;switch(Z){case void 0:case"d":case"i":case"u":Y=ee.toString();break;case"o":Y=ee.toString(8);break;case"x":Y=ee.toString(16);break;case"X":Y=ee.toString(16).toUpperCase();break;default:Y=ee.toString()}const se=parseInt(K,10)||1;return Y.padStart(se,"0")})}(v,y,b,w,I,R)}function Cx(v){const{index:y,isDynamic:b,mediaRange:w,mediaTime:I,mediaUrl:R,representation:M,subNumberOfPartialSegmentToRequest:D,timelineConverter:N,totalNumberOfPartialSegments:$}=v;let q,k,L;q=M.segmentDuration,isNaN(q)&&(q=M.adaptation.period.duration),k=parseFloat((M.adaptation.period.start+y*q).toFixed(5)),L=parseFloat((k+q).toFixed(5));const F=Ix({index:y,isDynamic:b,mediaRange:w,mediaTime:I,mediaTimeInSeconds:N.calcMediaTimeFromPresentationTime(k,M),mediaUrl:R,presentationEndTime:L,presentationStartTime:k,representation:M,segmentDurationInSeconds:q,subNumberOfPartialSegmentToRequest:D,timelineConverter:N,totalNumberOfPartialSegments:$});return kx(N,M,F,b)?F:null}function Up(v){const{durationInTimescale:y,fTimescale:b,index:w,subNumberOfPartialSegmentToRequest:I,isDynamic:R,mediaRange:M,mediaTime:D,mediaUrl:N,totalNumberOfPartialSegments:$,representation:q,tManifest:k,timelineConverter:L}=v,F=D/b,K=y/b;let Z=L.calcPresentationTimeFromMediaTime(F,q),ee=Ix({representation:q,segmentDurationInSeconds:K,presentationStartTime:Z,presentationEndTime:Z+K,mediaTimeInSeconds:F,timelineConverter:L,isDynamic:R,index:w,totalNumberOfPartialSegments:$,subNumberOfPartialSegmentToRequest:I,mediaUrl:N,mediaRange:M,tManifest:k,mediaTime:D});return kx(L,q,ee,R)?ee:null}function jp(v){return v.k}function Nx(v){const y=(v=v||{}).eventBus,b=v.events,w=v.abrController,I=v.dashMetrics,R=v.playbackController,M=v.timelineConverter,D=v.type,N=v.streamInfo,$=v.segmentsController,q=v.isDynamic;let k,L,F;function K(){return D}function Z(){return(F==null?void 0:F.mediaInfo.type)===D?F:function(){let J=F==null?void 0:F.dependentRepresentation;if(J){if(!J.mediaInfo)throw new Error("dependentRepresentation has no mediaInfo!");if(J.mediaInfo.type===D)return J}return null}()}function ee(){F=null,L=[]}function Y(J){return new Promise((H,B)=>{const G=J.hasInitialization(),be=J.hasSegments(),re=[];re.push($.updateInitData(J,G)),re.push($.updateSegmentData(J,be)),Promise.all(re).then(we=>{var Ee;we[0]&&!we[0].error&&(J=function(Ie,Fe){return Fe&&!Fe.error&&Fe.representation?Fe.representation:Ie}(J,we[0])),we[1]&&!we[1].error&&(J=function(Ie,Fe){if(!Fe||Fe.error)return;const Ce=Fe.segments,Q=[];let ne,fe,ae,oe,ge=0;for(ne=0,fe=Ce?Ce.length:0;ne<fe;ne++)ae=Ce[ne],oe=Up({durationInTimescale:ae.duration,fTimescale:ae.timescale,index:ge,isDynamic:q,mediaRange:ae.mediaRange,mediaTime:ae.startTime,mediaUrl:ae.media,representation:Ie,timelineConverter:M}),oe&&(Q.push(oe),oe=null,ge++);return Q.length>0&&(Ie.segments=Q),Ie}(J,we[1])),J.fragmentDuration=J.segmentDuration?J.segmentDuration:J.segments&&J.segments.length>0?J.segments[0].duration:NaN,(Ee=J).mediaFinishedInformation=$.getMediaFinishedInformation(Ee),function(Ie){let Fe,Ce=I.getCurrentManifestUpdate(),Q=!1;if(Ce){for(let ne=0;ne<Ce.representationInfo.length;ne++)if(Fe=Ce.representationInfo[ne],Fe.index===Ie.index&&Fe.mediaType===K()){Q=!0;break}Q||I.addManifestUpdateRepresentationInfo(Ie,K())}}(J),H()}).catch(we=>{B(we)})})}function se(J){if(!L||L.length===0)return null;const H=L.filter(B=>B.id===J);return H.length>0?H[0]:null}function ue(J){y.trigger(b.DATA_UPDATE_COMPLETED,{currentRepresentation:F,error:J},{streamId:N.id,mediaType:D})}function me(J){F&&F.id===J.id||function(H){(function(){if(!(w&&I&&R&&M))throw new Error(h.default.MISSING_CONFIG_ERROR)})();const B=new Date,G=1e3*R.getTime();H&&I.addRepresentationSwitch(H.adaptation.type,B,G,H.id),y.trigger(g.default.REPRESENTATION_SWITCH,{mediaType:D,streamId:N.id,currentRepresentation:H},{streamId:N.id,mediaType:D})}(J),F=J}function ve(J){if(J.newDuration){const H=Z();H&&H.adaptation.period&&(H.adaptation.period.duration=J.newDuration)}}return k={getCurrentCompositeRepresentation:function(){return F},getCurrentRepresentation:Z,getRepresentationById:se,getStreamId:function(){return N.id},getType:K,prepareQualityChange:function(J){const H=L.filter(B=>B.id===J.id);H.length>0&&me(H[0])},reset:function(){y.off(g.default.MANIFEST_VALIDITY_CHANGED,ve,k),ee()},updateData:function(J,H,B){return new Promise((G,be)=>{if(L=J,me(se(B)),D!==h.default.VIDEO&&D!==h.default.ENHANCEMENT&&D!==h.default.AUDIO&&(D!==h.default.TEXT||!H))return ue(),void G();const re=[];for(let we=0,Ee=L.length;we<Ee;we++){const Ie=L[we];re.push(Y(Ie))}Promise.all(re).then(()=>{(function(){w.setPlaybackQuality(D,N,F);const we=I.getCurrentDVRInfo(D);we&&I.updateManifestUpdateInfo({latency:we.range.end-R.getTime()}),ue()})(),G()}).catch(we=>{be(we)})})}},ee(),y.on(g.default.MANIFEST_VALIDITY_CHANGED,ve,k),k}Nx.__dashjs_factory_name="RepresentationController";var S2=r.default.getClassFactory(Nx);function Dx(v){const y=(v=v||{}).eventBus,b=v.debug,w=v.urlUtils,I=v.type,R=v.streamInfo,M=v.segmentsController,D=v.timelineConverter,N=v.baseURLController;let $,q,k,L,F;function K(){return I}function Z(){k=null}function ee(J,H,B){const G=N.resolve(B.path);let be,re,we={};return G&&H!==G.url&&w.isRelative(H)?(be=G.url,re=G.serviceLocation,we=G.queryParams,H&&(be=w.resolve(H,be))):be=H,!w.isRelative(be)&&(J.url=be,J.serviceLocation=re,J.queryParams=we,!0)}function Y(J,H,B){let G=null;if(!H||!H.segmentInfoType)return G;const be=M.getSegmentByTime(H,B);return be&&(k=be,q.debug("Index for time "+B+" is "+be.index),G=se(0,be)),G}function se(J,H){if(H==null)return null;const B=new le,G=H.representation,be=G.bandwidth,re=Vc(H.media,G.id,H.replacementNumber,H.replacementSubNumber,be,H.replacementTime);return B.adaptationIndex=G.adaptation.index,B.availabilityEndTime=H.availabilityEndTime,B.availabilityStartTime=H.availabilityStartTime,B.availabilityTimeComplete=G.availabilityTimeComplete,B.bandwidth=G.bandwidth,B.duration=H.duration,B.index=H.index,B.isPartialSegmentRequest=H.isPartialSegment,B.mediaStartTime=H.mediaStartTime,B.mediaType=K(),B.presentationStartTime=H.presentationStartTime,B.range=H.mediaRange,B.representation=G,B.startTime=H.presentationStartTime,B.timescale=G.timescale,B.type=he.HTTPRequest.MEDIA_SEGMENT_TYPE,B.wallStartTime=H.wallStartTime,ee(B,re,G)?B:void 0}function ue(J){if(!J)return{indexToRequest:0,subNumberOfPartialSegmentToRequest:NaN};const H=J.isPartialSegment,B=!isNaN(J.replacementSubNumber),G=!isNaN(J.totalNumberOfPartialSegments);if(H&&B&&G){const be=J.replacementSubNumber+1;return be<J.totalNumberOfPartialSegments?{indexToRequest:J.index,subNumberOfPartialSegmentToRequest:be}:{indexToRequest:J.index+1,subNumberOfPartialSegmentToRequest:0}}return{indexToRequest:J.index+1,subNumberOfPartialSegmentToRequest:NaN}}function me(J,H,B,G){let be=null;const re=M.getSegmentByIndex(H,B,G,k);if(re)be=se(0,re),k=re;else{if(L&&!F)return q.debug(K()+" No segment found at index: "+B+". Wait for next loop"),null;F=!0}return be}function ve(){q.debug("Dynamic stream complete"),F=!0}return $={getCurrentIndex:function(){return k?k.index:-1},getInitRequest:function(J,H){return H?function(B,G,be){const re=new le,we=G.adaptation.period,Ee=we.start;if(re.mediaType=be,re.type=he.HTTPRequest.INIT_SEGMENT_TYPE,re.range=G.range,re.availabilityStartTime=D.calcAvailabilityStartTimeFromPresentationTime(Ee,G,L),re.availabilityEndTime=D.calcAvailabilityEndTimeFromPresentationTime(Ee+we.duration,G,L),re.representation=G,ee(re,G.initialization,G))return re.url=Vc(re.url,G.id,void 0,void 0,G.bandwidth),re}(0,H,K()):null},getLastSegment:function(){return k},getNextSegmentRequest:function(J,H){if(!H||!H.segmentInfoType)return null;if(function(be){return be&&k&&be.endNumber&&k.replacementNumber&&k.replacementNumber>=be.endNumber}(H))return F=!0,null;let{indexToRequest:B,subNumberOfPartialSegmentToRequest:G}=ue(k);return me(0,H,B,G)},getNextSegmentRequestIdempotent:function(J,H){let B=null,{indexToRequest:G,subNumberOfPartialSegmentToRequest:be}=ue(k);const re=M.getSegmentByIndex(H,G,be,k);return re?(B=se(0,re),B):null},getSegmentRequestForTime:Y,getStreamId:function(){return R.id},getStreamInfo:function(){return R},getType:K,getValidTimeAheadOfTargetTime:function(J,H,B,G){try{if(isNaN(J)||!H||!B)return NaN;if(J<0&&(J=0),isNaN(G)&&(G=.5),Y(0,B,J))return J;if(B.adaptation.period.start+B.adaptation.period.duration<J)return NaN;const be=isFinite(B.adaptation.period.duration)?B.adaptation.period.start+B.adaptation.period.duration:J+30;let re=Math.min(J+G,be),we=NaN,Ee=null;for(;re<=be;){let Ie=null;if(re<=be&&(Ie=Y(0,B,re)),Ie){we=re,Ee=Ie;break}re+=G}if(Ee){const Ie=Ee.startTime+Ee.duration;return J>Ee.startTime&&Ie-J>G?J:!isNaN(Ee.startTime)&&J<Ee.startTime&&we>Ee.startTime?Ee.startTime+.001:Math.min(Ie-G,we)}return we}catch{return NaN}},initialize:function(J){L=J,F=!1,M.initialize(J)},isLastSegmentRequested:function(J,H){return!J||!k?!1:F?!0:!isFinite(J.adaptation.period.duration)||k.presentationStartTime+k.duration>H?!1:J.mediaFinishedInformation&&!isNaN(J.mediaFinishedInformation.numberOfSegments)&&!isNaN(k.index)&&k.index>=J.mediaFinishedInformation.numberOfSegments-1&&(!L||J.segmentInfoType===xe.default.SEGMENT_TEMPLATE||L&&J.segmentInfoType===xe.default.SEGMENT_LIST&&J.adaptation.period.nextPeriodId)?!0:!!(L&&J.adaptation.period.nextPeriodId&&J.segmentInfoType===xe.default.SEGMENT_TIMELINE&&J.mediaFinishedInformation&&!isNaN(J.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&k&&!isNaN(k.mediaStartTime)&&!isNaN(k.duration)&&k.mediaStartTime+k.duration>=J.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(J,H){return H&&H.segmentInfoType?me(0,H,k?k.index:0,k&&k.isPartialSegment&&!isNaN(k.replacementSubNumber)?k.replacementSubNumber:NaN):null},reset:function(){Z(),y.off(g.default.DYNAMIC_TO_STATIC,ve,$)}},q=b.getLogger($),Z(),y.on(g.default.DYNAMIC_TO_STATIC,ve,$),$}Dx.__dashjs_factory_name="DashHandler";var Lx=r.default.getClassFactory(Dx);function Px(v,y){const b=(v=v||{}).timelineConverter,w=v.dashMetrics;let I;function R(D,N){if(function(){if(!b)throw new Error(h.default.MISSING_CONFIG_ERROR)}(),!D)return null;N===void 0&&(N=null);let $=null;const q=b.calcMediaTimeFromPresentationTime(N,D);return function(k,L){const F=function(be){return be.adaptation.period.mpd.manifest.Period[be.adaptation.period.index].AdaptationSet[be.adaptation.index].Representation[be.index].SegmentTemplate||be.adaptation.period.mpd.manifest.Period[be.adaptation.period.index].AdaptationSet[be.adaptation.index].Representation[be.index].SegmentList}(k),K=F.SegmentTimeline,Z=F.SegmentURL;let ee,Y,se,ue,me,ve,J=0,H=-1;ve=k.timescale,ee=K.S;let B=!1;const G=ee.length;for(se=0;se<G&&!B;se++)for(Y=ee[se],me=0,Y.hasOwnProperty("r")&&(me=Y.r),Y.hasOwnProperty("t")&&(J=Y.t),me<0&&(me=M(k,ee[se+1],Y,ve,J/ve)),ue=0;ue<=me&&!B;ue++)H++,B=L({mediaTime:J,segmentBase:F,segmentURL:Z,currentSElement:Y,sElementCounterIncludingRepeats:H,sElementCounter:se}),B&&(k.segmentDuration=Y.d/ve),J+=Y.d}(D,function(k){const L=D.timescale;return function(F,K){const{mediaTime:Z,segmentBase:ee,segmentURL:Y,currentSElement:se,sElementCounterIncludingRepeats:ue,sElementCounter:me}=K,ve=se.d,J=D.timescale;return F<Z+ve&&F>=Z&&(function(H){const{segmentBase:B,segmentURL:G,sElementCounter:be,currentSElement:re,mediaTime:we,durationInTimescale:Ee,fTimescale:Ie,requiredMediaTimeInTimescaleUnits:Fe,sElementCounterIncludingRepeats:Ce}=H;let Q=function(oe,ge,V){let ye=oe.media;return ge&&(ye=ge[V].media||""),ye}(B,G,be),ne=function(oe,ge,V){let ye=oe.mediaRange;return ge&&(ye=ge[V].mediaRange),ye}(re,G,be);const fe=jp(re),ae=function(oe){if(!oe||oe.totalNumberOfPartialSegments===void 0||isNaN(oe.totalNumberOfPartialSegments)||oe.totalNumberOfPartialSegments<1)return;const{durationInTimescale:ge,requiredMediaTimeInTimescaleUnits:V,mediaTime:ye,totalNumberOfPartialSegments:Te}=oe,Ae=ge/Te;for(let Oe=0;Oe<Te;Oe++){const De=ye+Oe*Ae;if(V>=De&&V<De+Ae)return Oe}return NaN}({durationInTimescale:Ee,requiredMediaTimeInTimescaleUnits:Fe,mediaTime:we,totalNumberOfPartialSegments:fe});$=Up({timelineConverter:b,isDynamic:y,representation:D,mediaTime:we,durationInTimescale:Ee,fTimescale:Ie,mediaUrl:Q,mediaRange:ne,index:Ce,tManifest:re.tManifest,totalNumberOfPartialSegments:fe,subNumberOfPartialSegmentToRequest:ae})}({segmentBase:ee,segmentURL:Y,sElementCounter:me,currentSElement:se,mediaTime:Z,durationInTimescale:ve,fTimescale:J,requiredMediaTimeInTimescaleUnits:F,sElementCounterIncludingRepeats:ue}),!0)}(parseFloat((q*L).toPrecision(15)),k)}),$}function M(D,N,$,q,k){let L;if(N&&N.hasOwnProperty("t"))L=N.t/q;else try{let F=0;if(isNaN(D.adaptation.period.start)||isNaN(D.adaptation.period.duration)||!isFinite(D.adaptation.period.duration)){const K=w.getCurrentDVRInfo();F=isNaN(K.end)?0:K.end}else F=D.adaptation.period.start+D.adaptation.period.duration;L=b.calcMediaTimeFromPresentationTime(F,D),D.segmentDuration=$.d/q}catch{L=0}return Math.max(Math.ceil((L-k)/($.d/q))-1,0)}return I={getMediaFinishedInformation:function(D){if(!D)return 0;const N=(D.adaptation.period.mpd.manifest.Period[D.adaptation.period.index].AdaptationSet[D.adaptation.index].Representation[D.index].SegmentTemplate||D.adaptation.period.mpd.manifest.Period[D.adaptation.period.index].AdaptationSet[D.adaptation.index].Representation[D.index].SegmentList).SegmentTimeline;let $,q,k,L,F,K,Z=0,ee=0,Y=0;K=D.timescale,$=N.S;const se=$.length;for(k=0;k<se;k++)for(q=$[k],F=0,q.hasOwnProperty("r")&&(F=q.r),q.hasOwnProperty("t")&&(Z=q.t,ee=Z/K),F<0&&(F=M(D,$[k+1],q,K,ee)),L=0;L<=F;L++)Y++,Z+=q.d,ee=Z/K;return{numberOfSegments:Y,mediaTimeOfLastSignaledSegment:ee}},getSegmentByIndex:function(D,N){return D?R(D,N&&!isNaN(N.presentationStartTime)?N.presentationStartTime+N.duration+.01:0):null},getSegmentByTime:R},I}Px.__dashjs_factory_name="TimelineSegmentsGetter";var x2=r.default.getClassFactory(Px);function Mx(v,y){const b=(v=v||{}).timelineConverter;let w;function I(M,D,N){if(!M)return null;const $=R(M),q=jp($);q!==void 0&&q>=0&&(N=N!==void 0&&N<q?N:0);const k=Cx({index:D=Math.max(D,0),isDynamic:y,mediaTime:Math.round(D*M.segmentDuration*M.timescale,10),mediaUrl:$.media,representation:M,subNumberOfPartialSegmentToRequest:N,timelineConverter:b,totalNumberOfPartialSegments:q});return k&&M.endNumber&&k.replacementNumber>M.endNumber?null:k}function R(M){return M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentTemplate}return w={getMediaFinishedInformation:function(M){const D={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return D;const N=M.segmentDuration;return isNaN(N)?D.numberOfSegments=1:D.numberOfSegments=Math.ceil(M.adaptation.period.duration/N),D},getSegmentByIndex:I,getSegmentByTime:function(M,D){if(!M)return null;const N=M.segmentDuration;if(isNaN(N))return null;let $=b.calcPeriodRelativeTimeFromMpdRelativeTime(M,D);const q=R(M),k=Math.floor($/N),L=function(F){if(!F||F.totalNumberOfPartialSegments===void 0||isNaN(F.totalNumberOfPartialSegments)||F.totalNumberOfPartialSegments<1)return;const{totalNumberOfPartialSegments:K,representation:Z,requestedTimeRelativeToPeriodStart:ee,indexWithoutStartNumber:Y}=F,se=Y*Z.segmentDuration,ue=Z.segmentDuration/K,me=ee-se;let ve=Math.floor(me/ue);return ve=Math.max(0,Math.min(ve,K-1)),ve}({totalNumberOfPartialSegments:jp(q),representation:M,requestedTimeRelativeToPeriodStart:$,indexWithoutStartNumber:k});return I(M,k,L)}},w}Mx.__dashjs_factory_name="TemplateSegmentsGetter";var w2=r.default.getClassFactory(Mx);function Ox(v,y){const b=(v=v||{}).timelineConverter;let w;function I(){if(!b||!b.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(h.default.MISSING_CONFIG_ERROR)}function R(M,D){if(I(),!M)return null;const N=M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentList,$=N.SegmentURL.length,q=M&&!isNaN(M.startNumber)?M.startNumber:1,k=Math.max(q-1,0),L=Math.max(D-k,0);let F=null;if(L<$){const K=N.SegmentURL[L];F=Cx({index:D,isDynamic:y,mediaRange:K.mediaRange,mediaTime:(q+D-1)*M.segmentDuration,representation:M,timelineConverter:b}),F&&(F.media=K.media?K.media:"",F.indexRange=K.indexRange)}return F}return w={getSegmentByIndex:R,getSegmentByTime:function(M,D){if(I(),!M)return null;const N=M.segmentDuration;if(isNaN(N))return null;const $=b.calcPeriodRelativeTimeFromMpdRelativeTime(M,D);return R(M,Math.floor($/N))},getMediaFinishedInformation:function(M){const D={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return D;const N=M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index].Representation[M.index].SegmentList,$=M&&!isNaN(M.startNumber)?M.startNumber:1,q=Math.max($-1,0);return D.numberOfSegments=q+N.SegmentURL.length,D}},w}Ox.__dashjs_factory_name="ListSegmentsGetter";var _2=r.default.getClassFactory(Ox);function Fx(v){const y=(v=v||{}).timelineConverter;let b;function w(){if(!y||!y.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(h.default.MISSING_CONFIG_ERROR)}function I(R,M){if(w(),!R)return null;const D=R.segments?R.segments.length:-1;let N;if(M<D&&(N=R.segments[M],N&&N.index===M))return N;for(let $=0;$<D;$++)if(N=R.segments[$],N&&N.index===M)return N;return null}return b={getSegmentByIndex:I,getSegmentByTime:function(R,M){w();const D=function(N,$){if(!N)return-1;const q=N.segments,k=q?q.length:null;let L,F,K,Z,ee,Y=-1;if(q&&k>0){for(ee=0;ee<k;ee++)if(F=q[ee],K=F.presentationStartTime,Z=F.duration,L=Z/2,$+L>=K&&$-L<K+Z){Y=F.index;break}}return Y}(R,M);return I(R,D)},getMediaFinishedInformation:function(R){const M={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return R&&R.segments&&(M.numberOfSegments=R.segments.length),M}},b}Fx.__dashjs_factory_name="SegmentBaseGetter";var I2=r.default.getClassFactory(Fx);function zx(v){v=v||{};const y=this.context,b=v.dashConstants,w=v.type,I=v.segmentBaseController;let R,M;function D(N){return N?N.segments?M[b.SEGMENT_BASE]:M[N.segmentInfoType]:null}return R={initialize:function(N){M[b.SEGMENT_TIMELINE]=x2(y).create(v,N),M[b.SEGMENT_TEMPLATE]=w2(y).create(v,N),M[b.SEGMENT_LIST]=_2(y).create(v,N),M[b.SEGMENT_BASE]=I2(y).create(v,N)},updateInitData:function(N,$){return $?Promise.resolve():I.getSegmentBaseInitSegment({representation:N,mediaType:w})},updateSegmentData:function(N,$){return $?Promise.resolve():I.getSegmentList({mimeType:N.mimeType,representation:N,mediaType:w})},getSegmentByIndex:function(N,$,q,k){const L=D(N);return L?N.segmentInfoType?N.segmentInfoType===b.SEGMENT_TIMELINE?L.getSegmentByIndex(N,k):N.segmentInfoType===b.SEGMENT_TEMPLATE?L.getSegmentByIndex(N,$,q):L.getSegmentByIndex(N,$):L.getSegmentByIndex(N,$):null},getSegmentByTime:function(N,$){const q=D(N);return q?q.getSegmentByTime(N,$):null},getMediaFinishedInformation:function(N){const $=D(N);return $?$.getMediaFinishedInformation(N):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},M={},R}zx.__dashjs_factory_name="SegmentsController";var Ux=r.default.getClassFactory(zx);function jx(){let v;return v={ntpToUTC:function(y){const b=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(b.getTime()+y).getTime()}},v}jx.__dashjs_factory_name="TimeUtils";var A2=r.default.getSingletonFactory(jx);function Bx(v){v=v||{};let y,b,w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y,se,ue=this.context,me=(0,m.default)(ue).getInstance(),ve=v.abrController,J=v.adapter,H=v.boxParser,B=v.capabilities,G=v.dashMetrics,be=v.errHandler,re=v.fragmentModel,we=v.manifestModel,Ee=v.mediaController,Ie=v.mediaPlayerModel,Fe=v.mimeType,Ce=v.playbackController,Q=v.segmentBlacklistController,ne=v.settings,fe=v.streamInfo,ae=v.textController,oe=v.timelineConverter,ge=v.type;function V(){return fe.id}function ye(){return ge}function Te(){q=[],I=null,b=0,Y=!1,ee=!1,L=!1,M=null,se=!1,nn()}function Ae(mt){return!isNaN(mt)&&!isNaN(fe.duration)&&isFinite(fe.duration)&&mt>=fe.start+fe.duration}function Oe(mt,Qt=!0){if(mt.sender){if(Ce.getIsManifestUpdateInProgress())ot();else if((!I.isText||ae.isTextEnabled())&&y&&mt.representationId&&!y.appendInitSegmentFromCache(mt.representationId)){const Tn=F.getCurrentRepresentation();if(Tn.range===0)return void De();const vn=R?R.getInitRequest(I,Tn):null;vn?re.executeRequest(vn):Qt&&(K.setInitSegmentRequired(!0),ot())}}}function De(mt,Qt=!0){if(Ce.getIsManifestUpdateInProgress()||y.getIsPruningInProgress())return void ot();let Tn=function(){let vn;if(isNaN(b)||ye()===h.default.TEXT&&!ae.isTextEnabled())return null;if(R){const Pn=St();vn=Y?R.getSegmentRequestForTime(I,Pn,b):ee?R.repeatSegmentRequest(I,Pn):R.getNextSegmentRequest(I,Pn)}return vn}();Tn?(Y=!1,ee=!1,function(vn){isNaN(vn.startTime+vn.duration)||(b=vn.startTime+vn.duration),vn.delayLoadingTime=new Date().getTime()+K.getTimeToLoadDelay(),K.setTimeToLoadDelay(0),function(Pn){let _n=Pn.url;return Pn.range&&(_n=_n.concat("_",Pn.range)),Q.contains(_n)}(vn)?($.warn(`Fragment request url ${vn.url} for stream id ${fe.id} and media type ${ge} is on the ignore list and will be skipped`),ot()):($.debug(`Next fragment request url for stream id ${fe.id} and media type ${ge} is ${vn.url} with request range ${vn.range}`),re.executeRequest(vn))}(Tn)):function(vn){const Pn=F.getCurrentRepresentation();try{if(ne.get().streaming.gaps.enableSeekFix&&(Y||Ce.getTime()===0)){let _n;if(N?N&&Pn.segmentInfoType===xe.default.SEGMENT_TIMELINE&&(_n=function(nr){return R.getValidTimeAheadOfTargetTime(b,I,nr,ne.get().streaming.gaps.threshold)}(Pn)):_n=function(nr){let Er=R.getValidTimeAheadOfTargetTime(b,I,nr,ne.get().streaming.gaps.threshold);return isNaN(Er)&&b>=nr.adaptation.period.mpd.mediaPresentationDuration-nr.segmentDuration&&(Er=b-.1),Er}(Pn),!isNaN(_n)&&_n!==b)return void function(nr,Er){Ce.isSeeking()||Ce.getTime()===0?($.warn(`Adjusting playback time ${nr} because of gap in the manifest. Seeking by ${nr-b}`),Ce.seek(nr,!1,!1)):($.warn(`Adjusting buffering time ${nr} because of gap in the manifest. Adjusting time by ${nr-b}`),zt(nr),Er&&ot())}(_n,vn)}}catch(_n){$.error(_n)}Ge()||vn&&ot()}(Qt)}function Ge(){const mt=F.getCurrentRepresentation(),Qt=R.isLastSegmentRequested(mt,b);if(Qt){const Tn=R.getCurrentIndex();$.debug(`Segment requesting for stream ${fe.id} has finished`),me.trigger(f.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Tn},{streamId:fe.id,mediaType:ge}),y.segmentRequestingCompleted(Tn),tt()}return Qt}function ot(){const mt=Ie.getScheduleTimeout();K.startScheduleTimer(mt)}function Et(mt){G.addBufferState(ge,mt.state,K.getBufferTarget()),mt.state!==o.BUFFER_EMPTY||Ce.isSeeking()||($.info("Buffer is empty! Stalling!"),G.pushPlayListTraceMetrics(new Date,gi.REBUFFERING_REASON))}function xt(mt){re.syncExecutedRequestsWithBufferedRange(y.getBuffer().getAllBufferRanges(),fe.duration),mt.quotaExceeded&&mt.from>Ce.getTime()&&zt(mt.from),mt.hasEnoughSpaceToAppend&&mt.quotaExceeded&&K.startScheduleTimer()}function tn(mt){if(!mt||!mt.lastRequestAppended||!mt.lastRequestAppended.url)return;let Qt=mt.lastRequestAppended.url;mt.lastRequestAppended.range&&(Qt=Qt.concat("_",mt.lastRequestAppended.range)),$.warn(`Blacklisting segment with url ${Qt}`),Q.add(Qt)}function kt(mt){if($.debug(`Appended bytes for ${mt.mediaType} and stream id ${mt.streamId}`),mt.segmentType===he.HTTPRequest.INIT_SEGMENT_TYPE){const Qt=mt.representationId;K.setLastInitializedRepresentationId(Qt),$.info("["+ge+"] lastInitializedRepresentationId changed to "+Qt)}k&&k.enabled?Tt(k.newRepresentation,k.oldRepresentation):se||K.startScheduleTimer(0)}function nn(){k={newRepresentation:null,oldRepresentation:null,enabled:!1}}function fn(mt){return new Promise(Qt=>{if(!F)return Promise.resolve();let Tn=null;var vn;Tn=mt.newRepresentation?{selectedRepresentation:(vn=mt).newRepresentation,currentMediaInfo:vn.newMediaInfo}:I!==null&&J.areMediaInfosEqual(I,mt.newMediaInfo)?function(_n){return{currentMediaInfo:_n.newMediaInfo,selectedRepresentation:F.getCurrentRepresentation()}}(mt):function(_n){let nr=NaN;return nr=!ne.get().streaming.abr.autoSwitchBitrate[_n.newMediaInfo.type]&&_n.previouslySelectedRepresentation?_n.previouslySelectedRepresentation.bitrateInKbit:ve.getInitialBitrateFor(ge),{selectedRepresentation:ve.getOptimalRepresentationForBitrate(_n.newMediaInfo,nr,!1),currentMediaInfo:_n.newMediaInfo}}(mt),Ln(Tn.currentMediaInfo),me.trigger(),function(_n){M&&_n.selectedRepresentation.dependentRepresentation&&($.info("["+ge+"] selectMediaInfo : call selectMediaInfo on enhancementStreamProcessor for index = "+_n.selectedRepresentation.absoluteIndex),M.selectMediaInfo(new Ls({newMediaInfo:_n.selectedRepresentation.mediaInfo,newRepresentation:_n.selectedRepresentation})))}(Tn);const Pn=ve.getPossibleVoRepresentations(I,!1);return F.updateData(Pn,I.isFragmented,Tn.selectedRepresentation.id).then(()=>{(function(){const _n=F.getCurrentCompositeRepresentation();y.getIsBufferingCompleted()||y.updateBufferTimestampOffset(_n)})(),Qt()}).catch(_n=>{$.error(_n),Qt()})})}function Ln(mt){J.areMediaInfosEqual(I,mt)||me.trigger(g.default.NEW_TRACK_SELECTED,{value:mt}),I=mt,ve.handleNewMediaInfo(I),me.trigger(f.default.MEDIAINFO_UPDATED,{mediaType:ge,streamId:fe.id,currentMediaInfo:I})}function Mn(mt){const Qt=mt.newRepresentation,Tn=mt.oldRepresentation,vn=Cn();Qt&&Tn||$.warn("_handleDifferentSwitchTypes() is missing the target representations"),mt.reason&&mt.reason.forceReplace?function(Pn,_n){re.abortRequests(),me.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ge,streamId:fe.id},{mediaType:ge,streamId:fe.id}),K.setShouldCheckPlaybackQuality(!1),y.prepareForForceReplacementQualitySwitch(Pn,_n).then(()=>{wn()}).catch(()=>{wn()})}(Qt,Tn):mt&&mt.reason&&mt.reason.forceAbandon?function(Pn,_n){y.prepareForAbandonQualitySwitch(Pn,_n).then(()=>{bn()}).catch(()=>{bn()})}(Qt,Tn):!Ie.getFastSwitchEnabled()||vn&&vn.isPartialSegment?Tt(Qt,Tn):function(Pn,_n){const nr=Ce.getTime();let Er=1.5*(isNaN(Pn.fragmentDuration)?1:Pn.fragmentDuration);const La=re.getRequests({state:$e.FRAGMENT_MODEL_EXECUTED,time:nr+Er,threshold:0})[0];if(La&&!I.isText){const Pa=y.getBufferLevel(),as=ve.getAbandonmentStateFor(fe.id,ge);La.bandwidth<Pn.bandwidth&&Pa>=Er&&as===o.ALLOW_LOAD?y.prepareForFastQualitySwitch(Pn,_n).then(()=>{Je(nr,Er)}).catch(()=>{Je(nr,Er)}):Tt(Pn,_n)}else Tt(Pn,_n)}(Qt,Tn),G.pushPlayListTraceMetrics(new Date,gi.REPRESENTATION_SWITCH_STOP_REASON),G.createPlaylistTraceMetrics(Qt.id,1e3*Ce.getTime(),Ce.getPlaybackRate())}function wn(){ke(),nn(),L=!1}function bn(){re.abortRequests(),ee=!0,K.setShouldCheckPlaybackQuality(!1),K.startScheduleTimer(),L=!1}function Je(mt,Qt){re.abortRequests(),zt(mt+Qt),K.setShouldCheckPlaybackQuality(!1),K.startScheduleTimer(),L=!1}function Tt(mt,Qt){const Tn=re.getRequests({state:$e.FRAGMENT_MODEL_LOADING});if(Tn&&Tn.length>0)return $.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),k.newRepresentation=mt,k.oldRepresentation=Qt,void(k.enabled=!0);y.prepareForDefaultQualitySwitch(mt,Qt).then(()=>{vt()}).catch(()=>{vt()})}function vt(){K.setShouldCheckPlaybackQuality(!1),I.segmentAlignment||I.subSegmentAlignment?K.startScheduleTimer():lt(),nn(),L=!1}function At(mt){$.info("onFragmentLoadingAbandoned request: "+mt.request.url+" has been aborted"),Ce.isSeeking()||K.getSwitchTrack()||L||($.info("onFragmentLoadingAbandoned request: "+mt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),mt.request&&mt.request.isInitializationRequest()?K.setInitSegmentRequired(!0):zt(mt.request.startTime+mt.request.duration/2),K.startScheduleTimer(0))}function Zt(mt){$.info("OnFragmentLoadingCompleted for stream id "+fe.id+" and media type "+ge+" - Url:",mt.request?mt.request.url:"undefined",mt.request.range?", Range:"+mt.request.range:""),I.isText&&K.startScheduleTimer(0),mt.error&&mt.request.serviceLocation&&function(Qt){$.info("Fragment loading completed with an error"),Qt&&Qt.request&&Qt.request.type&&(Qt.request.type===he.HTTPRequest.INIT_SEGMENT_TYPE?Oe({representationId:Qt.request.representation.id,sender:{}},!1):Qt.request.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE&&(zt(Qt.request.startTime+Qt.request.duration/2),De(0,!1)))}(mt)}function Rn(){zt(Ce.getTime()),He().startScheduleTimer()}function dt(mt){const Qt=mt.currentTrackInfo;if(!Qt)return;const Tn=q.find(vn=>vn.index===Qt.index&&vn.lang===Qt.lang);Tn&&fn(new Ls({newMediaInfo:Tn})).then(()=>{y.setIsBufferingCompleted(!1),zt(Ce.getTime()),K.setInitSegmentRequired(!0),K.startScheduleTimer()})}function wt(mt){zt(mt.quotaExceededTime),tt()}function jt(){return y?y.getBuffer():null}function He(){return K}function tt(){K&&K.clearScheduleTimer()}function St(mt=NaN){let Qt;return isNaN(mt)?Qt=F?F.getCurrentRepresentation():null:((0,ht.checkInteger)(mt),Qt=F?F.getRepresentationById(mt):null),Qt}function at(){return!!y&&y.getIsBufferingCompleted()}function Ct(mt){if(!ne.get().streaming.enableManifestTimescaleMismatchFix)return;const Qt=mt.chunk,Tn=Qt.bytes,vn=St(Qt.representation.id);vn&&(vn.timescale=H.getMediaTimescaleFromMoov(Tn))}function Mt(mt){const Qt=mt.chunk,Tn=Qt.bytes,vn=St(Qt.representation.id);if(vn){let Pn;if(ne.get().streaming.parseInbandPrft&&mt.request.type===he.HTTPRequest.MEDIA_SEGMENT_TYPE){Pn=Pn||H.parse(Tn);const Er=function(La,Pa){const as=La.getBoxes("prft"),ml=[];return as.forEach(uo=>{ml.push(function(ca,co){let da="unknown";switch(ca.flags){case 0:da=xe.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:da=xe.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:da=xe.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let Ma=1e3*ca.ntp_timestamp_sec+ca.ntp_timestamp_frac/2**32*1e3;return Ma=A2(ue).getInstance().ntpToUTC(Ma),{type:da,ntpTimestamp:Ma,mediaTime:ca.media_time/co}}(uo,Pa))}),ml}(Pn,vn.timescale);Er&&Er.length&&me.trigger(g.default.INBAND_PRFT,{data:Er},{streamId:fe.id,mediaType:ge})}const _n=J.getEventsFor(vn.mediaInfo,null,fe),nr=J.getEventsFor(vn,vn,fe);if(_n&&_n.length>0||nr&&nr.length>0){const Er=mt.request;Pn=Pn||H.parse(Tn);const La=function(Pa,as,ml,uo){try{const ca={},co=[],da=ml.concat(uo);for(let Pi=0,uu=da.length;Pi<uu;Pi++)ca[da[Pi].schemeIdUri+"/"+da[Pi].value]=da[Pi];const Ma=Pa.getBoxes("emsg");if(!Ma||Ma.length===0)return co;const fa=Pa.getBox("sidx"),lu=!fa||isNaN(fa.earliest_presentation_time)||isNaN(fa.timescale)?as&&!isNaN(as.mediaStartTime)?as.mediaStartTime:0:fa.earliest_presentation_time/fa.timescale,eh=Math.max(lu,0),th=F.getCurrentRepresentation();for(let Pi=0,uu=Ma.length;Pi<uu;Pi++){const gl=J.getEvent(Ma[Pi],ca,eh,th);gl&&co.push(gl)}return co}catch{return[]}}(Pn,Er,_n,nr);me.trigger(f.default.INBAND_EVENTS,{events:La},{streamId:fe.id})}}}function ke(){const mt=Ce.getTime();ne.get().streaming.buffer.flushBufferAtTrackSwitch&&Ce.seek(mt+.001,!1,!0),zt(mt),y.setSeekTarget(mt),K.startScheduleTimer()}function lt(){const mt=Ce.getTime(),Qt=y.getContinuousBufferTimeForTargetTime(mt);zt(isNaN(Qt)?mt:Qt),K.startScheduleTimer()}function Ot(mt){mt&&!isNaN(mt.time)&&(zt(mt.time),y.setSeekTarget(mt.time))}function zt(mt){b=mt,Y=!0}function Cn(){return R.getLastSegment()}return D={checkAndHandleCompletedBuffering:Ge,clearScheduleTimer:tt,createBufferSinks:function(mt,Qt){const Tn=jt();return Tn?Promise.resolve(Tn):y?y.createBufferSink(I,mt,Qt):Promise.resolve(null)},dischargePreBuffer:function(){y.dischargePreBuffer()},finalisePlayList:function(mt,Qt){G.pushPlayListTraceMetrics(mt,Qt)},getAllMediaInfos:function(){return q},getBuffer:jt,getBufferController:function(){return y},getBufferLevel:function(){return y?y.getBufferLevel():0},getFragmentModel:function(){return re},getLastSegment:Cn,getMediaInfo:function(){return I},getMediaSource:function(){return y.getMediaSource()},getRepresentation:St,getRepresentationController:function(){return F},getScheduleController:He,getStreamId:V,getStreamInfo:function(){return fe},getType:ye,initialize:function(mt,Qt,Tn){Z=Ux(ue).create({events:f.default,eventBus:me,streamInfo:fe,timelineConverter:oe,dashConstants:xe.default,segmentBaseController:v.segmentBaseController,type:ge}),R=Lx(ue).create({baseURLController:v.baseURLController,boxParser:H,constants:h.default,dashConstants:xe.default,dashMetrics:G,debug:(0,l.default)(ue).getInstance(),errHandler:be,errors:en,eventBus:me,events:f.default,mediaPlayerModel:Ie,segmentsController:Z,settings:ne,streamInfo:fe,timelineConverter:oe,type:ge,urlUtils:or(ue).getInstance()}),N=fe.manifestInfo.isDynamic,R.initialize(N),ve.registerStreamType(ge,D),F=S2(ue).create({abrController:ve,adapter:J,dashConstants:xe.default,dashMetrics:G,errors:en,eventBus:me,events:f.default,isDynamic:N,playbackController:Ce,segmentsController:Z,streamInfo:fe,timelineConverter:oe,type:ge}),y=function(vn,Pn){let _n=null;return vn?(_n=vn!==h.default.TEXT||Pn?y2(ue).create({abrController:ve,capabilities:B,errHandler:be,fragmentModel:re,manifestModel:we,mediaController:Ee,mediaPlayerModel:Ie,playbackController:Ce,representationController:F,settings:ne,streamInfo:fe,textController:ae,type:vn}):v2(ue).create({errHandler:be,fragmentModel:re,mimeType:Fe,settings:ne,streamInfo:fe,textController:ae,type:vn}),_n):(be.error(new Yt.default(en.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,en.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ge,Tn),y&&y.initialize(mt),K=E2(ue).create({abrController:ve,adapter:J,bufferController:y,dashMetrics:G,fragmentModel:re,mediaController:Ee,mediaPlayerModel:Ie,mimeType:Fe,playbackController:Ce,representationController:F,settings:ne,streamInfo:fe,textController:ae,type:ge}),w=Qt,K.initialize(Qt),b=0,Y=!1,ee=!1},isBufferingCompleted:at,prepareInnerPeriodPlaybackSeeking:function(mt){return new Promise(Qt=>{if(y.hasBufferAtTime(mt.seekTime))return y.pruneBuffer(),Ae(y.getContinuousBufferTimeForTargetTime(mt.seekTime))&&y.setIsBufferingCompleted(!0),void Qt();tt(),re.abortRequests(),y.prepareForPlaybackSeek().then(()=>{const Tn=y.getAllRangesWithSafetyFactor(mt.seekTime);return y.clearBuffers(Tn)}).then(()=>{const Tn=y.getContinuousBufferTimeForTargetTime(mt.seekTime);if(Ae(Tn))y.setIsBufferingCompleted(!0),Qt();else{const vn=isNaN(Tn)?mt.seekTime:Tn;zt(vn),y.setSeekTarget(vn);const Pn=[];Pn.push(y.updateAppendWindow());const _n=St();Pn.push(y.updateBufferTimestampOffset(_n)),Promise.all(Pn).then(()=>{K.setInitSegmentRequired(!0),K.setShouldCheckPlaybackQuality(!1),K.startScheduleTimer(),Qt()})}}).catch(Tn=>{$.error(Tn)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((mt,Qt)=>{try{tt(),re.abortRequests(),y.prepareForPlaybackSeek().then(()=>y.pruneAllSafely()).then(()=>{mt()})}catch(Tn){Qt(Tn)}})},prepareQualityChange:function(mt){mt.newRepresentation&&(function(Qt){if(M)M.prepareQualityChange(Qt);else if(ge===h.default.ENHANCEMENT){const Tn=Qt.oldRepresentation.mediaInfo.type,vn=Qt.newRepresentation.mediaInfo.type;if(Tn===h.default.ENHANCEMENT&&vn===h.default.VIDEO)return $.info("Stop "+ge+" stream processor"),K.reset(),!0;if(Tn===h.default.VIDEO&&vn===h.default.ENHANCEMENT)return $.info("Start "+ge+" stream processor"),fn(new Ls({newMediaInfo:Qt.newRepresentation.mediaInfo,newRepresentation:Qt.newRepresentation})).then(()=>{K.setup(),K.initialize(w),K.startScheduleTimer()}),!0}return!1}(mt)||(k&&k.enabled&&$.warn(`Canceling queued representation switch to ${k.newRepresentation.id} for ${ge}`),mt.isAdaptationSetSwitch?($.debug(`Preparing quality switch to different AdaptationSet for type ${ge} from representation id ${mt.oldRepresentation.id} to ${mt.newRepresentation.id}`),function(Qt){const Tn=Qt.newRepresentation;L=!0,tt(),K.setSwitchTrack(!0);const vn=Tn.mediaInfo;Ln(vn),fn(new Ls({newMediaInfo:vn,newRepresentation:Tn})).then(()=>{Mn(Qt)})}(mt)):($.debug(`Preparing quality within the same AdaptationSet for type ${ge} from representation id ${mt.oldRepresentation.id} to ${mt.newRepresentation.id}`),function(Qt){const Tn=Qt.newRepresentation;L=!0,tt(),F.prepareQualityChange(Tn),Mn(Qt)}(mt))))},prepareTrackSwitch:function(mt,Qt=!1){return new Promise(Tn=>{$.debug(`Preparing track switch for type ${ge}`);const vn=ge===h.default.TEXT||Qt||ne.get().streaming.trackSwitchMode[ge]===h.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ce.getTimeToStreamEnd(fe)>ne.get().streaming.buffer.stallThreshold;y.getIsBufferingCompleted()&&!vn?function(Pn){return new Promise(_n=>{const nr=F.getCurrentRepresentation();y.prepareForNonReplacementTrackSwitch(nr,Pn).then(()=>{me.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:fe.id,mediaType:ge}),_n()}).catch(()=>{me.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:fe.id,mediaType:ge}),_n()})})}(mt).then(()=>{Tn()}):(K.setSwitchTrack(!0),vn?function(Pn){return new Promise(_n=>{me.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ge,streamId:fe.id},{mediaType:ge,streamId:fe.id}),re.abortRequests();const nr=St();y.prepareForReplacementTrackSwitch(nr,Pn).then(()=>{ke(),_n()}).catch(()=>{ke(),_n()})})}(mt).then(()=>{Tn()}):function(Pn){return new Promise(_n=>{const nr=()=>{const Er=re.getRequests({state:$e.FRAGMENT_MODEL_LOADING});if(Er&&Er.length!==0)me.once(g.default.FRAGMENT_LOADING_COMPLETED,nr,D);else{const La=St();y.prepareForNonReplacementTrackSwitch(La,Pn).then(()=>{lt(),_n()}).catch(Pa=>{$.error(Pa),lt(),_n()})}};nr()})}(mt).then(()=>{Tn()}))})},probeNextRequest:function(){const mt=St();return R.getNextSegmentRequestIdempotent(I,mt)},reset:function(mt,Qt){R&&R.reset(),y&&(y.reset(mt,Qt),y=null),K&&(K.reset(),K=null),F&&(F.reset(),F=null),Z&&(Z=null),ve&&ve.unRegisterStreamType(V(),ge),me.off(f.default.BUFFER_CLEARED,xt,D),me.off(f.default.BUFFER_LEVEL_STATE_CHANGED,Et,D),me.off(f.default.BYTES_APPENDED_END_FRAGMENT,kt,D),me.off(f.default.FRAGMENT_LOADING_ABANDONED,At,D),me.off(f.default.FRAGMENT_LOADING_COMPLETED,Zt,D),me.off(f.default.INIT_FRAGMENT_LOADED,Ct,D),me.off(f.default.INIT_FRAGMENT_NEEDED,Oe,D),me.off(f.default.MEDIA_FRAGMENT_LOADED,Mt,D),me.off(f.default.MEDIA_FRAGMENT_NEEDED,De,D),me.off(f.default.QUOTA_EXCEEDED,wt,D),me.off(f.default.SEEK_TARGET,Ot,D),me.off(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Rn,D),me.off(f.default.SET_NON_FRAGMENTED_TEXT,dt,D),me.off(f.default.SOURCE_BUFFER_ERROR,tn,D),Te(),ge=null,fe=null},selectMediaInfo:fn,setEnhancementStreamProcessor:function(mt){M=mt,$.info("enhancementStreamProcessor = "+M)},setExplicitBufferingTime:zt,setMediaInfoArray:function(mt){q=mt},setMediaSource:function(mt){return y.setMediaSource(mt,I)},setTrackSwitchInProgress:function(mt){se=mt},updateStreamInfo:function(mt){return fe=mt,at()?Promise.resolve():y.updateAppendWindow()}},$=(0,l.default)(ue).getInstance().getLogger(D),Te(),me.on(f.default.BUFFER_CLEARED,xt,D),me.on(f.default.BUFFER_LEVEL_STATE_CHANGED,Et,D),me.on(f.default.BYTES_APPENDED_END_FRAGMENT,kt,D),me.on(f.default.FRAGMENT_LOADING_ABANDONED,At,D),me.on(f.default.FRAGMENT_LOADING_COMPLETED,Zt,D),me.on(f.default.INIT_FRAGMENT_LOADED,Ct,D),me.on(f.default.INIT_FRAGMENT_NEEDED,Oe,D),me.on(f.default.MEDIA_FRAGMENT_LOADED,Mt,D),me.on(f.default.MEDIA_FRAGMENT_NEEDED,De,D),me.on(f.default.QUOTA_EXCEEDED,wt,D),me.on(f.default.SEEK_TARGET,Ot,D),me.on(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Rn,D),me.on(f.default.SET_NON_FRAGMENTED_TEXT,dt,D),me.on(f.default.SOURCE_BUFFER_ERROR,tn,D),D}Bx.__dashjs_factory_name="StreamProcessor";var R2=r.default.getClassFactory(Bx),k2=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},C2=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};function $x(v){const y=this.context,b=v.adapter,w=v.baseURLController,I=v.streamInfo,R=v.timelineConverter,M=v.debug,D=v.eventBus,N=v.events,$=v.dashConstants,q=or(y).getInstance();let k,L,F,K,Z,ee,Y,se,ue;function me(J,H){const B=new C2;B.id=J.id,B.bitrate=J.bandwidth,B.width=J.width,B.height=J.height,B.tilesHor=1,B.tilesVert=1,J.essentialProperties&&J.essentialProperties.forEach(G=>{if(h.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(G.schemeIdUri)>=0&&G.value){const be=G.value.split("x");be.length!==2||isNaN(be[0])||isNaN(be[1])||(B.tilesHor=parseInt(be[0],10),B.tilesVert=parseInt(be[1],10))}}),H?Y.updateSegmentData(J).then(G=>{(function(be,re,we){let Ee=[];const Ie=function(Fe,Ce){const Q=[];let ne,fe,ae,oe,ge=0;for(ne=0,fe=Fe.segments.length;ne<fe;ne++)ae=Fe.segments[ne],oe=Up({durationInTimescale:ae.duration,fTimescale:ae.timescale,index:ge,isDynamic:b.getIsDynamic(),mediaRange:ae.mediaRange,mediaTime:ae.startTime,mediaUrl:ae.media,representation:Ce,timelineConverter:R}),oe&&(Q.push(oe),oe=null,ge++);return Q}(we,re);re.segments=Ie,re.fragmentDuration=re.segmentDuration||(re.segments&&re.segments.length>0?re.segments[0].duration:NaN),be.segmentDuration=re.segments[0].duration,be.readThumbnail=function(Fe,Ce){let Q=null;Ee.some(ne=>{if(ne.start<=Fe&&ne.end>Fe)return Q=ne.url,!0}),Q?Ce(Q):re.segments.some(ne=>{if(ne.mediaStartTime<=Fe&&ne.mediaStartTime+ne.duration>Fe){const fe=w.resolve(re.path),ae=new wp({method:"get",url:fe.url,responseType:"arraybuffer",customData:{request:{range:ne.mediaRange},onloadend:function(ge){let V=ue.getSamplesInfo(ge.target.response),ye=new Blob([ge.target.response.slice(V.sampleList[0].offset,V.sampleList[0].offset+V.sampleList[0].size)],{type:"image/jpeg"}),Te=window.URL.createObjectURL(ye);Ee.push({start:ne.mediaStartTime,end:ne.mediaStartTime+ne.duration,url:Te}),Ce&&Ce(Te)}}}),oe=new _p({request:ae});return se.load(ae,oe),!0}})}})(B,J,G)}):(B.startNumber=J.startNumber,B.segmentDuration=J.segmentDuration,B.timescale=J.timescale,B.templateUrl=function(G){const be=q.isRelative(G.media)?q.resolve(G.media,w.resolve(G.path).url):G.media;return be?Vc(be,G.id):""}(J)),B.tilesHor>0&&B.tilesVert>0&&(B.widthPerTile=B.width/B.tilesHor,B.heightPerTile=B.height/B.tilesVert,L.push(B))}function ve(){L=[],F=[],Z=-1,ee=null,K&&(K.reset(),K=null)}return k={addTracks:function(){if(!I||!b||(ee=b.getMediaInfoForType(I,h.default.IMAGE),!ee))return;const J=b.getVoRepresentations(ee);J&&J.length>0&&J.forEach(H=>{(H.segmentInfoType===xe.default.SEGMENT_TEMPLATE&&H.segmentDuration>0&&H.media||H.segmentInfoType===xe.default.SEGMENT_TIMELINE)&&me(H),H.segmentInfoType===xe.default.SEGMENT_BASE&&me(H,!0),F.push(H)}),L.length>0&&L.sort((H,B)=>H.bitrate-B.bitrate)},getCurrentTrack:function(){return Z<0?null:L[Z]},getCurrentTrackIndex:function(){return Z},getRepresentations:function(){return F},getThumbnailRequestForTime:function(J){let H;const B=b.getVoRepresentations(ee);for(let G=0;G<B.length;G++)if(L[Z].id===B[G].id){H=B[G];break}return K.getSegmentRequestForTime(ee,H,J)},getTracks:function(){return L},reset:ve,setTrackById:function(J){if(!L||L.length===0)return;const H=L.findIndex(B=>B.id===J);H!==-1&&(Z=H)},setTrackByIndex:function(J){L&&L.length!==0&&(J>=L.length&&(J=L.length-1),Z=J)}},ve(),se=an(y).create({}),ue=qf(y).getInstance(),Y=Ux(y).create({events:N,eventBus:D,streamInfo:I,timelineConverter:R,dashConstants:$,dashMetrics:v.dashMetrics,segmentBaseController:v.segmentBaseController,type:h.default.IMAGE}),K=Lx(y).create({streamInfo:I,type:h.default.IMAGE,timelineConverter:R,segmentsController:Y,baseURLController:w,debug:M,eventBus:D,events:N,dashConstants:$,urlUtils:q}),K.initialize(!!b&&b.getIsDynamic()),k}$x.__dashjs_factory_name="ThumbnailTracks";var N2=r.default.getClassFactory($x);function qx(v){const y=this.context,b=v.streamInfo;let w,I;function R(D){I.setTrackByIndex(D)}function M(){I&&I.reset()}return w={getCurrentTrack:function(){return I.getCurrentTrack()},getCurrentTrackIndex:function(){return I.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return I.getRepresentations()},getStreamId:function(){return b.id},initialize:function(){I.addTracks();const D=I.getTracks();D&&D.length>0&&R(0)},provide:function(D,N){if(typeof N!="function")return;const $=I.getCurrentTrack();let q,k;if(!$||$.segmentDuration<=0||D==null)return void N(null);k=I.getThumbnailRequestForTime(D),k&&($.segmentDuration=k.duration),q=D%$.segmentDuration;const L=Math.floor(q*$.tilesHor*$.tilesVert/$.segmentDuration),F=new k2;if(F.width=Math.floor($.widthPerTile),F.height=Math.floor($.heightPerTile),F.x=Math.floor(L%$.tilesHor)*$.widthPerTile,F.y=Math.floor(L/$.tilesHor)*$.heightPerTile,"readThumbnail"in $)return $.readThumbnail(D,K=>{F.url=K,N(F)});if(k)F.url=k.url,$.segmentDuration=NaN;else{const K=Math.floor(D/$.segmentDuration);F.url=function(Z,ee){const Y=ee+Z.startNumber;return Vc(Z.templateUrl,void 0,Y,void 0,Z.bandwidth,(Y-1)*Z.segmentDuration*Z.timescale)}($,K)}N(F)},reset:M,setTrackByIndex:R,setTrackById:function(D){I.setTrackById(D)}},M(),I=N2(y).create({streamInfo:b,adapter:v.adapter,baseURLController:v.baseURLController,timelineConverter:v.timelineConverter,debug:v.debug,eventBus:v.eventBus,events:v.events,dashConstants:v.dashConstants,dashMetrics:v.dashMetrics,segmentBaseController:v.segmentBaseController}),w}qx.__dashjs_factory_name="ThumbnailController";var D2=r.default.getClassFactory(qx);const L2=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT,h.default.MUXED,h.default.IMAGE];function Gx(v){v=v||{};const y=this.context,b=(0,m.default)(y).getInstance(),w=or(y).getInstance(),I=v.manifestModel,R=v.mediaPlayerModel,M=v.dashMetrics,D=v.manifestUpdater,N=v.adapter,$=v.timelineConverter,q=v.capabilities,k=v.errHandler,L=v.abrController,F=v.playbackController,K=v.throughputController,Z=v.eventController,ee=v.mediaController,Y=v.protectionController,se=v.textController,ue=v.videoModel;let me=v.streamInfo;const ve=v.settings;let J,H,B,G,be,re,we,Ee,Ie,Fe,Ce,Q,ne,fe,ae,oe;function ge(dt,wt,jt){return new Promise((He,tt)=>{Et(),tn();let St=ue.getElement();const at=[];L2.forEach(Ct=>{if((Ct!==h.default.TEXT||dt)&&(Ct!==h.default.VIDEO||!St||St&&/^VIDEO$/i.test(St.nodeName))){const Mt=jt.find(ke=>ke.mediaInfo.type===Ct);at.push(V(Ct,dt,Mt))}}),Promise.all(at).then(()=>function(Ct){return new Promise(Mt=>{const ke={},lt=fe.map(Ot=>{const zt=Ot.getRepresentation();return Ot.createBufferSinks(Ct,zt)});Promise.all(lt).then(Ot=>{Ot.forEach(zt=>{zt&&(ke[zt.getType()]=zt)}),Mt(ke)}).catch(()=>{Mt(ke)})})}(wt)).then(Ct=>{if(fe.length===0){const Mt="No streams to play.";k.error(new Yt.default(en.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Mt,I.getValue())),Ce.fatal(Mt)}else At();dt&&se.createTracks(me),He(Ct)}).catch(Ct=>{tt(Ct)})})}function V(dt,wt,jt){let He,tt=N.getAllMediaInfoForType(me,dt),St=[],at=null,Ct=-1;if(!tt||tt.length===0)return Ce.info("No "+dt+" data."),Promise.resolve();dt===h.default.VIDEO&&(re=!0),dt===h.default.AUDIO&&(G=!0);for(let ke=0,lt=tt.length;ke<lt;ke++)at=tt[ke],dt===h.default.TEXT&&at.isEmbedded&&(se.addEmbeddedTrack(me,at),St.push(at)),ye(at)&&ee.addTrack(at),at.type===h.default.ENHANCEMENT&&(Ct=ke);if(St.length>0&&(ee.setInitialMediaSettingsForType(dt,me),se.addMediaInfosToBuffer(me,dt,St)),tt=tt.filter(ke=>!ke.isEmbedded),tt.length===0)return Promise.resolve();if(dt===h.default.IMAGE)return ae=D2(y).create({streamInfo:me,adapter:N,baseURLController:v.baseURLController,timelineConverter:v.timelineConverter,debug:H,eventBus:b,events:f.default,dashConstants:xe.default,dashMetrics:v.dashMetrics,segmentBaseController:v.segmentBaseController}),ae.initialize(),Promise.resolve();b.trigger(f.default.STREAM_INITIALIZING,{streamInfo:me,mediaInfo:at}),ee.setInitialMediaSettingsForType(dt,me);let Mt=Te(tt,wt,dt);if(Ct>=0){let ke=new d2(b);ke.open(),ke.duration=me.manifestInfo.duration;let lt=Te(tt,ke,h.default.ENHANCEMENT);lt.selectMediaInfo(new Ls({newMediaInfo:tt[Ct]})),Mt.setEnhancementStreamProcessor(lt)}if(He=ee.getCurrentTrackFor(dt,me.id),He){const ke=dt===h.default.TEXT&&He.isEmbedded?tt[0]:He,lt=new Ls({newMediaInfo:ke,previouslySelectedRepresentation:jt});return Mt.selectMediaInfo(lt)}return Promise.resolve()}function ye(dt){const wt=dt?dt.type:null;let jt;return wt===h.default.MUXED?(jt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Ce.fatal(jt),k.error(new Yt.default(en.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,jt,I.getValue())),!1):!(wt!==h.default.TEXT&&wt!==h.default.IMAGE&&dt.contentProtection&&dt.contentProtection.length>0&&!q.supportsEncryptedMedia()&&(k.error(new Yt.default(en.CAPABILITY_MEDIAKEYS_ERROR_CODE,en.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Te(dt,wt,jt){const He=dt&&dt.length>0?dt.filter(ke=>ke.type===jt)[0]:null;let tt=B.getModel(He?He.type:null);const St=He?He.type:null,at=He?He.mimeType:null,Ct=He?He.isFragmented:null;let Mt=R2(y).create({abrController:L,adapter:N,baseURLController:v.baseURLController,boxParser:J,capabilities:q,dashMetrics:v.dashMetrics,errHandler:k,fragmentModel:tt,manifestModel:I,mediaController:ee,mediaPlayerModel:R,mimeType:at,playbackController:F,segmentBaseController:v.segmentBaseController,segmentBlacklistController:ne,settings:ve,streamInfo:me,textController:se,throughputController:K,timelineConverter:$,type:St});return Mt.initialize(wt,re,Ct),fe.push(Mt),Mt.setMediaInfoArray(dt),St===h.default.TEXT&&se.addMediaInfosToBuffer(me,St,dt,tt),Mt}function Ae(dt){let wt=fe?fe.length:0;for(let jt=0;jt<wt;jt++){let He=fe[jt].getFragmentModel();He.abortRequests(),He.resetInitialSettings(),fe[jt].reset(!1,dt)}se&&se.deactivateStream(me),ae&&(ae.reset(),ae=null),fe=[],Ee=!1,be=!1,Zt(!1),De(!1),b.trigger(f.default.STREAM_DEACTIVATED,{streamInfo:me})}function Oe(dt){Ae(dt),Fe=!1,re=!1,G=!1,Ie=!1,oe=[]}function De(dt){Ie=dt}function Ge(){return me?me.start:NaN}function ot(){return me?me.id:null}function Et(){if(!ue||!L)throw new Error(h.default.MISSING_CONFIG_ERROR)}function xt(dt){dt.error&&(k.error(dt.error),Ce.fatal(dt.error.message))}function tn(){if(Z){const dt=N.getEventsFor(me);dt&&dt.length>0&&Z.addInlineEvents(dt,me.id)}}function kt(dt){let wt=nn(dt);return wt?wt.getMediaInfo():null}function nn(dt){return dt?fe.find(wt=>wt.getType()===dt):null}function fn(){let dt=Tt();const wt=dt.length;if(wt!==0){for(let jt=0;jt<wt;jt++)if(!dt[jt].isBufferingCompleted()&&(dt[jt].getType()===h.default.AUDIO||dt[jt].getType()===h.default.VIDEO))return void Ce.debug("onBufferingCompleted - One streamProcessor has finished but",dt[jt].getType(),"one is not buffering completed");Ce.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),be=!0,b.trigger(f.default.STREAM_BUFFERING_COMPLETED,{streamInfo:me},{streamInfo:me})}else Ce.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function Ln(dt){Z&&Z.addInbandEvents(dt.events,me.id)}function Mn(){At()}function wn(){tn()}function bn(dt){return dt&&dt.type?Je(dt.type):null}function Je(dt){return dt?Tt().filter(function(wt){return wt.getType()===dt})[0]:null}function Tt(){let dt,wt,jt=[];for(let He=0;He<fe.length;He++)wt=fe[He],dt=wt.getType(),dt!==h.default.AUDIO&&dt!==h.default.VIDEO&&dt!==h.default.TEXT&&dt!==h.default.ENHANCEMENT||jt.push(wt);return jt}function vt(){const dt=fe.length;for(let wt=0;wt<dt&&fe[wt];wt++)fe[wt].getScheduleController().startScheduleTimer()}function At(){const dt=fe.length;if(Y){Y.clearMediaInfoArray();for(let wt=0;wt<dt&&fe[wt];wt++){const jt=fe[wt].getType(),He=fe[wt].getMediaInfo();if(jt===h.default.AUDIO||jt===h.default.VIDEO||jt===h.default.TEXT&&He&&He.isFragmented){let tt=fe[wt].getMediaInfo();tt&&Y.initializeForMedia(tt)}}Y.handleKeySystemFromManifest()}Fe||(Fe=!0,ue.waitForReadyState(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{b.trigger(f.default.STREAM_INITIALIZED,{streamInfo:me})}))}function Zt(dt){Q=dt}function Rn(){return Q}return we={activate:function(dt,wt,jt=[]){return new Promise((He,tt)=>{if(!Ee)return Rn()?(Ee=!0,b.trigger(f.default.STREAM_ACTIVATED,{streamInfo:me}),void He()):void function(St,at,Ct=[]){return ge(St,at,Ct)}(dt,wt,jt).then(()=>{Ee=!0,jt&&jt.length>0&&vt(),b.trigger(f.default.STREAM_ACTIVATED,{streamInfo:me}),He()}).catch(St=>{tt(St)});He()})},checkAndHandleCompletedBuffering:function(){be||fe.forEach(dt=>{dt.checkAndHandleCompletedBuffering()})},deactivate:Ae,getAdapter:function(){return N},getCurrentMediaInfoForType:function(dt){const wt=Je(dt);return wt?wt.getMediaInfo():null},getCurrentRepresentationForType:function(dt){const wt=Je(dt);return wt?wt.getRepresentation():null},getDuration:function(){return me?me.duration:NaN},getHasAudioTrack:function(){return G},getHasFinishedBuffering:function(){return be},getHasVideoTrack:function(){return re},getId:ot,getIsActive:function(){return Ee},getIsEndedEventSignaled:function(){return Ie},getPreloaded:Rn,getRepresentationForTypeById:function(dt,wt){let jt;if(dt===h.default.IMAGE){if(!ae)return null;jt=ae.getPossibleVoRepresentations()}else jt=function(St){let at=nn(St);return at?at.getAllMediaInfos():[]}(dt).flatMap(St=>L.getPossibleVoRepresentationsFilteredBySettings(St,!0));if(!jt||jt.length===0)return null;const He=jt.filter(tt=>tt.id===wt);return He&&He.length>0?He[0]:null},getRepresentationForTypeByIndex:function(dt,wt){let jt;if(dt===h.default.IMAGE){if(!ae)return null;jt=ae.getPossibleVoRepresentations()}else{const He=kt(dt);jt=L.getPossibleVoRepresentationsFilteredBySettings(He,!0)}return jt[wt=Math.max(Math.min(wt,jt.length-1),0)]},getRepresentationsByType:function(dt){if(Et(),dt===h.default.IMAGE)return ae?ae.getPossibleVoRepresentations():[];const wt=kt(dt);return L.getPossibleVoRepresentationsFilteredBySettings(wt,!0)},getStartTime:Ge,getStreamId:function(){return me?me.id:null},getStreamInfo:function(){return me},getStreamProcessors:Tt,getThumbnailController:function(){return ae},initialize:function(){b.on(f.default.BUFFERING_COMPLETED,fn,we),b.on(f.default.INBAND_EVENTS,Ln,we),b.on(f.default.DATA_UPDATE_COMPLETED,Mn,we),b.on(g.default.PLAYBACK_SEEKED,wn,we),Y&&(b.on(f.default.KEY_ERROR,xt,we),b.on(f.default.SERVER_CERTIFICATE_UPDATED,xt,we),b.on(f.default.LICENSE_REQUEST_COMPLETE,xt,we),b.on(f.default.KEY_SYSTEM_SELECTED,xt,we),b.on(f.default.KEY_SESSION_CREATED,xt,we)),se.initializeForStream(me),b.trigger(f.default.STREAM_UPDATED,{streamInfo:me})},initializeForTextWithMediaSource:function(dt){return new Promise((wt,jt)=>{V(h.default.TEXT,dt,null).then(()=>function(){const He=Je(h.default.TEXT);return He?He.createBufferSinks():Promise.resolve()}()).then(()=>{se.createTracks(me),wt()}).catch(He=>{jt(He)})})},prepareQualityChange:function(dt){const wt=Je(dt.mediaType);wt&&wt.prepareQualityChange(dt)},prepareTrackChange:function(dt){if(!Ee||!me)return;be=!1;let wt=dt.newMediaInfo,jt=I.getValue(),He=bn(wt);if(!He)return;let tt=F.getTime();if(Ce.info("Stream -  Process track changed at current time "+tt),jt.refreshManifestOnSwitchTrack)oe.push(dt),D.getIsUpdating()||(Ce.debug("Stream -  Refreshing manifest for switch track"),D.refreshManifest());else{He.clearScheduleTimer(),He.setTrackSwitchInProgress(!0);const St=He.getRepresentation();He.selectMediaInfo(new Ls({newMediaInfo:wt})).then(()=>{const at=!!(dt&&dt.options&&dt.options.hasOwnProperty("replaceBuffer"))&&dt.options.replaceBuffer;return He.prepareTrackSwitch(St,at)}).then(()=>{He.setTrackSwitchInProgress(!1)})}},reset:function(dt){B&&(B.reset(),B=null),L&&me&&L.clearDataForStream(me.id),ne&&(ne.reset(),ne=null),se&&me&&se.clearDataForStream(me.id),ee&&me&&ee.clearDataForStream(me.id),Oe(dt),me=null,b.off(f.default.BUFFERING_COMPLETED,fn,we),b.off(f.default.INBAND_EVENTS,Ln,we),b.off(f.default.DATA_UPDATE_COMPLETED,Mn,we),b.off(g.default.PLAYBACK_SEEKED,wn,we),Y&&(b.off(f.default.KEY_ERROR,xt,we),b.off(f.default.SERVER_CERTIFICATE_UPDATED,xt,we),b.off(f.default.LICENSE_REQUEST_COMPLETE,xt,we),b.off(f.default.KEY_SYSTEM_SELECTED,xt,we),b.off(f.default.KEY_SESSION_CREATED,xt,we))},setIsEndedEventSignaled:De,setMediaSource:function(dt){return new Promise((wt,jt)=>{const He=[];for(let tt=0;tt<fe.length;)ye(fe[tt].getMediaInfo())?(He.push(fe[tt].setMediaSource(dt)),tt++):(fe[tt].reset(),fe.splice(tt,1));Promise.all(He).then(()=>{for(let tt=0;tt<fe.length;tt++)fe[tt].dischargePreBuffer();if(fe.length===0){const tt="No streams to play.";k.error(new Yt.default(en.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt+"nostreams",I.getValue())),Ce.fatal(tt)}wt()}).catch(tt=>{Ce.error(tt),jt(tt)})})},startPreloading:function(dt,wt,jt=[]){return new Promise((He,tt)=>{Rn()?tt():(Ce.info(`[startPreloading] Preloading next stream with id ${ot()}`),Zt(!0),ge(dt,wt,jt).then(()=>{for(let St=0;St<fe.length&&fe[St];St++)fe[St].setExplicitBufferingTime(Ge()),fe[St].getScheduleController().startScheduleTimer();He()}).catch(()=>{Zt(!1),tt()}))})},startScheduleControllers:vt,triggerProtectionError:function(dt){xt(dt)},updateData:function(dt){return new Promise(wt=>{me=dt,Z&&tn();let jt,He=[];for(let tt=0,St=fe.length;tt<St;tt++){let at=fe[tt];const Ct=at.getMediaInfo();He.push(at.updateStreamInfo(me));let Mt=N.getAllMediaInfoForType(me,at.getType());if(Mt=Mt.filter(ke=>!ke.isEmbedded),at.setMediaInfoArray(Mt),Mt)for(let ke=0;ke<Mt.length;ke++)N.areMediaInfosEqual(Ct,Mt[ke])&&He.push(at.selectMediaInfo(new Ls({newMediaInfo:Mt[ke]})))}Promise.all(He).then(()=>{let tt=[];for(;oe.length>0;){let St=oe.pop(),at=St.newMediaInfo;if(jt=bn(St.oldMediaInfo),!jt)return;const Ct=jt.getRepresentation();jt.setTrackSwitchInProgress(!0),tt.push(jt.prepareTrackSwitch(Ct)),tt.push(jt.selectMediaInfo(new Ls({newMediaInfo:at})))}return Promise.all(tt)}).then(()=>{At(),jt&&jt.setTrackSwitchInProgress(!1),b.trigger(f.default.STREAM_UPDATED,{streamInfo:me}),wt()}).catch(tt=>{k.error(tt)})})}},function(){try{H=(0,l.default)(y).getInstance(),Ce=H.getLogger(we),Oe(),J=qf(y).getInstance(),ne=Jt(y).create({updateEventName:f.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SEGMENT_LOCATION_BLACKLIST_ADD}),B=g2(y).create({streamInfo:me,mediaPlayerModel:R,dashMetrics:M,errHandler:k,settings:ve,boxParser:J,dashConstants:xe.default,urlUtils:w})}catch(dt){throw dt}}(),we}Gx.__dashjs_factory_name="Stream";var P2=r.default.getClassFactory(Gx);function Bp(){const v=this.context,y=(0,m.default)(v).getInstance(),b=or(v).getInstance();let w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y,se;function ue(){q=[],k=[],L=null,F=null,Z=null,K=NaN,R=!1,M=!1,ee=D.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function me(){D.get().streaming.utcSynchronization.enabled&&!R&&!M&&Z&&Z.value&&Z.schemeIdUri&&!isNaN(K)&&!isNaN(D.get().streaming.utcSynchronization.backgroundAttempts)&&(F&&(Date.now()-F)/1e3<30||(q=[],M=!0,ve(isNaN(D.get().streaming.utcSynchronization.backgroundAttempts)?2:D.get().streaming.utcSynchronization.backgroundAttempts)))}function ve(fe){try{if(fe<=0)return void Q();const ae=Date.now();N[Z.schemeIdUri](Z.value,function(oe){const ge=Date.now(),V=H(ae,ge,oe);q.push(V),ve(fe-1)},function(){Q()})}catch{Q()}}function J(fe=null){let ae=fe||0;if(!k||k.length===0||ae>=k.length)return void B();let oe=k[ae];if(oe)if(N.hasOwnProperty(oe.schemeIdUri)){const ge=new Date().getTime();N[oe.schemeIdUri](oe.value,function(V){const ye=new Date().getTime(),Te=H(ge,ye,V);Z=oe,B(Te)},function(){J(ae+1)})}else J(ae+1);else B()}function H(fe,ae,oe){return oe-(ae-(ae-fe)/2)}function B(fe=NaN){let ae=isNaN(fe);ae&&D.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let oe=$.getLatestMPDRequestHeaderValueByID("Date"),ge=oe!==null?new Date(oe).getTime():Number.NaN;isNaN(ge)?Ce(!0):Ce(!1,ge-Date.now())}():Ce(ae,fe)}function G(fe){let ae=Date.parse(fe);return isNaN(ae)&&(ae=function(oe){let ge,V,ye=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(oe);return ge=Date.UTC(parseInt(ye[1],10),parseInt(ye[2],10)-1,parseInt(ye[3],10),parseInt(ye[4],10),parseInt(ye[5],10),ye[6]&&(parseInt(ye[6],10)||0),ye[7]&&1e3*parseFloat(ye[7])||0),ye[9]&&ye[10]&&(V=60*parseInt(ye[9],10)+parseInt(ye[10],10),ge+=(ye[8]==="+"?-1:1)*V*60*1e3),new Date(ge).getTime()}(fe)),ae}function be(fe){return Date.parse(fe)}function re(fe){return Date.parse(fe)}function we(fe,ae,oe){oe()}function Ee(fe,ae,oe){let ge=G(fe);isNaN(ge)?oe():ae(ge)}function Ie(fe,ae,oe,ge,V){let ye,Te,Ae=!1,Oe=new XMLHttpRequest,De=V?he.HTTPRequest.HEAD:he.HTTPRequest.GET,Ge=ae.match(/\S+/g);if(ae=Ge.shift(),ye=function(){Ae||(Ae=!0,Ge.length?Ie(fe,Ge.join(" "),oe,ge,V):ge())},Te=function(){let ot,Et;Oe.status===200&&(ot=V?Oe.getResponseHeader("Date"):Oe.response,Et=fe(ot),isNaN(Et)||(oe(Et),Ae=!0))},b.isRelative(ae)){const ot=se.resolve();ot&&(ae=b.resolve(ae,ot.url))}Oe.open(De,ae),Oe.timeout=5e3,Oe.onload=Te,Oe.onloadend=ye,Oe.send()}function Fe(fe,ae,oe){Ie(re,fe,ae,oe,!0)}function Ce(fe,ae){if(isNaN(K)||isNaN(ae)||fe||function(ge){try{const V=ne(ge),ye=isNaN(ee)?30:ee,Te=isNaN(D.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:D.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ae=isNaN(D.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:D.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Oe=isNaN(D.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:D.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let De;V?(De=Math.min(ye*Te,Ae),I.debug(`Increasing timeBetweenSyncAttempts to ${De}`)):(De=Math.max(ye/Te,Oe),I.debug(`Decreasing timeBetweenSyncAttempts to ${De}`)),ee=De}catch{}}(ae),!fe&&!isNaN(ae)){L=Date.now(),R=!1;const ge=isNaN(K);K=ae,ge&&me(),I.debug(`Completed UTC sync. Setting client - server offset to ${ae}`)}fe&&(Z=null,R=!1,Y.error(new Yt.default(en.TIME_SYNC_FAILED_ERROR_CODE,en.TIME_SYNC_FAILED_ERROR_MESSAGE)));const oe=D.get().streaming.utcSynchronization.artificialTimeOffsetToApply;y.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:ae+oe}),y.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED)}function Q(){if(!q||q.length===0)return;const fe=q.reduce((ae,oe)=>ae+oe,0)/q.length;ne(fe)?I.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(I.debug(`Completed background UTC sync. Setting client - server offset to ${fe}`),K=fe,y.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:K})),M=!1,F=Date.now()}function ne(fe){try{if(isNaN(K))return!0;const ae=D.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(D.get().streaming.utcSynchronization.maximumAllowedDrift)?D.get().streaming.utcSynchronization.maximumAllowedDrift:100;return fe>=K-ae&&fe<=K+ae}catch{return!0}}return w={initialize:function(){ue(),N={"urn:mpeg:dash:utc:http-head:2014":Fe,"urn:mpeg:dash:utc:http-xsdate:2014":Ie.bind(null,G),"urn:mpeg:dash:utc:http-iso:2014":Ie.bind(null,be),"urn:mpeg:dash:utc:direct:2014":Ee,"urn:mpeg:dash:utc:http-head:2012":Fe,"urn:mpeg:dash:utc:http-xsdate:2012":Ie.bind(null,G),"urn:mpeg:dash:utc:http-iso:2012":Ie.bind(null,be),"urn:mpeg:dash:utc:direct:2012":Ee,"urn:mpeg:dash:utc:http-ntp:2014":we,"urn:mpeg:dash:utc:ntp:2014":we,"urn:mpeg:dash:utc:sntp:2014":we}},attemptSync:function(fe,ae){k=fe,R||(function(oe){try{if(!oe||!D.get().streaming.utcSynchronization.enabled)return!1;const ge=isNaN(ee)?30:ee;return!(L&&ge&&!isNaN(ge))||(Date.now()-L)/1e3>=ge}catch{return!0}}(ae)?(R=!0,J()):y.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(fe){fe&&(fe.dashMetrics&&($=fe.dashMetrics),fe.baseURLController&&(se=fe.baseURLController),fe.errHandler&&(Y=fe.errHandler),fe.settings&&(D=fe.settings))},reset:function(){ue(),y.off(f.default.ATTEMPT_BACKGROUND_SYNC,me,w)}},I=(0,l.default)(v).getInstance().getLogger(w),y.on(f.default.ATTEMPT_BACKGROUND_SYNC,me,w),w}Bp.__dashjs_factory_name="TimeSyncController";const $p=r.default.getSingletonFactory(Bp);$p.HTTP_TIMEOUT_MS=5e3,r.default.updateSingletonFactory(Bp.__dashjs_factory_name,$p);var M2=$p;function Hx(){let v,y,b,w,I;const R=this.context,M=(0,m.default)(R).getInstance();return v={attachMediaSource:function(D){let N=window.URL.createObjectURL(y);return D.setSource(N),w==="managedMediaSource"&&(D.setDisableRemotePlayback(!0),y.addEventListener("startstreaming",()=>{M.trigger(g.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),y.addEventListener("endstreaming",()=>{M.trigger(g.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),N},createMediaSource:function(){let D="WebKitMediaSource"in window,N="MediaSource"in window;return"ManagedMediaSource"in window?(y=new ManagedMediaSource,w="managedMediaSource",I.info("Created ManagedMediaSource")):N?(y=new MediaSource,w="mediaSource",I.info("Created MediaSource")):D&&(y=new WebKitMediaSource,I.info("Created WebkitMediaSource")),y},detachMediaSource:function(D){D.setSource(null)},setConfig:function(D){D&&D.settings&&(b=D.settings)},setDuration:function D(N){y&&y.readyState==="open"&&(N===null&&isNaN(N)||y.duration!==N&&(N!==1/0||b.get().streaming.buffer.mediaSourceDurationInfinity||(N=Math.pow(2,32)),function($){let q=$.sourceBuffers;for(let k=0;k<q.length;k++)if(q[k].updating)return!0;return!1}(y)?setTimeout(D.bind(null,N),50):(I.info("Set MediaSource duration:"+N),y.duration=N)))},setSeekable:function(D,N){y&&typeof y.setLiveSeekableRange=="function"&&typeof y.clearLiveSeekableRange=="function"&&y.readyState==="open"&&D>=0&&D<N&&(y.clearLiveSeekableRange(),y.setLiveSeekableRange(D,N))},signalEndOfStream:function(D){if(!D||D.readyState!=="open")return;let N=D.sourceBuffers;for(let $=0;$<N.length;$++)if(N[$].updating||N[$].buffered.length===0)return;I.info("call to mediaSource endOfStream"),D.endOfStream()}},I=(0,l.default)(R).getInstance().getLogger(v),v}Hx.__dashjs_factory_name="MediaSourceController";var O2=r.default.getSingletonFactory(Hx);function Vx(){const v="urn:mpeg:dash:event:2012",b="urn:mpeg:dash:event:callback:2015",R="discarded",M="updated",D="added",N=this.context,$=(0,m.default)(N).getInstance();let q,k,L,F,K,Z,ee,Y,se,ue,me;function ve(){if(!ee||!Y)throw new Error("setConfig function has to be called previously")}function J(){me=!1,L={},F={},K=null,ue=!1,Z=Date.now()/1e3}function H(){try{if(!ue){ue=!0;const Ce=Y.getTime();let Q=Ce-Z;Q=Z>0?Math.max(0,Q):0,B(F,Q,Ce),B(L,Q,Ce),G(F),G(L),Z=Ce,ue=!1}}catch(Ce){ue=!1,k.error(Ce)}}function B(Ce,Q,ne){try{Ee(Ce,function(ae){if(ae!==void 0){const oe=isNaN(ae.duration)?0:ae.duration;ae.calculatedPresentationTime<=ne&&ae.calculatedPresentationTime+Q+oe>=ne?Fe(ae,g.default.EVENT_MODE_ON_START):(Ie(ne,oe+Q,ae.calculatedPresentationTime)||function(ge){try{const V=ge.eventStream.period.start+ge.eventStream.period.duration;return ge.calculatedPresentationTime>V}catch(V){return k.error(V),!1}}(ae))&&(k.debug(`Removing event ${ae.id} from period ${ae.eventStream.period.id} as it is expired or invalid`),function(ge,V){try{const ye=V.eventStream.schemeIdUri,Te=V.eventStream.period.id,Ae=V.eventStream.value,Oe=V.id;ge[Te][ye]=ge[Te][ye].filter(De=>Ae&&De.eventStream.value&&De.eventStream.value!==Ae||De.id!==Oe),ge[Te][ye].length===0&&delete ge[Te][ye]}catch(ye){k.error(ye)}}(Ce,ae))}})}catch(fe){k.error(fe)}}function G(Ce){try{for(const Q in Ce)Ce.hasOwnProperty(Q)&&Object.keys(Ce[Q]).length===0&&delete Ce[Q]}catch(Q){k.error(Q)}}function be(Ce,Q,ne=!1){const fe=Ce.eventStream.schemeIdUri,ae=Ce.eventStream.value,oe=Ce.id;let ge=R;Q[fe]||(Q[fe]=[]);const V=Q[fe].findIndex(ye=>(!ae||ye.eventStream.value&&ye.eventStream.value===ae)&&ye.id===oe);if(V===-1)Q[fe].push(Ce),Ce.triggeredReceivedEvent=!1,Ce.triggeredStartEvent=!1,ge=D;else if(ne){const ye=Q[fe][V];Ce.triggeredReceivedEvent=ye.triggeredReceivedEvent,Ce.triggeredStartEvent=ye.triggeredStartEvent,Q[fe][V]=Ce,ge=M}return ge}function re(Ce){try{if(Ce.eventStream.value==1){const Q=Ce.calculatedPresentationTime;let ne;ne=Ce.calculatedPresentationTime==4294967295?NaN:Ce.calculatedPresentationTime+Ce.duration,$.trigger(g.default.MANIFEST_VALIDITY_CHANGED,{id:Ce.id,validUntil:Q,newDuration:ne,newManifestValidAfter:NaN},{mode:g.default.EVENT_MODE_ON_START})}}catch(Q){k.error(Q)}}function we(Ce){try{const Q=Y.getTime();Ee(Ce,function(ne){const fe=ne.eventStream&&ne.eventStream.period&&!isNaN(ne.eventStream.period.duration)?ne.eventStream.period.duration:NaN,ae=ne.eventStream&&ne.eventStream.period&&!isNaN(ne.eventStream.period.start)?ne.eventStream.period.start:NaN;if(isNaN(fe)||isNaN(ae))return;const oe=ne.calculatedPresentationTime;Math.abs(oe-Q)<300&&Fe(ne,g.default.EVENT_MODE_ON_START)})}catch(Q){k.error(Q)}}function Ee(Ce,Q){try{if(Ce){const ne=Object.keys(Ce);for(let fe=0;fe<ne.length;fe++){const ae=Ce[ne[fe]],oe=Object.keys(ae);for(let ge=0;ge<oe.length;ge++)ae[oe[ge]].forEach(V=>{V!==void 0&&Q(V)})}}}catch(ne){k.error(ne)}}function Ie(Ce,Q,ne){try{return Ce-Q>ne}catch(fe){return k.error(fe),!1}}function Fe(Ce,Q){try{const ne=Y.getTime(),fe=Ce.id;if(Q===g.default.EVENT_MODE_ON_RECEIVE&&!Ce.triggeredReceivedEvent)return k.debug(`Received event ${fe}`),Ce.triggeredReceivedEvent=!0,void $.trigger(Ce.eventStream.schemeIdUri,{event:Ce},{mode:Q});Ce.triggeredStartEvent||(Ce.eventStream.schemeIdUri===v&&Ce.eventStream.value==1?Ce.duration===0&&Ce.presentationTimeDelta===0||(k.debug(`Starting manifest refresh event ${fe} at ${ne}`),function(){try{ve(),ee.refreshManifest()}catch(ae){k.error(ae)}}()):Ce.eventStream.schemeIdUri===b&&Ce.eventStream.value==1?(k.debug(`Starting callback event ${fe} at ${ne}`),function(ae){try{let oe=an(N).create({});const ge=new wp({method:"get",url:ae,responseType:"arraybuffer",customData:{}}),V=new _p({request:ge});oe.load(ge,V)}catch(oe){k.error(oe)}}(Ce.messageData instanceof Uint8Array?st.default.uint8ArrayToString(Ce.messageData):Ce.messageData)):(k.debug(`Starting event ${fe} from period ${Ce.eventStream.period.id} at ${ne}`),$.trigger(Ce.eventStream.schemeIdUri,{event:Ce},{mode:Q}),se.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete Ce.messageData,delete Ce.parsedMessageData},se.get().streaming.events.deleteEventMessageDataTimeout)),Ce.triggeredStartEvent=!0)}catch(ne){k.error(ne)}}return q={addInlineEvents:function(Ce,Q){try{if(ve(),L[Q]||(L[Q]={}),Ce)for(let ne=0;ne<Ce.length;ne++){let fe=Ce[ne];if(!Ie(Y.getTime(),isNaN(fe.duration)?0:fe.duration,fe.calculatedPresentationTime)){let ae=be(fe,L[Q],!0);ae===D?(k.debug(`Added inline event with id ${fe.id} from period ${Q}`),Fe(fe,g.default.EVENT_MODE_ON_RECEIVE)):ae===M&&k.debug(`Updated inline event with id ${fe.id} from period ${Q}`)}}}catch(ne){throw ne}},addInbandEvents:function(Ce,Q){try{ve(),F[Q]||(F[Q]={});for(let ne=0;ne<Ce.length;ne++){let fe=Ce[ne];Ie(Y.getTime(),isNaN(fe.duration)?0:fe.duration,fe.calculatedPresentationTime)||(be(fe,F[Q],!1)===D?(fe.eventStream.schemeIdUri===v&&re(fe),k.debug(`Added inband event with id ${fe.id} from period ${Q}`),Fe(fe,g.default.EVENT_MODE_ON_RECEIVE)):k.debug(`Inband event with scheme_id_uri ${fe.eventStream.schemeIdUri}, value ${fe.eventStream.value}, period id ${Q} and event id ${fe.id} was ignored because it has been added before.`))}H()}catch(ne){throw ne}},getInbandEvents:function(){return F},getInlineEvents:function(){return L},start:function(){try{ve(),k.debug("Start Event Controller");const Ce=se.get().streaming.events.eventControllerRefreshDelay;me||isNaN(Ce)||(me=!0,K=setInterval(H,Ce))}catch(Ce){throw Ce}},setConfig:function(Ce){try{if(!Ce)return;Ce.manifestUpdater&&(ee=Ce.manifestUpdater),Ce.playbackController&&(Y=Ce.playbackController),Ce.settings&&(se=Ce.settings)}catch(Q){throw Q}},reset:function(){(function(){try{K!==null&&me&&(clearInterval(K),K=null,me=!1,function(){try{we(F),we(L)}catch(Ce){k.error(Ce)}}())}catch(Ce){throw Ce}})(),J()}},k=(0,l.default)(N).getInstance().getLogger(q),J(),q}Vx.__dashjs_factory_name="EventController";var F2=r.default.getSingletonFactory(Vx),ou={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Kx=t(445),Yx=t(1923);function Wx(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I,R,M,D,N,$,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G,be,re,we,Ee,Ie,Fe,Ce,Q,ne,fe,ae,oe,ge,V,ye,Te,Ae,Oe,De,Ge,ot,Et,xt,tn;function kt(){if(!(D&&D.hasOwnProperty("load")&&H&&H.hasOwnProperty("initialize")&&H.hasOwnProperty("reset")&&H.hasOwnProperty("getClientTimeOffset")&&N&&J&&q&&ae))throw new Error(h.default.MISSING_CONFIG_ERROR)}function nn(){(function(){try{const it=$.getStreamsInfo();if(!G&&it.length===0)throw new Error("There are no periods in the MPD");G&&it.length>0&&q.updateManifestUpdateInfo({currentTime:ae.getTime(),buffered:fe.getBufferRange(),presentationStartTime:it[0].start,clientTimeOffset:H.getClientTimeOffset()}),B.length>0&&function(un){un.length!==0?B=B.filter(pn=>{const On=un.filter(Un=>Un.id===pn.getId()).length>0||pn.getId()===G.getId();return On||(w.debug(`Removing stream ${pn.getId()}`),pn.reset(!0),pn=null),On}):w.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(it);const Nt=[];for(let un=0,pn=it.length;un<pn;un++){const On=it[un];Nt.push(Ln(On)),q.addManifestUpdateStreamInfo(On)}Promise.all(Nt).then(()=>new Promise((un,pn)=>{G?un():Mn(it,un,pn)})).then(()=>{y.trigger(f.default.STREAMS_COMPOSED),Cn()}).catch(un=>{throw un})}catch(it){J.error(new Yt.default(en.MANIFEST_ERROR_ID_NOSTREAMS_CODE,it.message+" nostreamscomposed",N.getValue())),Q=!0,Pi()}})()}function fn(){ot=!0}function Ln(it){let Nt=lu(it.id);return Nt?Nt.updateData(it):(Nt=P2(v).create({manifestModel:N,mediaPlayerModel:ge,dashMetrics:q,manifestUpdater:M,adapter:$,timelineConverter:H,capabilities:I,capabilitiesFilter:R,errHandler:J,baseURLController:K,segmentBaseController:Z,textController:re,abrController:Y,playbackController:ae,throughputController:se,eventController:me,mediaController:ue,protectionController:be,videoModel:fe,streamInfo:it,settings:Ge}),B.push(Nt),Nt.initialize(),Promise.resolve())}function Mn(it,Nt,un){try{St();const pn=q.getCurrentDVRInfo().range;if(pn.end<pn.start)return void function(Un,mr,Oa,ha){Et&&clearTimeout(Et);const cu=Math.min(1e3*(-1*(Un.end-Un.start)+2),2147483647);w.debug(`Waiting for ${cu} ms before playback can start`),y.trigger(f.default.AST_IN_FUTURE,{delay:cu}),Et=setTimeout(()=>{Mn(mr,Oa,ha)},cu)}(pn,it,Nt,un);Ge.get().streaming.applyProducerReferenceTime&&oe.calculateProducerReferenceTimeOffsets(it);const On=it[0].manifestInfo;if(Ge.get().streaming.applyServiceDescription&&oe.applyServiceDescription(On),$.getIsDynamic()){const Un=Er(0,On);ae.computeAndSetLiveDelay(Un,On)}(Ge.get().streaming.applyContentSteering&&F.shouldQueryBeforeStart()?F.loadSteeringData():Promise.resolve()).then(()=>{const Un=N.getValue();Un&&K.update(Un),wn(),Nt()}).catch(Un=>{w.error(Un),wn(),Nt()})}catch(pn){un(pn)}}function wn(){const it=function(){let pn;return pn=$.getIsDynamic()?function(){let On;const Un=q.getCurrentDVRInfo();On=(Un&&Un.range?Un.range.end:0)-ae.getOriginalLiveDelay();const mr=Un?Un.range:null;if(mr){if(isNaN(xt)&&xt.toString().indexOf("posix:")===-1){const ha=Pn(!0);isNaN(ha)||(w.info(`Start time from URI parameters: ${ha}`),On=Math.min(On,ha))}else{w.info(`Start time provided by the app: ${xt}`);const ha=_n(!0,xt);isNaN(ha)||(On=Math.min(On,ha))}const Oa=Ge.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;On=Math.max(On,mr.start+Oa)}return On}():function(){let On=gl()[0].getStreamInfo().start;if(isNaN(xt)){const Un=Pn(!1);isNaN(Un)||(w.info(`Start time from URI parameters: ${Un}`),On=Math.max(On,Un))}else{w.info(`Start time provided by the app: ${xt}`);const Un=_n(!1,xt);isNaN(Un)||(On=Math.max(On,Un))}return On}(),pn}();let Nt=tt(it);const un=Nt!==null?Nt:B[0];y.trigger(f.default.INITIAL_STREAM_SWITCH,{startTime:it}),bn(un,null,it),Oe||(Oe=setInterval(function(){!Fe&&ae.getTimeToStreamEnd()<=0&&!ae.isSeeking()&&y.trigger(f.default.PLAYBACK_ENDED,{isLast:fa().isLast})},200))}function bn(it,Nt,un){try{if(Fe||!it||Nt===it&&it.getIsActive())return;Fe=!0,y.trigger(f.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Nt?Nt.getStreamInfo():null,toStreamInfo:it.getStreamInfo()});let pn=!1,On=[],Un=At(Nt);G=it,Nt&&(pn=jt(it,Nt),On=vt(Nt),Nt.deactivate(pn)),un=isNaN(un)?!pn&&Nt?it.getStreamInfo().start:NaN:un,w.info(`Switch to stream ${it.getId()}. Seektime is ${un}, current playback time is ${ae.getTime()}. Seamless period switch is set to ${pn}`),De=De.filter(mr=>mr.getId()!==G.getId()),ae.initialize(fa(),!!Nt),fe.getElement()?Je({seekTime:un,keepBuffers:pn,sourceBufferSinksFromPreviousPeriod:Un,streamActivated:!1,representationsFromPreviousPeriod:On}):Tt({seekTime:un,keepBuffers:pn,sourceBufferSinksFromPreviousPeriod:Un})}catch{Fe=!1}}function Je(it){let Nt;function un(){if(!ne||ne.readyState!=="open")return;w.debug("MediaSource is open!"),window.URL.revokeObjectURL(Nt),ne.removeEventListener("sourceopen",un),ne.removeEventListener("webkitsourceopen",un),vn();const On=q.getCurrentDVRInfo();k.setSeekable(On.range.start,On.range.end),it.streamActivated?(isNaN(it.seekTime)||ae.seek(it.seekTime,!0,!0),G.setMediaSource(ne).then(()=>{G.initializeForTextWithMediaSource(ne)})):Tt(it)}function pn(){ne.addEventListener("sourceopen",un,!1),ne.addEventListener("webkitsourceopen",un,!1),Nt=k.attachMediaSource(fe),w.debug("MediaSource attached to element.  Waiting on open...")}ne?it.keepBuffers?Tt(it):(k.detachMediaSource(fe),pn()):(ne=k.createMediaSource(),pn())}function Tt(it){const Nt=it.representationsFromPreviousPeriod||[];G.activate(ne,it.sourceBufferSinksFromPreviousPeriod,Nt).then(()=>{isNaN(it.seekTime)||(y.trigger(f.default.SEEK_TARGET,{time:it.seekTime},{streamId:G.getId()}),ae.seek(it.seekTime,!1,!0),G.startScheduleControllers()),Fe=!1,y.trigger(f.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:fa()})})}function vt(it){return(it?it.getStreamProcessors():[]).map(Nt=>Nt.getRepresentation())}function At(it){const Nt=new Map;return it&&(it?it.getStreamProcessors():[]).forEach(un=>{const pn=un.getBuffer();pn&&Nt.set(pn.getType(),pn)}),Nt}function Zt(it){const Nt=tt(it.seekTime);Nt&&Nt!==G?Nt&&Nt!==G&&(Rn(Nt),function(un,pn){const On=un&&!isNaN(un.seekTime)?un.seekTime:NaN,Un=G.getStreamProcessors().map(mr=>mr.prepareOuterPeriodPlaybackSeeking(un));Promise.all(Un).then(()=>{bn(pn,G,On)}).catch(mr=>{J.error(mr)})}(it,Nt)):(Rn(),function(un){G.getStreamProcessors().forEach(pn=>pn.prepareInnerPeriodPlaybackSeeking(un)),uo(gi.USER_REQUEST_STOP_REASON)}(it)),ca(lo.SEEK_START_REASON)}function Rn(it=null){dt()}function dt(){De&&De.length>0&&(De.forEach(it=>{it.deactivate(!0)}),De=[])}function wt(it){if(it.newMediaInfo.streamInfo.id===G.getId()){if(dt(),Ge.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&it.oldMediaInfo&&it.oldMediaInfo.codec!==it.newMediaInfo.codec){const Nt=ae.getTime();return G.deactivate(!1),void Je({seekTime:Nt,keepBuffers:!1,streamActivated:!1})}G.prepareTrackChange(it)}}function jt(it,Nt){try{return Ge.get().streaming.buffer.reuseExistingSourceBuffers&&(I.isProtectionCompatible(Nt.getStreamInfo(),it.getStreamInfo())||ot)&&I.supportsChangeType()&&Ge.get().streaming.buffer.useChangeType}catch{return!1}}function He(it,Nt=null){if(!ne||it.getPreloaded()||!jt(it,Nt))return;const un=vt(Nt),pn=At(Nt);it.startPreloading(ne,pn,un).then(()=>{De.push(it)})}function tt(it){if(isNaN(it))return null;const Nt=B.length;for(let un=0;un<Nt;un++){const pn=B[un];if(it<parseFloat((pn.getStartTime()+pn.getDuration()).toFixed(5)))return pn}return null}function St(){try{const it=$.getIsDynamic(),Nt=$.getStreamsInfo()[0].manifestInfo,un=ae.getTime(),pn=H.calcTimeShiftBufferWindow(B,it),On=Qt();if(pn.start===void 0||pn.end===void 0)return;On&&On.length!==0?On.forEach(Un=>{q.addDVRInfo(Un.getType(),un,Nt,pn)}):q.addDVRInfo(h.default.VIDEO,un,Nt,pn)}catch{}}function at(it){if(Te&&Ie){const Nt=ge.getInitialBufferLevel(),un=[h.default.TEXT];(isNaN(Nt)||Nt<=ae.getBufferLevel(un)||$.getIsDynamic()&&Nt>ae.getLiveDelay())&&(Te=!1,ca(lo.INITIAL_PLAYOUT_START_REASON),ae.play())}it&&it.mediaType&&q.addBufferLevel(it.mediaType,new Date,1e3*it.bufferLevel)}function Ct(it){it.streamInfo.id===G.getId()&&dt(),lu(it.streamInfo.id).prepareQualityChange(it)}function Mt(){if($.getIsDynamic()&&ae.getOriginalLiveDelay()!==0&&G){const it=$.getStreamsInfo();if(it.length>0){const Nt=it[0].manifestInfo,un=Er(0,Nt);ae.computeAndSetLiveDelay(un,Nt)}}}function ke(){if(as()){const it=fe.getPlaybackQuality();it&&q.addDroppedFrames(it)}}function lt(){w.debug("[onPlaybackStarted]"),!Te&&ye&&ca(lo.RESUME_FROM_PAUSE_START_REASON),Te&&(Te=!1),Ae&&(Ae=!1,Ge.get().streaming.applyContentSteering&&!F.shouldQueryBeforeStart()&&F.loadSteeringData()),ye=!1}function Ot(it){w.debug("[onPlaybackPaused]"),it.ended||(ye=!0,uo(gi.USER_REQUEST_STOP_REASON))}function zt(it){w.debug(`Stream with id ${it.streamInfo.id} finished buffering`);const Nt=it.streamInfo.isLast;ne&&Nt?(w.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),k.signalEndOfStream(ne)):Cn()}function Cn(){if(!G)return;if(!G.getHasFinishedBuffering())return void G.checkAndHandleCompletedBuffering();const it=function(un=null){try{const pn=un||G||null;if(pn){const On=pn.getStreamInfo();return B.filter(function(Un){const mr=Un.getStreamInfo();return mr.start>On.start&&On.id!==mr.id})}}catch{return[]}}(G);let Nt=0;for(;Nt<it.length;){const un=it[Nt],pn=Nt===0?G:it[Nt-1];!un.getPreloaded()&&pn.getHasFinishedBuffering()&&He(un,pn),Nt+=1}}function mt(){Oe&&(clearInterval(Oe),Oe=null)}function Qt(){return G?G.getStreamProcessors():[]}function Tn(it){if(G&&!G.getIsEndedEventSignaled()){G.setIsEndedEventSignaled(!0);const Nt=function(un=null){const pn=un||G||null;if(!pn)return null;const On=pn.getStreamInfo(),Un=On.start;let mr=0,Oa=-1,ha=NaN;for(;mr<B.length;){const cu=B[mr].getStreamInfo(),Vp=cu.start-Un;Vp>0&&(isNaN(ha)||Vp<ha)&&On.id!==cu.id&&(ha=Vp,Oa=mr),mr+=1}return Oa>=0?B[Oa]:null}();Nt?(w.debug(`StreamController onEnded, found next stream with id ${Nt.getStreamInfo().id}. Switching from ${G.getStreamInfo().id} to ${Nt.getStreamInfo().id}`),bn(Nt,G,NaN)):(w.debug("StreamController no next stream found"),G.setIsEndedEventSignaled(!1)),uo(Nt?gi.END_OF_PERIOD_STOP_REASON:gi.END_OF_CONTENT_STOP_REASON)}it&&it.isLast&&(mt(),F.stopSteeringRequestTimer())}function vn(it){const Nt=it||fa().manifestInfo.duration;k.setDuration(Nt)}function Pn(it){const Nt=ee.getURIFragmentData();if(!Nt||!Nt.t)return NaN;const un=gl()[0].getStreamInfo().start;return Nt.t=Nt.t.split(",")[0],nr(it,Nt.t,un)}function _n(it,Nt){let un=0;return it||(un=gl()[0].getStreamInfo().start),nr(it,Nt,un)}function nr(it,Nt,un){const pn=$.getRegularPeriods()[0],On=Nt.toString(),Un=On.indexOf("posix:")!==-1?On.substring(6)==="now"?Date.now()/1e3:parseFloat(On.substring(6)):NaN;return it&&!isNaN(Un)?H.calcPresentationTimeFromWallTime(new Date(1e3*Un),pn):parseFloat(On)+un}function Er(it,Nt){try{let un=NaN;return Nt&&!isNaN(Nt.maxFragmentDuration)&&isFinite(Nt.maxFragmentDuration)?Nt.maxFragmentDuration:isFinite(un)?un:NaN}catch{return NaN}}function La(){const it=N.getValue();K.initialize(it)}function Pa(it){if(it.error)Q=!0,Pi();else{w.info("Manifest updated... updating data system wide.");const Nt=it.manifest;$.updatePeriods(Nt),R.filterUnsupportedFeatures(Nt).then(()=>{K.initialize(Nt);let un=$.getUTCTimingSources();!$.getIsDynamic()||un&&un.length!==0||y.trigger(g.default.CONFORMANCE_VIOLATION,{level:ou.LEVELS.WARNING,event:ou.EVENTS.NO_UTC_TIMING_ELEMENT});let pn=$.getIsDynamic()?un.concat(V.getUTCTimingSources()):un;L.attemptSync(pn,$.getIsDynamic()),Ee.createFinalQueryStrings(Nt)})}}function as(){return!!G&&G.getHasVideoTrack()}function ml(){return!!G&&G.getHasAudioTrack()}function uo(it,Nt){Nt=Nt||new Date,Qt().forEach(un=>{un.finalisePlayList(Nt,it)}),q.addPlayList()}function ca(it){q.createPlaylistMetrics(1e3*ae.getTime(),it)}function co(it){be.updateKeyStatusesMap(it),function(){const Nt=Qt();let un=!1;Nt.forEach(pn=>{const On=pn.getMediaInfo();!On||I.areKeyIdsUsable(On)?On&&I.areKeyIdsExpired(On)&&function(Un){const mr=lu(Un.getStreamId());mr&&mr.triggerProtectionError({error:new Yt.default(Yx.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Yx.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(pn):(un=!0,function(Un){const mr=Un.getAllMediaInfos().filter(Oa=>I.areKeyIdsUsable(Oa));if(mr&&mr.length!==0)ue.setTrack(mr[0],{replaceBuffer:!0});else{const Oa=Un.getType();J.error(new Yt.default(en.NO_SUPPORTED_KEY_IDS,`Type: ${Oa}: ${en.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(pn))}),un&&(ae.getTime()===0?y.once(g.default.FRAGMENT_LOADING_COMPLETED,()=>{da()},b):ae.isProgressing(500).then(pn=>{pn||da()}))}()}function da(){const it=ae.getTime();ae.seek(it+.01,!1,!1)}function Ma(it){if(!it.error)return;let Nt;switch(it.error.code){case 1:Nt="MEDIA_ERR_ABORTED";break;case 2:Nt="MEDIA_ERR_NETWORK";break;case 3:Nt="MEDIA_ERR_DECODE",tn.counts.mediaErrorDecode+=1;break;case 4:Nt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Nt="MEDIA_ERR_ENCRYPTED";break;default:Nt="UNKNOWN"}Nt==="MEDIA_ERR_DECODE"&&Ge.get().errors.recoverAttempts.mediaErrorDecode>=tn.counts.mediaErrorDecode?function(){w.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const un=ae.getTime();G.deactivate(!1),w.info(`MediaSource has been resetted. Resuming playback from time ${un}`),Je({seekTime:un,keepBuffers:!1,streamActivated:!1})}():(Ce=!0,it.error.message&&(Nt+=" ("+it.error.message+")"),it.error.msExtendedCode&&(Nt+=" (0x"+(it.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),w.fatal("Video Element Error: "+Nt),it.error&&w.fatal(it.error),J.error(new Yt.default(it.error.code,Nt)),Pi())}function fa(){return G?G.getStreamInfo():null}function lu(it){for(let Nt=0,un=B.length;Nt<un;Nt++)if(B[Nt].getId()===it)return B[Nt];return null}function eh(it){isNaN(it.newDuration)||vn(it.newDuration)}function th(){B=[],xt=NaN,be=null,Fe=!1,G=null,Ce=!1,Q=!1,Te=!0,Ae=!0,ye=!1,Ie=!0,Oe=null,ot=!1,De=[],Et=null,tn={counts:{mediaErrorDecode:0}}}function Pi(){kt(),L.reset(),uo(Ce||Q?gi.FAILURE_STOP_REASON:gi.USER_REQUEST_STOP_REASON);for(let it=0,Nt=B?B.length:0;it<Nt;it++)B[it].reset(Ce);y.off(g.default.PLAYBACK_TIME_UPDATED,ke,b),y.off(g.default.PLAYBACK_SEEKING,Zt,b),y.off(g.default.PLAYBACK_ERROR,Ma,b),y.off(g.default.PLAYBACK_STARTED,lt,b),y.off(g.default.PLAYBACK_PAUSED,Ot,b),y.off(g.default.PLAYBACK_ENDED,Tn,b),y.off(g.default.METRIC_ADDED,uu,b),y.off(g.default.MANIFEST_VALIDITY_CHANGED,eh,b),y.off(g.default.BUFFER_LEVEL_UPDATED,at,b),y.off(g.default.QUALITY_CHANGE_REQUESTED,Ct,b),y.off(g.default.CONTENT_STEERING_REQUEST_COMPLETED,La,b),f.default.KEY_SESSION_UPDATED&&y.off(f.default.KEY_SESSION_UPDATED,fn,b),y.off(f.default.MANIFEST_UPDATED,Pa,b),y.off(f.default.STREAM_BUFFERING_COMPLETED,zt,b),y.off(f.default.TIME_SYNCHRONIZATION_COMPLETED,nn,b),y.off(f.default.CURRENT_TRACK_CHANGED,wt,b),y.off(f.default.SETTING_UPDATED_LIVE_DELAY,Mt,b),y.off(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Mt,b),y.off(Kx.default.INTERNAL_KEY_STATUSES_CHANGED,co,b),K.reset(),M.reset(),me.reset(),q.clearAllCurrentMetrics(),N.setValue(null),D.reset(),H.reset(),ve.reset(),ne&&(k.detachMediaSource(fe),ne=null),fe=null,be&&(be=null,we=null,N.getValue()&&y.trigger(f.default.PROTECTION_DESTROYED,{data:N.getValue().url})),mt(),y.trigger(f.default.STREAM_TEARDOWN_COMPLETE),th()}function uu(it){if(it.metric===o.DVR_INFO){const Nt=ml()?h.default.AUDIO:h.default.VIDEO;it.mediaType===Nt&&k.setSeekable(it.value.range.start,it.value.range.end)}}function gl(){return B}return b={addDVRMetric:St,getActiveStream:function(){return G},getActiveStreamInfo:fa,getActiveStreamProcessors:Qt,getAutoPlay:function(){return Ie},getHasMediaOrInitialisationError:function(){return Ce||Q},getInitialPlayback:function(){return Te},getIsStreamSwitchInProgress:function(){return Fe},getStreamById:lu,getStreamForTime:tt,getStreams:gl,getTimeRelativeToStreamId:function(it,Nt){let un=null,pn=0,On=0,Un=null;for(let mr=0;mr<B.length;mr++){if(un=B[mr],On=un.getStartTime(),Un=un.getDuration(),Number.isFinite(On)&&(pn=On),un.getId()===Nt)return it-pn;Number.isFinite(Un)&&(pn+=Un)}return null},hasAudioTrack:ml,hasVideoTrack:as,initialize:function(it,Nt){kt(),Ie=it,we=Nt,H.initialize(),M=tx(v).create(),M.setConfig({manifestModel:N,adapter:$,manifestLoader:D,errHandler:J,settings:Ge,contentSteeringController:F}),M.initialize(),me=F2(v).getInstance(),me.setConfig({manifestUpdater:M,playbackController:ae,settings:Ge}),me.start(),Ee=dS(v).getInstance(),L.setConfig({dashMetrics:q,baseURLController:K,errHandler:J,settings:Ge}),L.initialize(),k.setConfig({settings:Ge}),be&&(y.trigger(f.default.PROTECTION_CREATED,{controller:be}),be.setMediaElement(fe.getElement()),we&&be.setProtectionData(we)),y.on(g.default.PLAYBACK_TIME_UPDATED,ke,b),y.on(g.default.PLAYBACK_SEEKING,Zt,b),y.on(g.default.PLAYBACK_ERROR,Ma,b),y.on(g.default.PLAYBACK_STARTED,lt,b),y.on(g.default.PLAYBACK_PAUSED,Ot,b),y.on(g.default.PLAYBACK_ENDED,Tn,b),y.on(g.default.METRIC_ADDED,uu,b),y.on(g.default.MANIFEST_VALIDITY_CHANGED,eh,b),y.on(g.default.BUFFER_LEVEL_UPDATED,at,b),y.on(g.default.QUALITY_CHANGE_REQUESTED,Ct,b),y.on(g.default.CONTENT_STEERING_REQUEST_COMPLETED,La,b),f.default.KEY_SESSION_UPDATED&&y.on(f.default.KEY_SESSION_UPDATED,fn,b),y.on(f.default.MANIFEST_UPDATED,Pa,b),y.on(f.default.STREAM_BUFFERING_COMPLETED,zt,b),y.on(f.default.TIME_SYNCHRONIZATION_COMPLETED,nn,b),y.on(f.default.CURRENT_TRACK_CHANGED,wt,b),y.on(f.default.SETTING_UPDATED_LIVE_DELAY,Mt,b),y.on(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Mt,b),y.on(Kx.default.INTERNAL_KEY_STATUSES_CHANGED,co,b)},load:function(it,Nt=NaN){kt(),xt=Nt,D.load(it)},loadWithManifest:function(it,Nt=NaN){(function(){if(!M||!M.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),xt=Nt,M.setManifest(it)},refreshManifest:function(){M.getIsUpdating()||M.refreshManifest()},reset:Pi,setConfig:function(it){it&&(it.capabilities&&(I=it.capabilities),it.capabilitiesFilter&&(R=it.capabilitiesFilter),it.manifestLoader&&(D=it.manifestLoader),it.manifestModel&&(N=it.manifestModel),it.mediaPlayerModel&&(ge=it.mediaPlayerModel),it.customParametersModel&&(V=it.customParametersModel),it.protectionController&&(be=it.protectionController),it.adapter&&($=it.adapter),it.dashMetrics&&(q=it.dashMetrics),it.errHandler&&(J=it.errHandler),it.timelineConverter&&(H=it.timelineConverter),it.videoModel&&(fe=it.videoModel),it.playbackController&&(ae=it.playbackController),it.throughputController&&(se=it.throughputController),it.serviceDescriptionController&&(oe=it.serviceDescriptionController),it.contentSteeringController&&(F=it.contentSteeringController),it.textController&&(re=it.textController),it.abrController&&(Y=it.abrController),it.mediaController&&(ue=it.mediaController),it.settings&&(Ge=it.settings),it.baseURLController&&(K=it.baseURLController),it.uriFragmentModel&&(ee=it.uriFragmentModel),it.segmentBaseController&&(Z=it.segmentBaseController),it.manifestUpdater&&(M=it.manifestUpdater))},setProtectionData:function(it){we=it,be&&be.setProtectionData(we)},switchToVideoElement:function(it){G&&(ae.initialize(fa()),Je({seekTime:it,keepBuffers:!1,streamActivated:!0}))}},w=(0,l.default)(v).getInstance().getLogger(b),L=M2(v).getInstance(),k=O2(v).getInstance(),ve=Fp(v).getInstance(),th(),b}Wx.__dashjs_factory_name="StreamController";var Qx=r.default.getSingletonFactory(Wx),z2=class extends Gf{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},U2=t(7377);function Xx(){let v,y=0;function b(N){let $="";for(let q=0;q<N.length;++q)$+=N[q].uchar;return $.length-$.replace(/^\s+/,"").length}function w(N){return"left: "+3.125*N.x+"%; top: "+6.66*N.y1+"%; width: "+(100-3.125*N.x)+"%; height: "+6.66*Math.max(N.y2-1-N.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function I(N){return N==="red"?"rgb(255, 0, 0)":N==="green"?"rgb(0, 255, 0)":N==="blue"?"rgb(0, 0, 255)":N==="cyan"?"rgb(0, 255, 255)":N==="magenta"?"rgb(255, 0, 255)":N==="yellow"?"rgb(255, 255, 0)":N==="white"?"rgb(255, 255, 255)":N==="black"?"rgb(0, 0, 0)":N}function R(N,$){const q=N.videoHeight/15;return $?"font-size: "+q+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+($.foreground?I($.foreground):"rgb(255, 255, 255)")+"; font-style: "+($.italics?"italic":"normal")+"; text-decoration: "+($.underline?"underline":"none")+"; white-space: pre; background-color: "+($.background?I($.background):"transparent")+";":"font-size: "+q+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function M(N){return N.replace(/^\s+/g,"")}function D(N){return N.replace(/\s+$/g,"")}return v={createHTMLCaptionsFromScreen:function(N,$,q,k){let L=null,F=null,K=!1,Z=-1,ee={start:$,end:q,spans:[]},Y="style_cea608_white_black";const se={},ue={},me=[];let ve,J;for(ve=0;ve<15;++ve){const B=k.rows[ve];let G="",be=null;if(B.isEmpty()===!1){const re=b(B.chars);L===null&&(L={x:re,y1:ve,y2:ve+1,p:[]}),re!==Z&&K&&(L.p.push(ee),ee={start:$,end:q,spans:[]},L.y2=ve,L.name="region_"+L.x+"_"+L.y1+"_"+L.y2,se.hasOwnProperty(L.name)===!1?(me.push(L),se[L.name]=L):(F=se[L.name],F.p.contat(L.p)),L={x:re,y1:ve,y2:ve+1,p:[]});for(let we=0;we<B.chars.length;++we){const Ee=B.chars[we],Ie=Ee.penState;if(be===null||!Ie.equals(be)){G.trim().length>0&&(ee.spans.push({name:Y,line:G,row:ve}),G="");let Fe="style_cea608_"+Ie.foreground+"_"+Ie.background;Ie.underline&&(Fe+="_underline"),Ie.italics&&(Fe+="_italics"),ue.hasOwnProperty(Fe)||(ue[Fe]=JSON.parse(JSON.stringify(Ie))),be=Ie,Y=Fe}G+=Ee.uchar}G.trim().length>0&&ee.spans.push({name:Y,line:G,row:ve}),K=!0,Z=re}else K=!1,Z=-1,L&&(L.p.push(ee),ee={start:$,end:q,spans:[]},L.y2=ve,L.name="region_"+L.x+"_"+L.y1+"_"+L.y2,se.hasOwnProperty(L.name)===!1?(me.push(L),se[L.name]=L):(F=se[L.name],F.p.contat(L.p)),L=null)}L&&(L.p.push(ee),L.y2=ve+1,L.name="region_"+L.x+"_"+L.y1+"_"+L.y2,se.hasOwnProperty(L.name)===!1?(me.push(L),se[L.name]=L):(F=se[L.name],F.p.contat(L.p)),L=null);const H=[];for(ve=0;ve<me.length;++ve){const B=me[ve],G="sub_cea608_"+y++,be=document.createElement("div");be.id=G;const re=w(B);be.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+re;const we=document.createElement("div");we.className="paragraph bodyStyle",we.style.cssText=R(N);const Ee=document.createElement("div");Ee.className="cueUniWrapper",Ee.style.cssText="unicode-bidi: normal; direction: ltr;";for(let Fe=0;Fe<B.p.length;++Fe){const Ce=B.p[Fe];let Q=0;for(J=0;J<Ce.spans.length;++J){let ne=Ce.spans[J];if(ne.line.length>0){if(J!==0&&Q!=ne.row){const ge=document.createElement("br");ge.className="lineBreak",Ee.appendChild(ge)}let fe=!1;Q===ne.row&&(fe=!0),Q=ne.row;const ae=ue[ne.name],oe=document.createElement("span");oe.className="spanPadding "+ne.name+" customSpanColor",oe.style.cssText=R(N,ae),J!==0&&fe?J===Ce.spans.length-1?oe.textContent=D(ne.line):oe.textContent=ne.line:Ce.spans.length>1&&J<Ce.spans.length-1&&ne.row===Ce.spans[J+1].row?oe.textContent=M(ne.line):oe.textContent=ne.line.trim(),Ee.appendChild(oe)}}}we.appendChild(Ee),be.appendChild(we);const Ie={bodyStyle:["%",90]};for(const Fe in ue)ue.hasOwnProperty(Fe)&&(Ie[Fe]=["%",90]);H.push({type:"html",start:$,end:q,cueHTMLElement:be,cueID:G,cellResolution:[32,15],isFromCEA608:!0,fontSize:Ie,lineHeight:{},linePadding:{}})}return H}},v}Xx.__dashjs_factory_name="EmbeddedTextHtmlRender";var j2=r.default.getSingletonFactory(Xx),Xf=class{constructor(){this.time=null,this.verboseLevel=0}log(v,y){if(this.verboseLevel>=v){const b=typeof y=="function"?y():y;console.log(`${this.time} [${v}] ${b}`)}}},Zx=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(v){for(const y of["foreground","underline","italics","background","flash"])Object.prototype.hasOwnProperty.call(v,y)&&(this[y]=v[y])}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(v){return this.foreground===v.foreground&&this.underline===v.underline&&this.italics===v.italics&&this.background===v.background&&this.flash===v.flash}copy(v){this.foreground=v.foreground,this.underline=v.underline,this.italics=v.italics,this.background=v.background,this.flash=v.flash}},B2=class{constructor(){this.uchar=" ",this.penState=new Zx}reset(){this.uchar=" ",this.penState.reset()}setChar(v,y){this.uchar=v,this.penState.copy(y)}setPenState(v){this.penState.copy(v)}equals(v){return this.uchar===v.uchar&&this.penState.equals(v.penState)}copy(v){this.uchar=v.uchar,this.penState.copy(v.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}};const Ps=100,$2={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499};function Jx(v){return String.fromCharCode($2[v]||v)}var q2=class{constructor(v=new Xf){this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new Zx;for(let y=0;y<Ps;y++)this.chars.push(new B2);this.logger=v}equals(v){for(let y=0;y<Ps;y++)if(!this.chars[y].equals(v.chars[y]))return!1;return!0}copy(v){for(let y=0;y<Ps;y++)this.chars[y].copy(v.chars[y])}isEmpty(){let v=!0;for(let y=0;y<Ps;y++)if(!this.chars[y].isEmpty()){v=!1;break}return v}setCursor(v){this.pos!==v&&(this.pos=v),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ps&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ps)}moveCursor(v){const y=this.pos+v;if(v>1)for(let b=this.pos+1;b<y+1;b++)this.chars[b].setPenState(this.currPenState);this.setCursor(y)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(v){v>=144&&this.backSpace();const y=Jx(v);this.pos>=Ps?this.logger.log(0,()=>"Cannot insert "+v.toString(16)+" ("+y+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(y,this.currPenState),this.moveCursor(1))}clearFromPos(v){let y;for(y=v;y<Ps;y++)this.chars[y].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const v=[];let y=!0;for(let b=0;b<Ps;b++){const w=this.chars[b].uchar;w!==" "&&(y=!1),v.push(w)}return y?"":v.join("")}setPenStyles(v){this.currPenState.setStyles(v),this.chars[this.pos].setPenState(this.currPenState)}};const fl=15;var qp=class{constructor(v=new Xf){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let y=0;y<fl;y++)this.rows.push(new q2(v));this.logger=v}reset(){for(let v=0;v<fl;v++)this.rows[v].clear();this.currRow=14}equals(v){let y=!0;for(let b=0;b<fl;b++)if(!this.rows[b].equals(v.rows[b])){y=!1;break}return y}copy(v){for(let y=0;y<fl;y++)this.rows[y].copy(v.rows[y])}isEmpty(){let v=!0;for(let y=0;y<fl;y++)if(!this.rows[y].isEmpty()){v=!1;break}return v}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(v){this.rows[this.currRow].insertChar(v)}setPen(v){this.rows[this.currRow].setPenStyles(v)}moveCursor(v){this.rows[this.currRow].moveCursor(v)}setCursor(v){this.logger.log(2,"setCursor: "+v),this.rows[this.currRow].setCursor(v)}setPAC(v){this.logger.log(2,()=>"pacData = "+JSON.stringify(v));let y=v.row-1;if(this.nrRollUpRows&&y<this.nrRollUpRows-1&&(y=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==y){for(let M=0;M<fl;M++)this.rows[M].clear();const I=this.currRow+1-this.nrRollUpRows,R=this.lastOutputScreen;if(R){const M=R.rows[I].cueStartTime,D=this.logger.time;if(M!==null&&D!==null&&M<D)for(let N=0;N<this.nrRollUpRows;N++)this.rows[y-this.nrRollUpRows+N+1].copy(R.rows[I+N])}}this.currRow=y;const b=this.rows[this.currRow];if(v.indent!==null){const I=v.indent,R=Math.max(I-1,0);b.setCursor(v.indent),v.color=b.chars[R].penState.foreground}const w={foreground:v.color,underline:v.underline,italics:v.italics,background:"black",flash:!1};this.setPen(w)}setBkgData(v){this.logger.log(2,()=>"bkgData = "+JSON.stringify(v)),this.backSpace(),this.setPen(v),this.insertChar(32)}setRollUpRows(v){this.nrRollUpRows=v}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const v=this.currRow+1-this.nrRollUpRows,y=this.rows.splice(v,1)[0];y.clear(),this.rows.splice(this.currRow,0,y),this.logger.log(2,"Rolling up")}getDisplayText(v){v=v||!1;const y=[];let b="",w=-1;for(let I=0;I<fl;I++){const R=this.rows[I].getTextString();R&&(w=I+1,v?y.push("Row "+w+": '"+R+"'"):y.push(R.trim()))}return y.length>0&&(b=v?"["+y.join(" | ")+"]":y.join(`
`)),b}getTextAndFormat(){return this.rows}},ew=class{constructor(v,y,b=new Xf){this.chNr=v,this.outputFilter=y,this.mode=null,this.displayedMemory=new qp(b),this.nonDisplayedMemory=new qp(b),this.lastOutputScreen=new qp(b),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=b,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var v,y;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),(y=(v=this.outputFilter)==null?void 0:v.reset)==null||y.call(v),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(v){this.outputFilter=v}setPAC(v){this.writeScreen.setPAC(v)}setBkgData(v){this.writeScreen.setBkgData(v)}setMode(v){v!==this.mode&&(this.mode=v,this.logger.log(2,()=>"MODE="+v),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=v)}insertChars(v){for(const b of v)this.writeScreen.insertChar(b);const y=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>y+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(v){this.logger.log(2,"RU("+v+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(v)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const v=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=v,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(v){this.logger.log(2,"TO("+v+") - Tab Offset"),this.writeScreen.moveCursor(v)}ccMIDROW(v){const y={flash:!1};y.underline=v%2==1,y.italics=v>=46,y.italics?y.foreground="white":y.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(v/2)-16],this.logger.log(2,"MIDROW: "+JSON.stringify(y)),this.writeScreen.setPen(y)}outputDataUpdate(v=!1){const y=this.logger.time;y!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,y,this.lastOutputScreen),v&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:y):this.cueStartTime=y,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(v){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,v,this.displayedMemory),this.cueStartTime=v))}};const G2=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function H2(v,y,b){return b.a===v&&b.b===y}function hl(v){const y=[];for(const b of v)y.push(b.toString(16));return y}const V2={17:2,18:4,21:6,22:8,23:10,19:13,20:15},K2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Y2={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},W2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function Zf(v,y,b){b.a=v,b.b=y}var tw=class{constructor(v,y,b){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const w=this.logger=new Xf;this.channels=[null,new ew(v,y,w),new ew(v+1,b,w)]}addData(v,y){this.lastTime=v,this.logger.time=v;for(let b=0;b<y.length;b+=2){const w=127&y[b],I=127&y[b+1];let R=!1,M=null;if(this.lastTime!==null&&(v=this.lastTime+.5*b*1001/3e4,this.logger.time=v),w===0&&I===0)continue;this.logger.log(3,()=>"["+hl([y[b],y[b+1]])+"] -> ("+hl([w,I])+")");const D=this.cmdHistory;if(w>=16&&w<=31){if(H2(w,I,D)){Zf(null,null,D),this.logger.log(3,()=>"Repeated command ("+hl([w,I])+") is dropped");continue}Zf(w,I,this.cmdHistory),R=this.parseCmd(w,I),R||(R=this.parseMidrow(w,I)),R||(R=this.parsePAC(w,I)),R||(R=this.parseBackgroundAttributes(w,I))}else Zf(null,null,D);if(!R&&(M=this.parseChars(w,I),M.length)){const N=this.currentChannel;N&&N>0?this.channels[N].insertChars(M):this.logger.log(2,"No channel found yet. TEXT-MODE?")}R||M||this.logger.log(2,()=>"Couldn't parse cleaned data "+hl([w,I])+" orig: "+hl([y[b],y[b+1]]))}}parseCmd(v,y){if(!((v===20||v===28||v===21||v===29)&&y>=32&&y<=47||(v===23||v===31)&&y>=33&&y<=35))return!1;const b=v===20||v===21||v===23?1:2,w=this.channels[b];return v===20||v===21||v===28||v===29?y===32?w.ccRCL():y===33?w.ccBS():y===34?w.ccAOF():y===35?w.ccAON():y===36?w.ccDER():y===37?w.ccRU(2):y===38?w.ccRU(3):y===39?w.ccRU(4):y===40?w.ccFON():y===41?w.ccRDC():y===42?w.ccTR():y===43?w.ccRTD():y===44?w.ccEDM():y===45?w.ccCR():y===46?w.ccENM():y===47&&w.ccEOC():w.ccTO(y-32),this.currentChannel=b,!0}parseMidrow(v,y){let b=0;if((v===17||v===25)&&y>=32&&y<=47){if(b=v===17?1:2,b!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const w=this.channels[b];return!!w&&(w.ccMIDROW(y),this.logger.log(3,()=>"MIDROW ("+hl([v,y])+")"),!0)}return!1}parsePAC(v,y){let b;if(!((v>=17&&v<=23||v>=25&&v<=31)&&y>=64&&y<=127||(v===16||v===24)&&y>=64&&y<=95))return!1;const w=v<=23?1:2;b=y>=64&&y<=95?w===1?Y2[v]:W2[v]:w===1?V2[v]:K2[v];const I=this.channels[w];return!!I&&(I.setPAC(this.interpretPAC(b,y)),this.currentChannel=w,!0)}interpretPAC(v,y){let b;const w={color:null,italics:!1,indent:null,underline:!1,row:v};return b=y>95?y-96:y-64,w.underline=!(1&~b),b<=13?w.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(b/2)]:b<=15?(w.italics=!0,w.color="white"):w.indent=4*Math.floor((b-16)/2),w}parseChars(v,y){let b,w=[],I=null;if(v>=25?(b=2,I=v-8):(b=1,I=v),I>=17&&I<=19){let R;R=I===17?y+80:I===18?y+112:y+144,this.logger.log(2,()=>"Special char '"+Jx(R)+"' in channel "+b),w=[R]}else v>=32&&v<=127&&(w=y===0?[v]:[v,y]);return w&&this.logger.log(3,()=>"Char codes =  "+hl(w).join(",")),w}parseBackgroundAttributes(v,y){if(!((v===16||v===24)&&y>=32&&y<=47||(v===23||v===31)&&y>=45&&y<=47))return!1;let b;const w={};v===16||v===24?(b=Math.floor((y-32)/2),w.background=G2[b],y%2==1&&(w.background=w.background+"_semi")):y===45?w.background="transparent":(w.foreground="black",y===47&&(w.underline=!0));const I=v<=23?1:2;return this.channels[I].setBkgData(w),!0}reset(){for(let v=0;v<Object.keys(this.channels).length;v++){const y=this.channels[v];y&&y.reset()}Zf(null,null,this.cmdHistory)}cueSplitAtTime(v){for(const y of this.channels)y&&y.cueSplitAtTime(v)}};function Q2(v,y,b){const w=[];for(let I=y;I<b;I++)I+2<b&&v.getUint8(I)===0&&v.getUint8(I+1)===0&&v.getUint8(I+2)===3?(w.push(0),w.push(0),I+=2):w.push(v.getUint8(I));return new DataView(new Uint8Array(w).buffer)}function X2(v,y,b,w){return!(v!==4||y<8)&&b.getUint8(w)===181&&b.getUint16(w+1)===49&&b.getUint32(w+3)===1195456820&&b.getUint8(w+7)===3}function Z2(v,y){return(127&v)>0||(127&y)>0}function J2(v,y){let b=0;for(;b<v.byteLength;){let I,R=0,M=0;do R+=I=v.getUint8(b++);while(I===255);do M+=I=v.getUint8(b++);while(I===255);if(X2(R,M,v,b)){const D=b+10,N=D+3*(31&v.getUint8(D-2));for(let $=D;$<N;$+=3){const q=v.getUint8($);if(4&q){const k=3&q;if((w=k)===0||w===1){const L=v.getUint8($+1),F=v.getUint8($+2);Z2(L,F)&&y[k].push(L,F)}}}}b+=M}var w}function ez(v,y,b){let w=0,I=0;const R=[[],[]];for(let M=y;M<y+b-5&&(w=v.getUint32(M),I=31&v.getUint8(M+4),!(M+5+w>y+b));M++)I===6&&M+5+w<=v.byteLength&&J2(Q2(v,M+5,M+5+w),R),M+=w+3;return R}function nw(v){const y=v.errHandler,b=v.manifestModel,w=v.mediaController,I=v.videoModel,R=v.textTracks,M=v.vttParser,D=v.vttCustomRenderingParser,N=v.ttmlParser,$=v.streamInfo,q=v.settings,k=this.context,L=(0,m.default)(k).getInstance();let F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G,be,re,we,Ee,Ie=!1;function Fe(){se=null,me=NaN,ve=[],J=null,ue=!1,Y=[],ee=null}function Ce(Te){const Ae={};Ae[xe.default.SUBTITLE]="subtitles",Ae[xe.default.CAPTION]="captions",Ae[xe.default.FORCED_SUBTITLE]="subtitles";const Oe=new z2;for(let De in Te)Oe[De]=Te[De];Oe.defaultTrack=function(De){let Ge=!1;return B.length>1&&De.isEmbedded?Ge=De.id&&De.id===h.default.CC1:B.length===1?De.id&&typeof De.id=="string"&&De.id.substring(0,2)==="CC"&&(Ge=!0):B.length===0&&(Ge=De.index===Y[0].index),Ge}(Te),Oe.isTTML=function(De){return De.codec&&De.codec.search(h.default.STPP)>=0||De.mimeType&&De.mimeType.search(h.default.TTML)>=0}(Te),Oe.kind=function(De,Ge){let ot=De.roles&&De.roles.length>0?Ge[De.roles[0].value]:Ge.caption;return ot=Object.values(Ge).includes(ot)?ot:Ge.caption,ot}(Te,Ae),R.addTextTrackInfo(Oe)}function Q(Te){const Ae=Te.chunk;Ae.representation.mediaInfo.embeddedCaptions&&fe(Ae.bytes,Ae)}function ne(Te){H=Te}function fe(Te,Ae){const Oe=Ae.representation.mediaInfo,De=Oe.type,Ge=Oe.mimeType,ot=Oe.codec||Ge;ot?Oe.codec.indexOf("application/mp4")!==-1?function(Et,xt,tn){let kt,nn;if(xt.segmentType==="InitializationSegment")ue=!0,me=Z.getMediaTimescaleFromMoov(Et);else{if(!ue)return;nn=Z.getSamplesInfo(Et),kt=nn.sampleList,kt.length>0&&(J=kt[0].cts-xt.start*me),tn.search(h.default.STPP)>=0?function(fn,Ln,Mn){let wn,bn;for(ee=ee!==null?ee:ge(Mn),wn=0;wn<Ln.length;wn++){const Je=Ln[wn],Tt=Je.cts,vt=oe(),At=vt+Tt/me,Zt=At+Je.duration/me;F.buffered.add(At,Zt);const Rn=new DataView(fn,Je.offset,Je.subSizes[0]);let dt=Gc.Utils.dataViewToString(Rn,h.default.UTF8);const wt=[];let jt=Je.offset+Je.subSizes[0];for(bn=1;bn<Je.subSizes.length;bn++){const He=new Uint8Array(fn,jt,Je.subSizes[bn]),tt=String.fromCharCode.apply(null,He);wt.push(tt),jt+=Je.subSizes[bn]}try{const He=b.getValue().ttmlTimeIsRelative?Tt/me:0,tt=ee.parse(dt,He,Tt/me,(Tt+Je.duration)/me,wt);R.addCaptions(H,vt,tt)}catch(He){se.removeExecutedRequestsBeforeTime(),V(),K.error("TTML parser error: "+He)}}}(Et,kt,tn):function(fn,Ln){let Mn,wn,bn;const Je=[];for(Mn=0;Mn<Ln.length;Mn++){const Tt=Ln[Mn];Tt.cts-=J;const vt=oe()+Tt.cts/me,At=vt+Tt.duration/me;F.buffered.add(vt,At);const Zt=fn.slice(Tt.offset,Tt.offset+Tt.size),Rn=Gc.parseBuffer(Zt);for(wn=0;wn<Rn.boxes.length;wn++){const dt=Rn.boxes[wn];if(K.debug("VTT box1: "+dt.type),dt.type!=="vtte"&&dt.type==="vttc"){K.debug("VTT vttc boxes.length = "+dt.boxes.length);let wt={styles:{}};for(bn=0;bn<dt.boxes.length;bn++){const jt=dt.boxes[bn];if(K.debug("VTT box2: "+jt.type),jt.type==="payl")wt.start=Tt.cts/me,wt.end=(Tt.cts+Tt.duration)/me,wt.data=jt.cue_text;else if(jt.type==="sttg"&&jt.settings&&jt.settings!=="")try{const He=jt.settings.split(" ");wt.styles=M.getCaptionStyles(He)}catch{}}wt&&wt.data&&(Je.push(wt),K.debug(`VTT  ${wt.start} - ${wt.end} :  ${wt.data}`))}}}Je.length>0&&R.addCaptions(H,0,Je)}(Et,kt)}}(Te,Ae,ot):De===h.default.VIDEO?function(Et,xt){let tn,kt;if(xt.segmentType===he.HTTPRequest.INIT_SEGMENT_TYPE)G===0&&(G=Z.getMediaTimescaleFromMoov(Et));else if(xt.segmentType===he.HTTPRequest.MEDIA_SEGMENT_TYPE){if(G===0)return void K.warn("CEA-608: No timescale for embeddedTextTrack yet");kt=Z.getSamplesInfo(Et);const nn=kt.lastSequenceNumber,fn=Math.trunc(xt.start),Ln=Math.trunc(xt.end);if(we[0]||we[1]||function(){let Mn;for(let wn=0;wn<B.length;wn++){if(Mn=R.getTrackIdxForId(B[wn].id),Mn===-1)return void K.warn("CEA-608: data before track is ready.");const bn=ae(Mn);we[wn]=new tw(wn+1,{newCue:bn},null)}}(),G){if(function(wn,bn,Je,Tt,vt){return wn!==null&&bn!==null&&Tt!==null&&vt!==null&&(bn===wn?Tt!==vt:bn!==wn+Je)}(be,nn,kt.numSequences,re,fn))for(tn=0;tn<we.length;tn++)we[tn]&&we[tn].reset();const Mn=function(wn,bn){if(bn.length===0)return null;const Je={splits:[],fields:[[],[]]},Tt=new DataView(wn);for(let vt=0;vt<bn.length;vt++){const At=bn[vt],Zt=ez(Tt,At.offset,At.size);let Rn=null,dt=0;for(let wt=0;wt<2;wt++)if(Zt[wt].length>0){At.cts!==Rn?dt=0:dt+=1;const jt=oe();Je.fields[wt].push([At.cts+jt*G,Zt[wt],dt]),Rn=At.cts}}return Je.fields.forEach(function(vt){vt.sort(function(At,Zt){return At[0]===Zt[0]?At[2]-Zt[2]:At[0]-Zt[0]})}),Je}(Et,kt.sampleList);for(let wn=0;wn<we.length;wn++){const bn=Mn.fields[wn],Je=we[wn];if(Je)for(tn=0;tn<bn.length;tn++)Je.addData(bn[tn][0]/G,bn[tn][1])}be=nn,re=Ln}}}(Te,Ae):function(Et,xt,tn){let kt,nn;const fn=new DataView(Et,0,Et.byteLength);nn=Gc.Utils.dataViewToString(fn,h.default.UTF8);try{kt=ge(tn).parse(nn,0),R.addCaptions(R.getCurrentTrackIdx(),0,kt),F.buffered&&F.buffered.add(xt.start,xt.end)}catch(Ln){y.error(new Yt.default(en.TIMED_TEXT_ERROR_ID_PARSE_CODE,en.TIMED_TEXT_ERROR_MESSAGE_PARSE+Ln.message,nn))}}(Te,Ae,ot):K.error("No text type defined")}function ae(Te){return function(Ae,Oe,De){let Ge;Ge=I.getTTMLRenderingDiv()?Ee.createHTMLCaptionsFromScreen(I.getElement(),Ae,Oe,De):[{start:Ae,end:Oe,data:De.getDisplayText(),styles:{}}],Ge&&R.addCaptions(Te,0,Ge)}}function oe(){return isNaN(F.timestampOffset)?0:F.timestampOffset}function ge(Te){let Ae;return Te.search(h.default.VTT)>=0?Ae=q.get().streaming.text.webvtt.customRenderingEnabled&&D?D:M:(Te.search(h.default.TTML)>=0||Te.search(h.default.STPP)>=0)&&(Ae=N),Ae}function V(Te,Ae){Te===void 0&&Te===Ae&&(Te=F.buffered.start(0),Ae=F.buffered.end(F.buffered.length-1)),F.buffered.remove(Te,Ae),R.deleteCuesFromTrackIdx(H,Te,Ae)}function ye(Te){B.forEach(function(Ae){const Oe=R.getTrackIdxForId(Ae.id);Oe>=0&&R.deleteCuesFromTrackIdx(Oe,Te.from,Te.to)})}return F={initialize:function(){Ie||(B=[],H=null,G=0,we=[],be=null,re=null,Ie=!0,Ee=j2(k).getInstance(),L.on(f.default.VIDEO_CHUNK_RECEIVED,Q,F),L.on(f.default.BUFFER_CLEARED,ye,F))},addMediaInfos:function(Te,Ae,Oe){if(Y=Y.concat(Ae),Te===h.default.TEXT&&Ae[0].isFragmented&&!Ae[0].isEmbedded){se=Oe,F.buffered=(0,U2.default)(k).create(),ve=w.getTracksFor(h.default.TEXT,$.id).filter(Ge=>Ge.isFragmented);const De=w.getCurrentTrackFor(h.default.TEXT,$.id);for(let Ge=0;Ge<ve.length;Ge++)if(ve[Ge]===De){ne(Ge);break}}for(let De=0;De<Ae.length;De++)Ce(Ae[De])},resetMediaInfos:function(){Y=[]},getStreamId:function(){return $.id},append:fe,abort:function(){},addEmbeddedTrack:function(Te){if(Ie&&Te)if(Te.id===h.default.CC1||Te.id===h.default.CC3){for(let Ae=0;Ae<B.length;Ae++)if(B[Ae].id===Te.id)return;B.push(Te)}else K.warn("Embedded track "+Te.id+" not supported!")},resetEmbedded:function(){L.off(f.default.VIDEO_CHUNK_RECEIVED,Q,F),L.off(f.default.BUFFER_CLEARED,ye,F),R&&R.deleteAllTextTracks(),Ie=!1,B=[],we=[null,null],be=null,re=null},getConfig:function(){return{fragmentModel:se,fragmentedTracks:ve,videoModel:I}},setCurrentFragmentedTrackIdx:ne,remove:V,reset:function(){Fe(),Y=[],Z=null}},K=(0,l.default)(k).getInstance().getLogger(F),Z=qf(k).getInstance(),Fe(),F}nw.__dashjs_factory_name="TextSourceBuffer";var tz=r.default.getClassFactory(nw);class nz{constructor(){this.root=null,this.size=0}addCue(y){const b={start:y.startTime,end:y.endTime,cue:y,maxEnd:y.endTime,left:null,right:null,height:1},[w,I]=this._insert(b,this.root);this.root=w,I&&this.size++}removeCue(y){const[b,w]=this._remove(y,this.root);return this.root=b,w&&this.size--,w}findCuesInRange(y,b){const w=[];return this._searchRange(this.root,y,b,w),w}findCuesAtTime(y){return this.findCuesInRange(y,y)}getAllCues(){const y=[];return this._inorderTraversal(this.root,y),y}getSize(){return this.size}clear(){this.root=null,this.size=0}_compareCues(y,b){return y.startTime!==b.startTime?y.startTime-b.startTime:y.endTime!==b.endTime?y.endTime-b.endTime:typeof VTTCue<"u"&&y instanceof VTTCue&&b instanceof VTTCue||y.text&&b.text?y.text.localeCompare(b.text):0}_compareIntervals(y,b){return this._compareCues(y.cue,b.cue)}_insert(y,b){if(!b)return[y,!0];const w=this._compareIntervals(y,b);if(w<0){const[R]=this._insert(y,b.left);b.left=R}else{if(!(w>0))return[b,!1];{const[R]=this._insert(y,b.right);b.right=R}}b.height=1+Math.max(this._getHeight(b.left),this._getHeight(b.right)),b.maxEnd=Math.max(b.maxEnd,y.maxEnd);const I=this._getBalance(b);return I>1?(this._compareIntervals(y,b.left)<0||(b.left=this._leftRotate(b.left)),[this._rightRotate(b),!0]):I<-1?(this._compareIntervals(y,b.right)>0||(b.right=this._rightRotate(b.right)),[this._leftRotate(b),!0]):[b,!0]}_searchRange(y,b,w,I){y&&(this._overlaps(y,b,w)&&I.push(y.cue),y.left&&y.left.maxEnd>=b&&this._searchRange(y.left,b,w,I),y.right&&y.start<=w&&this._searchRange(y.right,b,w,I))}_inorderTraversal(y,b){y&&(this._inorderTraversal(y.left,b),b.push(y.cue),this._inorderTraversal(y.right,b))}_overlaps(y,b,w){if(w===b){const I=b;return y.start<=I&&I<y.end}return y.start<w&&b<y.end}_getHeight(y){return y?y.height:0}_getBalance(y){return y?this._getHeight(y.left)-this._getHeight(y.right):0}_leftRotate(y){const b=y.right,w=b.left;return b.left=y,y.right=w,y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),b.height=1+Math.max(this._getHeight(b.left),this._getHeight(b.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0),b.maxEnd=Math.max(b.end,b.left?b.left.maxEnd:0,b.right?b.right.maxEnd:0),b}_rightRotate(y){const b=y.left,w=b.right;return b.right=y,y.left=w,y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),b.height=1+Math.max(this._getHeight(b.left),this._getHeight(b.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0),b.maxEnd=Math.max(b.end,b.left?b.left.maxEnd:0,b.right?b.right.maxEnd:0),b}_remove(y,b){if(!b)return[null,!1];const w=this._compareCues(y,b.cue);if(w<0){const[I,R]=this._remove(y,b.left);return b.left=I,R&&this._updateNode(b),[b,R]}if(w>0){const[I,R]=this._remove(y,b.right);return b.right=I,R&&this._updateNode(b),[b,R]}if(b.left||b.right){if(b.left){if(b.right){const I=this._findMin(b.right);b.cue=I.cue,b.start=I.start,b.end=I.end;const[R]=this._remove(I.cue,b.right);return b.right=R,this._updateNode(b),[b,!0]}return[b.left,!0]}return[b.right,!0]}return[null,!0]}_findMin(y){for(;y.left;)y=y.left;return y}_updateNode(y){y.height=1+Math.max(this._getHeight(y.left),this._getHeight(y.right)),y.maxEnd=Math.max(y.end,y.left?y.left.maxEnd:0,y.right?y.right.maxEnd:0)}}var Gp=t(7640);const rw=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function iw(v){const y=this.context,b=(0,m.default)(y).getInstance(),w=v.videoModel,I=v.streamInfo,R=v.settings;let M,D,N,$,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G;const be=new Map;function re(Je){const Tt=Je.kind,vt=Je.id!==void 0?Je.id:Je.lang,At=Je.lang,Zt=Je.isTTML,Rn=Je.isEmbedded;return w.addTextTrack(Tt,vt,At,Zt,Rn)}function we(Je,Tt,vt,At,Zt,Rn){let dt=0,wt=0;Je/Tt>vt/At?(wt=Tt,dt=wt/At*vt):(dt=Je,wt=dt/vt*At);let jt=0,He=0,tt=0,St=0;return dt/wt>Zt?(St=wt,tt=wt*Zt):(tt=dt,St=dt/Zt),jt=(Je-tt)/2,He=(Tt-St)/2,Rn?{x:jt+.1*tt,y:He+.1*St,w:.8*tt,h:.8*St}:{x:jt,y:He,w:tt,h:St}}function Ee(Je,Tt){const vt=w.getClientWidth(),At=w.getClientHeight(),Zt=w.getVideoWidth(),Rn=w.getVideoHeight(),dt=w.getVideoRelativeOffsetTop(),wt=w.getVideoRelativeOffsetLeft();if(Zt!==0&&Rn!==0){let jt=Zt/Rn,He=!1;Je.isFromCEA608&&(jt=3.5/3,He=!0);const tt=we.call(this,vt,At,Zt,Rn,jt,He),St=tt.w,at=tt.h,Ct=tt.x,Mt=tt.y;if(St!=K||at!=Z||Ct!=L||Mt!=F||Tt){if(L=Ct+wt,F=Mt+dt,K=St,Z=at,ee){const lt=ee.style;lt&&(lt.left=L+"px",lt.top=F+"px",lt.width=K+"px",lt.height=Z+"px",lt.zIndex=ue&&document[ue]||me?J:null,b.trigger(g.default.CAPTION_CONTAINER_RESIZE))}const ke=Je.activeCues;if(ke){const lt=ke.length;for(let Ot=0;Ot<lt;++Ot){const zt=ke[Ot];zt.scaleCue(zt)}}}}}function Ie(Je){const Tt=K,vt=Z;let At,Zt,Rn,dt,wt;if(Je.cellResolution){const jt=[Tt/Je.cellResolution[0],vt/Je.cellResolution[1]];if(Je.linePadding){for(At in Je.linePadding)if(Je.linePadding.hasOwnProperty(At)){Zt=(Je.linePadding[At]*jt[0]).toString();const He=document.getElementsByClassName("spanPadding");for(let tt=0;tt<He.length;tt++)He[tt].style.cssText=He[tt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),He[tt].style.cssText=He[tt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(Je.fontSize){for(At in Je.fontSize)if(Je.fontSize.hasOwnProperty(At)){Je.fontSize[At][0]==="%"?Rn=Je.fontSize[At][1]/100:Je.fontSize[At][0]==="c"&&(Rn=Je.fontSize[At][1]),Zt=(Rn*jt[1]).toString(),wt=At!=="defaultFontSize"?document.getElementsByClassName(At):document.getElementsByClassName("paragraph");for(let He=0;He<wt.length;He++)wt[He].style.cssText=wt[He].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(Je.lineHeight){for(At in Je.lineHeight)if(Je.lineHeight.hasOwnProperty(At)){Je.lineHeight[At][0]==="%"?dt=Je.lineHeight[At][1]/100:Je.fontSize[At][0]==="c"&&(dt=Je.lineHeight[At][1]),Zt=(dt*jt[1]).toString(),wt=document.getElementsByClassName(At);for(let He=0;He<wt.length;He++)wt[He].style.cssText=wt[He].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(Je.isd){let jt=document.getElementById(Je.cueID);jt&&ee.removeChild(jt),Ce(Je)}}function Fe(Je,Tt){const vt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,At=/^#(.*)$/;if(vt.test(Tt)){const Zt=vt.exec(Tt),Rn=parseInt(Zt[4],10)-1;return"data:image/png;base64,"+btoa(Je.images[Rn])}if(At.test(Tt)){const Zt=At.exec(Tt)[1];return"data:image/png;base64,"+Je.embeddedImages[Zt]}return Tt}function Ce(Je){if(ee){wn.call(this);const Tt=document.createElement("div");ee.appendChild(Tt),ve=(0,Gp.renderHTML)(Je.isd,Tt,function(vt){return Fe(Je,vt)},ee.clientHeight,ee.clientWidth,R.get().streaming.text.imsc.displayForcedOnlyMode,function(vt){D.info("renderCaption :",vt)},ve,R.get().streaming.text.imsc.enableRollUp),Tt.id=Je.cueID,b.trigger(g.default.CAPTION_RENDERED,{captionDiv:Tt,currentTrackIdx:k})}}function Q(Je,Tt){const vt=Tt.findCuesInRange(Je.startTime-.1,Je.endTime+.1);for(const At of vt)if(ne(Je,At)&&fe(Je,At,rw)||ne(At,Je)&&fe(Je,At,rw))return At;return null}function ne(Je,Tt){return!!Tt&&Tt.endTime>=Je.startTime}function fe(Je,Tt,vt){for(let At=0;At<vt.length;At++){const Zt=vt[At];if(JSON.stringify(Je[Zt])!==JSON.stringify(Tt[Zt]))return!1}return!0}function ae(Je,Tt){Tt&&Tt.forEach(vt=>{vt.kind&&vt.kind==="image"&&(vt.src=Fe(Je,vt.src)),ae(Je,vt.contents)})}function oe(Je,Tt,vt){const At=Et(Je),Zt=be.get(At),Rn=R.get().streaming.text.dispatchForManualRendering;if(At&&Zt&&Array.isArray(vt)&&vt.length!==0){for(let jt=0;jt<vt.length;jt++){let He=null;const tt=vt[jt];if(At.cellResolution=tt.cellResolution,At.isFromCEA608=tt.isFromCEA608,isNaN(tt.start)||isNaN(tt.end)||(Rn?He=ge(tt,Tt):Oe(tt)&&ee?He=Te(tt,Tt,At):tt.data&&(He=Ae(tt,Tt,At))),He){if(R.get().streaming.text.extendSegmentedCues){const St=Q(He,Zt.allCues);St&&(Zt.allCues.removeCue(St),wt=He,(dt=St).startTime=Math.min(dt.startTime,wt.startTime),dt.endTime=Math.max(dt.endTime,wt.endTime),He=dt)}Zt.allCues.addCue(He)}else D.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}var dt,wt;fn()}}function ge(Je,Tt){let vt=De(Je,Tt);return vt.onenter=function(){Oe(Je)&&G&&G.cueID!==vt.cueID&&ye(G),delete vt.type,G=vt,V(vt)},vt.onexit=function(){ye(vt),G=null},vt}function V(Je){b.trigger(g.default.CUE_ENTER,Je)}function ye(Je){b.trigger(g.default.CUE_EXIT,{cueID:Je.cueID})}function Te(Je,Tt,vt){const At=this;let Zt=De(Je,Tt);return ee.style.left=L+"px",ee.style.top=F+"px",ee.style.width=K+"px",ee.style.height=Z+"px",Zt.onenter=function(){vt.mode===h.default.TEXT_SHOWING&&(this.isd?(B?requestAnimationFrame(()=>Ce(this)):Ce(this),D.debug("Cue enter id:"+this.cueID)):(ee.appendChild(this.cueHTMLElement),Ie.call(At,this),b.trigger(g.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:k})))},Zt.onexit=function(){if(ee){const Rn=ee.childNodes;for(let dt=0;dt<Rn.length;++dt)Rn[dt].id===this.cueID&&(D.debug("Cue exit id:"+Rn[dt].id),ee.removeChild(Rn[dt]),--dt)}},Zt}function Ae(Je,Tt,vt){let At=De(Je,Tt);if(Je.styles)try{Je.styles.align!==void 0&&"align"in At&&(At.align=Je.styles.align),Je.styles.line!==void 0&&"line"in At&&(At.line=Je.styles.line),Je.styles.lineAlign!==void 0&&(At.lineAlign=Je.styles.lineAlign),Je.styles.snapToLines!==void 0&&"snapToLines"in At&&(At.snapToLines=Je.styles.snapToLines),Je.styles.position!==void 0&&"position"in At&&(At.position=Je.styles.position),Je.styles.positionAlign!==void 0&&(At.positionAlign=Je.styles.positionAlign),Je.styles.size!==void 0&&"size"in At&&(At.size=Je.styles.size)}catch(Zt){D.error(Zt)}return At.onenter=function(){vt.mode===h.default.TEXT_SHOWING&&b.trigger(g.default.CAPTION_RENDERED,{currentTrackIdx:k})},At}function Oe(Je){return Je.type==="html"}function De(Je,Tt){return Oe(Je)?function(vt,At){let Zt=new N(vt.start+At,vt.end+At,"");return Zt.cueHTMLElement=vt.cueHTMLElement,Zt.isd=vt.isd,Zt.images=vt.images,Zt.embeddedImages=vt.embeddedImages,Zt.cueID=vt.cueID,Zt.scaleCue=Ie.bind(self),Zt.cellResolution=vt.cellResolution,Zt.lineHeight=vt.lineHeight,Zt.linePadding=vt.linePadding,Zt.fontSize=vt.fontSize,Zt.isd&&ae(Zt,Zt.isd.contents),Zt}(Je,Tt):function(vt,At){let Zt=new N(vt.start-At,vt.end-At,vt.data);return Zt.cueID=st.default.generateUuid(),Zt}(Je,Tt)}function Ge(Je){if(Y){const Tt=Y.childNodes;for(let vt=0;vt<Tt.length;++vt)Tt[vt].id===Je.cueID&&(Y.removeChild(Tt[vt]),--vt)}}function ot(){const Je=w.getTextTracks(),Tt=[];for(const vt of Je)vt.manualMode===h.default.TEXT_SHOWING&&Tt.push(vt);return Tt}function Et(Je){return Je>=0&&$[Je]?w.getTextTrack($[Je].kind,$[Je].id,$[Je].lang,$[Je].isTTML,$[Je].isEmbedded):null}function xt(Je){if(Je===k)return;k=Je;const Tt=Et(k);tn.call(this,Tt),se&&(clearInterval(se),se=null),Tt&&Tt.renderingType==="html"&&(Ee.call(this,Tt,!0),window.ResizeObserver?(H=new window.ResizeObserver(()=>{Ee.call(this,Tt,!0)}),H.observe(w.getElement())):se=setInterval(Ee.bind(this,Tt),500))}function tn(Je){wn.call(this),Je&&Je.renderingType==="html"?Ln.call(this):Mn.call(this)}function kt(Je,Tt,vt,At=!0){return!!Je&&(isNaN(Tt)||(At?Je.startTime:Je.endTime)>=Tt)&&(isNaN(vt)||(At?Je.endTime:Je.startTime)<=vt)}function nn(Je,Tt,vt,At=!0){if(!Je)return;if(Je.cues&&Je.cues.length>0)for(let Rn=Je.cues.length-1;Rn>=0;Rn--)kt(Je.cues[Rn],Tt,vt,At)&&(Je.cues[Rn].onexit&&Je.cues[Rn].onexit(),Je.removeCue(Je.cues[Rn]));const Zt=be.get(Je);if(Zt){const Rn=Zt.activeCues,dt=Rn.filter(wt=>wt.startTime>=Tt&&wt.endTime<=vt);dt.forEach(wt=>{R.get().streaming.text.dispatchForManualRendering?ye(wt):Ge(wt)}),Zt.activeCues=Rn.filter(wt=>!dt.includes(wt))}}function fn(){for(const Je of be.values())Je.lastCueWindowUpdate=-1/0}function Ln(){let Je=document.getElementById("native-cue-style");if(Je)return;Je=document.createElement("style"),Je.id="native-cue-style",document.head.appendChild(Je);const Tt=Je.sheet,vt=w.getElement();try{vt&&(vt.id?Tt.insertRule("#"+vt.id+"::cue {background: transparent}",0):vt.classList.length!==0?Tt.insertRule("."+vt.className+"::cue {background: transparent}",0):Tt.insertRule("video::cue {background: transparent}",0))}catch(At){D.info(""+At.message)}}function Mn(){const Je=document.getElementById("native-cue-style");Je&&document.head.removeChild(Je)}function wn(){if(ee)for(;ee.firstChild;)ee.removeChild(ee.firstChild)}function bn(){return $}return M={addCaptions:oe,addTextTrackInfo:function(Je){$.push(Je)},createTracks:function(){$.sort(function(Tt,vt){return Tt.index-vt.index}),ee=w.getTTMLRenderingDiv(),Y=w.getVttRenderingDiv();let Je=-1;for(let Tt=0;Tt<$.length;Tt++){const vt=re($[Tt]);q.push(vt),$[Tt].defaultTrack&&(vt.default=!0,Je=Tt);const At=Et(Tt);At&&(At.mode=h.default.TEXT_SHOWING,ee&&($[Tt].isTTML||$[Tt].isEmbedded)?At.renderingType="html":At.renderingType="default",be.set(At,{allCues:new nz,lastCueWindowUpdate:-1/0,activeCues:[]})),oe(Tt,0,$[Tt].captionData),b.trigger(g.default.TEXT_TRACK_ADDED)}if(xt.call(this,Je),Je>=0){let Tt=function(){const vt=Et(Je);vt&&vt.renderingType==="html"&&Ee.call(this,vt,!0),b.off(g.default.PLAYBACK_METADATA_LOADED,Tt,this)};b.on(g.default.PLAYBACK_METADATA_LOADED,Tt,this);for(let vt=0;vt<$.length;vt++){const At=Et(vt);if(At){const Zt=R.get().streaming.text.dispatchForManualRendering;At.mode=vt!==Je||Zt?h.default.TEXT_HIDDEN:h.default.TEXT_SHOWING,At.manualMode=vt===Je?h.default.TEXT_SHOWING:h.default.TEXT_HIDDEN}}}b.trigger(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:k,tracks:$,streamId:I.id})},deleteAllTextTracks:function(){const Je=q?q.length:0;for(let Tt=0;Tt<Je;Tt++){const vt=Et(Tt);vt&&nn.call(this,vt,I.start,I.start+I.duration,!1)}q=[],$=[],se&&(clearInterval(se),se=null),H&&w&&(H.unobserve(w.getElement()),H=null),k=-1,wn.call(this),be.clear()},deleteCuesFromTrackIdx:function(Je,Tt,vt){const At=Et(Je);At&&nn(At,Tt,vt)},disableManualTracks:function(){const Je=ot();if(Je&&Je.length>0){const Tt=Je[0],vt=be.get(Tt);if(!vt)return;vt.activeCues.forEach(At=>{R.get().streaming.text.dispatchForManualRendering?ye(At):Ge(At)}),vt.activeCues=[]}},getCurrentTrackIdx:function(){return k},getCurrentTextTrackInfo:function(){return $[k]},getStreamId:function(){return I.id},getTextTrackInfos:bn,getTrackIdxForId:function(Je){let Tt=-1;for(let vt=0;vt<$.length;vt++)if($[vt].id===Je){Tt=vt;break}return Tt},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(N=window.VTTCue||window.TextTrackCue,$=[],q=[],k=-1,L=0,F=0,K=0,Z=0,ee=null,Y=null,se=null,me=!1,J=2147483647,ve=null,B="requestAnimationFrame"in window,be.clear(),document.fullscreenElement!==void 0?ue="fullscreenElement":document.webkitIsFullScreen!==void 0?ue="webkitIsFullScreen":document.msFullscreenElement?ue="msFullscreenElement":document.mozFullScreen&&(ue="mozFullScreen"))},manualCueProcessing:function(Je){const Tt=ot();if(Tt&&Tt.length>0){const vt=Tt[0],At=be.get(vt);if(!At)return;const Zt=At.activeCues,Rn=At.allCues.findCuesAtTime(Je),dt=Zt.filter(jt=>!Rn.includes(jt)),wt=Rn.filter(jt=>!Zt.includes(jt));dt.forEach(jt=>{R.get().streaming.text.dispatchForManualRendering?ye(jt):Ge(jt)}),wt.forEach(jt=>{R.get().streaming.text.dispatchForManualRendering?V(jt):WebVTT.processCues(window,[jt],Y,jt.cueID)}),At.activeCues=Rn}},setCurrentTrackIdx:xt,setModeForTrackIdx:function(Je,Tt){const vt=Et(Je);vt&&vt.mode!==Tt&&(vt.mode=Tt),vt&&vt.manualMode!==Tt&&(vt.manualMode=Tt)},updateTextTrackWindow:function(Je,Tt=!1){const vt=bn(),At=R.get().streaming.text.webvtt.customRenderingEnabled;for(let Zt=0;Zt<vt.length;Zt++){const Rn=vt[Zt],dt=Et(Zt),wt=be.get(dt);if(!dt||!wt||!Rn.isEmbedded&&At)continue;const{bufferToKeep:jt,bufferPruningInterval:He}=R.get().streaming.buffer,tt=Date.now();if((tt-wt.lastCueWindowUpdate)/1e3<He&&!Tt)continue;const St=w.getPlaybackRate()||1,at=Math.max(0,Je-jt/St),Ct=Je+2*He/St;if(dt.cues)for(;dt.cues.length>0;)dt.removeCue(dt.cues[0]);dt.mode!==h.default.TEXT_DISABLED&&wt.allCues.findCuesInRange(at,Ct).forEach(Mt=>{dt.addCue(Mt)}),wt.lastCueWindowUpdate=tt}},invalidateCueWindow:fn},D=(0,l.default)(y).getInstance().getLogger(M),M}iw.__dashjs_factory_name="TextTracks";var rz=r.default.getClassFactory(iw);function aw(){const v=this.context;let y,b,w,I,R,M;function D(k){const L=k.split(":"),F=L.length-1;return k=60*parseInt(L[F-1],10)+parseFloat(L[F]),F===2&&(k+=3600*parseInt(L[0],10)),k}function N(k){const L=k.split(I),F=L[1].split(M);return F.shift(),L[1]=F[0],F.shift(),{cuePoints:L,styles:$(F)}}function $(k){const L={};return k.forEach(function(F){const K=F.split(":");if(K.length>1){const[Z,ee]=K;switch(Z){case"align":case"A":L.align=ee;break;case"line":case"L":const[Y,se]=ee.split(","),ue=Y.endsWith("%");L.line=Y==="auto"?Y:parseInt(Y,10),ue&&(L.snapToLines=!1),se&&(L.lineAlign=se);break;case"position":case"P":const[me,ve]=ee.split(",");L.position=parseInt(me,10),ve&&(L.positionAlign=ve);break;case"size":case"S":L.size=parseInt(ee,10)}}}),L}function q(k,L){let F,K=L,Z="",ee="";for(;k[K]!==""&&K<k.length;)K++;if(F=K-L,F>1)for(let Y=0;Y<F;Y++){if(ee=k[L+Y],ee.match(I)){Z="";break}Z+=ee,Y!==F-1&&(Z+=`
`)}else ee=k[L],ee.match(I)||(Z=ee);return Z}return y={parse:function(k){const L=[];let F,K;if(!k)return L;F=(k=k.split(w)).length,K=-1;for(let Z=0;Z<F;Z++){let ee=k[Z];if(ee.length>0&&ee!=="WEBVTT"&&ee.match(I)){const Y=N(ee),se=Y.cuePoints,ue=Y.styles,me=q(k,Z+1),ve=D(se[0].replace(R,"")),J=D(se[1].replace(R,""));!isNaN(ve)&&!isNaN(J)&&ve>=K&&J>ve?me!==""?(K=ve,L.push({start:ve,end:J,data:me,styles:ue})):b.error("Skipping cue due to empty/malformed cue text"):b.error("Skipping cue due to incorrect cue timing")}}return L},getCaptionStyles:$},b=(0,l.default)(v).getInstance().getLogger(y),w=/(?:\r\n|\r|\n)/gm,I=/-->/,R=/(^[\s]+|[\s]+$)/g,M=/\s\b/g,y}aw.__dashjs_factory_name="VTTParser";var iz=r.default.getSingletonFactory(aw);function sw(){let v,y;return v={parse:function(b){let w=[];return y.oncue=function(I){I.start=I.startTime,I.end=I.endTime,I.data=I.text,I.styles={align:I.align,line:I.line,position:I.position,size:I.size},w.push(I)},y.parse(b),w}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(y=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),v}sw.__dashjs_factory_name="VttCustomRenderingParser";var az=r.default.getSingletonFactory(sw);function ow(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I=0;function R(){const M="cue_TTML_"+I;return I++,M}return b={parse:function(M,D,N,$,q){let k="";const L=[];let F,K,Z;const ee={},Y={};let se="",ue="",me={onOpenTag:function(H,B,G){if(G[" imagetype"]&&!G[" imageType"]&&(y.trigger(g.default.CONFORMANCE_VIOLATION,{level:ou.LEVELS.ERROR,event:ou.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),G[" imageType"]=G[" imagetype"]),B==="image"&&(H==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||H==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!G[" imageType"]||G[" imageType"].value!=="PNG")return void w.warn("smpte-tt imageType != PNG. Discarded");se=G["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){se&&(Y[se]=ue.trim()),ue="",se=""},onText:function(H){se&&(ue+=H)}};if(!M)throw k="no ttml data to parse",new Error(k);ee.data=M,y.trigger(f.default.TTML_TO_PARSE,ee);let ve=(0,Gp.fromXML)(ee.data,function(H){k=H},me);y.trigger(f.default.TTML_PARSED,{ttmlString:ee.data,ttmlDoc:ve});const J=ve.getMediaTimeEvents();for(Z=0;Z<J.length;Z++){let H=(0,Gp.generateISD)(ve,J[Z],function(B){k=B});H.contents.some(B=>B.contents.length)&&(F=J[Z]+D,K=J[Z+1]+D,F<K&&L.push({start:F,end:K,type:"html",cueID:R(),isd:H,images:q,embeddedImages:Y}))}if(k!=="")throw w.error(k),new Error(k);return L}},w=(0,l.default)(v).getInstance().getLogger(b),b}ow.__dashjs_factory_name="TTMLParser";var sz=r.default.getSingletonFactory(ow);function lw(v){let y=this.context;const b=(0,m.default)(y).getInstance(),w=or(y).getInstance(),I=v.adapter,R=v.baseURLController,M="error",D="loaded",N="unloaded";let $,q,k;function L(Z,ee){let Y,se,ue=!1;if(R.resolve()){const J=I.getVoRepresentations(Z);J&&J.length>0&&(Y=R.resolve(J[0].path).url)}const me=Z.essentialProperties.filter(J=>J.schemeIdUri&&J.schemeIdUri===h.default.FONT_DOWNLOAD_DVB_SCHEME),ve=Z.supplementalProperties.filter(J=>J.schemeIdUri&&J.schemeIdUri===h.default.FONT_DOWNLOAD_DVB_SCHEME);me.length>0?(ue=!0,se=me):se=ve,se.forEach(J=>{if(function(G){return!(!(G.value&&parseInt(G.value)===1&&G.dvbUrl&&G.dvbUrl.length>0&&G.dvbFontFamily&&G.dvbFontFamily.length>0&&G.dvbMimeType)||G.dvbMimeType!==h.default.OFF_MIMETYPE&&G.dvbMimeType!==h.default.WOFF_MIMETYPE)}(J)){let G=(H=J.dvbUrl,B=Y,w.isPathAbsolute(H)?H:w.isRelative(H)?B?w.resolve(H,B):w.resolve(H):H);k.push({fontFamily:J.dvbFontFamily,url:G,mimeType:J.dvbMimeType,trackId:Z.id,streamId:ee,isEssential:ue,status:N,fontFace:new FontFace(J.dvbFontFamily,`url(${G})`,{display:"swap"})})}var H,B})}function F(Z,ee){const Y=k[Z];k[Z]={...Y,status:ee}}function K(){k=[]}return $={addFontsFromTracks:function(Z,ee){if(Z&&Array.isArray(Z)&&ee)for(let Y=0;Y<Z.length;Y++)L(Z[Y],ee)},downloadFonts:function(){for(let Z=0;Z<k.length;Z++){let ee=k[Z];document.fonts.add(ee.fontFace),b.trigger(g.default.DVB_FONT_DOWNLOAD_ADDED,ee),ee.fontFace.load().then(()=>{F(Z,D),b.trigger(g.default.DVB_FONT_DOWNLOAD_COMPLETE,ee)},Y=>{F(Z,M),q.debug("Font download error: ",Y),b.trigger(g.default.DVB_FONT_DOWNLOAD_FAILED,ee)})}},getFonts:function(){return k},getFontsForTrackId:function(Z){return k.filter(ee=>ee.trackId&&ee.trackId===Z)},reset:function(){(function(){for(const Z of k){let ee=document.fonts.delete(Z.fontFace);q.debug(`Removal of fontFamily: ${Z.fontFamily} was ${ee?"successful":"unsuccessful"}`)}})(),K()}},q=(0,l.default)(y).getInstance().getLogger($),K(),$}lw.__dashjs_factory_name="DVBFonts";var oz=r.default.getClassFactory(lw);function uw(v){let y=this.context;const b=v.adapter,w=v.errHandler,I=v.manifestModel,R=v.mediaController,M=v.baseURLController,D=v.videoModel,N=v.settings;let $,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J;function H(ae){if(J.error(`Could not download ${ae.isEssential?"an essential":"a"} font - fontFamily: ${ae.fontFamily}, url: ${ae.url}`),ae.isEssential){let oe=L[ae.streamId].getTrackIdxForId(ae.trackId);L[ae.streamId].setModeForTrackIdx(oe,h.default.TEXT_DISABLED)}}function B(ae){if(J.debug(`Successfully downloaded ${ae.isEssential?"an essential":"a"} font - fontFamily: ${ae.fontFamily}, url: ${ae.url}`),ae.isEssential){let oe=L[ae.streamId].getTrackIdxForId(ae.trackId);oe===L[ae.streamId].getCurrentTrackIdx()?L[ae.streamId].setModeForTrackIdx(oe,h.default.TEXT_SHOWING):L[ae.streamId].setModeForTrackIdx(oe,h.default.TEXT_HIDDEN)}}function G(ae){let oe=ae.tracks,ge=ae.index;const V=ae.streamId;if(N.get().streaming.text.defaultEnabled===!1&&!Ie()||me)Fe(V,-1);else{const ye=R.getCurrentTrackFor(h.default.TEXT,V);if(ye){const Te={lang:ye.lang,role:ye.roles[0],index:ye.index,codec:ye.codec,accessibility:ye.accessibility[0]};oe.some((Ae,Oe)=>{if(R.matchSettings(Te,Ae))return Fe(V,Oe),ge=Oe,!0})}Y=!1}q[V].lastEnabledIndex=ge,ee.trigger(g.default.TEXT_TRACKS_ADDED,{enabled:Ie(),index:ge,tracks:oe,streamId:V}),ue=!0,ve.addFontsFromTracks(oe,V),ve.getFonts().forEach(ye=>{if(ye.isEssential){let Te=L[ye.streamId].getTrackIdxForId(ye.trackId);L[ye.streamId].setModeForTrackIdx(Te,h.default.TEXT_DISABLED)}}),ve.downloadFonts()}function be(ae){try{const oe=ae.streamId,ge=L[oe];if(!ge||isNaN(ae.time))return;ge.updateTextTrackWindow(ae.time),N.get().streaming.text.webvtt.customRenderingEnabled&&ge.manualCueProcessing(ae.time)}catch{}}function re(ae){try{const oe=ae.streamId;if(!L[oe])return;L[oe].disableManualTracks()}catch{}}function we(ae){try{const oe=L[ae.streamId];if(!oe)return;const ge=D.getTime()||0;oe.updateTextTrackWindow(ge,!0)}catch(oe){J.error(oe)}}function Ee(ae){try{if(!ae||!ae.mediaType||ae.mediaType!==h.default.AUDIO||!ae.currentMediaInfo)return;const oe=L[ae.streamId].getCurrentTextTrackInfo();let ge=NaN;Y?ge=Ce(ae.streamId):Q(oe)&&ae.currentMediaInfo.lang&&ae.currentMediaInfo.lang!==oe.lang&&(ge=Ce(ae.streamId),isNaN(ge)&&(ge=-1)),isNaN(ge)||Fe(ae.streamId,ge)}catch(oe){J.error(oe)}}function Ie(){let ae=!0;return Y&&!se&&(ae=!1),ae}function Fe(ae,oe){Y=oe===-1,Y&&R&&R.saveTextSettingsDisabled();let ge=ne(ae);if(ge===oe||!L[ae])return;L[ae].disableManualTracks(),L[ae].invalidateCueWindow();let V=L[ae].getCurrentTextTrackInfo(),ye=V?D.getTextTrack(V.kind,V.id,V.lang,V.isTTML,V.isEmbedded):null;ye&&ye.mode!==h.default.TEXT_DISABLED&&L[ae].setModeForTrackIdx(ge,h.default.TEXT_HIDDEN),L[ae].setCurrentTrackIdx(oe),V=L[ae].getCurrentTextTrackInfo();const Te=N.get().streaming.text.dispatchForManualRendering;if(V&&!Te&&V.mode!==h.default.TEXT_DISABLED&&L[ae].setModeForTrackIdx(oe,h.default.TEXT_SHOWING),V&&V.isFragmented&&!V.isEmbedded)(function(Ae,Oe,De){if(!k[Ae])return;let Ge=k[Ae].getConfig().fragmentedTracks;for(let ot=0;ot<Ge.length;ot++){let Et=Ge[ot];if(Oe.lang===Et.lang&&(Et.id?Oe.id===Et.id:Oe.index===Et.index)){let xt=R.getCurrentTrackFor(h.default.TEXT,Ae);(Et.id?xt.id!==Et.id:xt.index!==Et.index)?(L[Ae].deleteCuesFromTrackIdx(De),k[Ae].setCurrentFragmentedTrackIdx(ot)):De===-1&&ee.trigger(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Ae,mediaType:h.default.TEXT})}}})(ae,V,ge);else if(V&&!V.isFragmented)(function(Ae,Oe){ee.trigger(f.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Oe},{streamId:Ae,mediaType:h.default.TEXT})})(ae,V);else if(!V&&Y){const Ae=Ce(ae);return void(isNaN(Ae)||Fe(ae,Ae))}R.setTrack(V)}function Ce(ae){const oe=function(ye){return L[ye].getTextTrackInfos().filter((Te,Ae)=>(Te._indexToSelect=Ae,!!(Te&&Te.roles&&Te.roles.length>0)&&Q(Te)))}(ae);if(!oe||oe.length<=0)return NaN;const ge=R.getCurrentTrackFor(h.default.AUDIO,ae);if(!ge)return NaN;const V=oe.find(ye=>ge.lang===ye.lang);return V?V._indexToSelect:NaN}function Q(ae){return!(!ae||!ae.roles||ae.roles.length===0)&&ae.roles.some(oe=>oe.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&oe.value===xe.default.FORCED_SUBTITLE)}function ne(ae){return L[ae].getCurrentTrackIdx()}function fe(){k={},L={},q={},Y=!0,ue=!1,me=!1}return $={addEmbeddedTrack:function(ae,oe){const ge=ae.id;k[ge]&&k[ge].addEmbeddedTrack(oe)},addMediaInfosToBuffer:function(ae,oe,ge,V=null){const ye=ae.id;k[ye]&&k[ye].addMediaInfos(oe,ge,V)},createTracks:function(ae){const oe=ae.id;L[oe]&&L[oe].createTracks()},deactivateStream:function(ae){if(!ae)return;const oe=ae.id;k[oe]&&k[oe].resetMediaInfos(),L[oe]&&L[oe].deleteAllTextTracks()},enableForcedTextStreaming:function(ae){return(0,ht.checkParameterType)(ae,"boolean"),se=ae,!0},enableText:function(ae,oe){return(0,ht.checkParameterType)(oe,"boolean"),Ie()!==oe&&(oe&&Fe(ae,q[ae].lastEnabledIndex),oe||(q[ae].lastEnabledIndex=ne(ae),ue?Fe(ae,-1):me=!0)),!0},getAllTracksAreDisabled:function(){return Y},getCurrentTrackIdx:ne,getTextSourceBuffer:function(ae){const oe=ae.id;if(k&&k[oe])return k[oe]},initialize:function(){ve=oz(y).create({adapter:b,baseURLController:M}),ee.on(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,G,$),ee.on(f.default.DVB_FONT_DOWNLOAD_FAILED,H,$),ee.on(f.default.DVB_FONT_DOWNLOAD_COMPLETE,B,$),ee.on(f.default.MEDIAINFO_UPDATED,Ee,$),ee.on(f.default.PLAYBACK_TIME_UPDATED,be,$),N.get().streaming.text.webvtt.customRenderingEnabled&&ee.on(f.default.PLAYBACK_SEEKING,re,$),ee.on(f.default.PLAYBACK_SEEKED,we,$)},initializeForStream:function(ae){const oe=ae.id,ge=rz(y).create({videoModel:D,settings:N,streamInfo:ae});ge.initialize(),L[oe]=ge;const V=tz(y).create({errHandler:w,adapter:b,dvbFonts:ve,manifestModel:I,mediaController:R,videoModel:D,textTracks:ge,vttParser:F,vttCustomRenderingParser:K,ttmlParser:Z,streamInfo:ae,settings:N});V.initialize(),k[oe]=V,q[oe]={},q[oe].lastEnabledIndex=-1},isTextEnabled:Ie,reset:function(){Object.keys(k).forEach(ae=>{k[ae].resetEmbedded(),k[ae].reset()}),ve.reset(),fe(),ee.off(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,G,$),ee.off(f.default.DVB_FONT_DOWNLOAD_FAILED,H,$),ee.off(f.default.DVB_FONT_DOWNLOAD_COMPLETE,B,$),ee.off(f.default.MEDIAINFO_UPDATED,Ee,$),ee.off(f.default.PLAYBACK_TIME_UPDATED,be,$),N.get().streaming.text.webvtt.customRenderingEnabled&&ee.off(f.default.PLAYBACK_SEEKING,re,$),ee.off(f.default.PLAYBACK_SEEKED,we,$)},setTextTrack:Fe,clearDataForStream:function(ae){k[ae]&&(k[ae].resetEmbedded(),k[ae].reset(),delete k[ae]),L[ae]&&(L[ae].deleteAllTextTracks(),delete L[ae]),q[ae]&&delete q[ae]}},se=!1,ue=!1,me=!1,F=iz(y).getInstance(),K=az(y).getInstance(),Z=sz(y).getInstance(),ee=(0,m.default)(y).getInstance(),J=(0,l.default)(y).getInstance().getLogger($),fe(),$}uw.__dashjs_factory_name="TextController";var lz=r.default.getClassFactory(uw);function cw(v){v=v||{};const y=this.context,b=(0,l.default)(y).getInstance(),w=v.settings,I=(0,m.default)(y).getInstance();let R,M,D,N,$,q;function k(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function L(Z,ee,Y,se){const ue=Math.pow(.5,Y/se.fast);Z.fastEstimate=(1-ue)*ee+ue*Z.fastEstimate;const me=Math.pow(.5,Y/se.slow);Z.slowEstimate=(1-me)*ee+me*Z.slowEstimate,Z.totalWeight+=Y}function F(){R={},M={},D={},N={}}const K={addEntry:function(Z,ee){try{if(!(Z&&ee&&ee.trace&&ee.trace.length))return;(function(ue){R[ue]=R[ue]||[],M[ue]=M[ue]||[],D[ue]=D[ue]||{fastEstimate:0,slowEstimate:0,totalWeight:0},N[ue]=N[ue]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(Z);const Y=ee.tresponse.getTime()-ee.trequest.getTime()||1;let se=function(ue,me){return ue._fileLoaderType&&ue._fileLoaderType===h.default.FILE_LOADER_TYPES.FETCH?function(ve){const J=ve.trace.reduce((G,be)=>G+be.b[0],0),H=ve.trace.reduce((G,be)=>G+be.d,0);let B=NaN;return w.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(B=k()),isNaN(B)&&(B=Math.round(8*J/H)),{downloadedBytes:J,value:B,downloadTimeInMs:H}}(ue):function(ve,J){let H=NaN,B=NaN,G=!1;if(w.get().streaming.abr.throughput.useResourceTimingApi&&ve._resourceTimingValues)H=ve._resourceTimingValues.transferSize,B=ve._resourceTimingValues.responseEnd-ve._resourceTimingValues.responseStart,G=!0;else{if(ve.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};H=ve.trace.reduce((re,we)=>re+we.b[0],0)-ve.trace[0].b[0],B=Math.max(ve.trace.reduce((re,we)=>re+we.d,0)-ve.trace[0].d,1)}let be=NaN;if(!G&&w.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(be=k()),isNaN(be)){const re=w.get().streaming.abr.throughput.useDeadTimeLatency?B:B+J;be=Math.round(8*H/re)}return{downloadedBytes:H,value:be,downloadTimeInMs:B}}(ue,me)}(ee,Y);if(se.latencyInMs=Y,isNaN(se.value)||!isFinite(se.value))return;if(ee.cmsd){const ue=ee.cmsd.dynamic&&ee.cmsd.dynamic.etp?ee.cmsd.dynamic.etp:null;if(ue){const me=w.get().streaming.cmsd.abr.etpWeightRatio;me>0&&me<=1&&(se.value=se.value*(1-me)+ue*me)}}if(function(ue,me,ve){return w.get().streaming.abr.throughput.useResourceTimingApi&&ve._resourceTimingValues?ve._resourceTimingValues.transferSize===0&&ve._resourceTimingValues.decodedBodySize>0:!isNaN(me)&&(ue===h.default.VIDEO?me<w.get().streaming.cacheLoadThresholds[h.default.VIDEO]:ue===h.default.AUDIO?me<w.get().streaming.cacheLoadThresholds[h.default.AUDIO]:void 0)}(Z,ee._tfinish.getTime()-ee.trequest.getTime(),ee))return void q.debug(`${Z} Assuming segment ${ee.url} came from cache, ignoring it for throughput calculation`);q.debug(`Added throughput entry for ${Z}: ${se.value} kbit/s`),se.serviceLocation=ee._serviceLocation,R[Z].push(se),M[Z].push({value:Y}),function(ue){R[ue].length>w.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&R[ue].shift(),M[ue].length>w.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&M[ue].shift()}(Z),I.trigger(g.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:se}),ee.type!==he.HTTPRequest.MPD_TYPE&&(L(D[Z],se.value,w.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*se.downloadTimeInMs,$.bandwidthHalfLife),L(N[Z],Y,1,$.latencyHalfLife))}catch(Y){q.error(Y)}},getThroughputDict:function(Z){return Z?R[Z]:R},getEwmaThroughputDict:function(Z){return Z?D[Z]:D},getEwmaLatencyDict:function(Z){return Z?N[Z]:N},getEwmaHalfLife:function(){return $},getLatencyDict:function(Z){return Z?M[Z]:M},reset:F};return q=b.getLogger(K),$={bandwidthHalfLife:{fast:w.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:w.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:w.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:w.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},F(),K}cw.__dashjs_factory_name="ThroughputModel";var uz=r.default.getClassFactory(cw);function dw(){const v=this.context,y=(0,m.default)(v).getInstance();let b,w,I;function R(){performance.clearResourceTimings()}function M(ue){ue.metric!==o.HTTP_REQUEST||!ue.value||ue.value.type!==he.HTTPRequest.MPD_TYPE&&(ue.value.type!==he.HTTPRequest.MEDIA_SEGMENT_TYPE||ue.mediaType!==h.default.AUDIO&&ue.mediaType!==h.default.VIDEO)||b.addEntry(ue.mediaType,ue.value)}function D(ue,me,ve=null,J=NaN){let H,B=null,G=b.getEwmaHalfLife(),be=null,re=!0;switch(ve||(ve=I.get().streaming.abr.throughput.averageCalculationMode),ue){case h.default.THROUGHPUT_TYPES.BANDWIDTH:B=ve===h.default.THROUGHPUT_CALCULATION_MODES.EWMA?b.getEwmaThroughputDict(me):b.getThroughputDict(me),be=G.bandwidthHalfLife,re=!0,J=isNaN(J)?w.getIsDynamic()?I.get().streaming.abr.throughput.sampleSettings.live:I.get().streaming.abr.throughput.sampleSettings.vod:J;break;case h.default.THROUGHPUT_TYPES.LATENCY:B=ve===h.default.THROUGHPUT_CALCULATION_MODES.EWMA?b.getEwmaLatencyDict(me):b.getLatencyDict(me),be=G.latencyHalfLife,re=!1,J=isNaN(J)?I.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:J}if(!B||B.length===0)return NaN;switch(ve){case h.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return H=N(B,J,ue),$(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return H=N(B,J,ue),q(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return H=N(B,J,ue),k(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return H=N(B,J,ue),L(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return H=N(B,J,ue),F(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return H=N(B,J,ue),K(B,H);case h.default.THROUGHPUT_CALCULATION_MODES.EWMA:return Z(B,be,re);case h.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return H=N(B,J,ue),ee(B,H)}}function N(ue,me,ve){if(ue){if(me>=ue.length)me=ue.length;else if(ve===h.default.THROUGHPUT_TYPES.BANDWIDTH&&I.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let J=1;J<me;++J){const H=ue[ue.length-J].value/ue[ue.length-J-1].value;if((H>=I.get().streaming.abr.throughput.sampleSettings.increaseScale||H<=I.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(me+=1)===ue.length)break}}else me=0;return me}function $(ue,me){let ve=ue;return me!==0&&ve&&ve.length!==0?(ve=ve.slice(-me),ve.reduce((J,H)=>J+H.value,0)/ve.length):NaN}function q(ue,me){let ve=ue;if(me===0||!ve||ve.length===0)return NaN;ve=ve.slice(-me);let J=0;return ve.reduce((H,B)=>{let G=Math.sqrt(B.downloadedBytes);return J+=G,H+B.value*G},0)/J}function k(ue,me){let ve=ue;if(me===0||!ve||ve.length===0)return NaN;ve=ve.slice(-me);let J=0;return ve.reduce((H,B,G)=>{let be=G+1;return J+=be,H+B.value*be},0)/J}function L(ue,me){let ve=ue;if(me===0||!ve||ve.length===0)return NaN;ve=ve.slice(-me);const J=ve.reduce((H,B)=>H+1/B.value,0);return ve.length/J}function F(ue,me){let ve=ue;if(me===0||!ve||ve.length===0)return NaN;ve=ve.slice(-me);let J=0;const H=ve.reduce((B,G)=>{let be=Math.sqrt(G.downloadedBytes);return J+=be,B+1/G.value*be},0);return J/H}function K(ue,me){let ve=ue;if(me===0||!ve||ve.length===0)return NaN;ve=ve.slice(-me);let J=0;const H=ve.reduce((B,G,be)=>{let re=be+1;return J+=re,B+1/G.value*re},0);return J/H}function Z(ue,me,ve=!0){if(!ue||ue.totalWeight<=0)return NaN;const J=ue.fastEstimate/(1-Math.pow(.5,ue.totalWeight/me.fast)),H=ue.slowEstimate/(1-Math.pow(.5,ue.totalWeight/me.slow));return ve?Math.min(J,H):Math.max(J,H)}function ee(ue,me){if(me===0||!ue||ue.length===0)return NaN;let ve=ue.slice(-me).map(G=>G.value),J=2/(ve.length+1),H=ve[ve.length-1],B=ve[ve.length-1];for(let G=0;G<ve.length;G++)H=J*ve[G]+(1-J)*H,B=J*H+(1-J)*B;return B}function Y(ue,me=null,ve=NaN){const J=D(h.default.THROUGHPUT_TYPES.BANDWIDTH,ue,me,ve);return Math.round(J)}const se={getArithmeticMean:$,getAverageLatency:function(ue,me=null,ve=NaN){const J=D(h.default.THROUGHPUT_TYPES.LATENCY,ue,me,ve);return Math.round(J)},getAverageThroughput:Y,getByteSizeWeightedArithmeticMean:q,getByteSizeWeightedHarmonicMean:F,getDateWeightedArithmeticMean:k,getDateWeightedHarmonicMean:K,getEwma:Z,getHarmonicMean:L,getRawThroughputData:function(ue){return ue?b.getThroughputDict(ue):[]},getSafeAverageThroughput:function(ue,me=null,ve=NaN){let J=Y(ue,me,ve);return isNaN(J)||(J*=I.get().streaming.abr.throughput.bandwidthSafetyFactor),J},getZlema:ee,initialize:function(){var ue,me;b=uz(v).create({settings:I}),y.on(g.default.METRIC_ADDED,M,se),(me=(ue=window.performance)==null?void 0:ue.addEventListener)==null||me.call(ue,"resourcetimingbufferfull",R)},reset:function(){var ue,me;b.reset(),y.off(g.default.METRIC_ADDED,M,se),(me=(ue=window.performance)==null?void 0:ue.removeEventListener)==null||me.call(ue,"resourcetimingbufferfull",R)},setConfig:function(ue){ue.settings&&(I=ue.settings),ue.playbackController&&(w=ue.playbackController)}};return se}dw.__dashjs_factory_name="ThroughputController";var cz=r.default.getSingletonFactory(dw);function fw(){const v=this.context,y=(0,m.default)(v).getInstance(),b=(0,u.default)(v).getInstance();let w,I,R,M;function D(Y){M=Y}function N(Y,se,ue,me){let ve,J=se.adaptation.period.mpd;const H=J.availabilityStartTime;if(me)ve=ue&&J.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(H.getTime()+1e3*(Y+J.timeShiftBufferDepth)):J.availabilityEndTime;else if(ue){const B=se.availabilityTimeOffset;ve=new Date(H.getTime()+1e3*(Y-B))}else ve=H;return ve}function $(Y,se){return(Y.getTime()-se.mpd.availabilityStartTime.getTime()+1e3*M)/1e3}function q(Y,se){return Y+(se.adaptation.period.start-se.presentationTimeOffset)}function k(Y){const se={start:NaN,end:NaN},ue=Y[0].getAdapter().getRegularPeriods()[0],me=$(new Date,ue);if(!Y||Y.length===0)return{range:se,now:me};Y.forEach(J=>{let H=J.getCurrentRepresentationForType(h.default.VIDEO);if(H||(H=J.getCurrentRepresentationForType(h.default.AUDIO)),!H){const G=J.getAdapter(),be=G.getMediaInfoForType(J.getStreamInfo(),h.default.VIDEO)||G.getMediaInfoForType(J.getStreamInfo(),h.default.AUDIO);H=G.getVoRepresentations(be)[0]}let B={start:NaN,end:NaN};if(H)if(H.segmentInfoType===xe.default.SEGMENT_TIMELINE)B=function(G){const be=G.adaptation.period.mpd.manifest.Period[G.adaptation.period.index].AdaptationSet[G.adaptation.index],re=I.getRepresentationFor(G.index,be),we=re.SegmentTemplate||re.SegmentList,Ee=we.SegmentTimeline,Ie=we.timescale,Fe=Ee.S,Ce={start:0,end:0},Q=Fe[0].t,ne=!isNaN(Q),fe=ne?Q:0;let ae,oe,ge,V,ye=0;for(ne&&(Ce.start=q(fe/Ie,G)),ge=0,V=Fe.length;ge<V;ge++)ae=Fe[ge],oe=0,ae.hasOwnProperty("r")&&(oe=ae.r),ye+=ae.d*(1+oe);return Ce.end=q((fe+ye)/Ie,G),Ce}(H);else{const G=H.adaptation.period;B.start=G.start,B.end=Math.max(me,G.start+G.duration)}!isNaN(B.start)&&(isNaN(se.start)||se.start>B.start)&&(se.start=B.start),!isNaN(B.end)&&(isNaN(se.end)||se.end<B.end)&&(se.end=B.end)}),se.end=Math.min(me,se.end);const ve=F(Y,se.end,!0);return se.end=isNaN(ve)?se.end:ve,se.start=ue&&ue.mpd&&ue.mpd.timeShiftBufferDepth&&!isNaN(ue.mpd.timeShiftBufferDepth)&&!isNaN(se.end)?Math.max(se.end-ue.mpd.timeShiftBufferDepth,se.start):se.start,se.start=F(Y,se.start),{range:se,now:me}}function L(Y,se){R=Y-se.end}function F(Y,se,ue=!1){try{let me=0,ve=!1,J=NaN;for(;!ve&&me<Y.length;){const H=Y[me].getStreamInfo();H.start<=se&&(!isFinite(H.duration)||H.start+H.duration>=se)?(J=se,ve=!0):!ue&&H.start>se&&(isNaN(J)||H.start<J)?J=H.start:ue&&H.start+H.duration<se&&(isNaN(J)||H.start+H.duration>J)&&(J=H.start+H.duration),me+=1}return J}catch{return se}}function K(Y){Y.offset===void 0||isNaN(Y.offset)||D(Y.offset/1e3)}function Z(){M=0,R=0}function ee(){y.off(f.default.UPDATE_TIME_SYNC_OFFSET,K,this),Z()}return w={calcAvailabilityEndTimeFromPresentationTime:function(Y,se,ue){return N(Y,se,ue,!0)},calcAvailabilityStartTimeFromPresentationTime:function(Y,se,ue){return N(Y,se,ue)},calcMediaTimeFromPresentationTime:function(Y,se){return Y-se.adaptation.period.start+se.presentationTimeOffset},calcPeriodRelativeTimeFromMpdRelativeTime:function(Y,se){return se-Y.adaptation.period.start},calcPresentationTimeFromMediaTime:q,calcPresentationTimeFromWallTime:$,calcTimeShiftBufferWindow:function(Y,se){if(!se)return function(ue){const me={start:NaN,end:NaN};let ve=0,J=NaN;return ue.forEach(H=>{const B=H.getStreamInfo();ve+=B.duration,(isNaN(J)||B.start<J)&&(J=B.start)}),me.start=J,me.end=J+ve,me}(Y);if(b.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const ue=k(Y);return L(ue.now,ue.range),ue.range}return function(ue){const me={start:NaN,end:NaN};if(!ue||ue.length===0)return me;const ve=ue[0].getAdapter().getRegularPeriods()[0],J=$(new Date,ve),H=ve.mpd.timeShiftBufferDepth,B=isNaN(H)?0:J-H;if(me.start=F(ue,B),me.end=!isNaN(me.start)&&J<me.start?J:F(ue,J,!0),!isNaN(H)&&me.end<J-H&&(me.end=NaN),b.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const G=k(ue);if(G.range.end<me.start)return y.trigger(g.default.CONFORMANCE_VIOLATION,{level:ou.LEVELS.WARNING,event:ou.EVENTS.INVALID_DVR_WINDOW}),L(G.now,G.range),G.range}return me}(Y)},calcWallTimeForSegment:function(Y,se){let ue,me,ve;return se&&(ue=Y.representation.adaptation.period.mpd.suggestedPresentationDelay,me=Y.presentationStartTime+ue,ve=new Date(Y.availabilityStartTime.getTime()+1e3*me)),ve},getClientReferenceTime:function(){return Date.now()-1e3*R+1e3*M},getClientTimeOffset:function(){return M},initialize:function(){Z(),y.on(f.default.UPDATE_TIME_SYNC_OFFSET,K,this)},reset:ee,setClientTimeOffset:D,setConfig:function(Y){Y&&Y.dashManifestModel&&(I=Y.dashManifestModel)}},I=Xn(v).getInstance(),ee(),w}fw.__dashjs_factory_name="TimelineConverter";var dz=r.default.getSingletonFactory(fw),fz=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function hw(){let v,y;return v={initialize:function(b){if(y=new fz,!b)return null;const w=b.indexOf("#");if(w!==-1){const I=b.substr(w+1).split("&");for(let R=0,M=I.length;R<M;++R){const D=I[R],N=D.indexOf("=");if(N!==-1){const $=D.substring(0,N);y.hasOwnProperty($)&&(y[$]=D.substr(N+1))}}}},getURIFragmentData:function(){return y}},v}hw.__dashjs_factory_name="URIFragmentModel";var hz=r.default.getSingletonFactory(hw);const mz=new Map([[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[h.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function mw(){let v,y,b,w,I,R,M,D,N,$,q,k;const L=this.context,F=(0,m.default)(L).getInstance(),K=[];function Z(re,we=!1){b&&(we?b.playbackRate=re:be(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{b.playbackRate=re}))}function ee(){return K.length>0}function Y(re){let we=K.indexOf(re);if(re!==null&&(we!==-1&&K.splice(we,1),$.get().streaming.buffer.syntheticStallEvents.enabled&&b&&!ee())){const Ee=()=>{if(Z(R||1,$.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!b.paused){const Ie=document.createEvent("Event");Ie.initEvent("playing",!0,!1),b.dispatchEvent(Ie)}};$.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?Ee():(D&&D.func&&D.event&&me(D.event,D.func),D=be(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,Ee))}}function se(){if(b&&ee()&&b.playbackRate===0){const re=document.createEvent("Event");re.initEvent("waiting",!0,!1),b.dispatchEvent(re)}}function ue(re,we){b&&b.addEventListener(re,we)}function me(re,we){b&&b.removeEventListener(re,we)}function ve(){return b?b.readyState:NaN}function J(){return b?b.buffered:null}function H(){return b?b.clientWidth:NaN}function B(){return b?b.clientHeight:NaN}function G(re,we,Ee,Ie,Fe){if(b){for(let Ce=0;Ce<b.textTracks.length;Ce++)if(b.textTracks[Ce].kind===re&&(!we||b.textTracks[Ce].label==we)&&b.textTracks[Ce].language===Ee&&b.textTracks[Ce].isTTML===Ie&&b.textTracks[Ce].isEmbedded===Fe)return b.textTracks[Ce]}return null}function be(re,we){return re===h.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||ve()>=re?(we(),null):function(Ee,Ie){const Fe=()=>{me(Ee,Fe),Ie(Ee)};return ue(Ee,Fe),{func:Fe,event:Ee}}(mz.get(re),we)}return w={addEventListener:ue,addTextTrack:function(re,we,Ee,Ie,Fe){if(!b)return null;let Ce=G(re,we,Ee,Ie,Fe);return Ce||(Ce=b.addTextTrack(re,we,Ee),Ce.isEmbedded=Fe,Ce.isTTML=Ie),Ce},appendChild:function(re){b&&(b.appendChild(re),re.isTTML!==void 0&&(b.textTracks[b.textTracks.length-1].isTTML=re.isTTML,b.textTracks[b.textTracks.length-1].isEmbedded=re.isEmbedded))},getBufferRange:J,getClientHeight:B,getClientWidth:H,getElement:function(){return b},getEnded:function(){return b?b.ended:null},getPlaybackQuality:function(){if(!b)return null;let re="webkitDroppedFrameCount"in b&&"webkitDecodedFrameCount"in b,we=null;return"getVideoPlaybackQuality"in b?we=b.getVideoPlaybackQuality():re&&(we={droppedVideoFrames:b.webkitDroppedFrameCount,totalVideoFrames:b.webkitDroppedFrameCount+b.webkitDecodedFrameCount,creationTime:new Date}),we},getPlaybackRate:function(){return b?b.playbackRate:null},getPlayedRanges:function(){return b?b.played:null},getReadyState:ve,getSource:function(){return b?b.src:null},getTTMLRenderingDiv:function(){return v},getTextTrack:G,getTextTracks:function(){return b?b.textTracks:[]},getTime:function(){return b?isNaN(y)?b.currentTime:y:null},getVideoElementSize:function(){const re=$.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:H()*re,elementHeight:B()*re}},getVideoHeight:function(){return b?b.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(b){const re=b.parentNode.host||b.parentNode;return re?b.getBoundingClientRect().left-re.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(b){const re=b.parentNode.host||b.parentNode;return re?b.getBoundingClientRect().top-re.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return b?b.videoWidth:NaN},getVttRenderingDiv:function(){return k},initialize:function(){F.on(f.default.PLAYBACK_PLAYING,se,this)},isPaused:function(){return b?b.paused:null},isSeeking:function(){return b?b.seeking||!isNaN(y):null},isStalled:ee,pause:function(){b&&(b.pause(),b.autoplay=!1)},play:function(){if(b){b.autoplay=!0;const re=b.play();re&&re.catch&&typeof Promise<"u"&&re.catch(we=>{we.name==="NotAllowedError"&&F.trigger(f.default.PLAYBACK_NOT_ALLOWED),I.warn(`Caught pending play exception - continuing (${we})`)})}},removeChild:function(re){b&&b.removeChild(re)},removeEventListener:me,reset:function(){clearTimeout(q),F.off(f.default.PLAYBACK_PLAYING,se,this),K.length=0,function(){try{M&&b&&(M.unobserve(b),M.disconnect(),M=null)}catch{}}()},setConfig:function(re){re&&re.settings&&($=re.settings)},setCurrentTime:function(re,we){b&&(N&&N.func&&N.event&&me(N.event,N.func),y=re,N=be(h.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(b)if(b.currentTime!==y)try{y=we?function(Ee){const Ie=J();let Fe=Ee,Ce=9999999999;if(Ie)for(let Q=0;Q<Ie.length;Q++){const ne=Ie.start(Q),fe=Ie.end(Q),ae=Math.abs(ne-Ee),oe=Math.abs(fe-Ee);if(Ee>=ne&&Ee<=fe)return Ee;ae<Ce&&(Ce=ae,Fe=ne),oe<Ce&&(Ce=oe,Fe=fe)}return Fe}(y):y,isNaN(y)||(b.currentTime=y),y=NaN}catch(Ee){b.readyState===0&&Ee.code===Ee.INVALID_STATE_ERR&&(q=setTimeout(function(){b.currentTime=y,y=NaN},400))}else y=NaN}))},setDisableRemotePlayback:function(re){b&&(b.disableRemotePlayback=re)},setElement:function(re){if(!(re==null||re&&/^(VIDEO|AUDIO)$/i.test(re.nodeName)))throw"element is not video or audio DOM type!";b=re,function(we){try{if(!M||!we)return;M.observe(we)}catch{}}(b)},setPlaybackRate:Z,setSource:function(re){b&&(re?b.src=re:(b.removeAttribute("src"),b.load()))},setStallState:function(re,we){(function(Ee,Ie){Ie?function(Fe){if(Fe!==null&&b&&!b.seeking&&K.indexOf(Fe)===-1&&(K.push(Fe),$.get().streaming.buffer.syntheticStallEvents.enabled&&b&&K.length===1&&($.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||ve()>=h.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){R=b.playbackRate,Z(0,!0);const Ce=document.createEvent("Event");Ce.initEvent("waiting",!0,!1),b.dispatchEvent(Ce)}}(Ee):Y(Ee)})(re,we)},setTTMLRenderingDiv:function(re){v=re,v.style.position="absolute",v.style.display="flex",v.style.overflow="hidden",v.style.pointerEvents="none",v.style.top=0,v.style.left=0},setVttRenderingDiv:function(re){k=re},waitForReadyState:be},I=(0,l.default)(L).getInstance().getLogger(w),$=(0,u.default)(L).getInstance(),y=NaN,function(){try{M=new ResizeObserver(()=>{F.trigger(f.default.VIDEO_ELEMENT_RESIZED)})}catch{}}(),w}mw.__dashjs_factory_name="VideoModel";var gz=r.default.getSingletonFactory(mw),pz=t(8986);function Hp(){const v="You must first call initialize() and set a source before calling this method",y="You must first call initialize() and set a valid source and view before calling this method",b="You must first call attachView() to set the video element before calling this method",w="You must first call attachSource() with a valid source before calling this method",I="MediaPlayer not initialized!",R=this.context,M=(0,m.default)(R).getInstance();let D=(0,u.default)(R).getInstance();const N=(0,l.default)(R).getInstance({settings:D});let $,q,k,L,F,K,Z,ee,Y,se,ue,me,ve,J,H,B,G,be,re,we,Ee,Ie,Fe,Ce,Q,ne,fe,ae,oe,ge,V,ye,Te,Ae,Oe,De,Ge,ot,Et,xt,tn;function kt(){wt(null),Rn(null),L=null,H&&(H.reset(),H=null),B&&(B.reset(),B=null),Ee&&Ee.reset(),D.reset(),be&&(be.reset(),be=null)}function nn(){return!!k&&!!Ge.getElement()}function fn(){return(0,pz.getVersionString)()}function Ln(){if(!Z)throw y;return oe.isPaused()}function Mn(){if(!Z)throw y;return oe.getIsDynamic()}function wn(ke){const lt=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Ot=Te.getCurrentDVRInfo(lt);return Ot?bn(Ot.range.start+ke,Ot):0}function bn(ke,lt){let Ot=oe.getOriginalLiveDelay();return ke>lt.range.end-Ot&&(ke=lt.range.end-Ot),ke}function Je(ke=""){if(!Z)throw y;let lt=Zt().currentTime;return ke!==""&&(lt=ne.getTimeRelativeToStreamId(lt,ke)),lt}function Tt(ke){(0,ht.checkParameterType)(ke,"boolean"),ee=ke}function vt(){Ee.restoreDefaultUTCTimingSources()}function At(){return Te}function Zt(){if(!Ge.getElement())throw b;return Ge.getElement()}function Rn(ke){if(!F)throw I;Ge.setElement(ke),ke&&(at(),function(){if(B||typeof dashjs>"u")return;let lt=dashjs.MetricsReporting;typeof lt=="function"&&(B=lt(R).create().createMetricsReporting({debug:N,eventBus:M,mediaElement:Zt(),adapter:re,dashMetrics:Te,mediaPlayerModel:we,events:f.default,constants:h.default,metricsConstants:o}))}(),function(){if(G||typeof dashjs>"u")return;let lt=dashjs.MssHandler;typeof lt=="function"&&(en.extend(lt.errors),G=lt(R).create({eventBus:M,mediaPlayerModel:we,dashMetrics:Te,manifestModel:Ae,playbackController:oe,streamController:ne,protectionController:H,baseURLController:Fe,errHandler:Ie,events:f.default,constants:h.default,debug:N,initSegmentType:he.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:yt,ISOBoxer:Gc,settings:D}))}(),ne&&ne.switchToVideoElement(Y)),Z&&(He(),tt()),Mt(Y)}function dt(ke){if(!K)throw v;let lt=ne.getActiveStreamInfo();return lt?J.getTracksFor(ke,lt.id).filter(Ot=>!H||H.areKeyIdsUsable(Ot.normalizedKeyIds)):[]}function wt(ke,lt=NaN){if(!F)throw I;typeof ke=="string"&&ot.initialize(ke),lt==null&&(lt=NaN),isNaN(lt)||(lt=Math.max(0,lt)),Y=lt,k=ke,(K||Z)&&(He(),tt()),nn()&&Mt(Y)}function jt(){if(!K)throw v;let ke=ne.getActiveStreamInfo();return ke?ne.getStreamById(ke.id):null}function He(){Z=!1,K=!1,re.reset(),ne.reset(),ae.reset(),ye.reset(),oe.reset(),ge.reset(),V.reset(),se.reset(),ue.reset(),J.reset(),xt.reset(),H&&(D.get().streaming.protection.keepProtectionMediaKeys?H.stop():(H.reset(),H=null,at())),fe.reset(),Oe.reset(),De.reset()}function tt(){Ee.resetPlaybackSessionSpecificSettings()}function St(){return JF(R).create({debug:N,errHandler:Ie,dashMetrics:Te,mediaPlayerModel:we,mssHandler:G,settings:D})}function at(){if(H)return H;if(typeof dashjs>"u")return null;let ke=dashjs.Protection;if(typeof ke=="function"){let lt=ke(R).create();return f.default.extend(ke.events),g.default.extend(ke.events,{publicOnly:!0}),en.extend(ke.errors),H=lt.createProtectionSystem({debug:N,errHandler:Ie,videoModel:Ge,customParametersModel:Ee,capabilities:Ce,eventBus:M,events:f.default,BASE64:yt,constants:h.default,cmcdModel:Oe,settings:D}),Ce||(Ce=(0,SS.default)(R).getInstance()),Ce.setProtectionController(H),H}return null}function Ct(){if(!F)throw I;if(be)return be;if(typeof dashjs>"u")return null;let ke=dashjs.OfflineController;if(typeof ke=="function"){f.default.extend(ke.events),g.default.extend(ke.events,{publicOnly:!0}),en.extend(ke.errors);const lt=St(),Ot=tx(R).create();return Ot.setConfig({manifestModel:Ae,adapter:re,manifestLoader:lt,errHandler:Ie,contentSteeringController:V}),be=ke(R).create({debug:N,manifestUpdater:Ot,baseURLController:Fe,manifestLoader:lt,manifestModel:Ae,mediaPlayerModel:we,abrController:se,playbackController:oe,adapter:re,errHandler:Ie,dashMetrics:Te,timelineConverter:ve,segmentBaseController:xt,schemeLoaderFactory:me,eventBus:M,events:f.default,errors:en,constants:h.default,settings:D,dashConstants:xe.default,urlUtils:or(R).getInstance()}),be}return null}function Mt(ke=NaN){be&&be.resetRecords(),!K&&k&&(K=!0,q.info("Streaming Initialized"),function(){const lt=St();ne||(ne=Qx(R).getInstance()),fe||(fe=lz(R).create({errHandler:Ie,manifestModel:Ae,adapter:re,mediaController:J,baseURLController:Fe,videoModel:Ge,settings:D})),Q.setConfig({capabilities:Ce,customParametersModel:Ee,adapter:re,settings:D,protectionController:H,manifestModel:Ae,errHandler:Ie}),ne.setConfig({capabilities:Ce,capabilitiesFilter:Q,manifestLoader:lt,manifestModel:Ae,mediaPlayerModel:we,customParametersModel:Ee,protectionController:H,textController:fe,adapter:re,dashMetrics:Te,errHandler:Ie,timelineConverter:ve,videoModel:Ge,playbackController:oe,serviceDescriptionController:ge,contentSteeringController:V,abrController:se,throughputController:ue,mediaController:J,settings:D,baseURLController:Fe,uriFragmentModel:ot,segmentBaseController:xt}),ae.setConfig({settings:D,playbackController:oe,streamController:ne,videoModel:Ge,timelineConverter:ve,adapter:re}),oe.setConfig({streamController:ne,serviceDescriptionController:ge,dashMetrics:Te,adapter:re,videoModel:Ge,timelineConverter:ve,settings:D}),ye.setConfig({streamController:ne,playbackController:oe,mediaPlayerModel:we,videoModel:Ge,settings:D}),ue.setConfig({settings:D,playbackController:oe}),se.setConfig({streamController:ne,capabilities:Ce,domStorage:Et,mediaPlayerModel:we,customParametersModel:Ee,throughputController:ue,cmsdModel:De,dashMetrics:Te,adapter:re,videoModel:Ge,settings:D}),Oe.setConfig({abrController:se,dashMetrics:Te,playbackController:oe,serviceDescriptionController:ge,throughputController:ue}),tn.setConfig({serviceDescriptionController:ge}),De.setConfig({}),J.initialize(),ue.initialize(),se.initialize(),ne.initialize(ee,L),fe.initialize(),ae.initialize(),ye.initialize(),Oe.initialize(ee),De.initialize(),V.initialize(),xt.initialize()}(),typeof k=="string"?ne.load(k,ke):ne.loadWithManifest(k,ke)),!Z&&nn()&&(Z=!0,M.trigger(g.default.PLAYBACK_INITIALIZED),q.info("Playback Initialized"))}return $={addABRCustomRule:function(ke,lt,Ot){Ee.addAbrCustomRule(ke,lt,Ot)},addExternalSubtitle:function(ke){ke instanceof FF.default||q.error("Invalid external subtitle object. Must be an instance of dashjs.ExternalSubtitle"),Ee.addExternalSubtitle(ke)},addRequestInterceptor:function(ke){Ee.addRequestInterceptor(ke)},addResponseInterceptor:function(ke){Ee.addResponseInterceptor(ke)},addUTCTimingSource:function(ke,lt){Ee.addUTCTimingSource(ke,lt)},attachProtectionController:function(ke){H=ke},attachSource:wt,attachTTMLRenderingDiv:function(ke){if(!Ge.getElement())throw b;Ge.setTTMLRenderingDiv(ke)},attachView:Rn,attachVttRenderingDiv:function(ke){if(!Ge.getElement())throw b;Ge.setVttRenderingDiv(ke)},clearDefaultUTCTimingSources:function(){Ee.clearDefaultUTCTimingSources()},convertToTimeCode:function(ke){ke=Math.max(ke,0);let lt=Math.floor(ke/3600),Ot=Math.floor(ke%3600/60),zt=Math.floor(ke%3600%60);return(lt===0?"":lt<10?"0"+lt.toString()+":":lt.toString()+":")+(Ot<10?"0"+Ot.toString():Ot.toString())+":"+(zt<10?"0"+zt.toString():zt.toString())},destroy:function(){kt(),r.default.deleteSingletonInstances(R)},duration:function(){if(!Z)throw y;let ke=Zt().duration;if(oe.getIsDynamic()){const lt=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Ot=Te.getCurrentDVRInfo(lt);ke=Ot?Ot.range.end-Ot.range.start:0}return ke},enableForcedTextStreaming:function(ke){return!(!ne.getActiveStreamInfo()||!fe)&&fe.enableForcedTextStreaming(ke)},enableText:function(ke){const lt=ne.getActiveStreamInfo();return!(!lt||!fe)&&fe.enableText(lt.id,ke)},extend:function(ke,lt,Ot){r.default.extend(ke,lt,Ot,R)},formatUTC:function(ke,lt,Ot,zt=!1){const Cn=new Date(1e3*ke),mt=Cn.toLocaleDateString(lt),Qt=Cn.toLocaleTimeString(lt,{hour12:Ot});return zt?Qt+" "+mt:Qt},getABRCustomRules:function(){return Ee.getAbrCustomRules()},getActiveStream:jt,getAutoPlay:function(){return ee},getAvailableBaseUrls:function(){const ke=Ae.getValue();return ke?Fe.getBaseUrls(ke):[]},getAvailableLocations:function(){const ke=Ae.getValue();if(!ke)return[];const lt=re.getLocation(ke),Ot=V.getSynthesizedLocationElements(lt);return lt.concat(Ot)},getAverageLatency:function(ke=h.default.VIDEO,lt=null,Ot=NaN){return ue?ue.getAverageLatency(ke,lt,Ot):0},getAverageThroughput:function(ke=h.default.VIDEO,lt=null,Ot=NaN){return ue?ue.getAverageThroughput(ke,lt,Ot):0},getBufferLength:function(ke){const lt=[h.default.VIDEO,h.default.AUDIO,h.default.TEXT];if(ke)return lt.indexOf(ke)!==-1?At().getCurrentBufferLevel(ke)||NaN:(q.warn("getBufferLength requested for invalid type"),NaN);{const Ot=lt.map(zt=>dt(zt).length>0?At().getCurrentBufferLevel(zt):Number.MAX_VALUE).reduce((zt,Cn)=>Math.min(zt,Cn));return Ot===Number.MAX_VALUE?NaN:Ot}},getCurrentLiveLatency:function(){if(!F)throw I;return Z?oe.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(ke){if(!K)throw v;if(ke!==h.default.IMAGE&&ke!==h.default.VIDEO&&ke!==h.default.AUDIO)return null;const lt=jt();if(!lt)return null;if(ke===h.default.IMAGE){const Ot=lt.getThumbnailController();return Ot?Ot.getCurrentTrack():-1}return lt.getCurrentRepresentationForType(ke)},getCurrentSteeringResponseData:function(){if(V)return V.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let ke=NaN;const lt=ne.getActiveStreamInfo();if(lt&&fe)return ke=fe.getCurrentTrackIdx(lt.id),ke},getCurrentTrackFor:function(ke){if(!K)throw v;let lt=ne.getActiveStreamInfo();return lt?J.getCurrentTrackFor(ke,lt.id):null},getDashAdapter:function(){return re},getDashMetrics:At,getDebug:function(){return N},getDvrSeekOffset:wn,getDvrWindow:function(){if(!Z)throw y;const ke=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let lt=Te.getCurrentDVRInfo(ke);if(!lt)return{};let Ot=0;const zt=oe.getIsDynamic();return zt&&(Ot=lt.manifestInfo.availableFrom.getTime()/1e3),{start:lt.range.start,end:lt.range.end,startAsUtc:zt?Ot+lt.range.start:NaN,endAsUtc:zt?Ot+lt.range.end:NaN,size:lt.range.end-lt.range.start}},getExternalSubtitles:function(){Ee.getExternalSubtitles()},getInitialMediaSettingsFor:function(ke){if(!F)throw I;return J.getInitialSettings(ke)},getLowLatencyModeEnabled:function(){if(!Z)throw y;return oe.getLowLatencyModeEnabled()},getManifest:function(){return Ae.getValue()},getOfflineController:function(){return Ct()},getPlaybackRate:function(){return Zt().playbackRate},getProtectionController:function(){return at()},getRawThroughputData:function(ke=h.default.VIDEO){return ue?ue.getRawThroughputData(ke):[]},getRepresentationsByType:function(ke,lt=null){if(!K)throw v;let Ot=lt?ne.getStreamById(lt):jt();return Ot?Ot.getRepresentationsByType(ke):[]},getSafeAverageThroughput:function(ke=h.default.VIDEO,lt=null,Ot=NaN){return ue?ue.getSafeAverageThroughput(ke,lt,Ot):0},getSettings:function(){return D.get()},getSource:function(){if(!k)throw w;return k},getStreamsFromManifest:function(ke){if(!K)throw v;return re.getStreamsInfo(ke)},getTTMLRenderingDiv:function(){return Ge?Ge.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!Z)throw y;return oe.getOriginalLiveDelay()},getTracksFor:dt,getTracksForTypeFromManifest:function(ke,lt,Ot){if(!K)throw v;return(Ot=Ot||re.getStreamsInfo(lt,1)[0])?re.getAllMediaInfoForType(Ot,ke,lt):[]},getVersion:fn,getVideoElement:Zt,getVolume:function(){return Zt().volume},getXHRWithCredentialsForType:function(ke){return Ee.getXHRWithCredentialsForType(ke)},initialize:function(ke,lt,Ot,zt=NaN){Ce||(Ce=(0,SS.default)(R).getInstance(),Ce.setConfig({settings:D,protectionController:H})),Ie||(Ie=OF(R).getInstance()),Ce.supportsMediaSource()?(F||(F=!0,ve=dz(R).getInstance(),ue||(ue=cz(R).getInstance()),se||(se=Fr(R).getInstance()),me||(me=mS(R).getInstance()),oe||(oe=i2(R).getInstance()),J||(J=n2(R).getInstance()),ne||(ne=Qx(R).getInstance()),ae||(ae=zF(R).getInstance()),ye||(ye=iF(R).getInstance()),ge||(ge=u2(R).getInstance()),V||(V=Ip(R).getInstance()),Q||(Q=rF(R).getInstance()),re=TF(R).getInstance(),Ae=e2(R).getInstance(),Oe=rS(R).getInstance(),De=sS(R).getInstance(),tn=uS(R).getInstance(),Te=MF(R).getInstance({settings:D}),Et=sF(R).getInstance({settings:D}),re.setConfig({constants:h.default,cea608parser:new tw,errHandler:Ie,BASE64:yt}),Fe||(Fe=eF(R).create()),Fe.setConfig({adapter:re,contentSteeringController:V}),ge.setConfig({adapter:re}),xt||(xt=o2(R).getInstance({dashMetrics:Te,mediaPlayerModel:we,errHandler:Ie,baseURLController:Fe,events:f.default,eventBus:M,debug:N,boxParser:qf(R).getInstance(),errors:en})),J.setConfig({domStorage:Et,settings:D,mediaPlayerModel:we,customParametersModel:Ee,videoModel:Ge}),we.setConfig({playbackController:oe,serviceDescriptionController:ge}),V.setConfig({adapter:re,errHandler:Ie,dashMetrics:Te,mediaPlayerModel:we,manifestModel:Ae,serviceDescriptionController:ge,throughputController:ue,eventBus:M}),vt(),Tt(Ot===void 0||Ot),Ct()),ke&&Rn(ke),lt&&wt(lt,zt),q.info("[dash.js "+fn()+"] MediaPlayer has been initialized")):Ie.error(new Yt.default(en.CAPABILITY_MEDIASOURCE_ERROR_CODE,en.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:Mn,isMuted:function(){return Zt().muted},isPaused:Ln,isReady:nn,isSeeking:function(){if(!Z)throw y;return oe.isSeeking()},isTextEnabled:function(){const ke=ne.getActiveStreamInfo();return!(!ke||!fe)&&fe.isTextEnabled(ke)},off:function(ke,lt,Ot){M.off(ke,lt,Ot)},on:function(ke,lt,Ot,zt){M.on(ke,lt,Ot,zt)},pause:function(){if(!Z)throw y;oe.pause()},play:function(){if(!Z)throw y;(!ee||Ln()&&Z)&&oe.play(!0)},preload:function(){if(!Ge.getElement()&&!K){if(!k)throw w;Mt(Y)}},provideThumbnail:function(ke,lt){if(typeof lt!="function")return;if(ke<0)return void lt(null);const Ot=oe.getIsDynamic()?wn(ke):ke,zt=ne.getStreamForTime(Ot);if(zt===null)return void lt(null);const Cn=zt.getThumbnailController();if(Cn)return Cn.provide(Ot,lt);lt(null)},refreshManifest:function(ke){if(!F)throw I;if(!nn())return ke(null,w);let lt=this;if(typeof ke=="function"){const Ot=function(zt){M.off(f.default.INTERNAL_MANIFEST_LOADED,Ot,lt),zt.error?ke(null,zt.error):ke(zt.manifest)};M.on(f.default.INTERNAL_MANIFEST_LOADED,Ot,lt)}ne.refreshManifest()},registerCustomCapabilitiesFilter:function(ke){Ee.registerCustomCapabilitiesFilter(ke)},registerLicenseRequestFilter:function(ke){Ee.registerLicenseRequestFilter(ke)},registerLicenseResponseFilter:function(ke){Ee.registerLicenseResponseFilter(ke)},removeABRCustomRule:function(ke){Ee.removeAbrCustomRule(ke)},removeAllABRCustomRule:function(){Ee.removeAllAbrCustomRule()},removeExternalSubtitleById:function(ke){Ee.removeExternalSubtitleById(ke)},removeExternalSubtitleByUrl:function(ke){Ee.removeExternalSubtitleByUrl(ke)},removeRequestInterceptor:function(ke){Ee.removeRequestInterceptor(ke)},removeResponseInterceptor:function(ke){Ee.removeResponseInterceptor(ke)},removeUTCTimingSource:function(ke,lt){Ee.removeUTCTimingSource(ke,lt)},reset:kt,resetCustomInitialTrackSelectionFunction:function(){Ee.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){D.reset()},restoreDefaultUTCTimingSources:vt,retrieveManifest:function(ke,lt){let Ot=St(),zt=this;const Cn=function(mt){mt.error?lt(null,mt.error):lt(mt.manifest),M.off(f.default.INTERNAL_MANIFEST_LOADED,Cn,zt),Ot.reset()};M.on(f.default.INTERNAL_MANIFEST_LOADED,Cn,zt),ot.initialize(ke),Ot.load(ke)},seek:function(ke){if(!Z)throw y;if((0,ht.checkParameterType)(ke,"number"),isNaN(ke))throw h.default.BAD_ARGUMENT_ERROR;ke<0&&(ke=0);let lt=oe.getIsDynamic()?wn(ke):ke;const Ot=Zt();!oe.getIsDynamic()&&Ot.duration&&(lt=Math.min(Ot.duration,lt)),oe.seek(lt,!1,!1,!0)},seekToOriginalLive:function(){Z&&Mn()&&oe.seekToOriginalLive()},seekToPresentationTime:function(ke){if(!Z)throw y;if((0,ht.checkParameterType)(ke,"number"),isNaN(ke))throw h.default.BAD_ARGUMENT_ERROR;ke<0&&(ke=0);const lt=Zt();if(!oe.getIsDynamic()&&lt.duration&&(ke=Math.min(lt.duration,ke)),oe.getIsDynamic()){const Ot=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let zt=Te.getCurrentDVRInfo(Ot);if(!zt)return;(ke=bn(ke,zt))<zt.range.start&&(ke=zt.range.start)}oe.seek(ke,!1,!1,!0)},setAutoPlay:Tt,setConfig:function(ke){ke&&(ke.capabilities&&(Ce=ke.capabilities),ke.capabilitiesFilter&&(Q=ke.capabilitiesFilter),ke.streamController&&(ne=ke.streamController),ke.textController&&(fe=ke.textController),ke.gapController&&(ae=ke.gapController),ke.throughputController&&(ue=ke.throughputController),ke.playbackController&&(oe=ke.playbackController),ke.serviceDescriptionController&&(ge=ke.serviceDescriptionController),ke.contentSteeringController&&(V=ke.contentSteeringController),ke.clientDataReportingController&&(tn=ke.clientDataReportingController),ke.catchupController&&(ye=ke.catchupController),ke.mediaPlayerModel&&(we=ke.mediaPlayerModel),ke.customParametersModel&&(Ee=ke.customParametersModel),ke.abrController&&(se=ke.abrController),ke.schemeLoaderFactory&&(me=ke.schemeLoaderFactory),ke.mediaController&&(J=ke.mediaController),ke.settings&&(D=ke.settings),ke.dashMetrics&&(Te=ke.dashMetrics))},setCurrentTrack:function(ke,lt=!1){if(!K)throw v;!H||H.areKeyIdsUsable(ke.normalizedKeyIds)?J.setTrack(ke,{noSettingsSave:lt}):q.error(`Can not switch to track with index ${ke.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(ke){Ee.setCustomInitialTrackSelectionFunction(ke)},setInitialMediaSettingsFor:function(ke,lt){if(!F)throw I;let Ot=function(zt){const Cn=D.get().streaming.defaultSchemeIdUri;let mt={};function Qt(Tn,vn,Pn){let _n={};if(vn){if(vn instanceof Array)throw"Array type not supported for settings!";return vn instanceof Object?(_n.schemeIdUri=vn.schemeIdUri?vn.schemeIdUri:"",_n.value=vn.value?vn.value:""):(_n.schemeIdUri=Pn,_n.value=vn,q.warn("No schemeIdUri provided for "+Tn+', using default "'+Pn+'"')),_n}return null}return zt.id!==void 0&&(mt.id=zt.id),zt.lang!==void 0&&(mt.lang=zt.lang),isNaN(zt.index)||(mt.index=zt.index),zt.viewpoint!==void 0&&(mt.viewpoint=Qt("viewpoint",zt.viewpoint,Cn.viewpoint)),zt.audioChannelConfiguration!==void 0&&(mt.audioChannelConfiguration=Qt("audioChannelConfiguration",zt.audioChannelConfiguration,Cn.audioChannelConfiguration)),zt.role!==void 0&&zt.role!==null&&(mt.role=Qt("role",zt.role,Cn.role),mt.role.schemeIdUri===h.default.DASH_ROLE_SCHEME_ID&&mt.role.value==="Main"&&(mt.role.value=xe.default.MAIN)),zt.accessibility!==void 0&&(mt.accessibility=Qt("accessibility",zt.accessibility,Cn.accessibility)),mt}(lt);J.setInitialSettings(ke,Ot)},setMute:function(ke){(0,ht.checkParameterType)(ke,"boolean"),Zt().muted=ke},setPlaybackRate:function(ke){Zt().playbackRate=ke},setProtectionData:function(ke){L=ke,ne&&ne.setProtectionData(L)},setRepresentationForTypeById:function(ke,lt,Ot=!1){if(ke!==h.default.IMAGE&&ke!==h.default.VIDEO&&ke!==h.default.AUDIO)return;if(!K)throw v;const zt=jt();if(zt)if(ke===h.default.IMAGE){const Cn=zt.getThumbnailController();Cn&&Cn.setTrackById(lt)}else{const Cn=zt.getRepresentationForTypeById(ke,lt);Cn&&se.manuallySetPlaybackQuality(ke,ne.getActiveStreamInfo(),Cn,{forceReplace:Ot})}},setRepresentationForTypeByIndex:function(ke,lt,Ot=!1){if(ke!==h.default.IMAGE&&ke!==h.default.VIDEO&&ke!==h.default.AUDIO)return;if(!K)throw v;const zt=jt();if(zt)if(ke===h.default.IMAGE){const Cn=zt.getThumbnailController();Cn&&Cn.setTrackByIndex(lt)}else{const Cn=zt.getRepresentationForTypeByIndex(ke,lt);Cn&&se.manuallySetPlaybackQuality(ke,ne.getActiveStreamInfo(),Cn,{forceReplace:Ot})}},setTextTrack:function(ke){if(!Z)throw y;const lt=ne.getActiveStreamInfo();lt&&fe&&fe.setTextTrack(lt.id,ke)},setVolume:function(ke){if(typeof ke!="number"||isNaN(ke)||ke<0||ke>1)throw h.default.BAD_ARGUMENT_ERROR;Zt().volume=ke},setXHRWithCredentialsForType:function(ke,lt){Ee.setXHRWithCredentialsForType(ke,lt)},time:Je,timeAsUTC:function(){if(!Z)throw y;if(!oe.getIsDynamic()||Je()<0)return NaN;const ke=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let lt,Ot,zt=Te.getCurrentDVRInfo(ke);return zt?(lt=zt.manifestInfo.availableFrom.getTime()/1e3,Ot=lt+Je(),Ot):0},timeInDvrWindow:function(){if(!Z)throw y;if(!oe.getIsDynamic())return Je();let ke=Zt().currentTime;const lt=ne&&ne.hasVideoTrack()?h.default.VIDEO:h.default.AUDIO;let Ot=Te.getCurrentDVRInfo(lt);return ke=Ot===null||ke===0?0:Math.max(0,ke-Ot.range.start),ke},trigger:function(ke,lt,Ot){M.trigger(ke,lt,Ot)},triggerSteeringRequest:function(){if(V)return V.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(ke){Ee.unregisterCustomCapabilitiesFilter(ke)},unregisterLicenseRequestFilter:function(ke){Ee.unregisterLicenseRequestFilter(ke)},unregisterLicenseResponseFilter:function(ke){Ee.unregisterLicenseResponseFilter(ke)},updateSettings:function(ke){D.update(ke)},updateSource:function(ke){k=ke,ne.load(k)}},q=N.getLogger($),F=!1,Z=!1,K=!1,ee=!0,Y=NaN,H=null,be=null,L=null,re=null,xt=null,f.default.extend(g.default),we=r2(R).getInstance(),Ee=(0,xp.default)(R).getInstance(),Ge=gz(R).getInstance(),ot=hz(R).getInstance(),$}Hp.__dashjs_factory_name="MediaPlayer";const Jf=r.default.getClassFactory(Hp);Jf.events=g.default,Jf.errors=en,r.default.updateClassFactory(Hp.__dashjs_factory_name,Jf);var yz=Jf},1191:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let o=new i;e.default=o},5212:function(n,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",ENHANCEMENT:"enhancement",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:"lowestStartupDelay",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI:"urn:mpeg:dash:ssr:2023",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(n,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(n,e,t){t.r(e),t.d(e,{default:function(){return O}});class r{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var i=r,o=t(913),l=t(138);function u(le){let te,Be;const rt=(le=le||{}).eventBus,qe=le.dashMetrics,Xe=le.metricsConstants,$e=le.events;function et(Kt){let It=new i;if(Be){for(const yn in Kt)Kt.hasOwnProperty(yn)&&(It[yn]=Kt[yn]);It.mpdurl||(It.mpdurl=Be.originalUrl||Be.url),It.terror||(It.terror=new Date),qe.addDVBErrors(It)}}function Ve(Kt){Kt.error||(Be=Kt.manifest)}function Ze(Kt){et({errorcode:i.BASE_URL_CHANGED,servicelocation:Kt.entry})}function ct(){et({errorcode:i.BECAME_REPORTER})}function Ht(Kt){var It;Kt.metric===Xe.HTTP_REQUEST&&((It=Kt.value).responsecode===0||It.responsecode==null||It.responsecode>=400||It.responsecode<100||It.responsecode>=600)&&et({errorcode:It.responsecode||i.CONNECTION_ERROR,url:It.url,terror:It.tresponse,servicelocation:It._serviceLocation})}function Pt(Kt){let It;switch(Kt.error?Kt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:It=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:It=i.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:It})}return te={initialize:function(){rt.on($e.MANIFEST_UPDATED,Ve,te),rt.on($e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Ze,te),rt.on($e.METRIC_ADDED,Ht,te),rt.on($e.METRIC_UPDATED,Ht,te),rt.on($e.PLAYBACK_ERROR,Pt,te),rt.on(o.default.BECAME_REPORTING_PLAYER,ct,te)},reset:function(){rt.off($e.MANIFEST_UPDATED,Ve,te),rt.off($e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Ze,te),rt.off($e.METRIC_ADDED,Ht,te),rt.off($e.METRIC_UPDATED,Ht,te),rt.off($e.PLAYBACK_ERROR,Pt,te),rt.off(o.default.BECAME_REPORTING_PLAYER,ct,te)}},te}u.__dashjs_factory_name="DVBErrorsTranslator";var c=l.default.getSingletonFactory(u),d=t(7377);function m(le){le=le||{};let te,Be,rt=!1,qe=this.context,Xe=le.mediaElement;return te={initialize:function($e){$e&&$e.length&&($e.forEach(et=>{let Ve=et.starttime,Ze=Ve+et.duration;Be.add(Ve,Ze)}),rt=!!$e[0]._useWallClockTime)},reset:function(){Be.clear()},isEnabled:function(){let $e,et=Be.length;if(!et)return!0;$e=rt?new Date().getTime()/1e3:Xe.currentTime;for(let Ve=0;Ve<et;Ve+=1){let Ze=Be.start(Ve),ct=Be.end(Ve);if(Ze<=$e&&$e<ct)return!0}return!1}},Be=(0,d.default)(qe).create(),te}m.__dashjs_factory_name="RangeController";var f=l.default.getClassFactory(m);function h(){return{serialise:function le(te){let Be,rt,qe=[],Xe=[];for(Be in te)if(te.hasOwnProperty(Be)&&Be.indexOf("_")!==0){if(rt=te[Be],rt==null&&(rt=""),Array.isArray(rt)){if(!rt.length)continue;Xe=[],rt.forEach(function($e){let et=Object.prototype.toString.call($e).slice(8,-1)!=="Object";Xe.push(et?$e:le($e))}),rt=Xe.map(encodeURIComponent).join(",")}else typeof rt=="string"?rt=encodeURIComponent(rt):rt instanceof Date?rt=rt.toISOString():typeof rt=="number"&&(rt=Math.round(rt));qe.push(Be+"="+rt)}return qe.join("&")}}}h.__dashjs_factory_name="MetricSerialiser";var g=l.default.getSingletonFactory(h);function p(){let le,te,Be,rt=window.crypto||window.msCrypto,qe=Uint32Array,Xe=Math.pow(2,8*qe.BYTES_PER_ELEMENT)-1;function $e(){rt&&(le||(le=new qe(10)),rt.getRandomValues(le),te=0)}return Be={random:function(et,Ve){let Ze;return et||(et=0),Ve||(Ve=1),rt?(te===le.length&&$e(),Ze=le[te]/Xe,te+=1):Ze=Math.random(),Ze*(Ve-et)+et}},$e(),Be}p.__dashjs_factory_name="RNG";var E=l.default.getSingletonFactory(p),S=t(1926);function x(le){let te;le=le||{};let Be,rt,qe,Xe,$e,et,Ve,Ze=this.context,ct=[];const Ht=le.metricsConstants;function Pt(){Xe=!1,$e=!1,et=null,Ve=null}return te={report:function(Kt,It){Array.isArray(It)||(It=[It]),$e&&Ve.isEnabled()&&It.forEach(function(yn){let Vn=Be.serialise(yn);Kt!==Ht.DVB_ERRORS&&(Vn=`metricname=${Kt}&${Vn}`),Vn=`${et}?${Vn}`,function(ar,xr,Or){let Fr=new XMLHttpRequest;Fr.withCredentials=rt.getXHRWithCredentialsForType(Ht.HTTP_REQUEST_DVB_REPORTING_TYPE);const Gt=function(){let Ft=ct.indexOf(Fr);Ft!==-1&&(ct.splice(Ft,1),!(Fr.status>=200&&Fr.status<300)&&Or&&Or())};ct.push(Fr);try{Fr.open("GET",ar),Fr.onloadend=Gt,Fr.onerror=Gt,Fr.send()}catch{Fr.onerror()}}(Vn,0,function(){$e=!1})})},initialize:function(Kt,It){let yn;if(Ve=It,et=Kt.dvbReportingUrl,!et)throw new Error("required parameter missing (dvb:reportingUrl)");Xe||(yn=Kt.dvbProbability,yn&&(yn===1e3||yn/1e3>=qe.random())&&($e=!0),Xe=!0)},reset:function(){Pt()}},Be=g(Ze).getInstance(),qe=E(Ze).getInstance(),rt=(0,S.default)(Ze).getInstance(),Pt(),te}x.__dashjs_factory_name="DVBReporting";var _=l.default.getClassFactory(x);function A(le){le=le||{};const te={"urn:dvb:dash:reporting:2014":_},Be=this.context;let rt;const qe=le.debug?le.debug.getLogger(rt):{},Xe=le.metricsConstants,$e=le.mediaPlayerModel||{};return rt={create:function(et,Ve){let Ze;try{Ze=te[et.schemeIdUri](Be).create({metricsConstants:Xe,mediaPlayerModel:$e}),Ze.initialize(et,Ve)}catch(ct){Ze=null,qe.error(`ReportingFactory: could not create Reporting with schemeIdUri ${et.schemeIdUri} (${ct.message})`)}return Ze},register:function(et,Ve){te[et]=Ve},unregister:function(et){delete te[et]}},rt}A.__dashjs_factory_name="ReportingFactory";var z=l.default.getSingletonFactory(A);function ie(le){let te,Be=[];const rt=z(this.context).getInstance(le);return te={initialize:function(qe,Xe){qe.some($e=>{let et=rt.create($e,Xe);if(et)return Be.push(et),!0})},reset:function(){Be.forEach(qe=>qe.reset()),Be=[]},report:function(qe,Xe){Be.forEach($e=>$e.report(qe,Xe))}},te}ie.__dashjs_factory_name="ReportingController";var he=l.default.getClassFactory(ie);function P(){return{reconstructFullMetricName:function(le,te,Be){let rt=le;return te&&(rt+="("+te,Be&&Be.length&&(rt+=","+Be),rt+=")"),rt},validateN:function(le){if(!le)throw new Error("missing n");if(isNaN(le))throw new Error("n is NaN");if(le<0)throw new Error("n must be positive");return le}}}P.__dashjs_factory_name="HandlerHelpers";var U=l.default.getSingletonFactory(P);function ce(le){let te,Be,rt,qe,Xe,$e;le=le||{};let et=this.context,Ve=U(et).getInstance(),Ze=[];const ct=le.metricsConstants;function Ht(){let Pt=function(){try{return Object.keys(Ze).map(Kt=>Ze[Kt]).reduce((Kt,It)=>Kt.level<It.level?Kt:It)}catch{return}}();Pt&&$e!==Pt.t&&($e=Pt.t,Be.report(qe,Pt))}return te={initialize:function(Pt,Kt,It){Kt&&(rt=Ve.validateN(It),Be=Kt,qe=Ve.reconstructFullMetricName(Pt,It),Xe=setInterval(Ht,rt))},reset:function(){clearInterval(Xe),Xe=null,rt=0,Be=null,$e=null},handleNewMetric:function(Pt,Kt,It){Pt===ct.BUFFER_LEVEL&&(Ze[It]=Kt)}},te}ce.__dashjs_factory_name="BufferLevelHandler";var de=l.default.getClassFactory(ce),_e=l.default.getClassFactory(function(le){let te,Be,rt=(le=le||{}).eventBus;const qe=le.metricsConstants;function Xe(){rt.off(o.default.METRICS_INITIALISATION_COMPLETE,Xe,this),rt.trigger(o.default.BECAME_REPORTING_PLAYER)}return te={initialize:function($e,et){et&&(Be=et,rt.on(o.default.METRICS_INITIALISATION_COMPLETE,Xe,this))},reset:function(){Be=null},handleNewMetric:function($e,et){$e===qe.DVB_ERRORS&&Be&&Be.report($e,et)}},te});function je(le){let te,Be,rt,qe,Xe,$e;le=le||{};let et=[],Ve=U(this.context).getInstance();const Ze=le.metricsConstants;function ct(){var Ht=et;Ht.length&&Be&&Be.report(Xe,Ht),et=[]}return te={initialize:function(Ht,Pt,Kt,It){Pt&&(rt=Ve.validateN(Kt),Be=Pt,It&&It.length&&(qe=It),Xe=Ve.reconstructFullMetricName(Ht,Kt,It),$e=setInterval(ct,rt))},reset:function(){clearInterval($e),$e=null,rt=null,qe=null,et=[],Be=null},handleNewMetric:function(Ht,Pt){Ht===Ze.HTTP_REQUEST&&(qe&&qe!==Pt.type||et.push(Pt))}},te}je.__dashjs_factory_name="HttpListHandler";var Se=l.default.getClassFactory(je);function ze(){let le,te,Be;return le={initialize:function(rt,qe){te=rt,Be=qe},reset:function(){Be=null,te=void 0},handleNewMetric:function(rt,qe){rt===te&&Be&&Be.report(te,qe)}},le}ze.__dashjs_factory_name="GenericMetricHandler";var Le=l.default.getClassFactory(ze);function Re(le){let te;const Be=(le=le||{}).debug?le.debug.getLogger(te):{};let rt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const qe=this.context;let Xe={BufferLevel:de,DVBErrors:_e,HttpList:Se,PlayList:Le,RepSwitchList:Le,TcpList:Le};return te={create:function($e,et){var Ve,Ze=$e.match(rt);if(Ze){try{(Ve=Xe[Ze[1]](qe).create({eventBus:le.eventBus,metricsConstants:le.metricsConstants})).initialize(Ze[1],et,Ze[3],Ze[5])}catch(ct){Ve=null,Be.error(`MetricsHandlerFactory: Could not create handler for type ${Ze[1]} with args ${Ze[3]}, ${Ze[5]} (${ct.message})`)}return Ve}},register:function($e,et){Xe[$e]=et},unregister:function($e){delete Xe[$e]}},te}Re.__dashjs_factory_name="MetricsHandlerFactory";var Ye=l.default.getSingletonFactory(Re);function Ue(le){le=le||{};let te,Be=[];const rt=this.context,qe=le.eventBus,Xe=le.events;let $e=Ye(rt).getInstance({debug:le.debug,eventBus:le.eventBus,metricsConstants:le.metricsConstants});function et(Ve){Be.forEach(Ze=>{Ze.handleNewMetric(Ve.metric,Ve.value,Ve.mediaType)})}return te={initialize:function(Ve,Ze){Ve.split(",").forEach((ct,Ht,Pt)=>{let Kt;if(ct.indexOf("(")!==-1&&ct.indexOf(")")===-1){let It=Pt[Ht+1];It&&It.indexOf("(")===-1&&It.indexOf(")")!==-1&&(ct+=","+It,delete Pt[Ht+1])}Kt=$e.create(ct,Ze),Kt&&Be.push(Kt)}),qe.on(Xe.METRIC_ADDED,et,te),qe.on(Xe.METRIC_UPDATED,et,te)},reset:function(){qe.off(Xe.METRIC_ADDED,et,te),qe.off(Xe.METRIC_UPDATED,et,te),Be.forEach(Ve=>Ve.reset()),Be=[]}},te}Ue.__dashjs_factory_name="MetricsHandlersController";var Me=l.default.getClassFactory(Ue);function We(le){let te,Be,rt,qe;le=le||{};let Xe=this.context;function $e(){te&&te.reset(),Be&&Be.reset(),rt&&rt.reset()}return qe={initialize:function(et){try{rt=f(Xe).create({mediaElement:le.mediaElement}),rt.initialize(et.Range),Be=he(Xe).create({debug:le.debug,metricsConstants:le.metricsConstants,mediaPlayerModel:le.mediaPlayerModel}),Be.initialize(et.Reporting,rt),te=Me(Xe).create({debug:le.debug,eventBus:le.eventBus,metricsConstants:le.metricsConstants,events:le.events}),te.initialize(et.metrics,Be)}catch(Ve){throw $e(),Ve}},reset:$e},qe}We.__dashjs_factory_name="MetricsController";var Ke=l.default.getClassFactory(We),nt=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},bt=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},Rt=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Pe(le){let te,Be=(le=le||{}).adapter;const rt=le.constants;return te={getMetrics:function(qe){let Xe=[];return qe&&qe.Metrics&&qe.Metrics.forEach($e=>{var et=new nt,Ve=Be.getIsDynamic(qe);$e.hasOwnProperty("metrics")&&(et.metrics=$e.metrics,$e.Range&&$e.Range.forEach(Ze=>{var ct=new bt;ct.starttime=function(Ht,Pt,Kt){let It,yn,Vn=0;return Pt?Vn=Be.getAvailabilityStartTime(Ht)/1e3:(It=Be.getRegularPeriods(Ht),It.length&&(Vn=It[0].start)),yn=Vn,Kt&&Kt.hasOwnProperty(rt.START_TIME)&&(yn+=Kt.starttime),yn}(qe,Ve,Ze),Ze.hasOwnProperty("duration")?ct.duration=Ze.duration:ct.duration=Be.getDuration(qe),ct._useWallClockTime=Ve,et.Range.push(ct)}),$e.Reporting&&($e.Reporting.forEach(Ze=>{var ct=new Rt;Ze.hasOwnProperty(rt.SCHEME_ID_URI)&&(ct.schemeIdUri=Ze.schemeIdUri,Ze.hasOwnProperty("value")&&(ct.value=Ze.value),Ze.hasOwnProperty(rt.DVB_REPORTING_URL)&&(ct.dvbReportingUrl=Ze[rt.DVB_REPORTING_URL]),Ze.hasOwnProperty(rt.DVB_PROBABILITY)&&(ct.dvbProbability=Ze[rt.DVB_PROBABILITY]),et.Reporting.push(ct))}),Xe.push(et)))}),Xe}},te}Pe.__dashjs_factory_name="ManifestParsing";var Ne=l.default.getSingletonFactory(Pe);function Qe(le){let te;le=le||{};let Be={},rt=this.context,qe=le.eventBus;const Xe=le.events;function $e(Ve){if(Ve.error)return;let Ze=Object.keys(Be);Ne(rt).getInstance({adapter:le.adapter,constants:le.constants}).getMetrics(Ve.manifest).forEach(ct=>{const Ht=JSON.stringify(ct);if(Be.hasOwnProperty(Ht))Ze.splice(Ht,1);else try{let Pt=Ke(rt).create(le);Pt.initialize(ct),Be[Ht]=Pt}catch{}}),Ze.forEach(ct=>{Be[ct].reset(),delete Be[ct]}),qe.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}function et(){Object.keys(Be).forEach(Ve=>{Be[Ve].reset()}),Be={}}return te={reset:function(){qe.off(Xe.MANIFEST_UPDATED,$e,te),qe.off(Xe.STREAM_TEARDOWN_COMPLETE,et,te)}},qe.on(Xe.MANIFEST_UPDATED,$e,te),qe.on(Xe.STREAM_TEARDOWN_COMPLETE,et,te),te}Qe.__dashjs_factory_name="MetricsCollectionController";var X=l.default.getClassFactory(Qe);function W(){let le,te,Be=this.context;return le={createMetricsReporting:function(rt){return te=c(Be).getInstance({eventBus:rt.eventBus,dashMetrics:rt.dashMetrics,metricsConstants:rt.metricsConstants,events:rt.events}),te.initialize(),X(Be).create(rt)},getReportingFactory:function(){return z(Be).getInstance()},getMetricsHandlerFactory:function(){return Ye(Be).getInstance()}},le}W.__dashjs_factory_name="MetricsReporting";const C=l.default.getClassFactory(W);C.events=o.default,l.default.updateClassFactory(W.__dashjs_factory_name,C);var O=C},913:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let o=new i;e.default=o},1926:function(n,e,t){t.r(e);var r=t(5717),i=t(138),o=t(8261),l=t(656),u=t(5212),c=t(5560);function d(){let m,f,h,g,p,E,S,x,_,A,z;const ie=this.context,he=(0,o.default)(ie).getInstance();function P(){g=[],p=[],E=[],S=[],x=[],z=[],_=null,f=[],A=new Set}function U(Se,ze){let Le=-1;Se.some((Re,Ye)=>{if(Re===ze)return Le=Ye,!0}),Le<0||Se.splice(Le,1)}function ce(Se){let ze;for(ze=0;ze<z.length;ze++)if(z[ze].rulename===Se)return ze;return-1}function de(Se,ze){let Le=!1;return A.forEach(Re=>{Re[Se]===ze&&(Le=!0)}),Le}function _e(Se,ze){je(Se,ze);let Le=new r.default;Le.schemeIdUri=Se,Le.value=ze,f.push(Le)}function je(Se,ze){(0,l.checkParameterType)(Se,"string"),(0,l.checkParameterType)(ze,"string"),f.forEach(function(Le,Re){Le.schemeIdUri===Se&&Le.value===ze&&f.splice(Re,1)})}return m={addAbrCustomRule:function(Se,ze,Le){if(typeof Se!="string"||Se!==u.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&Se!==u.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof ze!="string")throw u.default.BAD_ARGUMENT_ERROR;let Re=ce(ze);Re===-1?z.push({type:Se,rulename:ze,rule:Le}):(z[Re].type=Se,z[Re].rule=Le)},addExternalSubtitle:function(Se){if(!(Se&&Se.id!==void 0&&Se.url&&Se.language&&Se.mimeType&&Se.bandwidth!==void 0))return;const ze=new c.default(Se);de("url",ze.url)||de("id",ze.id)||A.add(ze)},addRequestInterceptor:function(Se){g.push(Se)},addResponseInterceptor:function(Se){p.push(Se)},addUTCTimingSource:_e,clearDefaultUTCTimingSources:function(){f=[]},getAbrCustomRules:function(){return z},getCustomCapabilitiesFilters:function(){return x},getCustomInitialTrackSelectionFunction:function(){return _},getExternalSubtitles:function(){return A},getLicenseRequestFilters:function(){return E},getLicenseResponseFilters:function(){return S},getRequestInterceptors:function(){return g},getResponseInterceptors:function(){return p},getUTCTimingSources:function(){return f},getXHRWithCredentialsForType:function(Se){const ze=h[Se];return ze===void 0?h.default:ze},registerCustomCapabilitiesFilter:function(Se){x.push(Se)},registerLicenseRequestFilter:function(Se){E.push(Se)},registerLicenseResponseFilter:function(Se){S.push(Se)},removeAbrCustomRule:function(Se){if(Se){let ze=ce(Se);ze!==-1&&z.splice(ze,1)}else z=[]},removeAllAbrCustomRule:function(){z=[]},removeExternalSubtitleById:function(Se){A.forEach(ze=>{ze.id===Se&&A.delete(ze)})},removeExternalSubtitleByUrl:function(Se){A.forEach(ze=>{ze.url===Se&&A.delete(ze)})},removeRequestInterceptor:function(Se){U(g,Se)},removeResponseInterceptor:function(Se){U(p,Se)},removeUTCTimingSource:je,reset:function(){P()},resetCustomInitialTrackSelectionFunction:function(){_=null},resetPlaybackSessionSpecificSettings:function(){A=new Set},restoreDefaultUTCTimingSources:function(){let Se=he.get().streaming.utcSynchronization.defaultTimingSource;_e(Se.scheme,Se.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(Se){_=Se},setXHRWithCredentialsForType:function Se(ze,Le){ze?h[ze]=!!Le:Object.keys(h).forEach(Re=>{Se(Re,Le)})},unregisterCustomCapabilitiesFilter:function(Se){U(x,Se)},unregisterLicenseRequestFilter:function(Se){U(E,Se)},unregisterLicenseResponseFilter:function(Se){U(S,Se)}},h={default:!1},P(),m}d.__dashjs_factory_name="CustomParametersModel",e.default=i.default.getSingletonFactory(d)},3888:function(n,e,t){t.r(e),t.d(e,{default:function(){return Fr}});var r=t(8854),i=t(2861);const o={prefixes:["clearkey","dashif","ck"]};class l{static findMp4ProtectionElement(Ft){let _t=null;for(let yt=0;yt<Ft.length;++yt){let Vt=Ft[yt];Vt.schemeIdUri&&Vt.schemeIdUri.toLowerCase()===r.default.MP4_PROTECTION_SCHEME&&Vt.value&&(Vt.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CENC||Vt.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CBCS)&&(_t=Vt)}return _t}static getPSSHData(Ft){let _t=8,yt=new DataView(Ft),Vt=yt.getUint8(_t);return _t+=20,Vt>0&&(_t+=4+16*yt.getUint32(_t)),_t+=4,Ft.slice(_t)}static getPSSHForKeySystem(Ft,_t){let yt=l.parsePSSHList(_t);return Ft&&yt.hasOwnProperty(Ft.uuid.toLowerCase())?yt[Ft.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(Ft,_t){return"pssh"in Ft&&Ft.pssh?(Ft.pssh.__text=Ft.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),_t.decodeArray(Ft.pssh.__text).buffer):null}static parsePSSHList(Ft){if(Ft==null)return[];let _t=new DataView(Ft.buffer||Ft),yt={},Vt=0;for(;;){let $t,Wt,rn,Dt,Lt,qt,en=Vt;if(Vt>=_t.buffer.byteLength)break;if($t=_t.getUint32(Vt),Wt=Vt+$t,Vt+=4,_t.getUint32(Vt)===1886614376)if(Vt+=4,rn=_t.getUint8(Vt),rn===0||rn===1){for(Vt++,Vt+=3,Dt="",Lt=0;Lt<4;Lt++)qt=_t.getUint8(Vt+Lt).toString(16),Dt+=qt.length===1?"0"+qt:qt;for(Vt+=4,Dt+="-",Lt=0;Lt<2;Lt++)qt=_t.getUint8(Vt+Lt).toString(16),Dt+=qt.length===1?"0"+qt:qt;for(Vt+=2,Dt+="-",Lt=0;Lt<2;Lt++)qt=_t.getUint8(Vt+Lt).toString(16),Dt+=qt.length===1?"0"+qt:qt;for(Vt+=2,Dt+="-",Lt=0;Lt<2;Lt++)qt=_t.getUint8(Vt+Lt).toString(16),Dt+=qt.length===1?"0"+qt:qt;for(Vt+=2,Dt+="-",Lt=0;Lt<6;Lt++)qt=_t.getUint8(Vt+Lt).toString(16),Dt+=qt.length===1?"0"+qt:qt;Vt+=6,Dt=Dt.toLowerCase(),Vt+=4,yt[Dt]=_t.buffer.slice(en,Wt),Vt=Wt}else Vt=Wt;else Vt=Wt}return yt}static getLicenseServerUrlFromMediaInfo(Ft,_t){try{if(!Ft||Ft.length===0)return null;let yt=0,Vt=null;for(;yt<Ft.length&&!Vt;){const $t=Ft[yt];if($t&&$t.contentProtection&&$t.contentProtection.length>0){const Wt=$t.contentProtection.filter(rn=>rn.schemeIdUri&&rn.schemeIdUri===_t);if(Wt&&Wt.length>0){let rn=0;for(;rn<Wt.length&&!Vt;){const Dt=Wt[rn];Dt.laUrl&&Dt.laUrl.__prefix&&o.prefixes.includes(Dt.laUrl.__prefix)&&Dt.laUrl.__text&&(Vt=Dt.laUrl.__text),rn+=1}}}yt+=1}return Vt}catch{return null}}static hexKidToBufferSource(Ft){const _t=Ft.replace(/-/g,"");return new Uint8Array(_t.match(/[\da-f]{2}/gi).map(function(yt){return parseInt(yt,16)})).buffer}}var u=l,c=class{constructor(Gt,Ft){this.contentType=Gt,this.robustness=Ft}},d=class{constructor(Gt,Ft,_t,yt,Vt,$t){this.initDataTypes=$t&&$t.length>0?$t:[i.default.INITIALIZATION_DATA_TYPE_CENC],Gt&&Gt.length&&(this.audioCapabilities=Gt),Ft&&Ft.length&&(this.videoCapabilities=Ft),this.distinctiveIdentifier=_t,this.persistentState=yt,this.sessionTypes=Vt}},m=t(1923),f=t(1944),h=class{constructor(Gt,Ft,_t,yt,Vt,$t,Wt,rn){this.url=Gt,this.method=Ft,this.responseType=_t,this.headers=yt,this.withCredentials=Vt,this.messageType=$t,this.sessionId=Wt,this.data=rn}},g=class{constructor(Gt,Ft,_t){this.url=Gt,this.headers=Ft,this.data=_t}},p=t(7568),E=t(7263),S=t(5212),x=t(138);function _(Gt){const Ft=(Gt=Gt||{}).BASE64,_t=Gt.cmcdModel,yt=Gt.constants,Vt=Gt.customParametersModel,$t=Gt.debug,Wt=Gt.eventBus,rn=Gt.events,Dt=Gt.protectionKeyController,Lt=Gt.settings;let qt,en,gt,Jt,dn,hn,mn,Fn,Yt,ht,st,Xt,an=Gt.protectionModel,kn=[];function Wn(){if(!(Wt&&Wt.hasOwnProperty("on")&&Dt&&Dt.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function sr(Ut,on){st||Jt?st&&Vr():function(An,Gn){if(Jt)return;var $n;Jt=!0;const or=function(tr){const Jn=[];for(let Xn=0;Xn<tr.length;Xn++){const cr=ur(tr[Xn]);Jn.push({ks:tr[Xn].ks,configs:[cr],protData:tr[Xn].protData})}return Jn}(An=($n=An).sort((tr,Jn)=>(qt&&qt[tr.ks.systemString]&&qt[tr.ks.systemString].priority>=0?qt[tr.ks.systemString].priority:$n.length)-(qt&&qt[Jn.ks.systemString]&&qt[Jn.ks.systemString].priority>=0?qt[Jn.ks.systemString].priority:$n.length)));let vr;an.requestKeySystemAccess(or).then(tr=>(vr=tr.data,function(Jn){let Xn=Jn&&Jn.selectedSystemString?Jn.selectedSystemString:Jn.keySystem.systemString;return mn.info("DRM: KeySystem Access Granted for system string ("+Xn+")!  Selecting key system..."),an.selectKeySystem(Jn)}(vr))).then(tr=>{(function(Jn,Xn){try{st=Jn,Jt=!1,Wt.trigger(rn.KEY_SYSTEM_SELECTED,{data:Xn});const cr=Kr(st);cr&&cr.serverCertificate&&cr.serverCertificate.length>0&&an.setServerCertificate(Ft.decodeArray(cr.serverCertificate).buffer),Vr()}catch(cr){mn.error(cr)}})(tr,vr)}).catch(tr=>{(function(Jn,Xn){st=null,Jt=!1,Xn||Wt.trigger(rn.KEY_SYSTEM_SELECTED,{data:null,error:new f.default(m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Jn.error)})})(tr,Gn)})}(Ut,on)}function Vr(){let Ut;for(let An=0;An<Yt.length;An++)for(Ut=0;Ut<Yt[An].length;Ut++)if(st===Yt[An][Ut].ks){on=Yt[An][Ut],Dt.isClearKey(st)&&function(Gn){if(Gn.protData&&Gn.protData.hasOwnProperty("clearkeys")&&Object.keys(Gn.protData.clearkeys).length!==0){const $n={kids:Object.keys(Gn.protData.clearkeys)};Gn.initData=new TextEncoder().encode(JSON.stringify($n))}}(on),on.sessionId?kr(on):on.initData!==null&&xe(on);break}var on;Yt=[]}function ur(Ut){const on=Ut.protData,An=[],Gn=[],$n=on&&on.initDataTypes&&on.initDataTypes.length>0?on.initDataTypes:[i.default.INITIALIZATION_DATA_TYPE_CENC],or=on&&on.audioRobustness&&on.audioRobustness.length>0?on.audioRobustness:ht,vr=on&&on.videoRobustness&&on.videoRobustness.length>0?on.videoRobustness:ht,tr=Ut.sessionType,Jn=on&&on.distinctiveIdentifier?on.distinctiveIdentifier:"optional",Xn=on&&on.persistentState?on.persistentState:tr==="temporary"?"optional":"required";return Fn.forEach(cr=>{cr.type===yt.AUDIO?An.push(new c(cr.codec,or)):cr.type===yt.VIDEO&&Gn.push(new c(cr.codec,vr))}),new d(An,Gn,Jn,Xn,[tr],$n)}function kr(Ut){Wn(),an.loadKeySession(Ut)}function xe(Ut){if(Ut&&function(An){if(!An)return!1;try{const Gn=an.getSessionTokens();for(let $n=0;$n<Gn.length;$n++)if(Gn[$n].getKeyId()===An)return!0;return!1}catch{return!1}}(Ut.keyId))return;(function(){if(!Lt)return;const An=Lt.get().streaming.protection.keepProtectionMediaKeys,Gn=Lt.get().streaming.protection.keepProtectionMediaKeysMaximumOpenSessions;if(typeof Gn!="number"||Gn<=0)return;if(!An)return void mn.warn("DRM: keepProtectionMediaKeysMaximumOpenSessions is set to "+Gn+", but keepProtectionMediaKeys is not enabled. Therefore, keepProtectionMediaKeysMaximumOpenSessions will be ignored.");if(!an||typeof an.getSessionTokens!="function")return;const $n=an.getSessionTokens()||[];if($n.length<Gn)return;const or=$n[0];or&&(mn.info("DRM: Maximum number of open MediaKeySessions reached ("+Gn+"), closing oldest session."),Cs(or))})();const on=u.getPSSHForKeySystem(st,Ut?Ut.initData:null);if(on){if(la(on))return;try{Ut.initData=on,an.createKeySession(Ut)}catch(An){Wt.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+An.message)})}}else Ut&&Ut.initData?an.createKeySession(Ut):Wt.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(st?st.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Kr(Ut){if(Ut){const on=Ut.systemString;if(qt)return on in qt?qt[on]:null}return null}function la(Ut){if(!Ut)return!1;try{const on=an.getAllInitData();for(let An=0;An<on.length;An++)if(Dt.initDataEquals(Ut,on[An]))return mn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Cs(Ut){Wn(),an.closeKeySession(Ut)}function hi(Ut){Wn(),Ut?(an.setMediaElement(Ut),Wt.on(rn.NEED_KEY,no,en)):Ut===null&&(an.setMediaElement(Ut),Wt.off(rn.NEED_KEY,no,en))}function ll(Ut){mn.debug("DRM: onKeyMessage");const on=Ut.data;Wt.trigger(rn.KEY_MESSAGE,{data:on});const An=on.messageType?on.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,Gn=on.message,$n=on.sessionToken,or=Kr(st),vr=Dt.getLicenseServerModelInstance(st,or,An),tr={sessionToken:$n,messageType:An};if(Gn&&Gn.byteLength!==0){if(!vr)return mn.debug("DRM: License server request not required for this message (type = "+Ut.data.messageType+").  Session ID = "+$n.getSessionId()),void mi(tr);if(Dt.isClearKey(st)){const Jn=Dt.processClearKeyLicenseRequest(st,or,Gn);if(Jn&&Jn.keyPairs&&Jn.keyPairs.length>0)return mn.debug("DRM: ClearKey license request handled by application!"),mi(tr),void an.updateKeySession($n,Jn)}(function(Jn,Xn,cr){const Ra=Jn.sessionToken,ka=Jn.messageType?Jn.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,Ca={sessionToken:Ra,messageType:ka},Ns=st?st.systemString:null;let Lf=function(hr,io,cl,ua,Ff){let Di=null;const zf=ua.message;if(hr&&hr.serverURL){const Na=hr.serverURL;typeof Na=="string"&&Na!==""?Di=Na:typeof Na=="object"&&Na.hasOwnProperty(io)&&(Di=Na[io])}else if(hr&&hr.laURL&&hr.laURL!=="")Di=hr.laURL;else if(Di=u.getLicenseServerUrlFromMediaInfo(Fn,st.schemeIdURI),!Di&&!Dt.isClearKey(st)){const Na=u.getPSSHData(cl.initData);Di=st.getLicenseServerURLFromInitData(Na),Di||(Di=ua.laURL)}return Di=Ff.getServerURLFromMessage(Di,zf,io),Di}(cr,ka,Ra,Jn,Xn);if(!Lf)return void mi(Ca,new f.default(m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const ul={};let Ni=!1;cr&&Oc(ul,cr.httpRequestHeaders);const ro=Jn.message;Oc(ul,st.getRequestHeadersFromMessage(ro)),Object.keys(ul).forEach(hr=>{hr.toLowerCase()==="authorization"&&(Ni=!0)}),cr&&typeof cr.withCredentials=="boolean"&&(Ni=cr.withCredentials);const Jr=function(hr){if(an)if(hr.status>=200&&hr.status<=299){const io=E.default.parseHttpHeaders(hr.getAllResponseHeaders?hr.getAllResponseHeaders():null);let cl=new g(hr.responseURL,io,hr.response);Fc(Vt.getLicenseResponseFilters(),cl).then(()=>{const ua=Xn.getLicenseMessage(cl.data,Ns,ka);ua!==null?(mi(Ca),an.updateKeySession(Ra,ua)):Nf(hr,Ca,Ns,ka,Xn)})}else Nf(hr,Ca,Ns,ka,Xn)},Pf=function(hr){mi(Ca,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ns+' update, XHR aborted. status is "'+hr.statusText+'" ('+hr.status+"), readyState is "+hr.readyState))},fr=function(hr){mi(Ca,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ns+' update, XHR error. status is "'+hr.statusText+'" ('+hr.status+"), readyState is "+hr.readyState))},zc=st.getLicenseRequestFromMessage(ro),Uc=Xn.getHTTPMethod(ka),jc=Xn.getResponseType(Ns,ka),Bc=cr&&!isNaN(cr.httpTimeout)?cr.httpTimeout:8e3,Mf=Ra.getSessionId()||null;let $c=new h(Lf,Uc,jc,ul,Ni,ka,Mf,zc);const Of=isNaN(Lt.get().streaming.retryAttempts[p.HTTPRequest.LICENSE])?3:Lt.get().streaming.retryAttempts[p.HTTPRequest.LICENSE];Fc(Vt.getLicenseRequestFilters(),$c).then(()=>{Mc($c,Of,Bc,Jr,Pf,fr)})})(on,vr,or)}else mi(tr,new f.default(m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function mi(Ut,on=null){Wt.trigger(rn.LICENSE_REQUEST_COMPLETE,{data:Ut,error:on})}function Mc(Ut,on,An,Gn,$n,or){const vr=new XMLHttpRequest,tr=_t.getCmcdParametersFromManifest();if(_t.isCmcdEnabled()&&(tr.mode?tr.mode:Lt.get().streaming.cmcd.mode)===S.default.CMCD_MODE_QUERY){const Xn=_t.getQueryParameter({url:Ut.url,type:p.HTTPRequest.LICENSE});Xn&&(Ut.url=E.default.addAdditionalQueryParameterToUrl(Ut.url,[Xn]))}vr.open(Ut.method,Ut.url,!0),vr.responseType=Ut.responseType,vr.withCredentials=Ut.withCredentials,An>0&&(vr.timeout=An);for(const Xn in Ut.headers)vr.setRequestHeader(Xn,Ut.headers[Xn]);if(_t.isCmcdEnabled()&&(tr.mode?tr.mode:Lt.get().streaming.cmcd.mode)===S.default.CMCD_MODE_HEADER){const Xn=_t.getHeaderParameters({url:Ut.url,type:p.HTTPRequest.LICENSE});if(Xn)for(const cr in Xn){let Ra=Xn[cr];Ra&&vr.setRequestHeader(cr,Ra)}}const Jn=function(){on--;const Xn=isNaN(Lt.get().streaming.retryIntervals[p.HTTPRequest.LICENSE])?1e3:Lt.get().streaming.retryIntervals[p.HTTPRequest.LICENSE];dn=setTimeout(function(){Mc(Ut,on,An,Gn,$n,or)},Xn)};vr.onload=function(){hn=null,this.status>=200&&this.status<=299||on<=0?Gn(this):(mn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+on),Jn())},vr.ontimeout=vr.onerror=function(){hn=null,on<=0?or(this):(mn.warn("License request network request failed . Retrying it... Pending retries: "+on),Jn())},vr.onabort=function(){$n(this)},Wt.trigger(rn.LICENSE_REQUEST_SENDING,{url:Ut.url,headers:Ut.headers,payload:Ut.data,sessionId:Ut.sessionId}),hn=vr,vr.send(Ut.data)}function Cf(){hn&&(hn.onloadend=hn.onerror=hn.onprogress=void 0,hn.abort(),hn=null),dn&&(clearTimeout(dn),dn=null)}function Oc(Ut,on){if(on)for(const An in on)Ut[An]=on[An]}function Nf(Ut,on,An,Gn,$n){let or="NONE",vr=null;Ut.response&&(or=$n.getErrorResponse(Ut.response,An,Gn),vr={serverResponse:Ut.response||null,responseCode:Ut.status||null,responseText:Ut.statusText||null}),mi(on,new f.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+An+' update, XHR complete. status is "'+Ut.statusText+'" ('+Ut.status+"), readyState is "+Ut.readyState+".  Response is "+or,vr))}function Fc(Ut,on){return Ut?Ut.reduce((An,Gn)=>An.then(()=>Gn(on)),Promise.resolve()):Promise.resolve()}function no(Ut,on){if(Lt.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(mn.debug("DRM: onNeedKey"),Ut.key.initDataType!==i.default.INITIALIZATION_DATA_TYPE_CENC)return void mn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Ut.key.initDataType);if(Fn.length===0&&(mn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(on=on===void 0?1:on+1)<5))return void kn.push(setTimeout(()=>{no(Ut,on)},500));let An=Ut.key.initData;if(ArrayBuffer.isView(An)&&(An=An.buffer),st){const $n=u.getPSSHForKeySystem(st,An);if($n&&la($n))return}mn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(An)));const Gn=Dt.getSupportedKeySystemMetadataFromSegmentPssh(An,qt,Xt);Gn.length!==0?function($n){Yt.push($n),sr($n,!1)}(Gn):mn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function Df(Ut,on){if(Ut.size<=0)return!1;if(on.size>0&&[...Ut].every(Gn=>{const $n=on.get(Gn);return $n!==void 0&&$n!==""}))return!0;const An=an.getSessionTokens();if(An&&An.length>0){const Gn=An.filter($n=>[...Ut].includes($n.normalizedKeyId));if(Gn.some($n=>!$n.hasTriggeredKeyStatusMapUpdate)||Gn.length===0)return!1}return!Lt.get().streaming.protection.ignoreKeyStatuses&&Ut&&Ut.size>0&&on&&on.size>0}return en={areKeyIdsExpired:function(Ut){try{return!!Df(Ut,gt)&&[...Ut].every(on=>gt.get(on)===i.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(on){return mn.error(on),!1}},areKeyIdsUsable:function(Ut){try{return!Df(Ut,gt)||[...Ut].some(on=>{const An=gt.get(on);return An&&An!==i.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&An!==i.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(on){return mn.error(on),!0}},clearMediaInfoArray:function(){Fn=[]},closeKeySession:Cs,createKeySession:xe,getKeySystems:function(){return Dt?Dt.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(Ut){return Wn(),Dt.getSupportedKeySystemMetadataFromContentProtection(Ut,qt,Xt)},handleKeySystemFromManifest:function(){if(!Fn||Fn.length===0)return;let Ut=[];Fn.forEach(on=>{const An=Dt.getSupportedKeySystemMetadataFromContentProtection(on.contentProtection,qt,Xt);An.length>0&&(Ut.length===0&&(Ut=An),Yt.push(An))}),Ut&&Ut.length>0&&sr(Ut,!0)},initializeForMedia:function(Ut){if(!Ut)throw new Error("mediaInfo can not be null or undefined");Wn(),Fn.push(Ut)},loadKeySession:kr,removeKeySession:function(Ut){Wn(),an.removeKeySession(Ut)},reset:function(){Wt.off(rn.INTERNAL_KEY_MESSAGE,ll,en),Wn(),Cf(),hi(null),st=null,Jt=!1,gt=new Map,an&&(an.reset(),an=null),kn.forEach(Ut=>clearTimeout(Ut)),kn=[],Fn=[],Yt=[]},setKeySystems:function(Ut){Dt&&Dt.setKeySystems(Ut)},setMediaElement:hi,setProtectionData:function(Ut){qt=Ut,Dt.setProtectionData(Ut)},setRobustnessLevel:function(Ut){ht=Ut},setServerCertificate:function(Ut){return Wn(),an.setServerCertificate(Ut)},setSessionType:function(Ut){Xt=Ut},stop:function(){Cf(),an&&an.stop()},updateKeyStatusesMap:function(Ut){try{if(!Ut||!Ut.sessionToken||!Ut.parsedKeyStatuses)return;Ut.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const on=Ut.parsedKeyStatuses,An=E.default.parseUserAgent(),Gn=An&&An.browser&&An.browser.name&&An.browser.name.toLowerCase()==="edge";on.forEach($n=>{Gn&&st.uuid===i.default.PLAYREADY_UUID&&$n.keyId&&$n.keyId.byteLength===16&&function(vr){const tr=E.default.bufferSourceToDataView(vr),Jn=tr.getUint32(0,!0),Xn=tr.getUint16(4,!0),cr=tr.getUint16(6,!0);tr.setUint32(0,Jn,!1),tr.setUint16(4,Xn,!1),tr.setUint16(6,cr,!1)}($n.keyId);const or=E.default.bufferSourceToHex($n.keyId).slice(0,32);or&&or!==""&&gt.set(or,$n.status)}),Wt.trigger(rn.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:gt})}catch(on){mn.error(on)}}},mn=$t.getLogger(en),Yt=[],Fn=[],Xt="temporary",ht="",hn=null,dn=null,gt=new Map,Wt.on(rn.INTERNAL_KEY_MESSAGE,ll,en),en}_.__dashjs_factory_name="ProtectionController";var A=x.default.getClassFactory(_),z=class{constructor(Gt,Ft){this.keyID=Gt,this.key=Ft}},ie=class{constructor(Gt,Ft){if(Ft&&Ft!=="persistent"&&Ft!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Gt,this.type=Ft}toJWK(){let Gt,Ft=this.keyPairs.length,_t={keys:[]};for(Gt=0;Gt<Ft;Gt++){let rn={kty:"oct",alg:"A128KW",kid:this.keyPairs[Gt].keyID,k:this.keyPairs[Gt].key};_t.keys.push(rn)}this.type&&(_t.type=this.type);let yt=JSON.stringify(_t);const Vt=yt.length;let $t=new ArrayBuffer(Vt),Wt=new Uint8Array($t);for(Gt=0;Gt<Vt;Gt++)Wt[Gt]=yt.charCodeAt(Gt);return $t}};const he=i.default.CLEARKEY_UUID,P=i.default.CLEARKEY_KEYSTEM_STRING,U="urn:uuid:"+he;function ce(Gt){let Ft;const _t=(Gt=Gt||{}).BASE64;return Ft={uuid:he,schemeIdURI:U,systemString:P,getInitData:function(yt,Vt){try{let $t=u.parseInitDataFromContentProtection(yt,_t);if(!$t&&Vt){const Wt={kids:[function(rn){try{let Dt=rn.replace(/-/g,"");return Dt=btoa(Dt.match(/\w{2}/g).map(Lt=>String.fromCharCode(parseInt(Lt,16))).join("")),Dt.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Vt.cencDefaultKid)]};$t=new TextEncoder().encode(JSON.stringify(Wt))}return $t}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(yt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(yt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(yt,Vt){let $t=null;if(yt){const Wt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Vt))),rn=[];for(let Dt=0;Dt<Wt.kids.length;Dt++){const Lt=Wt.kids[Dt],qt=yt.clearkeys&&yt.clearkeys.hasOwnProperty(Lt)?yt.clearkeys[Lt]:null;if(!qt)throw new Error("DRM: ClearKey keyID ("+Lt+") is not known!");rn.push(new z(Lt,qt))}$t=new ie(rn)}return $t}},Ft}ce.__dashjs_factory_name="KeySystemClearKey";var de=x.default.getSingletonFactory(ce);const _e=i.default.W3C_CLEARKEY_UUID,je=i.default.CLEARKEY_KEYSTEM_STRING,Se="urn:uuid:"+_e;function ze(Gt){let Ft;const _t=Gt.BASE64,yt=Gt.debug.getLogger(Ft);return Ft={uuid:_e,schemeIdURI:Se,systemString:je,getInitData:function(Vt){return u.parseInitDataFromContentProtection(Vt,_t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Vt){return new Uint8Array(Vt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Vt,$t){let Wt=null;if(Vt){const rn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array($t))),Dt=[];for(let Lt=0;Lt<rn.kids.length;Lt++){const qt=rn.kids[Lt],en=Vt.clearkeys&&Vt.clearkeys.hasOwnProperty(qt)?Vt.clearkeys[qt]:null;if(!en)throw new Error("DRM: ClearKey keyID ("+qt+") is not known!");Dt.push(new z(qt,en))}Wt=new ie(Dt),yt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Wt}},Ft}ze.__dashjs_factory_name="KeySystemW3CClearKey";var Le=x.default.getSingletonFactory(ze);const Re=i.default.WIDEVINE_UUID,Ye=i.default.WIDEVINE_KEYSTEM_STRING,Ue="urn:uuid:"+Re;function Me(Gt){let Ft;const _t=(Gt=Gt||{}).BASE64;return Ft={uuid:Re,schemeIdURI:Ue,systemString:Ye,getInitData:function(yt){return u.parseInitDataFromContentProtection(yt,_t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(yt){return new Uint8Array(yt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},Ft}Me.__dashjs_factory_name="KeySystemWidevine";var We=x.default.getSingletonFactory(Me);const Ke=i.default.PLAYREADY_UUID,nt=i.default.PLAYREADY_KEYSTEM_STRING,bt="urn:uuid:"+Ke;function Rt(Gt){let Ft,_t="utf-16";const yt=(Gt=Gt||{}).BASE64,Vt=Gt.settings;function $t(){if(!yt||!yt.hasOwnProperty("decodeArray")||!yt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return Ft={uuid:Ke,schemeIdURI:bt,systemString:nt,getInitData:function(Wt){const rn=new Uint8Array([112,115,115,104,0,0,0,0]),Dt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Lt,qt,en,gt,Jt,dn=0,hn=null;if($t(),!Wt)return null;if("pssh"in Wt&&Wt.pssh)return u.parseInitDataFromContentProtection(Wt,yt);if("pro"in Wt&&Wt.pro)hn=yt.decodeArray(Wt.pro.__text);else{if(!("prheader"in Wt)||!Wt.prheader)return null;hn=yt.decodeArray(Wt.prheader.__text)}return Lt=hn.length,qt=4+rn.length+Dt.length+4+Lt,en=new ArrayBuffer(qt),gt=new Uint8Array(en),Jt=new DataView(en),Jt.setUint32(dn,qt),dn+=4,gt.set(rn,dn),dn+=rn.length,gt.set(Dt,dn),dn+=Dt.length,Jt.setUint32(dn,Lt),dn+=4,gt.set(hn,dn),dn+=Lt,gt.buffer},getRequestHeadersFromMessage:function(Wt){let rn,Dt;const Lt={},qt=new DOMParser;if(Vt&&Vt.get().streaming.protection.detectPlayreadyMessageFormat&&_t==="utf-16"&&Wt&&Wt.byteLength%2==1)return Lt["Content-Type"]="text/xml; charset=utf-8",Lt;const en=_t==="utf-16"?new Uint16Array(Wt):new Uint8Array(Wt);rn=String.fromCharCode.apply(null,en),Dt=qt.parseFromString(rn,"application/xml");const gt=Dt.getElementsByTagName("name"),Jt=Dt.getElementsByTagName("value");for(let dn=0;dn<gt.length;dn++)Lt[gt[dn].childNodes[0].nodeValue]=Jt[dn].childNodes[0].nodeValue;return Lt.hasOwnProperty("Content")&&(Lt["Content-Type"]=Lt.Content,delete Lt.Content),Lt.hasOwnProperty("Content-Type")||(Lt["Content-Type"]="text/xml; charset=utf-8"),Lt},getLicenseRequestFromMessage:function(Wt){let rn=null;const Dt=new DOMParser;if(Vt&&Vt.get().streaming.protection.detectPlayreadyMessageFormat&&_t==="utf-16"&&Wt&&Wt.byteLength%2==1)return Wt;const Lt=_t==="utf-16"?new Uint16Array(Wt):new Uint8Array(Wt);$t();const qt=String.fromCharCode.apply(null,Lt),en=Dt.parseFromString(qt,"application/xml");if(!en.getElementsByTagName("PlayReadyKeyMessage")[0])return Wt;{const gt=en.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;gt&&(rn=yt.decode(gt))}return rn},getLicenseServerURLFromInitData:function(Wt){if(Wt){const rn=new DataView(Wt),Dt=rn.getUint16(4,!0);let Lt=6;const qt=new DOMParser;for(let en=0;en<Dt;en++){const gt=rn.getUint16(Lt,!0);Lt+=2;const Jt=rn.getUint16(Lt,!0);if(Lt+=2,gt!==1){Lt+=Jt;continue}const dn=Wt.slice(Lt,Lt+Jt),hn=String.fromCharCode.apply(null,new Uint16Array(dn)),mn=qt.parseFromString(hn,"application/xml");if(mn.getElementsByTagName("LA_URL")[0]){const Fn=mn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Fn)return Fn}if(mn.getElementsByTagName("LUI_URL")[0]){const Fn=mn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Fn)return Fn}}}return null},getCDMData:function(Wt){let rn,Dt,Lt,qt;if($t(),!Wt)return null;for(rn=[],qt=0;qt<Wt.length;++qt)rn.push(Wt.charCodeAt(qt)),rn.push(0);for(rn=String.fromCharCode.apply(null,rn),rn=yt.encode(rn),Dt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",rn),Lt=[],qt=0;qt<Dt.length;++qt)Lt.push(Dt.charCodeAt(qt)),Lt.push(0);return new Uint8Array(Lt).buffer},setPlayReadyMessageFormat:function(Wt){if(Wt!=="utf-8"&&Wt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');_t=Wt}},Ft}Rt.__dashjs_factory_name="KeySystemPlayReady";var Pe=x.default.getSingletonFactory(Rt);function Ne(Gt){const Ft=(Gt=Gt||{}).BASE64,_t={};let yt;return _t[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Vt){return Ft.decodeArray(Vt.license)},getErrorResponse:function(Vt){return Vt}},_t[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Vt){return Vt},getErrorResponse:function(Vt){return String.fromCharCode.apply(null,new Uint8Array(Vt))}},yt={getServerURLFromMessage:function(Vt){return Vt},getHTTPMethod:function(){return"POST"},getResponseType:function(Vt){return _t[Vt].responseType},getLicenseMessage:function(Vt,$t){return function(){if(!Ft||!Ft.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),_t[$t].getLicenseMessage(Vt)},getErrorResponse:function(Vt,$t){return _t[$t].getErrorResponse(Vt)}},yt}Ne.__dashjs_factory_name="DRMToday";var Qe=x.default.getSingletonFactory(Ne);function X(){let Gt;const Ft="http://schemas.xmlsoap.org/soap/envelope/";function _t($t){const Wt=String.fromCharCode.apply(null,new Uint8Array($t));return decodeURIComponent(escape(Wt))}function yt($t){if(window.DOMParser){const Wt=_t($t),rn=new window.DOMParser().parseFromString(Wt,"text/xml"),Dt=rn?rn.getElementsByTagNameNS(Ft,"Envelope")[0]:null,Lt=Dt?Dt.getElementsByTagNameNS(Ft,"Body")[0]:null;if(Lt&&Lt.getElementsByTagNameNS(Ft,"Fault")[0])return null}return $t}function Vt($t){let Wt="",rn="",Dt="",Lt=-1,qt=-1;if(window.DOMParser){const gt=_t($t),Jt=new window.DOMParser().parseFromString(gt,"text/xml"),dn=Jt?Jt.getElementsByTagNameNS(Ft,"Envelope")[0]:null,hn=dn?dn.getElementsByTagNameNS(Ft,"Body")[0]:null,mn=hn?hn.getElementsByTagNameNS(Ft,"Fault")[0]:null,Fn=mn?mn.getElementsByTagName("detail")[0]:null,Yt=Fn?Fn.getElementsByTagName("Exception")[0]:null;let ht=null;if(mn===null)return gt;ht=mn.getElementsByTagName("faultstring")[0].firstChild,Wt=ht?ht.nodeValue:null,Yt!==null&&(ht=Yt.getElementsByTagName("StatusCode")[0],rn=ht?ht.firstChild.nodeValue:null,ht=Yt.getElementsByTagName("Message")[0],Dt=ht?ht.firstChild.nodeValue:null,Lt=Dt?Dt.lastIndexOf("[")+1:-1,qt=Dt?Dt.indexOf("]"):-1,Dt=Dt?Dt.substring(Lt,qt):"")}let en=`code: ${rn}, name: ${Wt}`;return Dt&&(en+=`, message: ${Dt}`),en}return Gt={getServerURLFromMessage:function($t){return $t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function($t){return yt.call(this,$t)},getErrorResponse:function($t){return Vt.call(this,$t)}},Gt}X.__dashjs_factory_name="PlayReady";var W=x.default.getSingletonFactory(X);function C(){let Gt;return Gt={getServerURLFromMessage:function(Ft){return Ft},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Ft){return Ft},getErrorResponse:function(Ft){return String.fromCharCode.apply(null,new Uint8Array(Ft))}},Gt}C.__dashjs_factory_name="Widevine";var O=x.default.getSingletonFactory(C);function le(){let Gt;return Gt={getServerURLFromMessage:function(Ft){return Ft},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(Ft){if(!Ft.hasOwnProperty("keys"))return null;let _t=[];for(let yt=0;yt<Ft.keys.length;yt++){let Vt=Ft.keys[yt],$t=Vt.kid.replace(/=/g,""),Wt=Vt.k.replace(/=/g,"");_t.push(new z($t,Wt))}return new ie(_t)},getErrorResponse:function(Ft){return String.fromCharCode.apply(null,new Uint8Array(Ft))}},Gt}le.__dashjs_factory_name="ClearKey";var te=x.default.getSingletonFactory(le),Be=class{constructor(Gt){this.ks=Gt.ks,this.keyId=Gt.keyId,this.initData=Gt.initData,this.protData=Gt.protData,this.cdmData=Gt.cdmData,this.sessionId=Gt.sessionId,this.sessionType=Gt.sessionType}};function rt(){let Gt,Ft,_t,yt,Vt,$t,Wt,rn,Dt=this.context;function Lt(gt,Jt){return Jt&&gt in Jt?Jt[gt]:null}function qt(gt,Jt){return gt&&gt.sessionId?gt.sessionId:Jt&&Jt.sessionId?Jt.sessionId:null}function en(gt,Jt){return gt&&gt.sessionType?gt.sessionType:Jt}return Gt={getKeySystemBySystemString:function(gt){for(let Jt=0;Jt<yt.length;Jt++)if(yt[Jt].systemString===gt)return yt[Jt];return null},getKeySystems:function(){return yt},getLicenseServerModelInstance:function(gt,Jt,dn){if(dn===i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||dn===i.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let hn=null;return Jt&&Jt.hasOwnProperty("drmtoday")?hn=Qe(Dt).getInstance({BASE64:Vt}):gt.systemString===i.default.WIDEVINE_KEYSTEM_STRING?hn=O(Dt).getInstance():gt.systemString===i.default.PLAYREADY_KEYSTEM_STRING?hn=W(Dt).getInstance():gt.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(hn=te(Dt).getInstance()),hn},getSupportedKeySystemMetadataFromContentProtection:function(gt,Jt,dn){let hn,mn,Fn,Yt,ht=[];if(!gt||!gt.length)return ht;const st=u.findMp4ProtectionElement(gt);for(Fn=0;Fn<yt.length;Fn++){mn=yt[Fn];const Xt=Lt(mn.systemString,Jt);for(Yt=0;Yt<gt.length;Yt++)if(hn=gt[Yt],hn.schemeIdUri.toLowerCase()===mn.schemeIdURI){let an=mn.getInitData(hn,st);const kn=new Be({ks:yt[Fn],keyId:hn.keyId,initData:an,protData:Xt,cdmData:mn.getCDMData(Xt?Xt.cdmData:null),sessionId:qt(Xt,hn),sessionType:en(Xt,dn)});Xt?ht.unshift(kn):ht.push(kn)}}return ht},getSupportedKeySystemMetadataFromSegmentPssh:function(gt,Jt,dn){let hn,mn,Fn=[],Yt=u.parsePSSHList(gt);for(let ht=0;ht<yt.length;++ht){hn=yt[ht],mn=hn.systemString;const st=Lt(mn,Jt);hn.uuid in Yt&&Fn.push({ks:hn,initData:Yt[hn.uuid],protData:st,cdmData:hn.getCDMData(st?st.cdmData:null),sessionId:qt(st),sessionType:en(st,dn)})}return Fn},initDataEquals:function(gt,Jt){if(gt.byteLength===Jt.byteLength){let dn=new Uint8Array(gt),hn=new Uint8Array(Jt);for(let mn=0;mn<dn.length;mn++)if(dn[mn]!==hn[mn])return!1;return!0}return!1},initialize:function(){let gt;yt=[],gt=Pe(Dt).getInstance({BASE64:Vt,settings:$t}),yt.push(gt),gt=We(Dt).getInstance({BASE64:Vt}),yt.push(gt),gt=de(Dt).getInstance({BASE64:Vt}),yt.push(gt),Wt=gt,gt=Le(Dt).getInstance({BASE64:Vt,debug:Ft}),yt.push(gt),rn=gt},isClearKey:function(gt){return gt===Wt||gt===rn},processClearKeyLicenseRequest:function(gt,Jt,dn){try{return gt.getClearKeysFromProtectionData(Jt,dn)}catch{return _t.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(gt){gt&&(gt.debug&&(Ft=gt.debug,_t=Ft.getLogger(Gt)),gt.BASE64&&(Vt=gt.BASE64),gt.settings&&($t=gt.settings))},setKeySystems:function(gt){yt=gt},setProtectionData:function(gt){for(var Jt,dn,hn=0;hn<yt.length;hn++){var mn=yt[hn];mn.hasOwnProperty("init")&&mn.init((Jt=mn.systemString,dn=void 0,dn=null,gt&&(dn=Jt in gt?gt[Jt]:null),dn))}}},Gt}rt.__dashjs_factory_name="ProtectionKeyController";var qe=x.default.getSingletonFactory(rt),Xe=t(445),$e=class{constructor(Gt,Ft){this.initData=Gt,this.initDataType=Ft}},et=class{constructor(Gt,Ft,_t,yt){this.sessionToken=Gt,this.message=Ft,this.defaultURL=_t,this.messageType=yt||i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},Ve=class{constructor(Gt,Ft){this.keySystem=Gt,this.ksConfiguration=Ft,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const Ze={};function ct(Gt){Gt=Gt||{};const Ft=this.context,_t=Gt.eventBus,yt=Gt.events,Vt=Gt.debug;let $t,Wt,rn,Dt,Lt,qt,en,gt;function Jt(ht,st,Xt,an){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const ur="Insecure origins are not allowed";return _t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:ur}),void an({error:ur})}const kn=ht[st].protData&&ht[st].protData.systemStringPriority?ht[st].protData.systemStringPriority:null,Wn=ht[st].configs,sr=ht[st].ks;let Vr=sr.systemString;(function(ur,kr){return new Promise((xe,Kr)=>{dn(ur,kr,0,xe,Kr)})})(kn||(Ze[Vr]?Ze[Vr]:[Vr]),Wn).then(ur=>{const kr=ur&&ur.nativeMediaKeySystemAccessObject&&typeof ur.nativeMediaKeySystemAccessObject.getConfiguration=="function"?ur.nativeMediaKeySystemAccessObject.getConfiguration():null,xe=new Ve(sr,kr);xe.selectedSystemString=ur.selectedSystemString,xe.nativeMediaKeySystemAccessObject=ur.nativeMediaKeySystemAccessObject,_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:xe}),Xt({data:xe})}).catch(ur=>{if(st+1<ht.length)Jt(ht,st+1,Xt,an);else{const kr="Key system access denied! ";_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:kr+ur.message}),an({error:kr+ur.message})}})}function dn(ht,st,Xt,an,kn){const Wn=ht[Xt];Wt.debug(`Requesting key system access for system string ${Wn}`),navigator.requestMediaKeySystemAccess(Wn,st).then(sr=>{an({nativeMediaKeySystemAccessObject:sr,selectedSystemString:Wn})}).catch(sr=>{Xt+1<ht.length?dn(ht,st,Xt+1,an,kn):kn(sr)})}function hn(ht){if(!ht||!ht.session)return Promise.resolve;const st=ht.session;return st.removeEventListener("keystatuseschange",ht),st.removeEventListener("message",ht),st.close()}function mn(ht){for(let st=0;st<qt.length;st++)if(qt[st]===ht){qt.splice(st,1);break}}function Fn(ht,st){const Xt={session:ht,keyId:st.keyId,normalizedKeyId:st&&st.keyId&&typeof st.keyId=="string"?st.keyId.replace(/-/g,"").toLowerCase():"",initData:st.initData,sessionId:st.sessionId,sessionType:st.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(an){switch(an.type){case"keystatuseschange":this._onKeyStatusesChange(an);break;case"message":this._onKeyMessage(an)}},_onKeyStatusesChange:function(an){_t.trigger(yt.KEY_STATUSES_CHANGED,{data:this});const kn=[];an.target.keyStatuses.forEach(function(){kn.push(Yt(arguments))}),_t.trigger(yt.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:kn,sessionToken:Xt})},_onKeyMessage:function(an){let kn=ArrayBuffer.isView(an.message)?an.message.buffer:an.message;_t.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new et(this,kn,void 0,an.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return ht.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return ht.expiration},getKeyStatuses:function(){return ht.keyStatuses},getUsable:function(){let an=!1;return ht.keyStatuses.forEach(function(){Yt(arguments).status===i.default.MEDIA_KEY_STATUSES.USABLE&&(an=!0)}),an}};return ht.addEventListener("keystatuseschange",Xt),ht.addEventListener("message",Xt),ht.closed.then(()=>{mn(Xt),Wt.debug("DRM: Session closed.  SessionID = "+Xt.getSessionId()),_t.trigger(yt.KEY_SESSION_CLOSED,{data:Xt.getSessionId()})}),qt.push(Xt),Xt}function Yt(ht){let st,Xt;return ht&&ht.length>0&&(ht[0]&&(typeof ht[0]=="string"?st=ht[0]:Xt=ht[0]),ht[1]&&(typeof ht[1]=="string"?st=ht[1]:Xt=ht[1])),{status:st,keyId:Xt}}return $t={closeKeySession:function(ht){hn(ht).catch(function(st){mn(ht),_t.trigger(yt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ht.getSessionId()+") "+st.name})})},createKeySession:function(ht){if(!rn||!Lt)throw new Error("Can not create sessions until you have selected a key system");const st=Lt.createSession(ht.sessionType),Xt=Fn(st,ht),an=rn.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(ht.initData||ht.protData&&ht.protData.clearkeys)?i.default.INITIALIZATION_DATA_TYPE_KEYIDS:i.default.INITIALIZATION_DATA_TYPE_CENC;st.generateRequest(an,ht.initData).then(function(){Wt.debug("DRM: Session created.  SessionID = "+Xt.getSessionId()),_t.trigger(yt.KEY_SESSION_CREATED,{data:Xt})}).catch(function(kn){mn(Xt),_t.trigger(yt.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+kn.name)})})},getAllInitData:function(){const ht=[];for(let st=0;st<qt.length;st++)qt[st].initData&&ht.push(qt[st].initData);return ht},getSessionTokens:function(){return qt},loadKeySession:function(ht){if(!rn||!Lt)throw new Error("Can not load sessions until you have selected a key system");const st=ht.sessionId;for(let kn=0;kn<qt.length;kn++)if(st===qt[kn].sessionId)return void Wt.warn("DRM: Ignoring session ID because we have already seen it!");const Xt=Lt.createSession(ht.sessionType),an=Fn(Xt,ht);an.hasTriggeredKeyStatusMapUpdate=!0,Xt.load(st).then(function(kn){kn?(Wt.debug("DRM: Session loaded.  SessionID = "+an.getSessionId()),_t.trigger(yt.KEY_SESSION_CREATED,{data:an})):(mn(an),_t.trigger(yt.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+st+")")}))}).catch(function(kn){mn(an),_t.trigger(yt.KEY_SESSION_CREATED,{data:null,error:new f.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+st+")! "+kn.name)})})},removeKeySession:function(ht){ht.session.remove().then(function(){Wt.debug("DRM: Session removed.  SessionID = "+ht.getSessionId()),_t.trigger(yt.KEY_SESSION_REMOVED,{data:ht.getSessionId()})},function(st){_t.trigger(yt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+ht.getSessionId()+"). "+st.name})})},requestKeySystemAccess:function(ht){return new Promise((st,Xt)=>{Jt(ht,0,st,Xt)})},reset:function(){const ht=qt.length;let st;if(ht!==0){const Xt=function(an){mn(an),qt.length===0&&(Dt?(Dt.removeEventListener("encrypted",en),Dt.setMediaKeys(null).then(function(){_t.trigger(yt.TEARDOWN_COMPLETE)})):_t.trigger(yt.TEARDOWN_COMPLETE))};for(let an=0;an<ht;an++)st=qt[an],function(kn){hn(st),Xt(kn)}(st)}else _t.trigger(yt.TEARDOWN_COMPLETE)},selectKeySystem:function(ht){return new Promise((st,Xt)=>{ht.nativeMediaKeySystemAccessObject.createMediaKeys().then(an=>(rn=ht.keySystem,Lt=an,Dt?Dt.setMediaKeys(Lt):Promise.resolve())).then(()=>{st(rn)}).catch(function(){Xt({error:"Error selecting keys system ("+ht.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(ht){Dt!==ht&&(Dt&&(Dt.removeEventListener("encrypted",en),Dt.setMediaKeys&&Dt.setMediaKeys(null)),Dt=ht,Dt&&(Dt.addEventListener("encrypted",en),Dt.setMediaKeys&&Lt&&Dt.setMediaKeys(Lt)))},setServerCertificate:function(ht){return new Promise(st=>{Lt.setServerCertificate(ht).then(function(){Wt.info("DRM: License server certificate successfully updated."),_t.trigger(yt.SERVER_CERTIFICATE_UPDATED),st()}).catch(Xt=>{_t.trigger(yt.SERVER_CERTIFICATE_UPDATED,{error:new f.default(m.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,m.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Xt.name)}),st()})})},stop:function(){let ht;for(let st=0;st<qt.length;st++)ht=qt[st],ht.getUsable()||(hn(ht),mn(ht))},updateKeySession:function(ht,st){const Xt=ht.session;gt.isClearKey(rn)&&(st=st.toJWK()),Xt.update(st).then(()=>{_t.trigger(yt.KEY_SESSION_UPDATED)}).catch(function(an){_t.trigger(yt.KEY_ERROR,{error:new f.default(m.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+an.name,ht)})})}},Wt=Vt.getLogger($t),rn=null,Dt=null,Lt=null,qt=[],gt=qe(Ft).getInstance(),en={handleEvent:function(ht){if(ht.type==="encrypted"&&ht.initData){let st=ArrayBuffer.isView(ht.initData)?ht.initData.buffer:ht.initData;_t.trigger(yt.NEED_KEY,{key:new $e(st,ht.initDataType)})}}},$t}Ze[i.default.PLAYREADY_KEYSTEM_STRING]=[i.default.PLAYREADY_KEYSTEM_STRING,i.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Ze[i.default.WIDEVINE_KEYSTEM_STRING]=[i.default.WIDEVINE_KEYSTEM_STRING],Ze[i.default.CLEARKEY_KEYSTEM_STRING]=[i.default.CLEARKEY_KEYSTEM_STRING],ct.__dashjs_factory_name="DefaultProtectionModel";var Ht=x.default.getClassFactory(ct);function Pt(Gt){Gt=Gt||{};const Ft=this.context,_t=Gt.eventBus,yt=Gt.events,Vt=Gt.debug,$t=Gt.api;let Wt,rn,Dt,Lt,qt,en,gt,Jt,dn;function hn(){try{for(let Yt=0;Yt<gt.length;Yt++)mn(gt[Yt]);Dt&&Dt.removeEventListener($t.needkey,Jt),_t.trigger(yt.TEARDOWN_COMPLETE)}catch(Yt){_t.trigger(yt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Yt.message})}}function mn(Yt){const ht=Yt.session;ht.removeEventListener($t.error,Yt),ht.removeEventListener($t.message,Yt),ht.removeEventListener($t.ready,Yt),ht.removeEventListener($t.close,Yt);for(let st=0;st<gt.length;st++)if(gt[st]===Yt){gt.splice(st,1);break}ht[$t.release]()}function Fn(){let Yt=null;const ht=function(){Dt.removeEventListener("loadedmetadata",Yt),Dt[$t.setMediaKeys](qt),_t.trigger(yt.VIDEO_ELEMENT_SELECTED)};Dt.readyState>=1?ht():(Yt=ht.bind(this),Dt.addEventListener("loadedmetadata",Yt))}return Wt={getAllInitData:function(){const Yt=[];for(let ht=0;ht<gt.length;ht++)Yt.push(gt[ht].initData);return Yt},getSessionTokens:function(){return gt},requestKeySystemAccess:function(Yt){return new Promise((ht,st)=>{let Xt=!1;for(let an=0;an<Yt.length;an++){const kn=Yt[an].ks.systemString,Wn=Yt[an].configs;let sr=null,Vr=null;for(let ur=0;ur<Wn.length;ur++){const kr=Wn[ur].audioCapabilities,xe=Wn[ur].videoCapabilities;if(kr&&kr.length!==0){sr=[];for(let hi=0;hi<kr.length;hi++)window[$t.MediaKeys].isTypeSupported(kn,kr[hi].contentType)&&sr.push(kr[hi])}if(xe&&xe.length!==0){Vr=[];for(let hi=0;hi<xe.length;hi++)window[$t.MediaKeys].isTypeSupported(kn,xe[hi].contentType)&&Vr.push(xe[hi])}if(!sr&&!Vr||sr&&sr.length===0||Vr&&Vr.length===0)continue;Xt=!0;const Kr=new d(sr,Vr),la=dn.getKeySystemBySystemString(kn),Cs=new Ve(la,Kr);_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:Cs}),ht({data:Cs});break}}if(!Xt){const an="Key system access denied! -- No valid audio/video content configurations detected!";_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:an}),st({error:an})}})},selectKeySystem:function(Yt){return new Promise((ht,st)=>{try{qt=Yt.mediaKeys=new window[$t.MediaKeys](Yt.keySystem.systemString),Lt=Yt.keySystem,en=Yt,Dt&&Fn(),ht(Lt)}catch{st({error:"Error selecting keys system ("+Lt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Yt){Dt!==Yt&&(Dt&&Dt.removeEventListener($t.needkey,Jt),Dt=Yt,Dt&&(Dt.addEventListener($t.needkey,Jt),qt&&Fn()))},createKeySession:function(Yt){if(!Lt||!qt||!en)throw new Error("Can not create sessions until you have selected a key system");let ht=null;if(en.ksConfiguration.videoCapabilities&&en.ksConfiguration.videoCapabilities.length>0&&(ht=en.ksConfiguration.videoCapabilities[0]),ht===null&&en.ksConfiguration.audioCapabilities&&en.ksConfiguration.audioCapabilities.length>0&&(ht=en.ksConfiguration.audioCapabilities[0]),ht===null)throw new Error("Can not create sessions for unknown content types.");const st=ht.contentType,Xt=qt.createSession(st,new Uint8Array(Yt.initData),Yt.cdmData?new Uint8Array(Yt.cdmData):null),an=function(kn,Wn){return{session:kn,keyId:Wn.keyId,normalizedKeyId:Wn&&Wn.keyId&&typeof Wn.keyId=="string"?Wn.keyId.replace(/-/g,"").toLowerCase():"",initData:Wn.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(sr){switch(sr.type){case $t.error:let Vr="KeyError";_t.trigger(yt.KEY_ERROR,{error:new f.default(m.default.MEDIA_KEYERR_CODE,Vr,this)});break;case $t.message:let ur=ArrayBuffer.isView(sr.message)?sr.message.buffer:sr.message;_t.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new et(this,ur,sr.destinationURL)});break;case $t.ready:rn.debug("DRM: Key added."),_t.trigger(yt.KEY_ADDED);break;case $t.close:rn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),_t.trigger(yt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Xt,Yt);Xt.addEventListener($t.error,an),Xt.addEventListener($t.message,an),Xt.addEventListener($t.ready,an),Xt.addEventListener($t.close,an),gt.push(an),rn.debug("DRM: Session created.  SessionID = "+an.getSessionId()),_t.trigger(yt.KEY_SESSION_CREATED,{data:an})},updateKeySession:function(Yt,ht){const st=Yt.session;dn.isClearKey(Lt)?st.update(new Uint8Array(ht.toJWK())):st.update(new Uint8Array(ht)),_t.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:mn,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:hn,reset:hn},rn=Vt.getLogger(Wt),Dt=null,Lt=null,qt=null,en=null,gt=[],dn=qe(Ft).getInstance(),Jt={handleEvent:function(Yt){if(Yt.type===$t.needkey&&Yt.initData){const ht=ArrayBuffer.isView(Yt.initData)?Yt.initData.buffer:Yt.initData;_t.trigger(yt.NEED_KEY,{key:new $e(ht,i.default.INITIALIZATION_DATA_TYPE_CENC)})}}},Wt}Pt.__dashjs_factory_name="ProtectionModel_3Feb2014";var Kt=x.default.getClassFactory(Pt);function It(Gt){Gt=Gt||{};const Ft=this.context,_t=Gt.eventBus,yt=Gt.events,Vt=Gt.debug,$t=Gt.api,Wt=Gt.errHandler;let rn,Dt,Lt,qt,en,gt,Jt,dn,hn;function mn(){Lt&&ht();for(let st=0;st<Jt.length;st++)Fn(Jt[st]);_t.trigger(yt.TEARDOWN_COMPLETE)}function Fn(st){try{Lt[$t.cancelKeyRequest](qt.systemString,st.sessionId)}catch(Xt){_t.trigger(yt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+st.sessionId+") "+Xt.message})}}function Yt(st,Xt){if(Xt&&st){const an=st.length;for(let kn=0;kn<an;kn++)if(st[kn].sessionId==Xt)return st[kn];return null}return null}function ht(){Lt.removeEventListener($t.keyerror,hn),Lt.removeEventListener($t.needkey,hn),Lt.removeEventListener($t.keymessage,hn),Lt.removeEventListener($t.keyadded,hn)}return rn={getAllInitData:function(){const st=[];for(let Xt=0;Xt<gt.length;Xt++)st.push(gt[Xt].initData);for(let Xt=0;Xt<Jt.length;Xt++)st.push(Jt[Xt].initData);return st},getSessionTokens:function(){return Jt.concat(gt)},requestKeySystemAccess:function(st){return new Promise((Xt,an)=>{let kn=Lt;kn||(kn=document.createElement("video"));let Wn=!1;for(let sr=0;sr<st.length;sr++){const Vr=st[sr].ks.systemString,ur=st[sr].configs;let kr=null,xe=null;for(let Kr=0;Kr<ur.length;Kr++){const la=ur[Kr].videoCapabilities;if(la&&la.length!==0){xe=[];for(let mi=0;mi<la.length;mi++)kn.canPlayType(la[mi].contentType,Vr)!==""&&xe.push(la[mi])}if(!xe||kr||xe&&xe.length===0)continue;Wn=!0;const Cs=new d(kr,xe),hi=en.getKeySystemBySystemString(Vr),ll=new Ve(hi,Cs);_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ll}),Xt({data:ll});break}}if(!Wn){const sr="Key system access denied! -- No valid audio/video content configurations detected!";_t.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:sr}),an({error:sr})}})},selectKeySystem:function(st){return qt=st.keySystem,Promise.resolve(qt)},setMediaElement:function(st){if(Lt!==st){if(Lt){ht();for(var Xt=0;Xt<Jt.length;Xt++)Fn(Jt[Xt]);Jt=[]}Lt=st,Lt&&(Lt.addEventListener($t.keyerror,hn),Lt.addEventListener($t.needkey,hn),Lt.addEventListener($t.keymessage,hn),Lt.addEventListener($t.keyadded,hn),_t.trigger(yt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(st){if(!qt)throw new Error("Can not create sessions until you have selected a key system");if(dn||Jt.length===0){const Xt={sessionId:null,keyId:st.keyId,normalizedKeyId:st&&st.keyId&&typeof st.keyId=="string"?st.keyId.replace(/-/g,"").toLowerCase():"",initData:st.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return gt.push(Xt),Lt[$t.generateKeyRequest](qt.systemString,new Uint8Array(st.initData)),Xt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(st,Xt){const an=st.sessionId;if(en.isClearKey(qt))for(let kn=0;kn<Xt.keyPairs.length;kn++)Lt[$t.addKey](qt.systemString,Xt.keyPairs[kn].key,Xt.keyPairs[kn].keyID,an);else Lt[$t.addKey](qt.systemString,new Uint8Array(Xt),new Uint8Array(st.initData),an);_t.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:Fn,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:mn,reset:mn},Dt=Vt.getLogger(rn),Lt=null,qt=null,gt=[],Jt=[],en=qe(Ft).getInstance(),hn={handleEvent:function(st){let Xt=null;switch(st.type){case $t.needkey:let an=ArrayBuffer.isView(st.initData)?st.initData.buffer:st.initData;_t.trigger(yt.NEED_KEY,{key:new $e(an,i.default.INITIALIZATION_DATA_TYPE_CENC)});break;case $t.keyerror:if(Xt=Yt(Jt,st.sessionId),Xt||(Xt=Yt(gt,st.sessionId)),Xt){let kn=m.default.MEDIA_KEYERR_CODE,Wn="";switch(st.errorCode.code){case 1:kn=m.default.MEDIA_KEYERR_UNKNOWN_CODE,Wn+="MEDIA_KEYERR_UNKNOWN - "+m.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:kn=m.default.MEDIA_KEYERR_CLIENT_CODE,Wn+="MEDIA_KEYERR_CLIENT - "+m.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:kn=m.default.MEDIA_KEYERR_SERVICE_CODE,Wn+="MEDIA_KEYERR_SERVICE - "+m.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:kn=m.default.MEDIA_KEYERR_OUTPUT_CODE,Wn+="MEDIA_KEYERR_OUTPUT - "+m.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:kn=m.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,Wn+="MEDIA_KEYERR_HARDWARECHANGE - "+m.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:kn=m.default.MEDIA_KEYERR_DOMAIN_CODE,Wn+="MEDIA_KEYERR_DOMAIN - "+m.default.MEDIA_KEYERR_DOMAIN_MESSAGE}Wn+="  System Code = "+st.systemCode,_t.trigger(yt.KEY_ERROR,{error:new f.default(kn,Wn,Xt)})}else Dt.error("No session token found for key error");break;case $t.keyadded:Xt=Yt(Jt,st.sessionId),Xt||(Xt=Yt(gt,st.sessionId)),Xt?(Dt.debug("DRM: Key added."),_t.trigger(yt.KEY_ADDED,{data:Xt})):Dt.debug("No session token found for key added");break;case $t.keymessage:if(dn=st.sessionId!==null&&st.sessionId!==void 0,dn?(Xt=Yt(Jt,st.sessionId),!Xt&&gt.length>0&&(Xt=gt.shift(),Jt.push(Xt),Xt.sessionId=st.sessionId,_t.trigger(yt.KEY_SESSION_CREATED,{data:Xt}))):gt.length>0&&(Xt=gt.shift(),Jt.push(Xt),gt.length!==0&&Wt.error(new f.default(m.default.MEDIA_KEY_MESSAGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Xt){let kn=ArrayBuffer.isView(st.message)?st.message.buffer:st.message;Xt.keyMessage=kn,_t.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new et(Xt,kn,st.defaultURL)})}else Dt.warn("No session token found for key message")}}},rn}It.__dashjs_factory_name="ProtectionModel_01b";var yn=x.default.getClassFactory(It);const Vn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],ar=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function xr(){let Gt;const Ft=this.context;function _t(yt,Vt){for(let $t=0;$t<Vt.length;$t++){const Wt=Vt[$t];if(typeof yt[Wt[Object.keys(Wt)[0]]]=="function")return Wt}return null}return Gt={createProtectionSystem:function(yt){let Vt=null;const $t=qe(Ft).getInstance();$t.setConfig({debug:yt.debug,BASE64:yt.BASE64,settings:yt.settings}),$t.initialize();let Wt=function(rn){const Dt=rn.debug,Lt=Dt.getLogger(Gt),qt=rn.eventBus,en=rn.errHandler,gt=rn.videoModel?rn.videoModel.getElement():null;return gt&&gt.onencrypted===void 0||gt&&gt.mediaKeys===void 0?_t(gt,ar)?(Lt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Kt(Ft).create({debug:Dt,eventBus:qt,events:rn.events,api:_t(gt,ar)})):_t(gt,Vn)?(Lt.info("EME detected on this user agent! (ProtectionModel_01b)"),yn(Ft).create({debug:Dt,eventBus:qt,errHandler:en,events:rn.events,api:_t(gt,Vn)})):(Lt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Lt.info("EME detected on this user agent! (DefaultProtectionModel"),Ht(Ft).create({debug:Dt,eventBus:qt,events:rn.events}))}(yt);return Wt&&(Vt=A(Ft).create({BASE64:yt.BASE64,cmcdModel:yt.cmcdModel,constants:yt.constants,customParametersModel:yt.customParametersModel,debug:yt.debug,eventBus:yt.eventBus,events:yt.events,protectionKeyController:$t,protectionModel:Wt,settings:yt.settings}),yt.capabilities.setEncryptedMediaSupported(!0)),Vt}},Gt}xr.__dashjs_factory_name="Protection";const Or=x.default.getClassFactory(xr);Or.events=Xe.default,Or.errors=m.default,x.default.updateClassFactory(xr.__dashjs_factory_name,Or);var Fr=Or},445:function(n,e,t){t.r(e);var r=t(7252);class i extends r.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let o=new i;e.default=o},1923:function(n,e,t){t.r(e);var r=t(8748);class i extends r.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let o=new i;e.default=o},4246:function(n,e,t){t.r(e);var r=t(138);const i={DEFAULT:.5,STRONG:1,WEAK:0};function o(u,c,d,m){let f,h,g,p,E;return h=u===void 0?null:u,g=function(S){let x=i.DEFAULT;return S!==i.DEFAULT&&S!==i.STRONG&&S!==i.WEAK||(x=S),x}(d),p=c===void 0?null:c,E=m===void 0?null:m,f={representation:h,reason:p,rule:E,priority:g},f}o.__dashjs_factory_name="SwitchRequest";const l=r.default.getClassFactory(o);l.NO_CHANGE=null,l.PRIORITY=i,r.default.updateClassFactory(o.__dashjs_factory_name,l),e.default=l},559:function(n,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return c}});var r=t(138),i=t(5212),o=t(2861),l=t(7393),u=t(649);function c(){let m="ManagedMediaSource"in window,f="WebKitMediaSource"in window,h="MediaSource"in window;return m||f||h}function d(){let m,f,h,g,p,E;const S=this.context,x=(0,l.default)(S).getInstance();function _(P,U){let ce;U===i.default.VIDEO?ce=function(_e){const je={video:{}};return _e&&(_e.width&&(je.video.width=_e.width),_e.height&&(je.video.height=_e.height),_e.framerate&&(je.video.framerate=parseFloat(_e.framerate)),_e.hdrMetadataType&&(je.video.hdrMetadataType=_e.hdrMetadataType),_e.colorGamut&&(je.video.colorGamut=_e.colorGamut),_e.transferFunction&&(je.video.transferFunction=_e.transferFunction)),je}(P):U===i.default.AUDIO&&(ce=function(_e){const je={audio:{}};return _e.samplerate&&(je.audio.samplerate=_e.samplerate),_e.channels&&(je.audio.channels=_e.channels),je}(P)),ce[U].contentType=P.codec,ce[U].bitrate=parseInt(P.bitrate),ce.type="media-source";let de=P.codec;return P.width&&P.height&&(de+=';width="'+P.width+'";height="'+P.height+'"'),ce.mediaSourceCodecString=de,function(_e,je,Se){if(!je||!je.keySystemsMetadata||je.keySystemsMetadata.length===0)return[_e];const ze=[];return je.keySystemsMetadata.forEach(Le=>{if(!Le.ks)return void ze.push({..._e});const Re=Le.protData&&Le.protData.systemStringPriority?Le.protData.systemStringPriority:null;let Ye=Le.ks.systemString;(Re||[Ye]).forEach(Ue=>{const Me={..._e};Me.keySystemConfiguration={},Ue&&(Me.keySystemConfiguration.keySystem=Ue);let We="";Le.ks.systemString===o.default.WIDEVINE_KEYSTEM_STRING&&(We=o.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const Ke=Le.protData,nt=Ke&&Ke.audioRobustness&&Ke.audioRobustness.length>0?Ke.audioRobustness:We,bt=Ke&&Ke.videoRobustness&&Ke.videoRobustness.length>0?Ke.videoRobustness:We;Se===i.default.AUDIO?Me.keySystemConfiguration[Se]={robustness:nt}:Se===i.default.VIDEO&&(Me.keySystemConfiguration[Se]={robustness:bt}),ze.push(Me)})}),ze}(ce,P,U)}function A(P){return f.get().streaming.enhancement.codecs.some(U=>P.includes(U))}function z(P){if(g&&g.length!==0&&P)return g.find(U=>{const ce=ie(P,U,i.default.AUDIO),de=ie(P,U,i.default.VIDEO),_e=ie(P,U,"keySystemConfiguration");return ce&&de&&_e})}function ie(P,U,ce){return!P[ce]&&!U[ce]||!(!P[ce]||!U[ce])&&x.areEqual(P[ce],U[ce])}function he(P,U){return(P=P.filter(ce=>!(ce.schemeIdUri&&U.some(de=>de.schemeIdUri===ce.schemeIdUri)))).push(...U),P}return m={areKeyIdsExpired:function(P){return!!(h&&P&&P.normalizedKeyIds&&P.normalizedKeyIds.size!==0)&&h.areKeyIdsExpired(P.normalizedKeyIds)},areKeyIdsUsable:function(P){return!(h&&P&&P.normalizedKeyIds&&P.normalizedKeyIds.size!==0)||h.areKeyIdsUsable(P.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(P,U){if(!P||!P.codec||P.isSupported===!1)return!1;const ce=_(P,U).map(de=>z(de)).filter(de=>de!=null);return!(ce&&ce.length>0)||function(de){return de.some(_e=>_e&&_e.decodingInfo&&_e.decodingInfo.supported)}(ce)},isProtectionCompatible:function(P,U){return!U||!(!P.isEncrypted&&U.isEncrypted)},runCodecSupportCheck:function(P,U){if(U!==i.default.AUDIO&&U!==i.default.VIDEO)return Promise.resolve();if(f.get().streaming.enhancement.enabled&&A(P.codec))return g=g.filter(de=>!A(de.mediaSourceCodecString)),Promise.resolve(!0);const ce=_(P,U);return function(de,_e){return f.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(de.codec&&_e===i.default.AUDIO||_e===i.default.VIDEO&&de.codec&&de.width&&de.height&&de.bitrate&&de.framerate)}(P,U)?function(de){return new Promise(_e=>{if(!de||de.length===0)return void _e();const je=de.map(Se=>function(ze){return new Promise(Le=>{z(ze)?Le():navigator.mediaCapabilities.decodingInfo(ze).then(Re=>{ze.decodingInfo=Re,g.push(ze),Le()}).catch(Re=>{ze.decodingInfo={supported:!1},g.push(ze),E.error(Re),Le()})})}(Se));Promise.allSettled(je).then(()=>{_e()}).catch(Se=>{E.error(Se),_e()})})}(ce):(function(de){if(!de||!de.length)return;const _e=de[0];if(z(_e))return;let je={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(_e.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(_e.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(_e.mediaSourceCodecString))&&(je.supported=!0),_e.decodingInfo=je,g.push(_e)}(ce),Promise.resolve())},setConfig:function(P){P&&(P.settings&&(f=P.settings),P.protectionController&&(h=P.protectionController))},setEncryptedMediaSupported:function(P){p=P},setProtectionController:function(P){h=P},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return p},supportsEssentialProperty:function(P){let U=f.get().streaming.capabilities.supportedEssentialProperties;f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(U=he(U,[{schemeIdUri:i.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:i.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:i.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(U=he(U,[{schemeIdUri:i.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return P.inArray(U)}catch{return!0}},supportsMediaSource:c},p=!1,g=[],E=(0,u.default)(S).getInstance().getLogger(m),m}d.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(d)},7377:function(n,e,t){t.r(e);var r=t(138),i=t(656);function o(){return{customTimeRangeArray:[],length:0,add:function(l,u){let c;for(c=0;c<this.customTimeRangeArray.length&&l>this.customTimeRangeArray[c].start;c++);for(this.customTimeRangeArray.splice(c,0,{start:l,end:u}),c=0;c<this.customTimeRangeArray.length-1;c++)this.mergeRanges(c,c+1)&&c--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(l,u){for(let c=0;c<this.customTimeRangeArray.length;c++)if(l<=this.customTimeRangeArray[c].start&&u>=this.customTimeRangeArray[c].end)this.customTimeRangeArray.splice(c,1),c--;else{if(l>this.customTimeRangeArray[c].start&&u<this.customTimeRangeArray[c].end){this.customTimeRangeArray.splice(c+1,0,{start:u,end:this.customTimeRangeArray[c].end}),this.customTimeRangeArray[c].end=l;break}l>this.customTimeRangeArray[c].start&&l<this.customTimeRangeArray[c].end?this.customTimeRangeArray[c].end=l:u>this.customTimeRangeArray[c].start&&u<this.customTimeRangeArray[c].end&&(this.customTimeRangeArray[c].start=u)}this.length=this.customTimeRangeArray.length},mergeRanges:function(l,u){let c=this.customTimeRangeArray[l],d=this.customTimeRangeArray[u];return c.start<=d.start&&d.start<=c.end&&c.end<=d.end?(c.end=d.end,this.customTimeRangeArray.splice(u,1),!0):d.start<=c.start&&c.start<=d.end&&d.end<=c.end?(c.start=d.start,this.customTimeRangeArray.splice(u,1),!0):d.start<=c.start&&c.start<=d.end&&c.end<=d.end?(this.customTimeRangeArray.splice(l,1),!0):c.start<=d.start&&d.start<=c.end&&d.end<=c.end&&(this.customTimeRangeArray.splice(u,1),!0)},start:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].start},end:function(l){return(0,i.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].end}}}o.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(o)},7393:function(n,e,t){t.r(e);var r=t(138),i=t(7316);function o(){let l;return l={areEqual:function(u,c){return i(u,c)}},l}o.__dashjs_factory_name="ObjectUtils",e.default=r.default.getSingletonFactory(o)},656:function(n,e,t){t.r(e),t.d(e,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return u},checkParameterType:function(){return i},checkRange:function(){return l}});var r=t(5212);function i(c,d){if(typeof c!==d)throw r.default.BAD_ARGUMENT_ERROR}function o(c){if(c===null||isNaN(c)||c%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function l(c,d,m){if(c<d||c>m)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(c){if(typeof c!="string"||c!==r.default.AUDIO&&c!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},1944:function(n,e,t){t.r(e),e.default=class{constructor(r,i,o){this.code=r||null,this.message=i||null,this.data=o||null}}},5560:function(n,e,t){t.r(e);var r=t(8854);e.default=class{constructor(i){this.id=i.id,this.url=i.url,this.language=i.language,this.mimeType=i.mimeType,this.bandwidth=i.bandwidth,this.periodId=i.periodId||null}serializeToMpdParserFormat(){return{tagName:r.default.ADAPTATION_SET,mimeType:this.mimeType,lang:this.language,Representation:[{tagName:r.default.REPRESENTATION,id:this.id,bandwidth:this.bandwidth,BaseURL:[{tagName:r.default.BASE_URL,__text:this.url}],mimeType:this.mimeType}]}}}},7568:function(n,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return r},HTTPRequestTrace:function(){return i}});class r{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class i{constructor(){this.s=null,this.d=null,this.b=[]}}r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",r.DVB_REPORTING_TYPE="DVBReporting",r.LICENSE="license",r.CONTENT_STEERING_TYPE="ContentSteering",r.OTHER_TYPE="other"}},XA={};function ni(n){var e=XA[n];if(e!==void 0)return e.exports;var t=XA[n]={exports:{}};return J7[n].call(t.exports,t,t.exports,ni),t.exports}ni.amdO={},ni.d=function(n,e){for(var t in e)ni.o(e,t)&&!ni.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},ni.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ni.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},ni.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var _a={};ni.r(_a),ni.d(_a,{Constants:function(){return nO.default},Debug:function(){return tO.default},ExternalSubtitle:function(){return iO.default},MediaPlayer:function(){return eQ.MediaPlayer},MediaPlayerFactory:function(){return eO},MetricsReporting:function(){return ZM.default},Protection:function(){return JM.default},default:function(){return nQ},supportsMediaSource:function(){return rO.supportsMediaSource}});var eQ=ni(5393),ZM=ni(4469),JM=ni(3888),tQ=ni(8200);let ZA,bm=function(){const n="application/dash+xml";let e;function t(i,o,l){if(!i||!/^VIDEO$/i.test(i.nodeName))return null;if(i._dashjs_player)return i._dashjs_player;let u,c=i.id||i.name||"video element";if(!(o=o||[].slice.call(i.querySelectorAll("source")).filter(function(d){return d.type==n})[0])&&i.src)(o=document.createElement("source")).src=i.src;else if(!o&&!i.src)return null;return l=l||{},u=(0,tQ.default)(l).create(),u.initialize(i,o.src,i.autoplay),e||(e=u.getDebug().getLogger()),e.debug("Converted "+c+" to dash.js player and added content: "+o.src),i._dashjs_player=u,u}function r(i){return/^VIDEO$/i.test(i.nodeName)?i:r(i.parentNode)}return{create:t,createAll:function(i,o){let l=[];i=i||"[data-dashjs-player]";let u=(o=o||document).querySelectorAll(i);for(let d=0;d<u.length;d++){let m=t(u[d],null);l.push(m)}let c=o.querySelectorAll('source[type="'+n+'"]');for(let d=0;d<c.length;d++){let m=t(r(c[d]),null);l.push(m)}return l}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?bm.createAll():ZA=window.setInterval(function(){window.dashjs&&(window.clearInterval(ZA),bm.createAll())},500):window.addEventListener("load",function n(){window.removeEventListener("load",n),bm.createAll()}));var eO=bm,tO=ni(649),nO=ni(5212),rO=ni(559),iO=ni(5560);dashjs.Protection=JM.default,dashjs.MetricsReporting=ZM.default,dashjs.MediaPlayerFactory=eO,dashjs.Debug=tO.default,dashjs.supportsMediaSource=rO.supportsMediaSource,dashjs.Constants=nO.default,dashjs.ExternalSubtitle=iO.default;var nQ=dashjs;(_a=_a.default).Constants;_a.Debug;_a.ExternalSubtitle;var Vh=_a.MediaPlayer;_a.MediaPlayerFactory;_a.MetricsReporting;_a.Protection;_a.default;_a.supportsMediaSource;const rQ="https://siawaseok.duckdns.org/api/video2/",iQ="https://ytdl-0et1.onrender.com/stream/",aQ="https://ytdl-0et1.onrender.com/m3u8/",sQ=["https://min-tube2-api.vercel.app","https://min-tube-api-3.vercel.app","https://min-tube-api4.vercel.app","https://server-minp.vercel.app","https://min-tube-api5.vercel.app"],oQ="https://raw.githubusercontent.com/Minotaur-ZAOU/test/refs/heads/main/min-tube-api.json",lQ=["https://api.cobalt.tools","https://co.wuk.sh"],aO=["https://corsproxy.io/?","https://api.allorigins.win/raw?url=","https://api.codetabs.com/v1/proxy?quest="],uQ=["https://inv.vern.cc","https://invidious.fdn.fr","https://iv.ggtyler.dev","https://invidious.lunar.icu","https://yt.artemislena.eu","https://invidious.privacydev.net","https://invidious.drgns.space","https://inv.n8pjl.ca","https://vid.puffyan.us","https://yewtu.be","https://invidious.nerdvpn.de","https://inv.riverside.rocks","https://invidious.slipfox.xyz","https://invidious.esmailelbob.xyz"],cQ=["https://pipedapi.kavin.rocks","https://pipedapi.adminforge.de","https://pipedapi.in.projectsegfau.lt","https://pipedapi.r4fo.com","https://api.piped.yt","https://pipedapi.moomoo.me","https://pipedapi.syncpundit.io"],el=async(n,e,t=5e3)=>{const r=new AbortController,i=setTimeout(()=>r.abort(),t);try{const o=await fetch(n,{...e,signal:r.signal});return clearTimeout(i),o}catch(o){throw clearTimeout(i),o}},dQ=async n=>{try{console.log("[ytdlp] Trying Choco-tube Video API...");const e=await el(`${rQ}?id=${n}`,{method:"GET",headers:{Accept:"application/json"}},5e3);if(!e.ok)return{success:!1,streams:[],error:`HTTP ${e.status}`};const t=await e.json();if(!t||t.error)return{success:!1,streams:[],error:(t==null?void 0:t.error)||"Invalid response"};const r=[];if(t.formats&&Array.isArray(t.formats))for(const i of t.formats)i.url&&r.push({url:i.url,quality:i.quality||i.qualityLabel||"Unknown",format:"video",container:i.container||"mp4",hasAudio:!0,hasVideo:!0});if(t.url||t.stream_url){const i=t.url||t.stream_url,o=i.includes(".m3u8"),l=i.includes(".mpd");r.unshift({url:i,quality:"Best",format:o?"hls":l?"dash":"video",container:o?"m3u8":l?"mpd":"mp4",hasAudio:!0,hasVideo:!0,isHLS:o,isDASH:l,isLive:t.isLive||t.liveNow})}if(t.hlsUrl||t.hls_url){const i=t.hlsUrl||t.hls_url;r.some(o=>o.url===i)||r.push({url:i,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0,isLive:t.isLive||t.liveNow})}return r.length===0?{success:!1,streams:[],error:"No streams found"}:(console.log("[ytdlp] Choco Video API success:",r.length,"streams"),{success:!0,streams:r,hlsUrl:t.hlsUrl||t.hls_url,isLive:t.isLive||t.liveNow,title:t.title,author:t.author||t.uploader})}catch(e){return console.warn("[ytdlp] Choco Video API failed:",e),{success:!1,streams:[],error:String(e)}}},fQ=async n=>{try{console.log("[ytdlp] Trying Choco-tube Direct Stream...");const e=`${iQ}?id=${n}`,t=`${aQ}?id=${n}`,r=await el(e,{method:"HEAD"},4e3);if(!r.ok)return{success:!1,streams:[],error:`HTTP ${r.status}`};const i=[{url:e,quality:"Best",format:"video",container:"mp4",hasAudio:!0,hasVideo:!0},{url:t,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0}];return console.log("[ytdlp] Choco Direct Stream success"),{success:!0,streams:i,hlsUrl:t}}catch(e){return console.warn("[ytdlp] Choco Direct Stream failed:",e),{success:!1,streams:[],error:String(e)}}},hQ=async n=>{console.log("[ytdlp] Trying MIN-Tube APIs in parallel...");let e=[...sQ];try{const r=await el(oQ,{},2e3);if(r.ok){const i=await r.json();Array.isArray(i)&&i.length>0&&(e=i,console.log("[ytdlp] Updated MIN-Tube API list:",e.length,"servers"))}}catch{}const t=e.map(async r=>{try{const i=await el(`${r}/api/video/${n}`,{headers:{Accept:"application/json"}},6e3);if(!i.ok)return null;const o=await i.json();if(!o||!o.stream_url)return null;const l=[],u=o.stream_url,c=u.includes(".m3u8"),d=u.includes(".mpd");if(l.push({url:u,quality:"Best",format:c?"hls":d?"dash":"video",container:c?"m3u8":d?"mpd":"mp4",hasAudio:!0,hasVideo:!0,isHLS:c,isDASH:d,isLive:o.is_live||o.isLive}),o.hls_url&&o.hls_url!==u&&l.push({url:o.hls_url,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0,isLive:o.is_live||o.isLive}),o.formats&&Array.isArray(o.formats))for(const m of o.formats)m.url&&!l.some(f=>f.url===m.url)&&l.push({url:m.url,quality:m.quality||m.qualityLabel||"Unknown",format:"video",container:m.container||"mp4",hasAudio:!0,hasVideo:!0});return console.log(`[ytdlp] MIN-Tube success from ${r}`),{success:!0,streams:l,hlsUrl:o.hls_url,isLive:o.is_live||o.isLive,title:o.videoTitle||o.title,author:o.author}}catch{return null}});return new Promise(r=>{let i=!1,o=0;t.forEach(l=>{l.then(u=>{o++,!i&&u&&u.success?(i=!0,r(u)):o===t.length&&!i&&r({success:!1,streams:[],error:"All MIN-Tube APIs failed"})})}),setTimeout(()=>{i||(i=!0,r({success:!1,streams:[],error:"MIN-Tube timeout"}))},8e3)})},mQ=async n=>{console.log("[ytdlp] Trying Piped APIs in parallel...");const e=cQ.map(async t=>{try{const r=await el(`${t}/streams/${n}`,{headers:{Accept:"application/json"}},5e3);if(!r.ok)return null;const i=await r.text();if(i.includes("error")||i.includes("<!DOCTYPE"))return null;const o=JSON.parse(i);if(!o.title)return null;const l=[];o.hls&&l.push({url:o.hls,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0,isLive:o.livestream});const c=[...(o.videoStreams||[]).filter(d=>d.url&&!d.videoOnly)].sort((d,m)=>(m.height||0)-(d.height||0));for(const d of c.slice(0,5))l.push({url:d.url,quality:d.quality||`${d.height}p`,format:"video",container:d.format||"webm",hasAudio:!d.videoOnly,hasVideo:!0});return l.length===0?null:(console.log(`[ytdlp] Piped success from ${t}`),{success:!0,streams:l,hlsUrl:o.hls,isLive:o.livestream,title:o.title,author:o.uploader})}catch{return null}});return new Promise(t=>{let r=!1,i=0;e.forEach(o=>{o.then(l=>{i++,!r&&l&&l.success?(r=!0,t(l)):i===e.length&&!r&&t({success:!1,streams:[],error:"All Piped APIs failed"})})}),setTimeout(()=>{r||(r=!0,t({success:!1,streams:[],error:"Piped timeout"}))},7e3)})},gQ=async n=>{try{console.log("[ytdlp] Trying Edge Function API...");const e="https://wdqfowfhgutldljedagg.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkcWZvd2ZoZ3V0bGRsamVkYWdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjQyNjQsImV4cCI6MjA4Mzk0MDI2NH0.sKr0BZztAujzc7v0b1yOBfsug656pqwhex22ApggqJQ",r=await el(`${e}/functions/v1/get-youtube-stream?video_id=${n}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}},8e3);if(!r.ok){const l=await r.text();return console.warn("[ytdlp] Edge Function HTTP error:",r.status,l),{success:!1,streams:[],error:`HTTP ${r.status}`}}const i=await r.json();if(i.error)return console.warn("[ytdlp] Edge Function returned error:",i.error),{success:!1,streams:[],error:i.error};const o=[];if(i.stream_url){const l=i.stream_url.includes(".m3u8")||i.stream_url.includes("manifest"),u=i.stream_url.includes(".mpd");o.push({url:i.stream_url,quality:"Best",format:l?"hls":u?"dash":"video",container:l?"m3u8":u?"mpd":"mp4",hasAudio:!0,hasVideo:!0,isHLS:l,isDASH:u,isLive:i.is_live})}if(i.hls_url&&i.hls_url!==i.stream_url&&o.push({url:i.hls_url,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0,isLive:i.is_live}),i.formats&&i.formats.length>0)for(const l of i.formats)l.url&&!o.some(u=>u.url===l.url)&&o.push({url:l.url,quality:l.quality||"Unknown",format:"video",container:l.container||"mp4",hasAudio:!0,hasVideo:!0});return o.length===0?{success:!1,streams:[],error:"No streams found"}:(console.log("[ytdlp] Edge Function success:",o.length,"streams"),{success:!0,streams:o,hlsUrl:i.hls_url,isLive:i.is_live,title:i.title,author:i.author})}catch(e){return console.warn("[ytdlp] Edge Function fetch failed:",e),{success:!1,streams:[],error:String(e)}}},pQ=async n=>{const e=uQ.map(async t=>{for(const r of["",...aO])try{const i=`${t}/api/v1/videos/${n}`,o=r?`${r}${encodeURIComponent(i)}`:i,l=await el(o,{method:"GET"},5e3);if(!l.ok)continue;const u=await l.text();if(u.includes("shutdown")||u.includes("blocked")||u.includes("<!DOCTYPE"))continue;const c=JSON.parse(u);if(!c.title)continue;const d=[];if(c.hlsUrl&&d.push({url:c.hlsUrl,quality:"Auto (HLS)",format:"hls",container:"m3u8",hasAudio:!0,hasVideo:!0,isHLS:!0,isLive:c.liveNow}),c.formatStreams)for(const m of c.formatStreams)m.url&&d.push({url:m.url,quality:m.qualityLabel||m.quality||"Unknown",format:"video",container:m.container||"mp4",hasAudio:!0,hasVideo:!0});if(d.length>0)return{hlsUrl:c.hlsUrl,isLive:c.liveNow,streams:d,title:c.title,author:c.author}}catch{continue}return null});return new Promise(t=>{let r=!1,i=0;e.forEach(o=>{o.then(l=>{i++,!r&&l?(r=!0,t(l)):i===e.length&&!r&&t(null)})}),setTimeout(()=>{r||(r=!0,t(null))},8e3)})},yQ=async n=>{const e=`https://www.youtube.com/watch?v=${n}`;for(const t of lQ)for(const r of aO){const i=["max","1080","720"];for(const o of i)try{const l=await el(`${r}${encodeURIComponent(t+"/api/json")}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({url:e,vQuality:o,filenamePattern:"basic",isAudioOnly:!1})},6e3);if(l.ok){const u=await l.json();if(u.url){const c=u.url.includes(".m3u8"),d=u.url.includes(".mpd");return{success:!0,streams:[{url:u.url,quality:o==="max"?"Best":o+"p",format:c?"hls":d?"dash":"video",container:c?"m3u8":d?"mpd":"mp4",hasAudio:!0,hasVideo:!0,isHLS:c,isDASH:d,isLive:u.isLive||!1}],hlsUrl:c?u.url:void 0,dashUrl:d?u.url:void 0,isLive:u.isLive||!1,title:u.filename}}}}catch{continue}}return{success:!1,streams:[],error:"All Cobalt APIs failed"}},vQ={choco_video:dQ,choco_stream:fQ,min_tube:hQ,edge_function:gQ,piped:mQ,invidious:async n=>{const e=await pQ(n);return e&&e.streams&&e.streams.length>0?{success:!0,streams:e.streams,hlsUrl:e.hlsUrl,isLive:e.isLive,title:e.title,author:e.author}:{success:!1,streams:[],error:"Invidious failed"}},cobalt:yQ},EQ=async n=>dm.getOrFetchStream(n,async()=>{const e=xN();console.log("[ytdlp] Using API priority:",e.join(" → "));for(const t of e){const r=vQ[t];if(r){console.log(`[ytdlp] Trying ${t}...`);try{const i=await r(n);if(i.success&&i.streams.length>0)return console.log(`[ytdlp] Success from ${t}`),{streams:i.streams,hlsUrl:i.hlsUrl,isLive:i.isLive,title:i.title,author:i.author}}catch(i){console.warn(`[ytdlp] ${t} failed:`,i)}console.log(`[ytdlp] ${t} failed, trying next...`)}}return null}).then(e=>e?{success:!0,streams:e.streams,hlsUrl:e.hlsUrl,isLive:e.isLive,title:e.title,author:e.author}:{success:!1,streams:[],error:"Could not fetch streams via ytdlp"}),bQ=Fg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function md({className:n,variant:e,...t}){return T.jsx("div",{className:Bn(bQ({variant:e}),n),...t})}var fp="Dialog",[sO]=Ki(fp),[TQ,ts]=sO(fp),oO=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=n,u=j.useRef(null),c=j.useRef(null),[d,m]=Za({prop:r,defaultProp:i??!1,onChange:o,caller:fp});return T.jsx(TQ,{scope:e,triggerRef:u,contentRef:c,contentId:ba(),titleId:ba(),descriptionId:ba(),open:d,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(f=>!f),[m]),modal:l,children:t})};oO.displayName=fp;var lO="DialogTrigger",uO=j.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ts(lO,t),o=Yn(e,i.triggerRef);return T.jsx(Dn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":PT(i.open),...r,ref:o,onClick:cn(n.onClick,i.onOpenToggle)})});uO.displayName=lO;var DT="DialogPortal",[SQ,cO]=sO(DT,{forceMount:void 0}),dO=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=ts(DT,e);return T.jsx(SQ,{scope:e,forceMount:t,children:j.Children.map(r,l=>T.jsx(Ia,{present:t||o.open,children:T.jsx(Tf,{asChild:!0,container:i,children:l})}))})};dO.displayName=DT;var pg="DialogOverlay",fO=j.forwardRef((n,e)=>{const t=cO(pg,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=ts(pg,n.__scopeDialog);return o.modal?T.jsx(Ia,{present:r||o.open,children:T.jsx(wQ,{...i,ref:e})}):null});fO.displayName=pg;var xQ=$l("DialogOverlay.RemoveScroll"),wQ=j.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ts(pg,t);return T.jsx(Qg,{as:xQ,allowPinchZoom:!0,shards:[i.contentRef],children:T.jsx(Dn.div,{"data-state":PT(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ql="DialogContent",hO=j.forwardRef((n,e)=>{const t=cO(Ql,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=ts(Ql,n.__scopeDialog);return T.jsx(Ia,{present:r||o.open,children:o.modal?T.jsx(_Q,{...i,ref:e}):T.jsx(IQ,{...i,ref:e})})});hO.displayName=Ql;var _Q=j.forwardRef((n,e)=>{const t=ts(Ql,n.__scopeDialog),r=j.useRef(null),i=Yn(e,t.contentRef,r);return j.useEffect(()=>{const o=r.current;if(o)return V0(o)},[]),T.jsx(mO,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(n.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:cn(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:cn(n.onFocusOutside,o=>o.preventDefault())})}),IQ=j.forwardRef((n,e)=>{const t=ts(Ql,n.__scopeDialog),r=j.useRef(!1),i=j.useRef(!1);return T.jsx(mO,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,u;(l=n.onCloseAutoFocus)==null||l.call(n,o),o.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=o.target;((d=t.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),mO=j.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=n,u=ts(Ql,t),c=j.useRef(null),d=Yn(e,c);return H0(),T.jsxs(T.Fragment,{children:[T.jsx(Kg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:T.jsx(_c,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":PT(u.open),...l,ref:d,onDismiss:()=>u.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(AQ,{titleId:u.titleId}),T.jsx(kQ,{contentRef:c,descriptionId:u.descriptionId})]})]})}),LT="DialogTitle",gO=j.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ts(LT,t);return T.jsx(Dn.h2,{id:i.titleId,...r,ref:e})});gO.displayName=LT;var pO="DialogDescription",yO=j.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ts(pO,t);return T.jsx(Dn.p,{id:i.descriptionId,...r,ref:e})});yO.displayName=pO;var vO="DialogClose",EO=j.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ts(vO,t);return T.jsx(Dn.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,()=>i.onOpenChange(!1))})});EO.displayName=vO;function PT(n){return n?"open":"closed"}var bO="DialogTitleWarning",[fX,TO]=Jj(bO,{contentName:Ql,titleName:LT,docsSlug:"dialog"}),AQ=({titleId:n})=>{const e=TO(bO),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},RQ="DialogDescriptionWarning",kQ=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${TO(RQ).contentName}}.`;return j.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},CQ=oO,NQ=uO,DQ=dO,SO=fO,xO=hO,wO=gO,_O=yO,LQ=EO;const PQ=CQ,MQ=NQ,OQ=DQ,IO=j.forwardRef(({className:n,...e},t)=>T.jsx(SO,{ref:t,className:Bn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));IO.displayName=SO.displayName;const AO=j.forwardRef(({className:n,children:e,...t},r)=>T.jsxs(OQ,{children:[T.jsx(IO,{}),T.jsxs(xO,{ref:r,className:Bn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,T.jsxs(LQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[T.jsx(v0,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));AO.displayName=xO.displayName;const RO=({className:n,...e})=>T.jsx("div",{className:Bn("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});RO.displayName="DialogHeader";const kO=j.forwardRef(({className:n,...e},t)=>T.jsx(wO,{ref:t,className:Bn("text-lg font-semibold leading-none tracking-tight",n),...e}));kO.displayName=wO.displayName;const FQ=j.forwardRef(({className:n,...e},t)=>T.jsx(_O,{ref:t,className:Bn("text-sm text-muted-foreground",n),...e}));FQ.displayName=_O.displayName;const zQ=[{keys:["Space","K"],description:"再生 / 一時停止"},{keys:["←","J"],description:"5秒戻る (Shift: 10秒)"},{keys:["→","L"],description:"5秒進む (Shift: 10秒)"},{keys:["↑"],description:"音量を上げる"},{keys:["↓"],description:"音量を下げる"},{keys:["M"],description:"ミュート切替"},{keys:["F"],description:"フルスクリーン"},{keys:["T"],description:"シアターモード"},{keys:["P"],description:"ピクチャーインピクチャー"},{keys:["0-9"],description:"動画の0-90%位置にジャンプ"},{keys:[","],description:"1フレーム戻る"},{keys:["."],description:"1フレーム進む"},{keys:["<"],description:"再生速度を下げる"},{keys:[">"],description:"再生速度を上げる"},{keys:["?"],description:"ショートカットヘルプ"}],UQ=({videoId:n,isTheaterMode:e=!1,onTheaterModeToggle:t,onError:r,onSuccess:i})=>{const{t:o}=Hr(),l=j.useRef(null),u=j.useRef(null),c=j.useRef(null),[d,m]=j.useState(!1),[f,h]=j.useState(!1),[g,p]=j.useState(0),[E,S]=j.useState(0),[x,_]=j.useState(1),[A,z]=j.useState(""),[ie,he]=j.useState(0),[P,U]=j.useState("none"),[ce,de]=j.useState([]),[_e,je]=j.useState(-1),[Se,ze]=j.useState([]),[Le,Re]=j.useState(-1),[Ye,Ue]=j.useState(!1),[Me,We]=j.useState(1),[Ke,nt]=j.useState(!1),[bt,Rt]=j.useState(!1),Pe=[.25,.5,.75,1,1.25,1.5,1.75,2],{data:Ne,isLoading:Qe,error:X,refetch:W}=U0({queryKey:["ytdlpStreams",n],queryFn:()=>EQ(n),staleTime:5*60*1e3,retry:2}),C=(Ne==null?void 0:Ne.streams)||[],O=C.find(Ve=>Ve.url===A)||C[0],le=(O==null?void 0:O.isHLS)||(O==null?void 0:O.container)==="m3u8",te=(O==null?void 0:O.isDASH)||(O==null?void 0:O.container)==="mpd",Be=(Ne==null?void 0:Ne.isLive)||(O==null?void 0:O.isLive),rt=()=>{u.current&&(u.current.destroy(),u.current=null),c.current&&(c.current.destroy(),c.current=null),de([]),ze([])};j.useEffect(()=>{const Ve=Ze=>{var Ht,Pt;const ct=l.current;if(ct&&!(Ze.target instanceof HTMLInputElement||Ze.target instanceof HTMLTextAreaElement))switch(Ze.key.toLowerCase()){case" ":case"k":Ze.preventDefault(),d?ct.pause():ct.play();break;case"arrowleft":case"j":Ze.preventDefault(),ct.currentTime=Math.max(0,ct.currentTime-(Ze.shiftKey?10:5));break;case"arrowright":case"l":Ze.preventDefault(),ct.currentTime=Math.min(E,ct.currentTime+(Ze.shiftKey?10:5));break;case"arrowup":Ze.preventDefault();const Kt=Math.min(1,x+.1);_(Kt),ct.volume=Kt,h(!1),ct.muted=!1;break;case"arrowdown":Ze.preventDefault();const It=Math.max(0,x-.1);_(It),ct.volume=It,It===0&&h(!0);break;case"m":Ze.preventDefault(),ct.muted=!f,h(!f);break;case"f":Ze.preventDefault(),document.fullscreenElement?document.exitFullscreen():(Ht=ct.requestFullscreen)==null||Ht.call(ct);break;case"t":Ze.preventDefault(),t==null||t();break;case"p":Ze.preventDefault(),document.pictureInPictureEnabled&&(document.pictureInPictureElement?document.exitPictureInPicture():(Pt=ct.requestPictureInPicture)==null||Pt.call(ct));break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Ze.preventDefault();const yn=parseInt(Ze.key)*10;ct.currentTime=E*yn/100;break;case",":Ze.preventDefault(),ct.currentTime=Math.max(0,ct.currentTime-.03333333333333333);break;case".":Ze.preventDefault(),ct.currentTime=Math.min(E,ct.currentTime+.03333333333333333);break;case"<":Ze.preventDefault();const Vn=Math.max(.25,Me-.25);We(Vn),ct.playbackRate=Vn;break;case">":Ze.preventDefault();const ar=Math.min(2,Me+.25);We(ar),ct.playbackRate=ar;break;case"?":Ze.preventDefault(),Rt(xr=>!xr);break}};return window.addEventListener("keydown",Ve),()=>window.removeEventListener("keydown",Ve)},[d,f,x,E,Me,t]),j.useEffect(()=>{const Ve=l.current;if(!Ve)return;const Ze=()=>Ue(!0),ct=()=>Ue(!1);return Ve.addEventListener("enterpictureinpicture",Ze),Ve.addEventListener("leavepictureinpicture",ct),()=>{Ve.removeEventListener("enterpictureinpicture",Ze),Ve.removeEventListener("leavepictureinpicture",ct)}},[ie]),j.useEffect(()=>{const Ve=l.current;if(!(!Ve||!O||!le)){if(rt(),Ui.isSupported()){const Ze=new Ui({enableWorker:!0,lowLatencyMode:Be,backBufferLength:Be?0:90});Ze.loadSource(O.url),Ze.attachMedia(Ve),Ze.on(Ui.Events.MANIFEST_PARSED,(ct,Ht)=>{de(Ht.levels.map(Pt=>({height:Pt.height,bitrate:Pt.bitrate}))),Ve.play().catch(()=>{})}),Ze.on(Ui.Events.LEVEL_SWITCHED,(ct,Ht)=>{je(Ht.level)}),Ze.on(Ui.Events.ERROR,(ct,Ht)=>{if(Ht.fatal)switch(Ht.type){case Ui.ErrorTypes.NETWORK_ERROR:Ze.startLoad();break;case Ui.ErrorTypes.MEDIA_ERROR:Ze.recoverMediaError();break;default:U("nocookie");break}}),u.current=Ze}else Ve.canPlayType("application/vnd.apple.mpegurl")&&(Ve.src=O.url,Ve.play().catch(()=>{}));return rt}},[O==null?void 0:O.url,le,Be,ie]),j.useEffect(()=>{const Ve=l.current;if(!Ve||!O||!te)return;rt();const Ze=Vh().create();return Ze.initialize(Ve,O.url,!0),Ze.updateSettings({streaming:{delay:{liveDelay:Be?3:void 0},abr:{autoSwitchBitrate:{video:!0,audio:!0}}}}),Ze.on(Vh.events.STREAM_INITIALIZED,()=>{const ct=Ze.getRepresentationsByType("video");ze(ct.map((Ht,Pt)=>({qualityIndex:Pt,height:Ht.height||0,bitrate:Ht.bandwidth||0})))}),Ze.on(Vh.events.QUALITY_CHANGE_RENDERED,ct=>{ct.mediaType==="video"&&Re(ct.newQuality)}),Ze.on(Vh.events.ERROR,()=>{U("nocookie")}),c.current=Ze,rt},[O==null?void 0:O.url,te,Be,ie]),j.useEffect(()=>{if(C.length>0&&!A){const Ve=C.find(ct=>ct.isHLS),Ze=Be&&Ve?Ve:C[0];z(Ze.url)}},[C,A,Be]),j.useEffect(()=>{!Qe&&(!(Ne!=null&&Ne.success)||C.length===0)&&(U("nocookie"),r==null||r())},[Qe,Ne,C.length,r]);const qe=Ve=>isFinite(Ve)?`${Math.floor(Ve/60)}:${Math.floor(Ve%60).toString().padStart(2,"0")}`:"--:--",Xe=Ve=>{u.current&&(u.current.currentLevel=Ve,je(Ve))},$e=Ve=>{c.current&&(Ve===-1?c.current.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}}):(c.current.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),c.current.setRepresentationForTypeByIndex("video",Ve)),Re(Ve))},et=()=>{if(O&&!le&&!te){const Ve=document.createElement("a");Ve.href=O.url,Ve.download=`${n}.${O.container}`,Ve.target="_blank",Ve.rel="noopener noreferrer",document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve)}};return P!=="none"?T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-sm",children:[T.jsx(Hm,{className:"h-4 w-4 text-yellow-500 flex-shrink-0"}),T.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:o("ytdlpFailed")}),T.jsxs(Hn,{variant:"outline",size:"sm",className:"ml-auto",onClick:()=>{U("none"),W()},children:[T.jsx(Ys,{className:"h-3 w-3 mr-1"}),o("retry")]})]}),T.jsxs("div",{className:"flex gap-2 mb-2",children:[T.jsx(Hn,{variant:P==="nocookie"?"default":"outline",size:"sm",onClick:()=>U("nocookie"),children:"No-Cookie"}),T.jsx(Hn,{variant:P==="edu"?"default":"outline",size:"sm",onClick:()=>U("edu"),children:"Education"})]}),P==="nocookie"&&T.jsx(aP,{videoId:n}),P==="edu"&&T.jsx(bP,{videoId:n})]}):Qe?T.jsxs("div",{className:"aspect-video bg-black rounded-lg flex flex-col items-center justify-center text-white gap-2",children:[T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"}),T.jsx("span",{className:"text-sm",children:o("ytdlpFetching")})]}):O?T.jsxs("div",{className:"space-y-4",children:[Be&&T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs(md,{variant:"destructive",className:"animate-pulse",children:[T.jsx(Ml,{className:"h-3 w-3 mr-1"}),"LIVE"]}),T.jsx("span",{className:"text-sm text-muted-foreground",children:o("liveStream")})]}),T.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[T.jsx("video",{ref:l,src:!le&&!te?O.url:void 0,className:"w-full aspect-video",loop:Ke,onTimeUpdate:()=>l.current&&p(l.current.currentTime),onLoadedMetadata:()=>{l.current&&(S(l.current.duration),i==null||i())},onPlay:()=>m(!0),onPause:()=>m(!1),onError:()=>{!le&&!te&&(U("nocookie"),r==null||r())}},`${ie}-${A}`),T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:[!Be&&T.jsx(nf,{value:[g],max:E||100,step:1,onValueChange:Ve=>{l.current&&(l.current.currentTime=Ve[0])},className:"mb-3"}),T.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{l.current&&(d?l.current.pause():l.current.play())},children:d?T.jsx(y0,{className:"h-4 w-4"}):T.jsx(Wo,{className:"h-4 w-4"})}),T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{l.current&&(l.current.muted=!f,h(!f))},children:f?T.jsx(f1,{className:"h-4 w-4"}):T.jsx(d1,{className:"h-4 w-4"})}),T.jsx("div",{className:"w-20 hidden sm:block",children:T.jsx(nf,{value:[f?0:x],max:1,step:.1,onValueChange:Ve=>{_(Ve[0]),l.current&&(l.current.volume=Ve[0]),h(Ve[0]===0)}})}),T.jsx("span",{className:"text-white text-xs",children:Be?"LIVE":`${qe(g)} / ${qe(E)}`})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[le&&ce.length>0&&T.jsxs(vs,{value:_e.toString(),onValueChange:Ve=>Xe(parseInt(Ve)),children:[T.jsx(Ka,{className:"w-24 h-8 bg-transparent text-white border-white/50 text-xs",children:T.jsx(Es,{placeholder:"Auto"})}),T.jsxs(Ya,{children:[T.jsx(_i,{value:"-1",className:"text-xs",children:"Auto"}),ce.map((Ve,Ze)=>T.jsxs(_i,{value:Ze.toString(),className:"text-xs",children:[Ve.height,"p"]},Ze))]})]}),te&&Se.length>0&&T.jsxs(vs,{value:Le.toString(),onValueChange:Ve=>$e(parseInt(Ve)),children:[T.jsx(Ka,{className:"w-24 h-8 bg-transparent text-white border-white/50 text-xs",children:T.jsx(Es,{placeholder:"Auto"})}),T.jsxs(Ya,{children:[T.jsx(_i,{value:"-1",className:"text-xs",children:"Auto"}),Se.map(Ve=>T.jsxs(_i,{value:Ve.qualityIndex.toString(),className:"text-xs",children:[Ve.height,"p"]},Ve.qualityIndex))]})]}),C.length>1&&T.jsxs(vs,{value:A,onValueChange:z,children:[T.jsx(Ka,{className:"w-28 h-8 bg-transparent text-white border-white/50 text-xs",children:T.jsx(Es,{})}),T.jsx(Ya,{children:C.map((Ve,Ze)=>T.jsxs(_i,{value:Ve.url,className:"text-xs",children:[Ve.isHLS&&T.jsx(Ml,{className:"h-3 w-3 inline mr-1"}),Ve.isDASH&&T.jsx(iE,{className:"h-3 w-3 inline mr-1"}),Ve.quality," (",Ve.container.toUpperCase(),")"]},Ze))})]}),T.jsxs(vs,{value:Me.toString(),onValueChange:Ve=>{const Ze=parseFloat(Ve);We(Ze),l.current&&(l.current.playbackRate=Ze)},children:[T.jsx(Ka,{className:"w-16 h-8 bg-transparent text-white border-white/50 text-xs",children:T.jsx(Es,{})}),T.jsx(Ya,{children:Pe.map(Ve=>T.jsxs(_i,{value:Ve.toString(),className:"text-xs",children:[Ve,"x"]},Ve))})]}),T.jsx(Hn,{size:"icon",variant:"ghost",className:`text-white h-8 w-8 ${Ke?"bg-white/20":""}`,onClick:()=>nt(!Ke),children:T.jsx(u1,{className:"h-4 w-4"})}),t&&T.jsx(Hn,{size:"icon",variant:"ghost",className:`text-white h-8 w-8 ${e?"bg-white/20":""}`,onClick:t,children:T.jsx(l1,{className:"h-4 w-4"})}),document.pictureInPictureEnabled&&T.jsx(Hn,{size:"icon",variant:"ghost",className:`text-white h-8 w-8 ${Ye?"bg-white/20":""}`,onClick:async()=>{try{document.pictureInPictureElement?(await document.exitPictureInPicture(),Ue(!1)):l.current&&(await l.current.requestPictureInPicture(),Ue(!0))}catch(Ve){console.error("PiP error:",Ve)}},children:T.jsx(v3,{className:"h-4 w-4"})}),T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",onClick:()=>{var Ve;return(Ve=l.current)==null?void 0:Ve.requestFullscreen()},children:T.jsx(o1,{className:"h-4 w-4"})}),T.jsxs(PQ,{open:bt,onOpenChange:Rt,children:[T.jsx(MQ,{asChild:!0,children:T.jsx(Hn,{size:"icon",variant:"ghost",className:"text-white h-8 w-8",children:T.jsx(d3,{className:"h-4 w-4"})})}),T.jsxs(AO,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[T.jsx(RO,{children:T.jsx(kO,{children:"キーボードショートカット"})}),T.jsx("div",{className:"grid gap-2 mt-4",children:zQ.map((Ve,Ze)=>T.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[T.jsx("span",{className:"text-sm text-muted-foreground",children:Ve.description}),T.jsx("div",{className:"flex gap-1",children:Ve.keys.map((ct,Ht)=>T.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-muted rounded border border-border",children:ct},Ht))})]},Ze))})]})]})]})]})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsxs(Hn,{variant:"outline",size:"sm",onClick:()=>{he(Ve=>Ve+1),m(!1)},children:[T.jsx(Ys,{className:"h-4 w-4 mr-1"}),o("reloadVideo")]}),!le&&!te&&T.jsxs(Hn,{variant:"outline",size:"sm",onClick:et,children:[T.jsx(Vm,{className:"h-4 w-4 mr-1"}),o("download")]}),T.jsx(Hn,{variant:"secondary",size:"sm",onClick:()=>U("nocookie"),children:o("useEmbedPlayer")})]}),T.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded flex items-center gap-2 flex-wrap",children:[T.jsx("span",{children:"ytdlp:"}),le&&T.jsxs(md,{variant:"outline",className:"text-xs",children:[T.jsx(Ml,{className:"h-3 w-3 mr-1"}),"HLS"]}),te&&T.jsxs(md,{variant:"outline",className:"text-xs",children:[T.jsx(iE,{className:"h-3 w-3 mr-1"}),"DASH"]}),Be&&T.jsx(md,{variant:"destructive",className:"text-xs",children:"LIVE"}),T.jsx("span",{children:O.quality}),T.jsx("span",{children:"•"}),T.jsx("span",{children:O.container.toUpperCase()}),T.jsx("span",{children:"•"}),T.jsx("span",{children:O.hasAudio?"🔊":"🔇"}),T.jsx("span",{children:O.hasVideo?"🎬":""}),le&&_e>=0&&ce[_e]&&T.jsxs(T.Fragment,{children:[T.jsx("span",{children:"•"}),T.jsxs("span",{children:[ce[_e].height,"p"]})]}),te&&Le>=0&&Se[Le]&&T.jsxs(T.Fragment,{children:[T.jsx("span",{children:"•"}),T.jsxs("span",{children:[Se[Le].height,"p"]})]})]})]}):T.jsxs("div",{className:"aspect-video bg-black rounded-lg flex flex-col items-center justify-center text-white gap-4",children:[T.jsx(Hm,{className:"h-8 w-8 text-red-500"}),T.jsx("span",{children:o("failedToLoad")}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs(Hn,{variant:"outline",size:"sm",onClick:()=>W(),children:[T.jsx(Ys,{className:"h-4 w-4 mr-1"}),o("retry")]}),T.jsx(Hn,{variant:"secondary",size:"sm",onClick:()=>U("nocookie"),children:o("useEmbedPlayer")})]})]})},JA=["edu","ytdlp","invidious","nocookie"],eR=2,jQ=(n="ytdlp")=>{const[e,t]=j.useState({currentPlayer:n,failedPlayers:new Set,retryCount:new Map,isAutoFallback:!1}),r=j.useRef(null),i=j.useCallback(f=>{for(const h of JA)if(!f.has(h))return h;return null},[]),o=j.useCallback((f,h)=>{console.log(`[PlayerFallback] ${f} failed:`,h),t(g=>{const p=new Map(g.retryCount),E=p.get(f)||0;if(E<eR)return p.set(f,E+1),console.log(`[PlayerFallback] ${f} retry ${E+1}/${eR}`),{...g,retryCount:p,lastError:h};const S=new Set(g.failedPlayers);S.add(f);const x=i(S);return x?(console.log(`[PlayerFallback] Switching from ${f} to ${x}`),{...g,currentPlayer:x,failedPlayers:S,retryCount:p,isAutoFallback:!0,lastError:h}):(console.log("[PlayerFallback] All players failed"),{...g,failedPlayers:S,retryCount:p,lastError:h})})},[i]),l=j.useCallback(f=>{t(h=>{const g=new Map(h.retryCount);return g.delete(f),{...h,retryCount:g,isAutoFallback:!1}})},[]),u=j.useCallback(f=>{t(h=>({...h,currentPlayer:f,isAutoFallback:!1}))},[]),c=j.useCallback(()=>{t({currentPlayer:n,failedPlayers:new Set,retryCount:new Map,isAutoFallback:!1})},[n]),d=j.useCallback(f=>{t(h=>{const g=new Set(h.failedPlayers),p=new Map(h.retryCount);return g.delete(f),p.delete(f),{...h,failedPlayers:g,retryCount:p}})},[]),m=j.useCallback((f,h,g=500)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{o(f,h)},g)},[o]);return j.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),{currentPlayer:e.currentPlayer,failedPlayers:Array.from(e.failedPlayers),isAutoFallback:e.isAutoFallback,lastError:e.lastError,allPlayersFailed:e.failedPlayers.size===JA.length,handlePlayerError:o,handlePlayerSuccess:l,switchPlayer:u,resetAllPlayers:c,resetPlayer:d,debouncedError:m}},tR=()=>{const{videoId:n}=G0(),[e,t]=j.useState(null),[r,i]=j.useState([]),[o,l]=j.useState(!1),[u,c]=j.useState(!1),[d,m]=j.useState(!1),[f,h]=j.useState(""),[g,p]=j.useState(!1),[E,S]=j.useState(!1),{t:x}=Hr(),{currentPlayer:_,failedPlayers:A,isAutoFallback:z,allPlayersFailed:ie,handlePlayerError:he,handlePlayerSuccess:P,switchPlayer:U,resetAllPlayers:ce}=jQ("edu"),de=j.useCallback(()=>{he("ytdlp","Stream fetch failed")},[he]),_e=j.useCallback(()=>{he("invidious","Stream fetch failed")},[he]),je=j.useCallback(()=>{he("nocookie","Embed load failed")},[he]),Se=j.useCallback(()=>{he("edu","Embed load failed")},[he]),ze=j.useCallback(()=>{P("ytdlp")},[P]),Le=j.useCallback(()=>{P("invidious")},[P]),Re=j.useCallback(()=>{P("nocookie")},[P]),Ye=j.useCallback(()=>{P("edu"),c(!0)},[P]);j.useEffect(()=>{n&&(c(!1),m(!1),p(C5(n)),Ue())},[n]);const Ue=async()=>{var nt;if(!n)return;h("");const Ke={videoId:n,title:`Video: ${n}`,author:"Unknown",authorId:"",description:"",viewCount:0,lengthSeconds:0,published:Date.now(),publishedText:"",videoThumbnails:[{url:`https://img.youtube.com/vi/${n}/maxresdefault.jpg`,width:1280,height:720,quality:"maxres"},{url:`https://img.youtube.com/vi/${n}/hqdefault.jpg`,width:480,height:360,quality:"high"}],adaptiveFormats:[],formatStreams:[]};t(Ke);try{const bt=await ep(n);t(bt),m(!0),pI({videoId:n,title:bt.title,author:bt.author,thumbnail:Vl(bt.videoThumbnails),timestamp:Date.now(),duration:bt.lengthSeconds});try{const Rt=await qD(bt.title.split(" ").slice(0,3).join(" "));i(Rt.filter(Pe=>Pe.videoId!==n).slice(0,10))}catch{}}catch(bt){console.error("Failed to load video details, using fallback:",bt),pI({videoId:n,title:Ke.title,author:Ke.author,thumbnail:((nt=Ke.videoThumbnails[0])==null?void 0:nt.url)||"",timestamp:Date.now(),duration:0})}},Me=()=>{!e||!n||(g?k5(n):R5({videoId:n,title:e.title,author:e.author,thumbnail:Vl(e.videoThumbnails),timestamp:Date.now(),duration:e.lengthSeconds}),p(!g))},We=async()=>{navigator.share?await navigator.share({title:e==null?void 0:e.title,url:window.location.href}):navigator.clipboard.writeText(window.location.href)};return f&&!e?T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsxs("main",{className:"pt-24 pb-12 container mx-auto px-4 text-center",children:[T.jsx("p",{className:"text-muted-foreground mb-4",children:f||x("error")}),T.jsx(Hn,{onClick:Ue,children:x("retry")})]})]}):T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx(Hl,{}),T.jsx("main",{className:"pt-24 pb-12 container mx-auto px-4",children:T.jsxs("div",{className:`grid gap-8 ${E?"grid-cols-1":"grid-cols-1 lg:grid-cols-3"}`,children:[T.jsxs("div",{className:`space-y-6 ${E?"max-w-6xl mx-auto w-full":"lg:col-span-2"}`,children:[z&&T.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-sm",children:[T.jsx(Hm,{className:"h-4 w-4 text-yellow-500 flex-shrink-0"}),T.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:x("autoSwitchedPlayer")||"自動的に別のプレイヤーに切り替えました"}),A.length>0&&T.jsxs(md,{variant:"outline",className:"ml-2",children:[A.join(", ")," ",x("failed")||"失敗"]}),T.jsxs(Hn,{variant:"outline",size:"sm",className:"ml-auto",onClick:ce,children:[T.jsx(Ys,{className:"h-3 w-3 mr-1"}),x("retry")||"リトライ"]})]}),ie&&T.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-destructive/10 border border-destructive/30 rounded-lg",children:[T.jsx(Hm,{className:"h-8 w-8 text-destructive"}),T.jsx("p",{className:"text-center text-destructive",children:x("allPlayersFailed")||"すべてのプレイヤーが失敗しました"}),T.jsxs(Hn,{onClick:ce,children:[T.jsx(Ys,{className:"h-4 w-4 mr-1"}),x("tryAgain")||"もう一度試す"]})]}),T.jsxs("div",{className:"flex items-center justify-between gap-4",children:[T.jsx($L,{value:_,onValueChange:Ke=>U(Ke),className:"flex-1",children:T.jsxs(rT,{className:"grid w-full grid-cols-4",children:[T.jsxs(Vs,{value:"edu",className:`flex items-center gap-1 text-xs ${A.includes("edu")?"opacity-50":""}`,children:[T.jsx(s3,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:x("eduEmbed")}),T.jsx("span",{className:"sm:hidden",children:"Edu"})]}),T.jsxs(Vs,{value:"ytdlp",className:`flex items-center gap-1 text-xs ${A.includes("ytdlp")?"opacity-50":""}`,children:[T.jsx(A3,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:x("ytdlpStream")}),T.jsx("span",{className:"sm:hidden",children:"ytdlp"})]}),T.jsxs(Vs,{value:"invidious",className:`flex items-center gap-1 text-xs ${A.includes("invidious")?"opacity-50":""}`,children:[T.jsx(p3,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:x("invidiousStream")}),T.jsx("span",{className:"sm:hidden",children:"Inv"})]}),T.jsxs(Vs,{value:"nocookie",className:`flex items-center gap-1 text-xs ${A.includes("nocookie")?"opacity-50":""}`,children:[T.jsx(JB,{className:"w-3 h-3"}),T.jsx("span",{className:"hidden sm:inline",children:x("noCookieEmbed")}),T.jsx("span",{className:"sm:hidden",children:"NC"})]})]})}),T.jsx(Hn,{variant:E?"default":"outline",size:"icon",onClick:()=>S(!E),title:E?"Exit Theater Mode":"Theater Mode",children:T.jsx(l1,{className:"w-4 h-4"})})]}),!ie&&T.jsxs(T.Fragment,{children:[_==="edu"&&T.jsx(bP,{videoId:n,onError:Se,onSuccess:Ye}),_==="ytdlp"&&T.jsx(UQ,{videoId:n,isTheaterMode:E,onTheaterModeToggle:()=>S(!E),onError:de,onSuccess:ze}),_==="invidious"&&T.jsx(AV,{videoId:n,onError:_e,onSuccess:Le}),_==="nocookie"&&T.jsx(aP,{videoId:n,onError:je,onSuccess:Re})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("h1",{className:"text-2xl font-bold",children:(e==null?void 0:e.title)||`Video: ${n}`}),T.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-medium",children:(e==null?void 0:e.author)||"Loading..."}),T.jsxs("p",{className:"text-sm text-muted-foreground",children:[e!=null&&e.viewCount?`${OE(e.viewCount)} ${x("views")}`:"",e!=null&&e.publishedText?` • ${e.publishedText}`:""]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs(Hn,{variant:g?"default":"secondary",onClick:Me,className:"flex items-center gap-2",children:[T.jsx(Km,{className:`w-5 h-5 ${g?"fill-current":""}`}),x(g?"removeFromFavorites":"addToFavorites")]}),T.jsx(Hn,{variant:"outline",size:"icon",onClick:We,children:T.jsx(x3,{className:"w-5 h-5"})})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-border",children:[(e==null?void 0:e.hlsUrl)&&T.jsx(Hn,{variant:"outline",asChild:!0,children:T.jsxs("a",{href:`/tube/hls/${n}`,children:[T.jsx(Ml,{className:"w-4 h-4 mr-2"}),x("hls")]})}),T.jsx(Hn,{variant:"outline",asChild:!0,children:T.jsxs("a",{href:`/tube/audio/${n}`,children:[T.jsx(p0,{className:"w-4 h-4 mr-2"}),x("audio")]})})]}),(e==null?void 0:e.description)&&T.jsx("div",{className:"bg-muted rounded-xl p-4",children:T.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap line-clamp-6",children:e.description})}),T.jsx(iV,{videoId:n})]})]}),!E&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("h2",{className:"text-lg font-bold",children:x("home")}),T.jsx(tp,{videos:r,compact:!0})]})]})})]})},BQ=()=>{const{videoId:n}=G0(),e=j.useRef(null),[t,r]=j.useState(null),[i,o]=j.useState(!0),[l,u]=j.useState(""),{t:c}=Hr();j.useEffect(()=>{n&&d()},[n]);const d=async()=>{var m;if(n){o(!1),u("");try{const f=await ep(n);if(r(f),f.hlsUrl&&e.current)if(e.current.canPlayType("application/vnd.apple.mpegurl"))e.current.src=f.hlsUrl;else{const h=(m=f.formatStreams)==null?void 0:m[0];h&&(e.current.src=h.url)}}catch(f){console.error("Failed to load video:",f),u(c("failedToLoad"))}finally{o(!1)}}};return T.jsxs("div",{className:"min-h-screen bg-black flex flex-col",children:[T.jsx("header",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-black/80 to-transparent",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx(wi,{to:n?`/tube/watch/${n}`:"/home",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:T.jsx(xf,{className:"w-5 h-5 text-white"})}),T.jsxs("div",{className:"flex items-center gap-2 text-white",children:[T.jsx(Ml,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"font-medium",children:c("hls")})]})]})}),T.jsx("div",{className:"flex-1 flex items-center justify-center",children:i?T.jsx("div",{className:"text-white",children:c("loading")}):l?T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-white mb-4",children:l}),T.jsx("button",{onClick:d,className:"btn-primary",children:c("retry")})]}):T.jsx("video",{ref:e,className:"w-full h-full max-h-screen",controls:!0,autoPlay:!0,playsInline:!0,poster:t?Vl(t.videoThumbnails):void 0})}),t&&T.jsxs("div",{className:"p-4 bg-gradient-to-t from-black/80 to-transparent",children:[T.jsx("h1",{className:"text-white font-bold text-lg line-clamp-1",children:t.title}),T.jsx("p",{className:"text-white/70 text-sm",children:t.author})]})]})},$Q=()=>{const{videoId:n}=G0(),e=j.useRef(null),[t,r]=j.useState(null),[i,o]=j.useState(!0),[l,u]=j.useState(""),[c,d]=j.useState(!1),[m,f]=j.useState(0),[h,g]=j.useState(0),{t:p}=Hr();j.useEffect(()=>{n&&E()},[n]);const E=async()=>{var z,ie;if(n){o(!0),u("");try{const he=await ep(n);r(he);const P=((z=he.adaptiveFormats)==null?void 0:z.find(U=>U.type.includes("audio")&&U.container==="mp4"))||((ie=he.adaptiveFormats)==null?void 0:ie.find(U=>U.type.includes("audio")));P&&e.current&&(e.current.src=P.url)}catch(he){console.error("Failed to load video:",he),u(p("failedToLoad"))}finally{o(!1)}}};j.useEffect(()=>{const z=e.current;if(!z)return;const ie=()=>f(z.currentTime),he=()=>g(z.duration),P=()=>d(!0),U=()=>d(!1);return z.addEventListener("timeupdate",ie),z.addEventListener("loadedmetadata",he),z.addEventListener("play",P),z.addEventListener("pause",U),()=>{z.removeEventListener("timeupdate",ie),z.removeEventListener("loadedmetadata",he),z.removeEventListener("play",P),z.removeEventListener("pause",U)}},[]);const S=()=>{e.current&&(c?e.current.pause():e.current.play())},x=z=>{e.current&&(e.current.currentTime+=z)},_=z=>{const ie=parseFloat(z.target.value);e.current&&(e.current.currentTime=ie,f(ie))},A=z=>{const ie=Math.floor(z/60),he=Math.floor(z%60);return`${ie}:${he.toString().padStart(2,"0")}`};return T.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[T.jsx("header",{className:"p-4 border-b border-border",children:T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx(wi,{to:n?`/tube/watch/${n}`:"/home",className:"p-2 rounded-full bg-secondary hover:bg-secondary/80 transition-colors",children:T.jsx(xf,{className:"w-5 h-5"})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(p0,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"font-medium",children:p("audio")})]})]})}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[T.jsx("audio",{ref:e,className:"hidden"}),i?T.jsx("div",{className:"text-muted-foreground",children:p("loading")}):l?T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-muted-foreground mb-4",children:l}),T.jsx("button",{onClick:E,className:"btn-primary",children:p("retry")})]}):t&&T.jsxs("div",{className:"w-full max-w-md space-y-8",children:[T.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden shadow-2xl",children:T.jsx("img",{src:Vl(t.videoThumbnails),alt:t.title,className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"text-center",children:[T.jsx("h1",{className:"text-xl font-bold line-clamp-2",children:t.title}),T.jsx("p",{className:"text-muted-foreground mt-1",children:t.author})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("input",{type:"range",min:0,max:h||100,value:m,onChange:_,className:"w-full h-1 bg-secondary rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary"}),T.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[T.jsx("span",{children:A(m)}),T.jsx("span",{children:A(h)})]})]}),T.jsxs("div",{className:"flex items-center justify-center gap-4",children:[T.jsx("button",{onClick:()=>x(-10),className:"p-3 rounded-full hover:bg-secondary transition-colors",children:T.jsx(w3,{className:"w-6 h-6"})}),T.jsx("button",{onClick:S,className:"p-5 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:c?T.jsx(y0,{className:"w-8 h-8",fill:"currentColor"}):T.jsx(Wo,{className:"w-8 h-8 ml-1",fill:"currentColor"})}),T.jsx("button",{onClick:()=>x(10),className:"p-3 rounded-full hover:bg-secondary transition-colors",children:T.jsx(_3,{className:"w-6 h-6"})})]})]})]})]})},mb={youtube:{successes:0,failures:0,lastSuccess:0},siawase:{successes:0,failures:0,lastSuccess:0},edu:{successes:0,failures:0,lastSuccess:0},invidious:{successes:0,failures:0,lastSuccess:0},piped:{successes:0,failures:0,lastSuccess:0}},Kh=()=>JSON.parse(JSON.stringify(mb)),qQ=()=>{Object.keys(mb).forEach(n=>{mb[n]={successes:0,failures:0,lastSuccess:0}})};var MT="Progress",OT=100,[GQ]=Ki(MT),[HQ,VQ]=GQ(MT),CO=j.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:i,getValueLabel:o=KQ,...l}=n;(i||i===0)&&!nR(i)&&console.error(YQ(`${i}`,"Progress"));const u=nR(i)?i:OT;r!==null&&!rR(r,u)&&console.error(WQ(`${r}`,"Progress"));const c=rR(r,u)?r:null,d=yg(c)?o(c,u):void 0;return T.jsx(HQ,{scope:t,value:c,max:u,children:T.jsx(Dn.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":yg(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":LO(c,u),"data-value":c??void 0,"data-max":u,...l,ref:e})})});CO.displayName=MT;var NO="ProgressIndicator",DO=j.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,i=VQ(NO,t);return T.jsx(Dn.div,{"data-state":LO(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});DO.displayName=NO;function KQ(n,e){return`${Math.round(n/e*100)}%`}function LO(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function yg(n){return typeof n=="number"}function nR(n){return yg(n)&&!isNaN(n)&&n>0}function rR(n,e){return yg(n)&&!isNaN(n)&&n<=e&&n>=0}function YQ(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${OT}\`.`}function WQ(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${OT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var PO=CO,QQ=DO;const MO=j.forwardRef(({className:n,value:e,...t},r)=>T.jsx(PO,{ref:r,className:Bn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:T.jsx(QQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));MO.displayName=PO.displayName;const XQ=()=>{const{language:n}=Hr(),[e,t]=j.useState(Kh()),[r,i]=j.useState(Date.now());j.useEffect(()=>{const A=setInterval(()=>{t(Kh()),i(Date.now())},3e3);return()=>clearInterval(A)},[]);const o=()=>{t(Kh()),i(Date.now())},l=()=>{qQ(),t(Kh()),i(Date.now())},u=A=>{const z=e[A];if(!z)return 0;const ie=z.successes+z.failures;return ie>0?Math.round(z.successes/ie*100):0},c=A=>{const z=e[A];return z?z.successes+z.failures:0},d=A=>{const z=e[A];if(!z||z.lastSuccess===0)return n==="ja"?"未取得":"Never";const ie=Date.now()-z.lastSuccess,he=Math.floor(ie/1e3),P=Math.floor(he/60);return he<60?n==="ja"?`${he}秒前`:`${he}s ago`:n==="ja"?`${P}分前`:`${P}m ago`},m=A=>A>=80?"text-emerald-500 dark:text-emerald-400":A>=50?"text-amber-500 dark:text-amber-400":"text-destructive",f=A=>A>=80?"bg-emerald-500":A>=50?"bg-amber-500":"bg-destructive",h=A=>A==="success"?"text-emerald-500":"text-destructive",g=["edu","invidious","piped"],p={edu:{en:"Education API",ja:"教育API"},invidious:{en:"Invidious",ja:"Invidious"},piped:{en:"Piped",ja:"Piped"}},E=g.reduce((A,z)=>{var ie;return A+(((ie=e[z])==null?void 0:ie.successes)||0)},0),S=g.reduce((A,z)=>{var ie;return A+(((ie=e[z])==null?void 0:ie.failures)||0)},0),x=E+S,_=x>0?Math.round(E/x*100):0;return T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(KB,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:n==="ja"?"API成功率ダッシュボード":"API Success Rate Dashboard"})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs(Hn,{variant:"outline",size:"sm",onClick:o,children:[T.jsx(Ys,{className:"w-4 h-4 mr-1"}),n==="ja"?"更新":"Refresh"]}),T.jsx(Hn,{variant:"outline",size:"sm",onClick:l,children:n==="ja"?"リセット":"Reset"})]})]}),T.jsxs("div",{className:"bg-secondary/50 rounded-xl p-4 border border-border",children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsx("span",{className:"text-sm text-muted-foreground",children:n==="ja"?"全体の成功率":"Overall Success Rate"}),T.jsxs("span",{className:`text-2xl font-bold ${m(_)}`,children:[_,"%"]})]}),T.jsx(MO,{value:_,className:"h-2"}),T.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(D_,{className:h("success"),style:{width:12,height:12}}),E," ",n==="ja"?"成功":"success"]}),T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(L_,{className:h("error"),style:{width:12,height:12}}),S," ",n==="ja"?"失敗":"failed"]}),T.jsxs("span",{children:[x," ",n==="ja"?"リクエスト":"requests"]})]})]}),T.jsx("div",{className:"space-y-3",children:g.map(A=>{const z=u(A);c(A);const ie=e[A];return T.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border hover:border-primary/50 transition-colors",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(zg,{className:`w-4 h-4 ${m(z)}`}),T.jsx("span",{className:"font-medium",children:p[A][n]})]}),T.jsxs("span",{className:`text-xl font-bold ${m(z)}`,children:[z,"%"]})]}),T.jsx("div",{className:"relative h-2 bg-secondary rounded-full overflow-hidden mb-3",children:T.jsx("div",{className:`absolute left-0 top-0 h-full transition-all duration-500 ${f(z)}`,style:{width:`${z}%`}})}),T.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[T.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[T.jsx(D_,{className:h("success"),style:{width:12,height:12}}),T.jsx("span",{children:(ie==null?void 0:ie.successes)||0})]}),T.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[T.jsx(L_,{className:h("error"),style:{width:12,height:12}}),T.jsx("span",{children:(ie==null?void 0:ie.failures)||0})]}),T.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[T.jsx(i1,{className:"w-3 h-3"}),T.jsx("span",{children:d(A)})]})]})]},A)})}),T.jsxs("div",{className:"bg-secondary/30 rounded-lg p-4 border border-border",children:[T.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:n==="ja"?"現在の優先順位":"Current Priority Order"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(A=>({api:A,rate:u(A)})).sort((A,z)=>z.rate-A.rate).map((A,z)=>T.jsxs("div",{className:"flex items-center gap-1 bg-card px-3 py-1 rounded-full text-sm border border-border",children:[T.jsxs("span",{className:"text-muted-foreground",children:[z+1,"."]}),T.jsx("span",{children:p[A.api][n]}),T.jsxs("span",{className:`text-xs ${m(A.rate)}`,children:["(",A.rate,"%)"]})]},A.api))})]}),T.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:[n==="ja"?"最終更新: ":"Last updated: ",new Date(r).toLocaleTimeString()]})]})},ZQ=()=>{const{language:n}=Hr(),[e,t]=j.useState(xN()),[r,i]=j.useState(null),[o,l]=j.useState(null),u=(p,E)=>{i(E),p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/plain",E.toString())},c=(p,E)=>{p.preventDefault(),p.dataTransfer.dropEffect="move",l(E)},d=()=>{l(null)},m=(p,E)=>{if(p.preventDefault(),r===null||r===E){i(null),l(null);return}const S=[...e],[x]=S.splice(r,1);S.splice(E,0,x),t(S),gI(S),i(null),l(null),z_.success(n==="ja"?"API優先順位を更新しました":"API priority updated")},f=()=>{i(null),l(null)},h=j.useCallback(()=>{T5(),t(cd),z_.success(n==="ja"?"デフォルトの優先順位に戻しました":"Reset to default priority")},[n]),g=(p,E)=>{if(E==="up"&&p===0||E==="down"&&p===e.length-1)return;const S=[...e],x=E==="up"?p-1:p+1;[S[p],S[x]]=[S[x],S[p]],t(S),gI(S)};return T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("p",{className:"text-sm text-muted-foreground",children:n==="ja"?"ドラッグ&ドロップで優先順位を変更できます。上位のAPIから順に試行されます。":"Drag and drop to change priority. APIs are tried from top to bottom."}),T.jsxs(Hn,{variant:"ghost",size:"sm",onClick:h,className:"text-muted-foreground hover:text-foreground",children:[T.jsx(T3,{className:"w-4 h-4 mr-1"}),n==="ja"?"リセット":"Reset"]})]}),T.jsx("div",{className:"space-y-2",children:e.map((p,E)=>{const S=b5[p],x=r===E,_=o===E;return T.jsxs("div",{draggable:!0,onDragStart:A=>u(A,E),onDragOver:A=>c(A,E),onDragLeave:d,onDrop:A=>m(A,E),onDragEnd:f,className:`
                flex items-center gap-3 p-3 rounded-lg border transition-all cursor-grab active:cursor-grabbing
                ${x?"opacity-50 scale-95":""}
                ${_?"border-primary bg-primary/5 scale-[1.02]":"border-border bg-secondary/50"}
                hover:border-primary/50 hover:bg-secondary
              `,children:[T.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[T.jsx(l3,{className:"w-4 h-4"}),T.jsx("span",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary text-xs font-bold",children:E+1})]}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"font-medium text-foreground",children:S.name}),T.jsx(J1,{children:T.jsxs(Nq,{children:[T.jsx(Dq,{asChild:!0,children:T.jsx(c3,{className:"w-3.5 h-3.5 text-muted-foreground cursor-help"})}),T.jsx(eN,{children:T.jsx("p",{children:S.description})})]})})]}),T.jsx("p",{className:"text-xs text-muted-foreground truncate",children:S.description})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsxs(Hn,{variant:"ghost",size:"icon",className:"h-7 w-7",disabled:E===0,onClick:()=>g(E,"up"),children:[T.jsx("span",{className:"sr-only",children:"Move up"}),T.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]}),T.jsxs(Hn,{variant:"ghost",size:"icon",className:"h-7 w-7",disabled:E===e.length-1,onClick:()=>g(E,"down"),children:[T.jsx("span",{className:"sr-only",children:"Move down"}),T.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),E===0&&T.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:n==="ja"?"優先":"Primary"})]},p)})}),T.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50 text-sm text-muted-foreground",children:[T.jsx(m0,{className:"w-4 h-4 text-primary flex-shrink-0"}),T.jsx("span",{children:n==="ja"?"変更は自動保存されます。上位のAPIが失敗した場合、自動的に次のAPIに切り替わります。":"Changes are saved automatically. If a higher priority API fails, it automatically falls back to the next one."})]})]})},JQ=["Auto","2160p","1440p","1080p","720p","480p","360p","240p"],eX=()=>{const{t:n,language:e,setLanguage:t}=Hr(),[r,i]=ln.useState(N5()),[o,l]=ln.useState(_N()),u=d=>{i(d),D5(d)},c=d=>{l(d),L5(d)};return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx("header",{className:"sticky top-0 z-50 glass-card border-b border-border",children:T.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center gap-4",children:[T.jsx(wi,{to:"/home",className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:T.jsx(xf,{className:"w-5 h-5"})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(c1,{className:"w-5 h-5 text-primary"}),T.jsxs("span",{className:"font-bold text-xl",children:["Wista ",n("settings")]})]})]})}),T.jsx("main",{className:"container mx-auto px-4 py-8 max-w-2xl",children:T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"glass-card rounded-xl p-6",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(g0,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:n("language")})]}),T.jsxs(vs,{value:e,onValueChange:d=>t(d),children:[T.jsx(Ka,{className:"w-full bg-secondary border-border",children:T.jsx(Es,{})}),T.jsx(Ya,{className:"bg-card border-border",children:SN.map(d=>T.jsxs(_i,{value:d.code,children:[d.nativeName," (",d.name,")"]},d.code))})]})]}),T.jsxs("div",{className:"glass-card rounded-xl p-6",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(y3,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:n("quality")})]}),T.jsxs(vs,{value:r,onValueChange:u,children:[T.jsx(Ka,{className:"w-full bg-secondary border-border",children:T.jsx(Es,{})}),T.jsx(Ya,{className:"bg-card border-border",children:JQ.map(d=>T.jsx(_i,{value:d,children:d},d))})]}),T.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e==="ja"?"デフォルトの動画品質を選択してください":"Select default video quality"})]}),T.jsxs("div",{className:"glass-card rounded-xl p-6",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(s1,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:e==="ja"?"サムネイルソース":"Thumbnail Source"})]}),T.jsxs(vs,{value:o,onValueChange:d=>c(d),children:[T.jsx(Ka,{className:"w-full bg-secondary border-border",children:T.jsx(Es,{})}),T.jsxs(Ya,{className:"bg-card border-border",children:[T.jsx(_i,{value:"i.ytimg.com",children:"i.ytimg.com (推奨)"}),T.jsx(_i,{value:"img.youtube.com",children:"img.youtube.com"})]})]}),T.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e==="ja"?"YouTubeサムネイル画像の取得元を選択します。":"Select the source for YouTube thumbnails."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-6",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(Vm,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:n("download")})]}),T.jsx("p",{className:"text-sm text-muted-foreground",children:e==="ja"?"動画のダウンロードは視聴ページから利用できます。ダウンロードボタンをクリックすると、選択した品質で動画がダウンロードされます。":"Video downloads are available from the watch page. Click the download button to download the video in your selected quality."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-6",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(f3,{className:"w-5 h-5 text-primary"}),T.jsx("h2",{className:"font-bold text-lg",children:e==="ja"?"API優先順位":"API Priority"})]}),T.jsx(ZQ,{})]}),T.jsx("div",{className:"glass-card rounded-xl p-6",children:T.jsx(XQ,{})})]})})]})},tX=[{id:"calculator",name:"Calculator",icon:YB,description:"基本的な計算機"},{id:"notes",name:"Notes",icon:i3,description:"メモ帳"},{id:"image-converter",name:"Image Converter",icon:s1,description:"画像変換ツール"},{id:"code-editor",name:"Code Editor",icon:ZB,description:"シンプルなコードエディタ"},{id:"timer",name:"Timer",icon:i1,description:"タイマー & ストップウォッチ"},{id:"qr-generator",name:"QR Generator",icon:b3,description:"QRコード生成"}],iR=()=>{const{t:n}=Hr();return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx("header",{className:"sticky top-0 z-50 glass-card border-b border-border",children:T.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center gap-4",children:[T.jsx(wi,{to:"/home",className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:T.jsx(xf,{className:"w-5 h-5"})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(h1,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"font-bold text-xl",children:n("tools")})]})]})}),T.jsxs("main",{className:"container mx-auto px-4 py-8",children:[T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:tX.map(e=>T.jsxs(wi,{to:`/tools/${e.id}`,className:"glass-card rounded-xl p-6 hover:border-primary/50 transition-all group",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10 w-fit mb-4 group-hover:bg-primary/20 transition-colors",children:T.jsx(e.icon,{className:"w-6 h-6 text-primary"})}),T.jsx("h3",{className:"font-bold text-lg mb-1",children:e.name}),T.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},e.id))}),T.jsx("div",{className:"mt-12 text-center text-muted-foreground",children:T.jsx("p",{children:"さらにツールを追加予定..."})})]})]})},nX=[{id:"puzzle",name:"Puzzle",icon:E3,description:"パズルゲーム"},{id:"shooter",name:"Target Practice",icon:I3,description:"ターゲット練習"},{id:"dice",name:"Dice Roller",icon:e3,description:"サイコロゲーム"},{id:"memory",name:"Memory Game",icon:o3,description:"神経衰弱"},{id:"reaction",name:"Reaction Time",icon:N3,description:"反射神経テスト"}],aR=()=>{const{t:n}=Hr();return T.jsxs("div",{className:"min-h-screen bg-background",children:[T.jsx("header",{className:"sticky top-0 z-50 glass-card border-b border-border",children:T.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center gap-4",children:[T.jsx(wi,{to:"/home",className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:T.jsx(xf,{className:"w-5 h-5"})}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(a1,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"font-bold text-xl",children:n("games")})]})]})}),T.jsxs("main",{className:"container mx-auto px-4 py-8",children:[T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:nX.map(e=>T.jsxs(wi,{to:`/games/${e.id}`,className:"glass-card rounded-xl p-6 hover:border-primary/50 transition-all group",children:[T.jsx("div",{className:"p-3 rounded-xl bg-primary/10 w-fit mb-4 group-hover:bg-primary/20 transition-colors",children:T.jsx(e.icon,{className:"w-6 h-6 text-primary"})}),T.jsx("h3",{className:"font-bold text-lg mb-1",children:e.name}),T.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},e.id))}),T.jsx("div",{className:"mt-12 text-center text-muted-foreground",children:T.jsx("p",{children:"さらにゲームを追加予定..."})})]})]})},rX=()=>{const n=al();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),T.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:T.jsxs("div",{className:"text-center",children:[T.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),T.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),T.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},iX=new Qq,aX=()=>T.jsx(t8,{client:iX,children:T.jsx(P5,{children:T.jsxs(J1,{children:[T.jsx(h4,{}),T.jsx(H4,{}),T.jsx(m5,{children:T.jsxs(s5,{children:[T.jsx(Cr,{path:"/login",element:T.jsx(F5,{})}),T.jsx(Cr,{path:"/",element:T.jsx(Tu,{to:"/login",replace:!0})}),T.jsxs(Cr,{element:T.jsx(M5,{}),children:[T.jsx(Cr,{path:"/home",element:T.jsx(TH,{})}),T.jsx(Cr,{path:"/tube/search",element:T.jsx(SH,{})}),T.jsx(Cr,{path:"/tube/trending",element:T.jsx(JH,{})}),T.jsx(Cr,{path:"/trending",element:T.jsx(Tu,{to:"/tube/trending",replace:!0})}),T.jsx(Cr,{path:"/tube/history",element:T.jsx(eV,{})}),T.jsx(Cr,{path:"/history",element:T.jsx(Tu,{to:"/tube/history",replace:!0})}),T.jsx(Cr,{path:"/tube/favorites",element:T.jsx(tV,{})}),T.jsx(Cr,{path:"/favorites",element:T.jsx(Tu,{to:"/tube/favorites",replace:!0})}),T.jsx(Cr,{path:"/tube/watch/:videoId",element:T.jsx(tR,{})}),T.jsx(Cr,{path:"/watch/:videoId",element:T.jsx(tR,{})}),T.jsx(Cr,{path:"/tube/hls/:videoId",element:T.jsx(BQ,{})}),T.jsx(Cr,{path:"/tube/audio/:videoId",element:T.jsx($Q,{})}),T.jsx(Cr,{path:"/tube/settings",element:T.jsx(eX,{})}),T.jsx(Cr,{path:"/settings",element:T.jsx(Tu,{to:"/tube/settings",replace:!0})}),T.jsx(Cr,{path:"/tools",element:T.jsx(iR,{})}),T.jsx(Cr,{path:"/tools/:toolId",element:T.jsx(iR,{})}),T.jsx(Cr,{path:"/games",element:T.jsx(aR,{})}),T.jsx(Cr,{path:"/games/:gameId",element:T.jsx(aR,{})})]}),T.jsx(Cr,{path:"*",element:T.jsx(rX,{})})]})})]})})});kC(document.getElementById("root")).render(T.jsx(aX,{}))});export default sX();</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter,Noto Sans JP,system-ui,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--background: 260 20% 6%;--foreground: 260 10% 95%;--card: 260 20% 10%;--card-foreground: 260 10% 95%;--popover: 260 20% 12%;--popover-foreground: 260 10% 95%;--primary: 270 70% 60%;--primary-foreground: 0 0% 100%;--secondary: 260 20% 15%;--secondary-foreground: 260 10% 90%;--muted: 260 15% 18%;--muted-foreground: 260 10% 60%;--accent: 280 80% 55%;--accent-foreground: 0 0% 100%;--destructive: 0 84% 60%;--destructive-foreground: 0 0% 100%;--border: 260 15% 22%;--input: 260 20% 15%;--ring: 270 70% 60%;--radius: .75rem;--gradient-primary: linear-gradient(135deg, hsl(270 70% 60%) 0%, hsl(290 80% 50%) 100%);--gradient-dark: linear-gradient(180deg, hsl(260 20% 10%) 0%, hsl(260 25% 5%) 100%);--gradient-card: linear-gradient(145deg, hsl(260 20% 12%) 0%, hsl(260 20% 8%) 100%);--shadow-glow: 0 0 30px hsl(270 70% 60% / .4);--shadow-card: 0 8px 32px hsl(260 30% 0% / .5);--sidebar-background: 260 20% 8%;--sidebar-foreground: 260 10% 90%;--sidebar-primary: 270 70% 60%;--sidebar-primary-foreground: 0 0% 100%;--sidebar-accent: 260 20% 15%;--sidebar-accent-foreground: 260 10% 95%;--sidebar-border: 260 15% 18%;--sidebar-ring: 270 70% 60%}.dark{--background: 0 0% 7%;--foreground: 0 0% 95%}*{border-color:hsl(var(--border))}body{background-color:hsl(var(--background));font-family:Inter,Noto Sans JP,system-ui,sans-serif;color:hsl(var(--foreground));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Inter,Noto Sans JP,system-ui,sans-serif}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:hsl(var(--background))}::-webkit-scrollbar-thumb{background:hsl(var(--muted));border-radius:4px}::-webkit-scrollbar-thumb:hover{background:hsl(var(--muted-foreground))}.container{width:100%;margin-right:auto;margin-left:auto;padding-right:2rem;padding-left:2rem}@media (min-width: 1400px){.container{max-width:1400px}}.glass-card{background:linear-gradient(145deg,#231d30b3,#18141fcc);-webkit-backdrop-filter:blur(24px);backdrop-filter:blur(24px);border:1px solid hsl(270 70% 60% / .2);box-shadow:0 8px 32px #4c178226,inset 0 1px #ffffff0d}.video-thumbnail{position:relative;overflow:hidden;border-radius:var(--radius);transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;animation-duration:.3s}.video-thumbnail:hover{transform:scale(1.03);box-shadow:var(--shadow-glow)}.search-input{width:100%;border-radius:9999px;border-width:2px;border-color:transparent;background-color:hsl(var(--secondary));padding:.75rem 1.5rem;color:hsl(var(--foreground));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;animation-duration:.3s}.search-input::-moz-placeholder{color:hsl(var(--muted-foreground))}.search-input::placeholder{color:hsl(var(--muted-foreground))}.search-input:focus{border-color:hsl(var(--primary));outline:2px solid transparent;outline-offset:2px;box-shadow:var(--shadow-glow)}.btn-primary{background:var(--gradient-primary);border-radius:9999px;padding:.75rem 1.5rem;font-weight:600;color:hsl(var(--primary-foreground));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;animation-duration:.3s}.btn-primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-glow)}.nav-link{border-radius:var(--radius);padding:.5rem 1rem;color:hsl(var(--muted-foreground));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;animation-duration:.2s}.nav-link:hover{background-color:hsl(var(--secondary));color:hsl(var(--foreground))}.nav-link.active,.nav-link.\!active{background-color:hsl(var(--primary) / .1);color:hsl(var(--primary))}.fade-in{animation:fadeIn .3s ease-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.slide-up{animation:slideUp .4s ease-out}@keyframes slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.pulse-glow{animation:pulseGlow 2s ease-in-out infinite}@keyframes pulseGlow{0%,to{box-shadow:0 0 20px #9952e066}50%{box-shadow:0 0 50px #ab30e899}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.-bottom-12{bottom:-3rem}.-left-12{left:-3rem}.-right-12{right:-3rem}.-top-12{top:-3rem}.bottom-0{bottom:0}.bottom-1{bottom:.25rem}.bottom-1\/4{bottom:25%}.bottom-2{bottom:.5rem}.left-0{left:0}.left-1{left:.25rem}.left-1\/2{left:50%}.left-1\/4{left:25%}.left-2{left:.5rem}.left-4{left:1rem}.left-6{left:1.5rem}.left-\[50\%\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-1\/3{right:33.333333%}.right-1\/4{right:25%}.right-2{right:.5rem}.right-3{right:.75rem}.right-4{right:1rem}.top-0{top:0}.top-1\.5{top:.375rem}.top-1\/2{top:50%}.top-1\/4{top:25%}.top-2{top:.5rem}.top-3\.5{top:.875rem}.top-4{top:1rem}.top-\[1px\]{top:1px}.top-\[50\%\]{top:50%}.top-\[60\%\]{top:60%}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.z-\[100\]{z-index:100}.z-\[1\]{z-index:1}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3\.5{margin-left:.875rem;margin-right:.875rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mt-4{margin-top:-1rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-1\.5{margin-top:.375rem}.mt-12{margin-top:3rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-auto{margin-top:auto}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.line-clamp-6{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.size-4{width:1rem;height:1rem}.h-1{height:.25rem}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\.5{height:.625rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-80{height:20rem}.h-9{height:2.25rem}.h-96{height:24rem}.h-\[1px\]{height:1px}.h-\[400px\]{height:400px}.h-\[var\(--radix-navigation-menu-viewport-height\)\]{height:var(--radix-navigation-menu-viewport-height)}.h-\[var\(--radix-select-trigger-height\)\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-svh{height:100svh}.max-h-96{max-height:24rem}.max-h-\[300px\]{max-height:300px}.max-h-\[80vh\]{max-height:80vh}.max-h-screen{max-height:100vh}.min-h-0{min-height:0px}.min-h-\[80px\]{min-height:80px}.min-h-screen{min-height:100vh}.min-h-svh{min-height:100svh}.w-0{width:0px}.w-1{width:.25rem}.w-1\/2{width:50%}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\.5{width:.625rem}.w-2\/3{width:66.666667%}.w-20{width:5rem}.w-24{width:6rem}.w-28{width:7rem}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-3\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-80{width:20rem}.w-9{width:2.25rem}.w-96{width:24rem}.w-\[--sidebar-width\]{width:var(--sidebar-width)}.w-\[100px\]{width:100px}.w-\[1px\]{width:1px}.w-\[800px\]{width:800px}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-5{min-width:1.25rem}.min-w-\[120px\]{min-width:120px}.min-w-\[12rem\]{min-width:12rem}.min-w-\[8rem\]{min-width:8rem}.min-w-\[var\(--radix-select-trigger-width\)\]{min-width:var(--radix-select-trigger-width)}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-6xl{max-width:72rem}.max-w-\[--skeleton-width\]{max-width:var(--skeleton-width)}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-px{--tw-translate-x: -1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\[-50\%\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-px{--tw-translate-x: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\[-50\%\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\[1\.02\]{--tw-scale-x: 1.02;--tw-scale-y: 1.02;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-grab{cursor:grab}.cursor-help{cursor:help}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.list-none{list-style-type:none}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-\[2px\]{border-radius:2px}.rounded-\[inherit\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-sm{border-radius:calc(var(--radius) - 4px)}.rounded-xl{border-radius:.75rem}.rounded-t-\[10px\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-tl-sm{border-top-left-radius:calc(var(--radius) - 4px)}.border{border-width:1px}.border-2{border-width:2px}.border-\[1\.5px\]{border-width:1.5px}.border-y{border-top-width:1px;border-bottom-width:1px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\[--color-border\]{border-color:var(--color-border)}.border-border{border-color:hsl(var(--border))}.border-border\/50{border-color:hsl(var(--border) / .5)}.border-destructive{border-color:hsl(var(--destructive))}.border-destructive\/20{border-color:hsl(var(--destructive) / .2)}.border-destructive\/30{border-color:hsl(var(--destructive) / .3)}.border-destructive\/50{border-color:hsl(var(--destructive) / .5)}.border-input{border-color:hsl(var(--input))}.border-primary{border-color:hsl(var(--primary))}.border-primary-foreground\/30{border-color:hsl(var(--primary-foreground) / .3)}.border-sidebar-border{border-color:hsl(var(--sidebar-border))}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\/50{border-color:#ffffff80}.border-yellow-500\/30{border-color:#eab3084d}.border-l-transparent{border-left-color:transparent}.border-t-primary-foreground{border-top-color:hsl(var(--primary-foreground))}.border-t-transparent{border-top-color:transparent}.bg-\[--color-bg\]{background-color:var(--color-bg)}.bg-accent{background-color:hsl(var(--accent))}.bg-accent\/15{background-color:hsl(var(--accent) / .15)}.bg-amber-500{--tw-bg-opacity: 1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-background{background-color:hsl(var(--background))}.bg-background\/0{background-color:hsl(var(--background) / 0)}.bg-background\/80{background-color:hsl(var(--background) / .8)}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/80{background-color:#000c}.bg-border{background-color:hsl(var(--border))}.bg-card{background-color:hsl(var(--card))}.bg-destructive{background-color:hsl(var(--destructive))}.bg-destructive\/10{background-color:hsl(var(--destructive) / .1)}.bg-emerald-500{--tw-bg-opacity: 1;background-color:rgb(16 185 129 / var(--tw-bg-opacity, 1))}.bg-foreground{background-color:hsl(var(--foreground))}.bg-muted{background-color:hsl(var(--muted))}.bg-muted\/50{background-color:hsl(var(--muted) / .5)}.bg-popover{background-color:hsl(var(--popover))}.bg-primary{background-color:hsl(var(--primary))}.bg-primary\/10{background-color:hsl(var(--primary) / .1)}.bg-primary\/20{background-color:hsl(var(--primary) / .2)}.bg-primary\/5{background-color:hsl(var(--primary) / .05)}.bg-primary\/50{background-color:hsl(var(--primary) / .5)}.bg-primary\/70{background-color:hsl(var(--primary) / .7)}.bg-primary\/90{background-color:hsl(var(--primary) / .9)}.bg-secondary{background-color:hsl(var(--secondary))}.bg-secondary\/30{background-color:hsl(var(--secondary) / .3)}.bg-secondary\/50{background-color:hsl(var(--secondary) / .5)}.bg-sidebar{background-color:hsl(var(--sidebar-background))}.bg-sidebar-border{background-color:hsl(var(--sidebar-border))}.bg-transparent{background-color:transparent}.bg-white\/10{background-color:#ffffff1a}.bg-white\/20{background-color:#fff3}.bg-white\/30{background-color:#ffffff4d}.bg-yellow-500\/10{background-color:#eab3081a}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top,var(--tw-gradient-stops))}.from-background{--tw-gradient-from: hsl(var(--background)) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-black\/80{--tw-gradient-from: rgb(0 0 0 / .8) var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary{--tw-gradient-from: hsl(var(--primary)) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-primary\/5{--tw-gradient-from: hsl(var(--primary) / .05) var(--tw-gradient-from-position);--tw-gradient-to: hsl(var(--primary) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-accent{--tw-gradient-to: hsl(var(--accent) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--accent)) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-background{--tw-gradient-to: hsl(var(--background) / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), hsl(var(--background)) var(--tw-gradient-via-position), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-accent{--tw-gradient-to: hsl(var(--accent)) var(--tw-gradient-to-position)}.to-black\/30{--tw-gradient-to: rgb(0 0 0 / .3) var(--tw-gradient-to-position)}.to-primary{--tw-gradient-to: hsl(var(--primary)) var(--tw-gradient-to-position)}.to-primary\/10{--tw-gradient-to: hsl(var(--primary) / .1) var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.fill-current{fill:currentColor}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\[1px\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-12{padding-bottom:3rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pl-12{padding-left:3rem}.pl-16{padding-left:4rem}.pl-2\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-12{padding-right:3rem}.pr-2{padding-right:.5rem}.pr-2\.5{padding-right:.625rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-24{padding-top:6rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.align-middle{vertical-align:middle}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[0\.8rem\]{font-size:.8rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.tabular-nums{--tw-numeric-spacing: tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.tracking-tight{letter-spacing:-.025em}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-accent-foreground{color:hsl(var(--accent-foreground))}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-card-foreground{color:hsl(var(--card-foreground))}.text-current{color:currentColor}.text-destructive{color:hsl(var(--destructive))}.text-destructive-foreground{color:hsl(var(--destructive-foreground))}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-foreground{color:hsl(var(--foreground))}.text-foreground\/50{color:hsl(var(--foreground) / .5)}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-muted-foreground{color:hsl(var(--muted-foreground))}.text-popover-foreground{color:hsl(var(--popover-foreground))}.text-primary{color:hsl(var(--primary))}.text-primary-foreground{color:hsl(var(--primary-foreground))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-secondary-foreground{color:hsl(var(--secondary-foreground))}.text-sidebar-foreground{color:hsl(var(--sidebar-foreground))}.text-sidebar-foreground\/70{color:hsl(var(--sidebar-foreground) / .7)}.text-transparent{color:transparent}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/70{color:#ffffffb3}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-600{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-90{opacity:.9}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_0_1px_hsl\(var\(--sidebar-border\)\)\]{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-border));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-none{--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-ring{--tw-ring-color: hsl(var(--ring))}.ring-sidebar-ring{--tw-ring-color: hsl(var(--sidebar-ring))}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background))}.blur-2xl{--tw-blur: blur(40px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-3xl{--tw-blur: blur(64px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[left\,right\,width\]{transition-property:left,right,width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[margin\,opa\]{transition-property:margin,opa;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[width\,height\,padding\]{transition-property:width,height,padding;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\[width\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-1000{transition-duration:1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in,.fade-in-0{--tw-enter-opacity: 0}.fade-in-80{--tw-enter-opacity: .8}.zoom-in-95{--tw-enter-scale: .95}.duration-1000{animation-duration:1s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.duration-500{animation-duration:.5s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{animation-timing-function:linear}.paused{animation-play-state:paused}.data-\[motion\^\=from-\]\:fade-in[data-motion^=from-],.data-\[state\=visible\]\:fade-in[data-state=visible]{animation:fadeIn .3s ease-out}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-transparent::file-selector-button{background-color:transparent}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-medium::file-selector-button{font-weight:500}.file\:text-foreground::file-selector-button{color:hsl(var(--foreground))}.placeholder\:text-muted-foreground::-moz-placeholder{color:hsl(var(--muted-foreground))}.placeholder\:text-muted-foreground::placeholder{color:hsl(var(--muted-foreground))}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:-inset-2:after{content:var(--tw-content);top:-.5rem;right:-.5rem;bottom:-.5rem;left:-.5rem}.after\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\:left-1\/2:after{content:var(--tw-content);left:50%}.after\:w-1:after{content:var(--tw-content);width:.25rem}.after\:w-\[2px\]:after{content:var(--tw-content);width:2px}.after\:-translate-x-1\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.first\:rounded-l-md:first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.first\:border-l:first-child{border-left-width:1px}.last\:rounded-r-md:last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.last\:border-0:last-child{border-width:0px}.focus-within\:relative:focus-within{position:relative}.focus-within\:z-20:focus-within{z-index:20}.hover\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-primary\/50:hover{border-color:hsl(var(--primary) / .5)}.hover\:bg-accent:hover{background-color:hsl(var(--accent))}.hover\:bg-destructive\/10:hover{background-color:hsl(var(--destructive) / .1)}.hover\:bg-destructive\/80:hover{background-color:hsl(var(--destructive) / .8)}.hover\:bg-destructive\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\:bg-muted:hover{background-color:hsl(var(--muted))}.hover\:bg-muted\/50:hover{background-color:hsl(var(--muted) / .5)}.hover\:bg-primary:hover{background-color:hsl(var(--primary))}.hover\:bg-primary\/80:hover{background-color:hsl(var(--primary) / .8)}.hover\:bg-primary\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\:bg-secondary:hover{background-color:hsl(var(--secondary))}.hover\:bg-secondary\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\:bg-sidebar-accent:hover{background-color:hsl(var(--sidebar-accent))}.hover\:bg-white\/20:hover{background-color:#fff3}.hover\:bg-white\/30:hover{background-color:#ffffff4d}.hover\:text-accent-foreground:hover{color:hsl(var(--accent-foreground))}.hover\:text-foreground:hover{color:hsl(var(--foreground))}.hover\:text-muted-foreground:hover{color:hsl(var(--muted-foreground))}.hover\:text-primary:hover{color:hsl(var(--primary))}.hover\:text-primary-foreground:hover{color:hsl(var(--primary-foreground))}.hover\:text-primary\/90:hover{color:hsl(var(--primary) / .9)}.hover\:text-sidebar-accent-foreground:hover{color:hsl(var(--sidebar-accent-foreground))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:shadow-\[0_0_0_1px_hsl\(var\(--sidebar-accent\)\)\]:hover{--tw-shadow: 0 0 0 1px hsl(var(--sidebar-accent));--tw-shadow-colored: 0 0 0 1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:after\:bg-sidebar-border:hover:after{content:var(--tw-content);background-color:hsl(var(--sidebar-border))}.focus\:border-primary:focus{border-color:hsl(var(--primary))}.focus\:bg-accent:focus{background-color:hsl(var(--accent))}.focus\:bg-primary:focus{background-color:hsl(var(--primary))}.focus\:bg-secondary\/70:focus{background-color:hsl(var(--secondary) / .7)}.focus\:text-accent-foreground:focus{color:hsl(var(--accent-foreground))}.focus\:text-primary-foreground:focus{color:hsl(var(--primary-foreground))}.focus\:opacity-100:focus{opacity:1}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-ring:focus{--tw-ring-color: hsl(var(--ring))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-ring:focus-visible{--tw-ring-color: hsl(var(--ring))}.focus-visible\:ring-sidebar-ring:focus-visible{--tw-ring-color: hsl(var(--sidebar-ring))}.focus-visible\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\:ring-offset-background:focus-visible{--tw-ring-offset-color: hsl(var(--background))}.active\:cursor-grabbing:active{cursor:grabbing}.active\:bg-sidebar-accent:active{background-color:hsl(var(--sidebar-accent))}.active\:text-sidebar-accent-foreground:active{color:hsl(var(--sidebar-accent-foreground))}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.group:focus-within .group-focus-within\:text-primary{color:hsl(var(--primary))}.group\/menu-item:focus-within .group-focus-within\/menu-item\:opacity-100{opacity:1}.group:hover .group-hover\:scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:bg-background\/20{background-color:hsl(var(--background) / .2)}.group:hover .group-hover\:bg-primary\/20{background-color:hsl(var(--primary) / .2)}.group:hover .group-hover\:text-primary{color:hsl(var(--primary))}.group\/menu-item:hover .group-hover\/menu-item\:opacity-100,.group:hover .group-hover\:opacity-100{opacity:1}.group.destructive .group-\[\.destructive\]\:border-muted\/40{border-color:hsl(var(--muted) / .4)}.group.toaster .group-\[\.toaster\]\:border-border{border-color:hsl(var(--border))}.group.toast .group-\[\.toast\]\:bg-muted{background-color:hsl(var(--muted))}.group.toast .group-\[\.toast\]\:bg-primary{background-color:hsl(var(--primary))}.group.toaster .group-\[\.toaster\]\:bg-background{background-color:hsl(var(--background))}.group.destructive .group-\[\.destructive\]\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.toast .group-\[\.toast\]\:text-muted-foreground{color:hsl(var(--muted-foreground))}.group.toast .group-\[\.toast\]\:text-primary-foreground{color:hsl(var(--primary-foreground))}.group.toaster .group-\[\.toaster\]\:text-foreground{color:hsl(var(--foreground))}.group.toaster .group-\[\.toaster\]\:shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group.destructive .group-\[\.destructive\]\:hover\:border-destructive\/30:hover{border-color:hsl(var(--destructive) / .3)}.group.destructive .group-\[\.destructive\]\:hover\:bg-destructive:hover{background-color:hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:hover\:text-destructive-foreground:hover{color:hsl(var(--destructive-foreground))}.group.destructive .group-\[\.destructive\]\:hover\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\[\.destructive\]\:focus\:ring-destructive:focus{--tw-ring-color: hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:focus\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\[\.destructive\]\:focus\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer\/menu-button:hover~.peer-hover\/menu-button\:text-sidebar-accent-foreground{color:hsl(var(--sidebar-accent-foreground))}.peer:disabled~.peer-disabled\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\:opacity-70{opacity:.7}.has-\[\[data-variant\=inset\]\]\:bg-sidebar:has([data-variant=inset]){background-color:hsl(var(--sidebar-background))}.has-\[\:disabled\]\:opacity-50:has(:disabled){opacity:.5}.group\/menu-item:has([data-sidebar=menu-action]) .group-has-\[\[data-sidebar\=menu-action\]\]\/menu-item\:pr-8{padding-right:2rem}.aria-disabled\:pointer-events-none[aria-disabled=true]{pointer-events:none}.aria-disabled\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\:bg-accent[aria-selected=true]{background-color:hsl(var(--accent))}.aria-selected\:bg-accent\/50[aria-selected=true]{background-color:hsl(var(--accent) / .5)}.aria-selected\:text-accent-foreground[aria-selected=true]{color:hsl(var(--accent-foreground))}.aria-selected\:text-muted-foreground[aria-selected=true]{color:hsl(var(--muted-foreground))}.aria-selected\:opacity-100[aria-selected=true]{opacity:1}.aria-selected\:opacity-30[aria-selected=true]{opacity:.3}.data-\[disabled\=true\]\:pointer-events-none[data-disabled=true],.data-\[disabled\]\:pointer-events-none[data-disabled]{pointer-events:none}.data-\[panel-group-direction\=vertical\]\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\[panel-group-direction\=vertical\]\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\[side\=bottom\]\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=left\]\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=right\]\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=top\]\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=checked\]\:translate-x-5[data-state=checked]{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=unchecked\]\:translate-x-0[data-state=unchecked],.data-\[swipe\=cancel\]\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=end\]\:translate-x-\[var\(--radix-toast-swipe-end-x\)\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=move\]\:translate-x-\[var\(--radix-toast-swipe-move-x\)\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\[state\=closed\]\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\[state\=open\]\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\[panel-group-direction\=vertical\]\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\[active\=true\]\:bg-sidebar-accent[data-active=true]{background-color:hsl(var(--sidebar-accent))}.data-\[active\]\:bg-accent\/50[data-active]{background-color:hsl(var(--accent) / .5)}.data-\[selected\=\'true\'\]\:bg-accent[data-selected=true]{background-color:hsl(var(--accent))}.data-\[state\=active\]\:bg-background[data-state=active]{background-color:hsl(var(--background))}.data-\[state\=checked\]\:bg-primary[data-state=checked]{background-color:hsl(var(--primary))}.data-\[state\=on\]\:bg-accent[data-state=on],.data-\[state\=open\]\:bg-accent[data-state=open]{background-color:hsl(var(--accent))}.data-\[state\=open\]\:bg-accent\/50[data-state=open]{background-color:hsl(var(--accent) / .5)}.data-\[state\=open\]\:bg-secondary[data-state=open]{background-color:hsl(var(--secondary))}.data-\[state\=selected\]\:bg-muted[data-state=selected]{background-color:hsl(var(--muted))}.data-\[state\=unchecked\]\:bg-input[data-state=unchecked]{background-color:hsl(var(--input))}.data-\[active\=true\]\:font-medium[data-active=true]{font-weight:500}.data-\[active\=true\]\:text-sidebar-accent-foreground[data-active=true]{color:hsl(var(--sidebar-accent-foreground))}.data-\[selected\=true\]\:text-accent-foreground[data-selected=true]{color:hsl(var(--accent-foreground))}.data-\[state\=active\]\:text-foreground[data-state=active]{color:hsl(var(--foreground))}.data-\[state\=checked\]\:text-primary-foreground[data-state=checked]{color:hsl(var(--primary-foreground))}.data-\[state\=on\]\:text-accent-foreground[data-state=on],.data-\[state\=open\]\:text-accent-foreground[data-state=open]{color:hsl(var(--accent-foreground))}.data-\[state\=open\]\:text-muted-foreground[data-state=open]{color:hsl(var(--muted-foreground))}.data-\[disabled\=true\]\:opacity-50[data-disabled=true],.data-\[disabled\]\:opacity-50[data-disabled]{opacity:.5}.data-\[state\=open\]\:opacity-100[data-state=open]{opacity:1}.data-\[state\=active\]\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\[swipe\=move\]\:transition-none[data-swipe=move]{transition-property:none}.data-\[state\=closed\]\:duration-300[data-state=closed]{transition-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{transition-duration:.5s}.data-\[motion\^\=from-\]\:animate-in[data-motion^=from-],.data-\[state\=open\]\:animate-in[data-state=open],.data-\[state\=visible\]\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\[motion\^\=to-\]\:animate-out[data-motion^=to-],.data-\[state\=closed\]\:animate-out[data-state=closed],.data-\[state\=hidden\]\:animate-out[data-state=hidden],.data-\[swipe\=end\]\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\[motion\^\=from-\]\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\[motion\^\=to-\]\:fade-out[data-motion^=to-],.data-\[state\=closed\]\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\[state\=closed\]\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\[state\=hidden\]\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\[state\=open\]\:fade-in-0[data-state=open],.data-\[state\=visible\]\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\[state\=closed\]\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\[state\=open\]\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\[state\=open\]\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\[motion\=from-end\]\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\[motion\=from-start\]\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\[motion\=to-end\]\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\[motion\=to-start\]\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\[side\=bottom\]\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\[side\=left\]\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\[side\=right\]\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\[side\=top\]\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\[state\=closed\]\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\[state\=closed\]\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\[state\=closed\]\:slide-out-to-left-1\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\[state\=closed\]\:slide-out-to-right[data-state=closed],.data-\[state\=closed\]\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\[state\=closed\]\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\[state\=closed\]\:slide-out-to-top-\[48\%\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\[state\=open\]\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\[state\=open\]\:slide-in-from-left-1\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\[state\=open\]\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\[state\=open\]\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=open\]\:slide-in-from-top-\[48\%\][data-state=open]{--tw-enter-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=closed\]\:duration-300[data-state=closed]{animation-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{animation-duration:.5s}.data-\[panel-group-direction\=vertical\]\:after\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\[panel-group-direction\=vertical\]\:after\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\[panel-group-direction\=vertical\]\:after\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\[panel-group-direction\=vertical\]\:after\:-translate-y-1\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[panel-group-direction\=vertical\]\:after\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=open\]\:hover\:bg-sidebar-accent:hover[data-state=open]{background-color:hsl(var(--sidebar-accent))}.data-\[state\=open\]\:hover\:text-sidebar-accent-foreground:hover[data-state=open]{color:hsl(var(--sidebar-accent-foreground))}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:left-\[calc\(var\(--sidebar-width\)\*-1\)\]{left:calc(var(--sidebar-width) * -1)}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:right-\[calc\(var\(--sidebar-width\)\*-1\)\]{right:calc(var(--sidebar-width) * -1)}.group[data-side=left] .group-data-\[side\=left\]\:-right-4{right:-1rem}.group[data-side=right] .group-data-\[side\=right\]\:left-0{left:0}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:-mt-8{margin-top:-2rem}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:hidden{display:none}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:\!size-8{width:2rem!important;height:2rem!important}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:w-\[--sidebar-width-icon\]{width:var(--sidebar-width-icon)}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:w-\[calc\(var\(--sidebar-width-icon\)_\+_theme\(spacing\.4\)\)\]{width:calc(var(--sidebar-width-icon) + 1rem)}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:w-\[calc\(var\(--sidebar-width-icon\)_\+_theme\(spacing\.4\)_\+2px\)\]{width:calc(var(--sidebar-width-icon) + 1rem + 2px)}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:w-0{width:0px}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-side=right] .group-data-\[side\=right\]\:rotate-180,.group[data-state=open] .group-data-\[state\=open\]\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:overflow-hidden{overflow:hidden}.group[data-variant=floating] .group-data-\[variant\=floating\]\:rounded-lg{border-radius:var(--radius)}.group[data-variant=floating] .group-data-\[variant\=floating\]\:border{border-width:1px}.group[data-side=left] .group-data-\[side\=left\]\:border-r{border-right-width:1px}.group[data-side=right] .group-data-\[side\=right\]\:border-l{border-left-width:1px}.group[data-variant=floating] .group-data-\[variant\=floating\]\:border-sidebar-border{border-color:hsl(var(--sidebar-border))}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:\!p-0{padding:0!important}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:\!p-2{padding:.5rem!important}.group[data-collapsible=icon] .group-data-\[collapsible\=icon\]\:opacity-0{opacity:0}.group[data-variant=floating] .group-data-\[variant\=floating\]\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:after\:left-full:after{content:var(--tw-content);left:100%}.group[data-collapsible=offcanvas] .group-data-\[collapsible\=offcanvas\]\:hover\:bg-sidebar:hover{background-color:hsl(var(--sidebar-background))}.peer\/menu-button[data-size=default]~.peer-data-\[size\=default\]\/menu-button\:top-1\.5{top:.375rem}.peer\/menu-button[data-size=lg]~.peer-data-\[size\=lg\]\/menu-button\:top-2\.5{top:.625rem}.peer\/menu-button[data-size=sm]~.peer-data-\[size\=sm\]\/menu-button\:top-1{top:.25rem}.peer[data-variant=inset]~.peer-data-\[variant\=inset\]\:min-h-\[calc\(100svh-theme\(spacing\.4\)\)\]{min-height:calc(100svh - 1rem)}.peer\/menu-button[data-active=true]~.peer-data-\[active\=true\]\/menu-button\:text-sidebar-accent-foreground{color:hsl(var(--sidebar-accent-foreground))}.dark\:border-destructive:is(.dark *){border-color:hsl(var(--destructive))}.dark\:text-amber-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.dark\:text-emerald-400:is(.dark *){--tw-text-opacity: 1;color:rgb(52 211 153 / var(--tw-text-opacity, 1))}.dark\:text-yellow-400:is(.dark *){--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}@media (min-width: 640px){.sm\:bottom-0{bottom:0}.sm\:right-0{right:0}.sm\:top-auto{top:auto}.sm\:mt-0{margin-top:0}.sm\:block{display:block}.sm\:inline{display:inline}.sm\:flex{display:flex}.sm\:hidden{display:none}.sm\:w-40{width:10rem}.sm\:max-w-sm{max-width:24rem}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\:flex-row{flex-direction:row}.sm\:flex-col{flex-direction:column}.sm\:justify-end{justify-content:flex-end}.sm\:gap-2\.5{gap:.625rem}.sm\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\:rounded-lg{border-radius:var(--radius)}.sm\:text-left{text-align:left}.data-\[state\=open\]\:sm\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\:absolute{position:absolute}.md\:block{display:block}.md\:flex{display:flex}.md\:hidden{display:none}.md\:w-\[var\(--radix-navigation-menu-viewport-width\)\]{width:var(--radix-navigation-menu-viewport-width)}.md\:w-auto{width:auto}.md\:max-w-\[420px\]{max-width:420px}.md\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\:text-6xl{font-size:3.75rem;line-height:1}.md\:text-sm{font-size:.875rem;line-height:1.25rem}.md\:opacity-0{opacity:0}.after\:md\:hidden:after{content:var(--tw-content);display:none}.peer[data-variant=inset]~.md\:peer-data-\[variant\=inset\]\:m-2{margin:.5rem}.peer[data-state=collapsed][data-variant=inset]~.md\:peer-data-\[state\=collapsed\]\:peer-data-\[variant\=inset\]\:ml-2{margin-left:.5rem}.peer[data-variant=inset]~.md\:peer-data-\[variant\=inset\]\:ml-0{margin-left:0}.peer[data-variant=inset]~.md\:peer-data-\[variant\=inset\]\:rounded-xl{border-radius:.75rem}.peer[data-variant=inset]~.md\:peer-data-\[variant\=inset\]\:shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}@media (min-width: 1024px){.lg\:col-span-2{grid-column:span 2 / span 2}.lg\:flex{display:flex}.lg\:hidden{display:none}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 1280px){.xl\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}.\[\&\:\:-webkit-slider-thumb\]\:h-3::-webkit-slider-thumb{height:.75rem}.\[\&\:\:-webkit-slider-thumb\]\:h-4::-webkit-slider-thumb{height:1rem}.\[\&\:\:-webkit-slider-thumb\]\:w-3::-webkit-slider-thumb{width:.75rem}.\[\&\:\:-webkit-slider-thumb\]\:w-4::-webkit-slider-thumb{width:1rem}.\[\&\:\:-webkit-slider-thumb\]\:appearance-none::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none}.\[\&\:\:-webkit-slider-thumb\]\:rounded-full::-webkit-slider-thumb{border-radius:9999px}.\[\&\:\:-webkit-slider-thumb\]\:bg-primary::-webkit-slider-thumb{background-color:hsl(var(--primary))}.\[\&\:has\(\[aria-selected\]\)\]\:bg-accent:has([aria-selected]){background-color:hsl(var(--accent))}.first\:\[\&\:has\(\[aria-selected\]\)\]\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.last\:\[\&\:has\(\[aria-selected\]\)\]\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\[\&\:has\(\[aria-selected\]\.day-outside\)\]\:bg-accent\/50:has([aria-selected].day-outside){background-color:hsl(var(--accent) / .5)}.\[\&\:has\(\[aria-selected\]\.day-range-end\)\]\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\[\&\:has\(\[role\=checkbox\]\)\]\:pr-0:has([role=checkbox]){padding-right:0}.\[\&\>button\]\:hidden>button{display:none}.\[\&\>span\:last-child\]\:truncate>span:last-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.\[\&\>span\]\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\[\&\>svg\+div\]\:translate-y-\[-3px\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\>svg\]\:absolute>svg{position:absolute}.\[\&\>svg\]\:left-4>svg{left:1rem}.\[\&\>svg\]\:top-4>svg{top:1rem}.\[\&\>svg\]\:size-3\.5>svg{width:.875rem;height:.875rem}.\[\&\>svg\]\:size-4>svg{width:1rem;height:1rem}.\[\&\>svg\]\:h-2\.5>svg{height:.625rem}.\[\&\>svg\]\:h-3>svg{height:.75rem}.\[\&\>svg\]\:w-2\.5>svg{width:.625rem}.\[\&\>svg\]\:w-3>svg{width:.75rem}.\[\&\>svg\]\:shrink-0>svg{flex-shrink:0}.\[\&\>svg\]\:text-destructive>svg{color:hsl(var(--destructive))}.\[\&\>svg\]\:text-foreground>svg{color:hsl(var(--foreground))}.\[\&\>svg\]\:text-muted-foreground>svg{color:hsl(var(--muted-foreground))}.\[\&\>svg\]\:text-sidebar-accent-foreground>svg{color:hsl(var(--sidebar-accent-foreground))}.\[\&\>svg\~\*\]\:pl-7>svg~*{padding-left:1.75rem}.\[\&\>tr\]\:last\:border-b-0:last-child>tr{border-bottom-width:0px}.\[\&\[data-panel-group-direction\=vertical\]\>div\]\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\[data-state\=open\]\>svg\]\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&_\.recharts-cartesian-axis-tick_text\]\:fill-muted-foreground .recharts-cartesian-axis-tick text{fill:hsl(var(--muted-foreground))}.\[\&_\.recharts-cartesian-grid_line\[stroke\=\'\#ccc\'\]\]\:stroke-border\/50 .recharts-cartesian-grid line[stroke="#ccc"]{stroke:hsl(var(--border) / .5)}.\[\&_\.recharts-curve\.recharts-tooltip-cursor\]\:stroke-border .recharts-curve.recharts-tooltip-cursor{stroke:hsl(var(--border))}.\[\&_\.recharts-dot\[stroke\=\'\#fff\'\]\]\:stroke-transparent .recharts-dot[stroke="#fff"]{stroke:transparent}.\[\&_\.recharts-layer\]\:outline-none .recharts-layer{outline:2px solid transparent;outline-offset:2px}.\[\&_\.recharts-polar-grid_\[stroke\=\'\#ccc\'\]\]\:stroke-border .recharts-polar-grid [stroke="#ccc"]{stroke:hsl(var(--border))}.\[\&_\.recharts-radial-bar-background-sector\]\:fill-muted .recharts-radial-bar-background-sector,.\[\&_\.recharts-rectangle\.recharts-tooltip-cursor\]\:fill-muted .recharts-rectangle.recharts-tooltip-cursor{fill:hsl(var(--muted))}.\[\&_\.recharts-reference-line_\[stroke\=\'\#ccc\'\]\]\:stroke-border .recharts-reference-line [stroke="#ccc"]{stroke:hsl(var(--border))}.\[\&_\.recharts-sector\[stroke\=\'\#fff\'\]\]\:stroke-transparent .recharts-sector[stroke="#fff"]{stroke:transparent}.\[\&_\.recharts-sector\]\:outline-none .recharts-sector,.\[\&_\.recharts-surface\]\:outline-none .recharts-surface{outline:2px solid transparent;outline-offset:2px}.\[\&_\[cmdk-group-heading\]\]\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-group-heading\]\]\:py-1\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\[\&_\[cmdk-group-heading\]\]\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\[\&_\[cmdk-group-heading\]\]\:font-medium [cmdk-group-heading]{font-weight:500}.\[\&_\[cmdk-group-heading\]\]\:text-muted-foreground [cmdk-group-heading]{color:hsl(var(--muted-foreground))}.\[\&_\[cmdk-group\]\:not\(\[hidden\]\)_\~\[cmdk-group\]\]\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\[\&_\[cmdk-group\]\]\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\[\&_\[cmdk-input\]\]\:h-12 [cmdk-input]{height:3rem}.\[\&_\[cmdk-item\]\]\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-item\]\]\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\[\&_\[cmdk-item\]_svg\]\:h-5 [cmdk-item] svg{height:1.25rem}.\[\&_\[cmdk-item\]_svg\]\:w-5 [cmdk-item] svg{width:1.25rem}.\[\&_p\]\:leading-relaxed p{line-height:1.625}.\[\&_svg\]\:pointer-events-none svg{pointer-events:none}.\[\&_svg\]\:size-4 svg{width:1rem;height:1rem}.\[\&_svg\]\:shrink-0 svg{flex-shrink:0}.\[\&_tr\:last-child\]\:border-0 tr:last-child{border-width:0px}.\[\&_tr\]\:border-b tr{border-bottom-width:1px}[data-side=left][data-collapsible=offcanvas] .\[\[data-side\=left\]\[data-collapsible\=offcanvas\]_\&\]\:-right-2{right:-.5rem}[data-side=left][data-state=collapsed] .\[\[data-side\=left\]\[data-state\=collapsed\]_\&\]\:cursor-e-resize{cursor:e-resize}[data-side=left] .\[\[data-side\=left\]_\&\]\:cursor-w-resize{cursor:w-resize}[data-side=right][data-collapsible=offcanvas] .\[\[data-side\=right\]\[data-collapsible\=offcanvas\]_\&\]\:-left-2{left:-.5rem}[data-side=right][data-state=collapsed] .\[\[data-side\=right\]\[data-state\=collapsed\]_\&\]\:cursor-w-resize{cursor:w-resize}[data-side=right] .\[\[data-side\=right\]_\&\]\:cursor-e-resize{cursor:e-resize}</style>
  </head>

  <body>
    <div id="root"></div>
  </body>
</html>
